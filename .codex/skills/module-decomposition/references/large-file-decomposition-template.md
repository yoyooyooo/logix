# Decomposition Brief（≥1000 LOC）模板

> 用于任意载体（设计文档 / PR 描述 / 任务系统 / handoff / spec-kit 产物等）：提前规划“互斥拆分”，避免实现期才拆导致冲突面爆炸。

## 命名约定

- 单一主体（为行数/职责治理拆分）：`*.*.ts` 平铺在同目录。
- 子系统（一大类子模块）：用目录承载，再在目录内拆 `*.*.ts`。

## 超大文件清单（现状行数）

- `path/to/File.ts`（1234）
- `path/to/Another.ts`（1001）

## 拆分计划（互斥职责 + 落点）

### 1) `File.ts`（1234）→ `File.*.ts`

目标：一句话描述（SRP）。

- `File.a.ts`：职责/导出/允许依赖（互斥）
- `File.b.ts`：职责/导出/允许依赖（互斥）
- `File.ts`：保留内容（通常只保留顶层组装与对外导出）

### 2) `path/to/subsystem/`（子系统目录）

目标：一句话描述（子系统边界清晰）。

- `subsystem/PartA.ts`：职责/导出/允许依赖
- `subsystem/PartB.ts`：职责/导出/允许依赖

## 无损修剪不变量（必选）

- 对外导出与语义保持不变（除非明确是 breaking change 且有迁移说明）。
- import 拓扑单向、禁止循环依赖。
- 拆分过程中不顺手引入新行为/新缓存/新调度策略（先拆干净，再另开优化任务）。
