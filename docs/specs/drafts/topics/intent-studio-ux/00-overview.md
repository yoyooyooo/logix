---
title: Logix Intent Studio (Excel Killer) UX Specification
status: draft
version: 1.0
date: 2025-12-14
---

# Logix Intent Studio (Excel Killer)

**目标受众**: 产品经理 (主要), 前端开发人员 (次要)
**核心价值**: 将非结构化的业务逻辑转化为可执行的意图，并提供严格的校验。

## 1. 核心设计哲学 (Core Philosophy)

我们确立了以下三条不可动摇的设计原则：

1.  **逻辑优先，界面不可知 (Logic First, UI Agnostic)**
    - 放弃“所见即所得”的 UI 拖拽。PM 关注的是业务规则（如：A 变导致 B 变），而不是 UI 渲染细节。
    - 核心视图是**决策表（Decision Table）**，而非画布（Canvas）。

2.  **Excel 级的高频录入 (Excel-Grade Efficiency)**
    - 最大程度保留 Excel 的操作习惯：复制粘贴、键盘流、批量操作。
    - 拒绝低效的“鼠标点击下拉框”操作。

3.  **严谨的编译器思维 (Compiler Mindset)**
    - 把 PM 的文档视为“源代码”。
    - 提供实时的静态分析（Linting）、冲突检测和逻辑补全。

## 2. 交互界面架构 (UI Architecture)

界面布局分为三个核心区域，采用 **"左文 - 中表 - 右果"** 的流式布局：

### A区：自然语言输入区 (The Input Stream)

- **形态**：一个支持富文本粘贴的大型输入框（Markdown/Rich Text）。
- **功能**：“AI 翻译官”的入口。
- **交互**：PM 直接从 Excel 或飞书文档中复制一整段逻辑描述（如：“选择企业时显示税号...”），粘贴于此。系统在后台调用 LLM 进行语义分析。

### B区：智能决策网格 (The Smart Grid) —— 核心工作区

- **形态**：高度结构化的表格（类似 Notion Database 或 Airtable），但针对逻辑编排进行了特化。
- **列定义**：
  - **触发条件 (When)**: `字段:用户类型` 变更
  - **前置判断 (If)**: `值` 等于 `企业`
  - **执行动作 (Then)**: `显示:税号` `必填:税号` `清空:税号`
- **关键交互**：
  - **键盘优先**：支持 Tab 切换单元格，Enter 确认，Cmd+Enter 新增行。
  - **聚光灯搜索 (Spotlight)**：在单元格内输入首字母自动匹配字段（Metadata），无需鼠标寻找。
  - **双向高亮**：鼠标悬停在某一行，A区对应的自然语言文本高亮，反之亦然（建立原文与规则的溯源关系）。

### C区：逻辑体检与数据预览 (The Health Check)

- **形态**：侧边栏面板。
- **功能**：不做 UI 渲染，只做 **逻辑校验** 和 **JSON Payload 预览**。
- **内容**：
  - **冲突列表**：显示当前逻辑打架的地方（例如：规则 A 说隐藏，规则 B 说必填）。
  - **数据模拟**：显示 `Current Form Data: { type: "company", tax_no: null }`，让 PM 确认数据清洗逻辑是否生效。

## 3. 核心功能链路：AI 与算法的双引擎协奏

采用 **AI (理解/建议)** + **算法 (校验)** 的混合模式。

### 场景一：智能摄入 (Smart Ingestion)

1.  **用户行为**：粘贴 Excel 文本这一段描述。
2.  **系统响应 (AI 引擎)**：
    - LLM 解析自然语言。
    - 自动填充到 B 区的网格中。
    - **模糊标记**：如果 AI 不确定“可见”是指 Visible 还是 Display，它会在网格中标记黄色波浪线，PM 悬停时通过对话框确认意图。

### 场景二：冲突熔断 (Conflict Circuit Breaker)

1.  **用户行为**：配置了规则 A（金额>1000 必填）和规则 B（报销类型=内部 隐藏）。
2.  **系统响应 (算法引擎)**：
    - SAT Solver (逻辑求解器) 在后台实时计算集合交集。
3.  **交互反馈**：
    - B 区的两行规则首部出现红色警告图标。
    - **错误提示**：“逻辑死锁：当金额=2000且类型=内部报销时，规则 #1 与 #2 冲突。请设定优先级。”
4.  **决策原因**：此处不能用 AI，必须用数学算法保证 100% 的确定性。

### 场景三：遗漏补全 (Omission Guard)

1.  **用户行为**：配置了“隐藏”逻辑，但忘了配置“重置值”。
2.  **系统响应 (AI 引擎)**：
    - LLM 基于最佳实践分析上下文。
3.  **交互反馈**：
    - 在此动作单元格旁出现微小的灯泡图标。
    - **建议文案**：“建议在隐藏时同步清空该字段的值，以防止提交脏数据。是否应用？”
    - **一键修复**：PM 按下快捷键或点击，系统自动追加 `Reset Value` 动作。

## 4. 为什么这个方案能成？(Decision Rationale)

| 视角            | 价值                                                                                                                                                               |
| :-------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **对 PM**       | **零迁移成本**：你可以继续写文档，只是换个地方写。<br>**上帝视角**：工具帮你 Review 逻辑冲突。<br>**免责金牌**：通过工具校验的逻辑，Bug 是实现的锅，不是文档的锅。 |
| **对 Dev**      | **Code as Truth**：PM 产出的是 DSL JSON，不是死文本。<br>**Pattern 复用**：每个“动作”直接映射前端函数。<br>**拒绝脏逻辑**：强制 PM 解决数据清洗问题。              |
| **对 Platform** | **资产沉淀**：业务规则变成可版本管理的数据资产。                                                                                                                   |

## 5. 数据流架构

```mermaid
graph TD
    User[PM 用户] -->|粘贴文本| AI[AI 引擎 (LLM)]
    AI -->|DSL 草稿| Grid[智能网格 UI (Zone B)]
    User -->|手动编辑| Grid

    subgraph 校验引擎 (Validation Engine)
        Grid -->|实时规则| Solver[SAT 逻辑求解器]
        Grid -->|上下文| Advisor[AI 顾问]
    end

    Solver -->|冲突错误| UI_Error[UI: 红色标记]
    Advisor -->|建议提示| UI_Warn[UI: 蓝/黄色标记]

    Grid -->|最终确认| Compiler[编译器]
    Compiler -->|JSON| Output[意图 DSL 资产]
    Output -->|消费方| Dev[Logix 运行时 / 开发人员]
```

## 6. 关键决策与理由

- **无 UI 预览 (No UI Preview)**: 视觉预览会分散对逻辑深度和数据完整性的注意力。我们要 PM 关注 Data Payload 而不是 pixel.
- **基于算法的冲突检测**: LLM 会有幻觉，逻辑冲突必须用数学证明。
- **键盘优先**: 为了替代 Excel，必须支持 Tab/Enter 极速流。
