id: workbench-layout
name: 工作台布局（左列表 + 右详情 + 顶部指标）
version: v1
status: draft
summary: 适用于 toB 系统中的“工作台”场景，统一“顶部指标 + 左侧任务/列表 + 右侧详情”的布局与交互约定。

problem: >
  在复杂运营/调度场景中，“工作台”页面往往包含：顶部关键指标、左侧任务列表、右侧详情与操作区。
  如果每个团队自行设计布局，很容易出现：
  1）指标区域位置和样式不一致；
  2）列表与详情之间的关联交互（选中、高亮、同步滚动）混乱；
  3）窄屏/小窗口下的响应式行为不一致。
  workbench-layout 模式提供一套统一的布局骨架和区域命名约定，便于后续模板、状态管理与生成器复用。

applicability:
  goodFor:
    - 以“任务处理/工单处理”为主的运营工作台
    - 需要同时展示列表 + 详情 + 顶部指标的场景
    - 需要在同一页内完成大部分处理动作，减少路由切换
  badFor:
    - 单纯的列表页（建议使用 list-page 模式）
    - 多步向导流程（建议使用 wizard-form 模式）
    - 复杂仪表盘/报表（建议使用专门的仪表盘/图表模式）
  requiredSceneType:
    - workbench

composition:
  roles:
    - id: WorkbenchLayoutComponent
      label: 工作台布局组件
      description: >
        页面根组件，负责整体布局：顶部指标区 + 左侧列表区 + 右侧详情区。
        内部不关心具体业务字段，只承载 slot/children。
      provides:
        - WorkbenchLayoutShell
    - id: MetricsComponent
      label: 顶部指标组件
      description: >
        渲染顶部关键指标卡（待处理数量、处理中数量、 SLA 告警等），
        从外部获取统计数据，不直接发起请求。
    - id: LeftPaneComponent
      label: 左侧列表组件
      description: >
        渲染任务/工单列表，处理选中行、高亮状态等；
        通常结合 table-with-server-filter 或其他列表模式使用。
      requires:
        - WorkbenchSelectionService
    - id: RightPaneComponent
      label: 右侧详情组件
      description: >
        渲染当前选中任务的详情与操作区；
        订阅 WorkbenchSelectionService，响应选中项变化。
      requires:
        - WorkbenchSelectionService

dataContract:
  description: >
    workbench-layout 自身不约束具体实体结构，但要求：
    1）Intent 的 scene.layout 中明确 left/right/metrics 等区域标识；
    2）选中项由统一的 WorkbenchSelectionService 管理，避免多个来源。

paramsSchema:
  layoutMode:
    type: string
    required: false
    enum: [two-column, three-row]
    default: two-column
    desc: >
      布局模式：默认左右分栏（two-column），也可以在窄屏下折叠为上下结构（three-row）。
  leftPanelId:
    type: string
    required: true
    desc: >
      左侧区域在 Intent.scene.layout.regions 中的标识，例如 "tasks-list"。
  rightPanelId:
    type: string
    required: true
    desc: >
      右侧区域在 Intent.scene.layout.regions 中的标识，例如 "task-detail"。
  metricsRegionId:
    type: string
    required: false
    desc: >
      顶部指标区域在 Intent.scene.layout.regions 中的标识，例如 "metrics"。
  responsiveBehavior:
    type: string
    required: false
    enum: [collapse-right, collapse-left, tabs]
    default: collapse-right
    desc: >
      窄屏下的响应式行为：折叠右侧、折叠左侧或改用 tabs 切换。

uiSchema:
  layoutMode:
    widget: select
    label: 布局模式
    options:
      - value: two-column
        label: 左右分栏
      - value: three-row
        label: 上指标准行 + 下方列表/详情
  leftPanelId:
    widget: text-input
    label: 左侧区域 ID
  rightPanelId:
    widget: text-input
    label: 右侧区域 ID
  metricsRegionId:
    widget: text-input
    label: 顶部指标区域 ID（可选）
  responsiveBehavior:
    widget: select
    label: 窄屏行为
    options:
      - value: collapse-right
        label: 折叠右侧详情
      - value: collapse-left
        label: 折叠左侧列表
      - value: tabs
        label: 切换为 tabs 布局

examples:
  - name: 运营任务工作台
    intentId: ops-workbench
    description: >
      对应 ops-workbench 意图，将 Task 列表与详情、顶部指标卡通过 workbench-layout 模式统一布局，
      左侧列表区域通常结合 table-with-server-filter 模式实现。
