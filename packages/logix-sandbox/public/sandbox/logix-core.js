// @logix/core kernel bundle for @logix/sandbox
// effect 从 esm.sh CDN 加载 (v3.19.8)

var __defProp = Object.defineProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};

// ../logix-core/src/Module.ts
var Module_exports = {};
__export(Module_exports, {
  Reducer: () => Reducer,
  make: () => make6
});
import { Effect as Effect21 } from "https://esm.sh/effect@3.19.8";

// ../../node_modules/.pnpm/mutative@1.3.0/node_modules/mutative/dist/mutative.esm.mjs
var Operation = {
  Remove: "remove",
  Replace: "replace",
  Add: "add"
};
var PROXY_DRAFT = /* @__PURE__ */ Symbol.for("__MUTATIVE_PROXY_DRAFT__");
var RAW_RETURN_SYMBOL = /* @__PURE__ */ Symbol("__MUTATIVE_RAW_RETURN_SYMBOL__");
var iteratorSymbol = Symbol.iterator;
var dataTypes = {
  mutable: "mutable",
  immutable: "immutable"
};
var internal = {};
function has(target, key) {
  return target instanceof Map ? target.has(key) : Object.prototype.hasOwnProperty.call(target, key);
}
function getDescriptor(target, key) {
  if (key in target) {
    let prototype = Reflect.getPrototypeOf(target);
    while (prototype) {
      const descriptor = Reflect.getOwnPropertyDescriptor(prototype, key);
      if (descriptor)
        return descriptor;
      prototype = Reflect.getPrototypeOf(prototype);
    }
  }
  return;
}
function isBaseSetInstance(obj) {
  return Object.getPrototypeOf(obj) === Set.prototype;
}
function isBaseMapInstance(obj) {
  return Object.getPrototypeOf(obj) === Map.prototype;
}
function latest(proxyDraft) {
  var _a;
  return (_a = proxyDraft.copy) !== null && _a !== void 0 ? _a : proxyDraft.original;
}
function isDraft(target) {
  return !!getProxyDraft(target);
}
function getProxyDraft(value) {
  if (typeof value !== "object")
    return null;
  return value === null || value === void 0 ? void 0 : value[PROXY_DRAFT];
}
function getValue(value) {
  var _a;
  const proxyDraft = getProxyDraft(value);
  return proxyDraft ? (_a = proxyDraft.copy) !== null && _a !== void 0 ? _a : proxyDraft.original : value;
}
function isDraftable(value, options) {
  if (!value || typeof value !== "object")
    return false;
  let markResult;
  return Object.getPrototypeOf(value) === Object.prototype || Array.isArray(value) || value instanceof Map || value instanceof Set || !!(options === null || options === void 0 ? void 0 : options.mark) && ((markResult = options.mark(value, dataTypes)) === dataTypes.immutable || typeof markResult === "function");
}
function getPath(target, path = []) {
  if (Object.hasOwnProperty.call(target, "key")) {
    const parentCopy = target.parent.copy;
    const proxyDraft = getProxyDraft(get(parentCopy, target.key));
    if (proxyDraft !== null && (proxyDraft === null || proxyDraft === void 0 ? void 0 : proxyDraft.original) !== target.original) {
      return null;
    }
    const isSet = target.parent.type === 3;
    const key = isSet ? Array.from(target.parent.setMap.keys()).indexOf(target.key) : target.key;
    if (!(isSet && parentCopy.size > key || has(parentCopy, key)))
      return null;
    path.push(key);
  }
  if (target.parent) {
    return getPath(target.parent, path);
  }
  path.reverse();
  try {
    resolvePath(target.copy, path);
  } catch (e) {
    return null;
  }
  return path;
}
function getType(target) {
  if (Array.isArray(target))
    return 1;
  if (target instanceof Map)
    return 2;
  if (target instanceof Set)
    return 3;
  return 0;
}
function get(target, key) {
  return getType(target) === 2 ? target.get(key) : target[key];
}
function set(target, key, value) {
  const type = getType(target);
  if (type === 2) {
    target.set(key, value);
  } else {
    target[key] = value;
  }
}
function peek(target, key) {
  const state = getProxyDraft(target);
  const source2 = state ? latest(state) : target;
  return source2[key];
}
function isEqual(x, y) {
  if (x === y) {
    return x !== 0 || 1 / x === 1 / y;
  } else {
    return x !== x && y !== y;
  }
}
function revokeProxy(proxyDraft) {
  if (!proxyDraft)
    return;
  while (proxyDraft.finalities.revoke.length > 0) {
    const revoke = proxyDraft.finalities.revoke.pop();
    revoke();
  }
}
function escapePath(path, pathAsArray) {
  return pathAsArray ? path : [""].concat(path).map((_item) => {
    const item = `${_item}`;
    if (item.indexOf("/") === -1 && item.indexOf("~") === -1)
      return item;
    return item.replace(/~/g, "~0").replace(/\//g, "~1");
  }).join("/");
}
function resolvePath(base, path) {
  for (let index = 0; index < path.length - 1; index += 1) {
    const key = path[index];
    base = get(getType(base) === 3 ? Array.from(base) : base, key);
    if (typeof base !== "object") {
      throw new Error(`Cannot resolve patch at '${path.join("/")}'.`);
    }
  }
  return base;
}
function strictCopy(target) {
  const copy = Object.create(Object.getPrototypeOf(target));
  Reflect.ownKeys(target).forEach((key) => {
    let desc = Reflect.getOwnPropertyDescriptor(target, key);
    if (desc.enumerable && desc.configurable && desc.writable) {
      copy[key] = target[key];
      return;
    }
    if (!desc.writable) {
      desc.writable = true;
      desc.configurable = true;
    }
    if (desc.get || desc.set)
      desc = {
        configurable: true,
        writable: true,
        enumerable: desc.enumerable,
        value: target[key]
      };
    Reflect.defineProperty(copy, key, desc);
  });
  return copy;
}
var propIsEnum = Object.prototype.propertyIsEnumerable;
function shallowCopy(original, options) {
  let markResult;
  if (Array.isArray(original)) {
    return Array.prototype.concat.call(original);
  } else if (original instanceof Set) {
    if (!isBaseSetInstance(original)) {
      const SubClass = Object.getPrototypeOf(original).constructor;
      return new SubClass(original.values());
    }
    return Set.prototype.difference ? Set.prototype.difference.call(original, /* @__PURE__ */ new Set()) : new Set(original.values());
  } else if (original instanceof Map) {
    if (!isBaseMapInstance(original)) {
      const SubClass = Object.getPrototypeOf(original).constructor;
      return new SubClass(original);
    }
    return new Map(original);
  } else if ((options === null || options === void 0 ? void 0 : options.mark) && (markResult = options.mark(original, dataTypes), markResult !== void 0) && markResult !== dataTypes.mutable) {
    if (markResult === dataTypes.immutable) {
      return strictCopy(original);
    } else if (typeof markResult === "function") {
      if (options.enablePatches || options.enableAutoFreeze) {
        throw new Error(`You can't use mark and patches or auto freeze together.`);
      }
      return markResult();
    }
    throw new Error(`Unsupported mark result: ${markResult}`);
  } else if (typeof original === "object" && Object.getPrototypeOf(original) === Object.prototype) {
    const copy = {};
    Object.keys(original).forEach((key) => {
      copy[key] = original[key];
    });
    Object.getOwnPropertySymbols(original).forEach((key) => {
      if (propIsEnum.call(original, key)) {
        copy[key] = original[key];
      }
    });
    return copy;
  } else {
    throw new Error(`Please check mark() to ensure that it is a stable marker draftable function.`);
  }
}
function ensureShallowCopy(target) {
  if (target.copy)
    return;
  target.copy = shallowCopy(target.original, target.options);
}
function deepClone(target) {
  if (!isDraftable(target))
    return getValue(target);
  if (Array.isArray(target))
    return target.map(deepClone);
  if (target instanceof Map) {
    const iterable = Array.from(target.entries()).map(([k, v]) => [
      k,
      deepClone(v)
    ]);
    if (!isBaseMapInstance(target)) {
      const SubClass = Object.getPrototypeOf(target).constructor;
      return new SubClass(iterable);
    }
    return new Map(iterable);
  }
  if (target instanceof Set) {
    const iterable = Array.from(target).map(deepClone);
    if (!isBaseSetInstance(target)) {
      const SubClass = Object.getPrototypeOf(target).constructor;
      return new SubClass(iterable);
    }
    return new Set(iterable);
  }
  const copy = Object.create(Object.getPrototypeOf(target));
  for (const key in target)
    copy[key] = deepClone(target[key]);
  return copy;
}
function cloneIfNeeded(target) {
  return isDraft(target) ? deepClone(target) : target;
}
function markChanged(proxyDraft) {
  var _a;
  proxyDraft.assignedMap = (_a = proxyDraft.assignedMap) !== null && _a !== void 0 ? _a : /* @__PURE__ */ new Map();
  if (!proxyDraft.operated) {
    proxyDraft.operated = true;
    if (proxyDraft.parent) {
      markChanged(proxyDraft.parent);
    }
  }
}
function throwFrozenError() {
  throw new Error("Cannot modify frozen object");
}
function deepFreeze(target, subKey, updatedValues, stack, keys) {
  {
    updatedValues = updatedValues !== null && updatedValues !== void 0 ? updatedValues : /* @__PURE__ */ new WeakMap();
    stack = stack !== null && stack !== void 0 ? stack : [];
    keys = keys !== null && keys !== void 0 ? keys : [];
    const value = updatedValues.has(target) ? updatedValues.get(target) : target;
    if (stack.length > 0) {
      const index = stack.indexOf(value);
      if (value && typeof value === "object" && index !== -1) {
        if (stack[0] === value) {
          throw new Error(`Forbids circular reference`);
        }
        throw new Error(`Forbids circular reference: ~/${keys.slice(0, index).map((key, index2) => {
          if (typeof key === "symbol")
            return `[${key.toString()}]`;
          const parent = stack[index2];
          if (typeof key === "object" && (parent instanceof Map || parent instanceof Set))
            return Array.from(parent.keys()).indexOf(key);
          return key;
        }).join("/")}`);
      }
      stack.push(value);
      keys.push(subKey);
    } else {
      stack.push(value);
    }
  }
  if (Object.isFrozen(target) || isDraft(target)) {
    {
      stack.pop();
      keys.pop();
    }
    return;
  }
  const type = getType(target);
  switch (type) {
    case 2:
      for (const [key, value] of target) {
        deepFreeze(key, key, updatedValues, stack, keys);
        deepFreeze(value, key, updatedValues, stack, keys);
      }
      target.set = target.clear = target.delete = throwFrozenError;
      break;
    case 3:
      for (const value of target) {
        deepFreeze(value, value, updatedValues, stack, keys);
      }
      target.add = target.clear = target.delete = throwFrozenError;
      break;
    case 1:
      Object.freeze(target);
      let index = 0;
      for (const value of target) {
        deepFreeze(value, index, updatedValues, stack, keys);
        index += 1;
      }
      break;
    default:
      Object.freeze(target);
      Object.keys(target).forEach((name) => {
        const value = target[name];
        deepFreeze(value, name, updatedValues, stack, keys);
      });
  }
  {
    stack.pop();
    keys.pop();
  }
}
function forEach(target, iter) {
  const type = getType(target);
  if (type === 0) {
    Reflect.ownKeys(target).forEach((key) => {
      iter(key, target[key], target);
    });
  } else if (type === 1) {
    let index = 0;
    for (const entry of target) {
      iter(index, entry, target);
      index += 1;
    }
  } else {
    target.forEach((entry, index) => iter(index, entry, target));
  }
}
function handleValue(target, handledSet, options) {
  if (isDraft(target) || !isDraftable(target, options) || handledSet.has(target) || Object.isFrozen(target))
    return;
  const isSet = target instanceof Set;
  const setMap = isSet ? /* @__PURE__ */ new Map() : void 0;
  handledSet.add(target);
  forEach(target, (key, value) => {
    var _a;
    if (isDraft(value)) {
      const proxyDraft = getProxyDraft(value);
      ensureShallowCopy(proxyDraft);
      const updatedValue = ((_a = proxyDraft.assignedMap) === null || _a === void 0 ? void 0 : _a.size) || proxyDraft.operated ? proxyDraft.copy : proxyDraft.original;
      set(isSet ? setMap : target, key, updatedValue);
    } else {
      handleValue(value, handledSet, options);
    }
  });
  if (setMap) {
    const set2 = target;
    const values = Array.from(set2);
    set2.clear();
    values.forEach((value) => {
      set2.add(setMap.has(value) ? setMap.get(value) : value);
    });
  }
}
function finalizeAssigned(proxyDraft, key) {
  const copy = proxyDraft.type === 3 ? proxyDraft.setMap : proxyDraft.copy;
  if (proxyDraft.finalities.revoke.length > 1 && proxyDraft.assignedMap.get(key) && copy) {
    handleValue(get(copy, key), proxyDraft.finalities.handledSet, proxyDraft.options);
  }
}
function finalizeSetValue(target) {
  if (target.type === 3 && target.copy) {
    target.copy.clear();
    target.setMap.forEach((value) => {
      target.copy.add(getValue(value));
    });
  }
}
function finalizePatches(target, generatePatches2, patches, inversePatches) {
  const shouldFinalize = target.operated && target.assignedMap && target.assignedMap.size > 0 && !target.finalized;
  if (shouldFinalize) {
    if (patches && inversePatches) {
      const basePath = getPath(target);
      if (basePath) {
        generatePatches2(target, basePath, patches, inversePatches);
      }
    }
    target.finalized = true;
  }
}
function markFinalization(target, key, value, generatePatches2) {
  const proxyDraft = getProxyDraft(value);
  if (proxyDraft) {
    if (!proxyDraft.callbacks) {
      proxyDraft.callbacks = [];
    }
    proxyDraft.callbacks.push((patches, inversePatches) => {
      var _a;
      const copy = target.type === 3 ? target.setMap : target.copy;
      if (isEqual(get(copy, key), value)) {
        let updatedValue = proxyDraft.original;
        if (proxyDraft.copy) {
          updatedValue = proxyDraft.copy;
        }
        finalizeSetValue(target);
        finalizePatches(target, generatePatches2, patches, inversePatches);
        if (target.options.enableAutoFreeze) {
          target.options.updatedValues = (_a = target.options.updatedValues) !== null && _a !== void 0 ? _a : /* @__PURE__ */ new WeakMap();
          target.options.updatedValues.set(updatedValue, proxyDraft.original);
        }
        set(copy, key, updatedValue);
      }
    });
    if (target.options.enableAutoFreeze) {
      if (proxyDraft.finalities !== target.finalities) {
        target.options.enableAutoFreeze = false;
      }
    }
  }
  if (isDraftable(value, target.options)) {
    target.finalities.draft.push(() => {
      const copy = target.type === 3 ? target.setMap : target.copy;
      if (isEqual(get(copy, key), value)) {
        finalizeAssigned(target, key);
      }
    });
  }
}
function generateArrayPatches(proxyState, basePath, patches, inversePatches, pathAsArray) {
  let { original, assignedMap, options } = proxyState;
  let copy = proxyState.copy;
  if (copy.length < original.length) {
    [original, copy] = [copy, original];
    [patches, inversePatches] = [inversePatches, patches];
  }
  for (let index = 0; index < original.length; index += 1) {
    if (assignedMap.get(index.toString()) && copy[index] !== original[index]) {
      const _path = basePath.concat([index]);
      const path = escapePath(_path, pathAsArray);
      patches.push({
        op: Operation.Replace,
        path,
        // If it is a draft, it needs to be deep cloned, and it may also be non-draft.
        value: cloneIfNeeded(copy[index])
      });
      inversePatches.push({
        op: Operation.Replace,
        path,
        // If it is a draft, it needs to be deep cloned, and it may also be non-draft.
        value: cloneIfNeeded(original[index])
      });
    }
  }
  for (let index = original.length; index < copy.length; index += 1) {
    const _path = basePath.concat([index]);
    const path = escapePath(_path, pathAsArray);
    patches.push({
      op: Operation.Add,
      path,
      // If it is a draft, it needs to be deep cloned, and it may also be non-draft.
      value: cloneIfNeeded(copy[index])
    });
  }
  if (original.length < copy.length) {
    const { arrayLengthAssignment = true } = options.enablePatches;
    if (arrayLengthAssignment) {
      const _path = basePath.concat(["length"]);
      const path = escapePath(_path, pathAsArray);
      inversePatches.push({
        op: Operation.Replace,
        path,
        value: original.length
      });
    } else {
      for (let index = copy.length; original.length < index; index -= 1) {
        const _path = basePath.concat([index - 1]);
        const path = escapePath(_path, pathAsArray);
        inversePatches.push({
          op: Operation.Remove,
          path
        });
      }
    }
  }
}
function generatePatchesFromAssigned({ original, copy, assignedMap }, basePath, patches, inversePatches, pathAsArray) {
  assignedMap.forEach((assignedValue, key) => {
    const originalValue = get(original, key);
    const value = cloneIfNeeded(get(copy, key));
    const op = !assignedValue ? Operation.Remove : has(original, key) ? Operation.Replace : Operation.Add;
    if (isEqual(originalValue, value) && op === Operation.Replace)
      return;
    const _path = basePath.concat(key);
    const path = escapePath(_path, pathAsArray);
    patches.push(op === Operation.Remove ? { op, path } : { op, path, value });
    inversePatches.push(op === Operation.Add ? { op: Operation.Remove, path } : op === Operation.Remove ? { op: Operation.Add, path, value: originalValue } : { op: Operation.Replace, path, value: originalValue });
  });
}
function generateSetPatches({ original, copy }, basePath, patches, inversePatches, pathAsArray) {
  let index = 0;
  original.forEach((value) => {
    if (!copy.has(value)) {
      const _path = basePath.concat([index]);
      const path = escapePath(_path, pathAsArray);
      patches.push({
        op: Operation.Remove,
        path,
        value
      });
      inversePatches.unshift({
        op: Operation.Add,
        path,
        value
      });
    }
    index += 1;
  });
  index = 0;
  copy.forEach((value) => {
    if (!original.has(value)) {
      const _path = basePath.concat([index]);
      const path = escapePath(_path, pathAsArray);
      patches.push({
        op: Operation.Add,
        path,
        value
      });
      inversePatches.unshift({
        op: Operation.Remove,
        path,
        value
      });
    }
    index += 1;
  });
}
function generatePatches(proxyState, basePath, patches, inversePatches) {
  const { pathAsArray = true } = proxyState.options.enablePatches;
  switch (proxyState.type) {
    case 0:
    case 2:
      return generatePatchesFromAssigned(proxyState, basePath, patches, inversePatches, pathAsArray);
    case 1:
      return generateArrayPatches(proxyState, basePath, patches, inversePatches, pathAsArray);
    case 3:
      return generateSetPatches(proxyState, basePath, patches, inversePatches, pathAsArray);
  }
}
var readable = false;
var checkReadable = (value, options, ignoreCheckDraftable = false) => {
  if (typeof value === "object" && value !== null && (!isDraftable(value, options) || ignoreCheckDraftable) && !readable) {
    throw new Error(`Strict mode: Mutable data cannot be accessed directly, please use 'unsafe(callback)' wrap.`);
  }
};
var mapHandler = {
  get size() {
    const current2 = latest(getProxyDraft(this));
    return current2.size;
  },
  has(key) {
    return latest(getProxyDraft(this)).has(key);
  },
  set(key, value) {
    const target = getProxyDraft(this);
    const source2 = latest(target);
    if (!source2.has(key) || !isEqual(source2.get(key), value)) {
      ensureShallowCopy(target);
      markChanged(target);
      target.assignedMap.set(key, true);
      target.copy.set(key, value);
      markFinalization(target, key, value, generatePatches);
    }
    return this;
  },
  delete(key) {
    if (!this.has(key)) {
      return false;
    }
    const target = getProxyDraft(this);
    ensureShallowCopy(target);
    markChanged(target);
    if (target.original.has(key)) {
      target.assignedMap.set(key, false);
    } else {
      target.assignedMap.delete(key);
    }
    target.copy.delete(key);
    return true;
  },
  clear() {
    const target = getProxyDraft(this);
    if (!this.size)
      return;
    ensureShallowCopy(target);
    markChanged(target);
    target.assignedMap = /* @__PURE__ */ new Map();
    for (const [key] of target.original) {
      target.assignedMap.set(key, false);
    }
    target.copy.clear();
  },
  forEach(callback, thisArg) {
    const target = getProxyDraft(this);
    latest(target).forEach((_value, _key) => {
      callback.call(thisArg, this.get(_key), _key, this);
    });
  },
  get(key) {
    var _a, _b;
    const target = getProxyDraft(this);
    const value = latest(target).get(key);
    const mutable = ((_b = (_a = target.options).mark) === null || _b === void 0 ? void 0 : _b.call(_a, value, dataTypes)) === dataTypes.mutable;
    if (target.options.strict) {
      checkReadable(value, target.options, mutable);
    }
    if (mutable) {
      return value;
    }
    if (target.finalized || !isDraftable(value, target.options)) {
      return value;
    }
    if (value !== target.original.get(key)) {
      return value;
    }
    const draft = internal.createDraft({
      original: value,
      parentDraft: target,
      key,
      finalities: target.finalities,
      options: target.options
    });
    ensureShallowCopy(target);
    target.copy.set(key, draft);
    return draft;
  },
  keys() {
    return latest(getProxyDraft(this)).keys();
  },
  values() {
    const iterator = this.keys();
    return {
      [iteratorSymbol]: () => this.values(),
      next: () => {
        const result = iterator.next();
        if (result.done)
          return result;
        const value = this.get(result.value);
        return {
          done: false,
          value
        };
      }
    };
  },
  entries() {
    const iterator = this.keys();
    return {
      [iteratorSymbol]: () => this.entries(),
      next: () => {
        const result = iterator.next();
        if (result.done)
          return result;
        const value = this.get(result.value);
        return {
          done: false,
          value: [result.value, value]
        };
      }
    };
  },
  [iteratorSymbol]() {
    return this.entries();
  }
};
var mapHandlerKeys = Reflect.ownKeys(mapHandler);
var getNextIterator = (target, iterator, { isValuesIterator }) => () => {
  var _a, _b;
  const result = iterator.next();
  if (result.done)
    return result;
  const key = result.value;
  let value = target.setMap.get(key);
  const currentDraft = getProxyDraft(value);
  const mutable = ((_b = (_a = target.options).mark) === null || _b === void 0 ? void 0 : _b.call(_a, value, dataTypes)) === dataTypes.mutable;
  if (target.options.strict) {
    checkReadable(key, target.options, mutable);
  }
  if (!mutable && !currentDraft && isDraftable(key, target.options) && !target.finalized && target.original.has(key)) {
    const proxy = internal.createDraft({
      original: key,
      parentDraft: target,
      key,
      finalities: target.finalities,
      options: target.options
    });
    target.setMap.set(key, proxy);
    value = proxy;
  } else if (currentDraft) {
    value = currentDraft.proxy;
  }
  return {
    done: false,
    value: isValuesIterator ? value : [value, value]
  };
};
var setHandler = {
  get size() {
    const target = getProxyDraft(this);
    return target.setMap.size;
  },
  has(value) {
    const target = getProxyDraft(this);
    if (target.setMap.has(value))
      return true;
    ensureShallowCopy(target);
    const valueProxyDraft = getProxyDraft(value);
    if (valueProxyDraft && target.setMap.has(valueProxyDraft.original))
      return true;
    return false;
  },
  add(value) {
    const target = getProxyDraft(this);
    if (!this.has(value)) {
      ensureShallowCopy(target);
      markChanged(target);
      target.assignedMap.set(value, true);
      target.setMap.set(value, value);
      markFinalization(target, value, value, generatePatches);
    }
    return this;
  },
  delete(value) {
    if (!this.has(value)) {
      return false;
    }
    const target = getProxyDraft(this);
    ensureShallowCopy(target);
    markChanged(target);
    const valueProxyDraft = getProxyDraft(value);
    if (valueProxyDraft && target.setMap.has(valueProxyDraft.original)) {
      target.assignedMap.set(valueProxyDraft.original, false);
      return target.setMap.delete(valueProxyDraft.original);
    }
    if (!valueProxyDraft && target.setMap.has(value)) {
      target.assignedMap.set(value, false);
    } else {
      target.assignedMap.delete(value);
    }
    return target.setMap.delete(value);
  },
  clear() {
    if (!this.size)
      return;
    const target = getProxyDraft(this);
    ensureShallowCopy(target);
    markChanged(target);
    for (const value of target.original) {
      target.assignedMap.set(value, false);
    }
    target.setMap.clear();
  },
  values() {
    const target = getProxyDraft(this);
    ensureShallowCopy(target);
    const iterator = target.setMap.keys();
    return {
      [Symbol.iterator]: () => this.values(),
      next: getNextIterator(target, iterator, { isValuesIterator: true })
    };
  },
  entries() {
    const target = getProxyDraft(this);
    ensureShallowCopy(target);
    const iterator = target.setMap.keys();
    return {
      [Symbol.iterator]: () => this.entries(),
      next: getNextIterator(target, iterator, {
        isValuesIterator: false
      })
    };
  },
  keys() {
    return this.values();
  },
  [iteratorSymbol]() {
    return this.values();
  },
  forEach(callback, thisArg) {
    const iterator = this.values();
    let result = iterator.next();
    while (!result.done) {
      callback.call(thisArg, result.value, result.value, this);
      result = iterator.next();
    }
  }
};
if (Set.prototype.difference) {
  Object.assign(setHandler, {
    intersection(other) {
      return Set.prototype.intersection.call(new Set(this.values()), other);
    },
    union(other) {
      return Set.prototype.union.call(new Set(this.values()), other);
    },
    difference(other) {
      return Set.prototype.difference.call(new Set(this.values()), other);
    },
    symmetricDifference(other) {
      return Set.prototype.symmetricDifference.call(new Set(this.values()), other);
    },
    isSubsetOf(other) {
      return Set.prototype.isSubsetOf.call(new Set(this.values()), other);
    },
    isSupersetOf(other) {
      return Set.prototype.isSupersetOf.call(new Set(this.values()), other);
    },
    isDisjointFrom(other) {
      return Set.prototype.isDisjointFrom.call(new Set(this.values()), other);
    }
  });
}
var setHandlerKeys = Reflect.ownKeys(setHandler);
var proxyHandler = {
  get(target, key, receiver) {
    var _a, _b;
    const copy = (_a = target.copy) === null || _a === void 0 ? void 0 : _a[key];
    if (copy && target.finalities.draftsCache.has(copy)) {
      return copy;
    }
    if (key === PROXY_DRAFT)
      return target;
    let markResult;
    if (target.options.mark) {
      const value2 = key === "size" && (target.original instanceof Map || target.original instanceof Set) ? Reflect.get(target.original, key) : Reflect.get(target.original, key, receiver);
      markResult = target.options.mark(value2, dataTypes);
      if (markResult === dataTypes.mutable) {
        if (target.options.strict) {
          checkReadable(value2, target.options, true);
        }
        return value2;
      }
    }
    const source2 = latest(target);
    if (source2 instanceof Map && mapHandlerKeys.includes(key)) {
      if (key === "size") {
        return Object.getOwnPropertyDescriptor(mapHandler, "size").get.call(target.proxy);
      }
      const handle = mapHandler[key];
      return handle.bind(target.proxy);
    }
    if (source2 instanceof Set && setHandlerKeys.includes(key)) {
      if (key === "size") {
        return Object.getOwnPropertyDescriptor(setHandler, "size").get.call(target.proxy);
      }
      const handle = setHandler[key];
      return handle.bind(target.proxy);
    }
    if (!has(source2, key)) {
      const desc = getDescriptor(source2, key);
      return desc ? `value` in desc ? desc.value : (
        // !case: support for getter
        (_b = desc.get) === null || _b === void 0 ? void 0 : _b.call(target.proxy)
      ) : void 0;
    }
    const value = source2[key];
    if (target.options.strict) {
      checkReadable(value, target.options);
    }
    if (target.finalized || !isDraftable(value, target.options)) {
      return value;
    }
    if (value === peek(target.original, key)) {
      ensureShallowCopy(target);
      target.copy[key] = createDraft({
        original: target.original[key],
        parentDraft: target,
        key: target.type === 1 ? Number(key) : key,
        finalities: target.finalities,
        options: target.options
      });
      if (typeof markResult === "function") {
        const subProxyDraft = getProxyDraft(target.copy[key]);
        ensureShallowCopy(subProxyDraft);
        markChanged(subProxyDraft);
        return subProxyDraft.copy;
      }
      return target.copy[key];
    }
    if (isDraft(value)) {
      target.finalities.draftsCache.add(value);
    }
    return value;
  },
  set(target, key, value) {
    var _a;
    if (target.type === 3 || target.type === 2) {
      throw new Error(`Map/Set draft does not support any property assignment.`);
    }
    let _key;
    if (target.type === 1 && key !== "length" && !(Number.isInteger(_key = Number(key)) && _key >= 0 && (key === 0 || _key === 0 || String(_key) === String(key)))) {
      throw new Error(`Only supports setting array indices and the 'length' property.`);
    }
    const desc = getDescriptor(latest(target), key);
    if (desc === null || desc === void 0 ? void 0 : desc.set) {
      desc.set.call(target.proxy, value);
      return true;
    }
    const current2 = peek(latest(target), key);
    const currentProxyDraft = getProxyDraft(current2);
    if (currentProxyDraft && isEqual(currentProxyDraft.original, value)) {
      target.copy[key] = value;
      target.assignedMap = (_a = target.assignedMap) !== null && _a !== void 0 ? _a : /* @__PURE__ */ new Map();
      target.assignedMap.set(key, false);
      return true;
    }
    if (isEqual(value, current2) && (value !== void 0 || has(target.original, key)))
      return true;
    ensureShallowCopy(target);
    markChanged(target);
    if (has(target.original, key) && isEqual(value, target.original[key])) {
      target.assignedMap.delete(key);
    } else {
      target.assignedMap.set(key, true);
    }
    target.copy[key] = value;
    markFinalization(target, key, value, generatePatches);
    return true;
  },
  has(target, key) {
    return key in latest(target);
  },
  ownKeys(target) {
    return Reflect.ownKeys(latest(target));
  },
  getOwnPropertyDescriptor(target, key) {
    const source2 = latest(target);
    const descriptor = Reflect.getOwnPropertyDescriptor(source2, key);
    if (!descriptor)
      return descriptor;
    return {
      writable: true,
      configurable: target.type !== 1 || key !== "length",
      enumerable: descriptor.enumerable,
      value: source2[key]
    };
  },
  getPrototypeOf(target) {
    return Reflect.getPrototypeOf(target.original);
  },
  setPrototypeOf() {
    throw new Error(`Cannot call 'setPrototypeOf()' on drafts`);
  },
  defineProperty() {
    throw new Error(`Cannot call 'defineProperty()' on drafts`);
  },
  deleteProperty(target, key) {
    var _a;
    if (target.type === 1) {
      return proxyHandler.set.call(this, target, key, void 0, target.proxy);
    }
    if (peek(target.original, key) !== void 0 || key in target.original) {
      ensureShallowCopy(target);
      markChanged(target);
      target.assignedMap.set(key, false);
    } else {
      target.assignedMap = (_a = target.assignedMap) !== null && _a !== void 0 ? _a : /* @__PURE__ */ new Map();
      target.assignedMap.delete(key);
    }
    if (target.copy)
      delete target.copy[key];
    return true;
  }
};
function createDraft(createDraftOptions) {
  const { original, parentDraft, key, finalities, options } = createDraftOptions;
  const type = getType(original);
  const proxyDraft = {
    type,
    finalized: false,
    parent: parentDraft,
    original,
    copy: null,
    proxy: null,
    finalities,
    options,
    // Mapping of draft Set items to their corresponding draft values.
    setMap: type === 3 ? new Map(original.entries()) : void 0
  };
  if (key || "key" in createDraftOptions) {
    proxyDraft.key = key;
  }
  const { proxy, revoke } = Proxy.revocable(type === 1 ? Object.assign([], proxyDraft) : proxyDraft, proxyHandler);
  finalities.revoke.push(revoke);
  proxyDraft.proxy = proxy;
  if (parentDraft) {
    const target = parentDraft;
    target.finalities.draft.push((patches, inversePatches) => {
      var _a, _b;
      const oldProxyDraft = getProxyDraft(proxy);
      let copy = target.type === 3 ? target.setMap : target.copy;
      const draft = get(copy, key);
      const proxyDraft2 = getProxyDraft(draft);
      if (proxyDraft2) {
        let updatedValue = proxyDraft2.original;
        if (proxyDraft2.operated) {
          updatedValue = getValue(draft);
        }
        finalizeSetValue(proxyDraft2);
        finalizePatches(proxyDraft2, generatePatches, patches, inversePatches);
        if (target.options.enableAutoFreeze) {
          target.options.updatedValues = (_a = target.options.updatedValues) !== null && _a !== void 0 ? _a : /* @__PURE__ */ new WeakMap();
          target.options.updatedValues.set(updatedValue, proxyDraft2.original);
        }
        set(copy, key, updatedValue);
      }
      (_b = oldProxyDraft.callbacks) === null || _b === void 0 ? void 0 : _b.forEach((callback) => {
        callback(patches, inversePatches);
      });
    });
  } else {
    const target = getProxyDraft(proxy);
    target.finalities.draft.push((patches, inversePatches) => {
      finalizeSetValue(target);
      finalizePatches(target, generatePatches, patches, inversePatches);
    });
  }
  return proxy;
}
internal.createDraft = createDraft;
function finalizeDraft(result, returnedValue, patches, inversePatches, enableAutoFreeze) {
  var _a;
  const proxyDraft = getProxyDraft(result);
  const original = (_a = proxyDraft === null || proxyDraft === void 0 ? void 0 : proxyDraft.original) !== null && _a !== void 0 ? _a : result;
  const hasReturnedValue = !!returnedValue.length;
  if (proxyDraft === null || proxyDraft === void 0 ? void 0 : proxyDraft.operated) {
    while (proxyDraft.finalities.draft.length > 0) {
      const finalize = proxyDraft.finalities.draft.pop();
      finalize(patches, inversePatches);
    }
  }
  const state = hasReturnedValue ? returnedValue[0] : proxyDraft ? proxyDraft.operated ? proxyDraft.copy : proxyDraft.original : result;
  if (proxyDraft)
    revokeProxy(proxyDraft);
  if (enableAutoFreeze) {
    deepFreeze(state, state, proxyDraft === null || proxyDraft === void 0 ? void 0 : proxyDraft.options.updatedValues);
  }
  return [
    state,
    patches && hasReturnedValue ? [{ op: Operation.Replace, path: [], value: returnedValue[0] }] : patches,
    inversePatches && hasReturnedValue ? [{ op: Operation.Replace, path: [], value: original }] : inversePatches
  ];
}
function draftify(baseState, options) {
  var _a;
  const finalities = {
    draft: [],
    revoke: [],
    handledSet: /* @__PURE__ */ new WeakSet(),
    draftsCache: /* @__PURE__ */ new WeakSet()
  };
  let patches;
  let inversePatches;
  if (options.enablePatches) {
    patches = [];
    inversePatches = [];
  }
  const isMutable = ((_a = options.mark) === null || _a === void 0 ? void 0 : _a.call(options, baseState, dataTypes)) === dataTypes.mutable || !isDraftable(baseState, options);
  const draft = isMutable ? baseState : createDraft({
    original: baseState,
    parentDraft: null,
    finalities,
    options
  });
  return [
    draft,
    (returnedValue = []) => {
      const [finalizedState, finalizedPatches, finalizedInversePatches] = finalizeDraft(draft, returnedValue, patches, inversePatches, options.enableAutoFreeze);
      return options.enablePatches ? [finalizedState, finalizedPatches, finalizedInversePatches] : finalizedState;
    }
  ];
}
function handleReturnValue(options) {
  const { rootDraft, value, useRawReturn = false, isRoot = true } = options;
  forEach(value, (key, item, source2) => {
    const proxyDraft = getProxyDraft(item);
    if (proxyDraft && rootDraft && proxyDraft.finalities === rootDraft.finalities) {
      options.isContainDraft = true;
      const currentValue = proxyDraft.original;
      if (source2 instanceof Set) {
        const arr = Array.from(source2);
        source2.clear();
        arr.forEach((_item) => source2.add(key === _item ? currentValue : _item));
      } else {
        set(source2, key, currentValue);
      }
    } else if (typeof item === "object" && item !== null) {
      options.value = item;
      options.isRoot = false;
      handleReturnValue(options);
    }
  });
  if (isRoot) {
    if (!options.isContainDraft)
      console.warn(`The return value does not contain any draft, please use 'rawReturn()' to wrap the return value to improve performance.`);
    if (useRawReturn) {
      console.warn(`The return value contains drafts, please don't use 'rawReturn()' to wrap the return value.`);
    }
  }
}
function getCurrent(target) {
  var _a;
  const proxyDraft = getProxyDraft(target);
  if (!isDraftable(target, proxyDraft === null || proxyDraft === void 0 ? void 0 : proxyDraft.options))
    return target;
  const type = getType(target);
  if (proxyDraft && !proxyDraft.operated)
    return proxyDraft.original;
  let currentValue;
  function ensureShallowCopy2() {
    currentValue = type === 2 ? !isBaseMapInstance(target) ? new (Object.getPrototypeOf(target)).constructor(target) : new Map(target) : type === 3 ? Array.from(proxyDraft.setMap.values()) : shallowCopy(target, proxyDraft === null || proxyDraft === void 0 ? void 0 : proxyDraft.options);
  }
  if (proxyDraft) {
    proxyDraft.finalized = true;
    try {
      ensureShallowCopy2();
    } finally {
      proxyDraft.finalized = false;
    }
  } else {
    currentValue = target;
  }
  forEach(currentValue, (key, value) => {
    if (proxyDraft && isEqual(get(proxyDraft.original, key), value))
      return;
    const newValue = getCurrent(value);
    if (newValue !== value) {
      if (currentValue === target)
        ensureShallowCopy2();
      set(currentValue, key, newValue);
    }
  });
  if (type === 3) {
    const value = (_a = proxyDraft === null || proxyDraft === void 0 ? void 0 : proxyDraft.original) !== null && _a !== void 0 ? _a : currentValue;
    return !isBaseSetInstance(value) ? new (Object.getPrototypeOf(value)).constructor(currentValue) : new Set(currentValue);
  }
  return currentValue;
}
function current(target) {
  if (!isDraft(target)) {
    throw new Error(`current() is only used for Draft, parameter: ${target}`);
  }
  return getCurrent(target);
}
var makeCreator = (arg) => {
  if (arg !== void 0 && Object.prototype.toString.call(arg) !== "[object Object]") {
    throw new Error(`Invalid options: ${String(arg)}, 'options' should be an object.`);
  }
  return function create2(arg0, arg1, arg2) {
    var _a, _b, _c;
    if (typeof arg0 === "function" && typeof arg1 !== "function") {
      return function(base2, ...args) {
        return create2(base2, (draft2) => arg0.call(this, draft2, ...args), arg1);
      };
    }
    const base = arg0;
    const mutate = arg1;
    let options = arg2;
    if (typeof arg1 !== "function") {
      options = arg1;
    }
    if (options !== void 0 && Object.prototype.toString.call(options) !== "[object Object]") {
      throw new Error(`Invalid options: ${options}, 'options' should be an object.`);
    }
    options = Object.assign(Object.assign({}, arg), options);
    const state = isDraft(base) ? current(base) : base;
    const mark = Array.isArray(options.mark) ? ((value, types) => {
      for (const mark2 of options.mark) {
        if (typeof mark2 !== "function") {
          throw new Error(`Invalid mark: ${mark2}, 'mark' should be a function.`);
        }
        const result2 = mark2(value, types);
        if (result2) {
          return result2;
        }
      }
      return;
    }) : options.mark;
    const enablePatches = (_a = options.enablePatches) !== null && _a !== void 0 ? _a : false;
    const strict = (_b = options.strict) !== null && _b !== void 0 ? _b : false;
    const enableAutoFreeze = (_c = options.enableAutoFreeze) !== null && _c !== void 0 ? _c : false;
    const _options = {
      enableAutoFreeze,
      mark,
      strict,
      enablePatches
    };
    if (!isDraftable(state, _options) && typeof state === "object" && state !== null) {
      throw new Error(`Invalid base state: create() only supports plain objects, arrays, Set, Map or using mark() to mark the state as immutable.`);
    }
    const [draft, finalize] = draftify(state, _options);
    if (typeof arg1 !== "function") {
      if (!isDraftable(state, _options)) {
        throw new Error(`Invalid base state: create() only supports plain objects, arrays, Set, Map or using mark() to mark the state as immutable.`);
      }
      return [draft, finalize];
    }
    let result;
    try {
      result = mutate(draft);
    } catch (error) {
      revokeProxy(getProxyDraft(draft));
      throw error;
    }
    const returnValue = (value) => {
      const proxyDraft = getProxyDraft(draft);
      if (!isDraft(value)) {
        if (value !== void 0 && !isEqual(value, draft) && (proxyDraft === null || proxyDraft === void 0 ? void 0 : proxyDraft.operated)) {
          throw new Error(`Either the value is returned as a new non-draft value, or only the draft is modified without returning any value.`);
        }
        const rawReturnValue = value === null || value === void 0 ? void 0 : value[RAW_RETURN_SYMBOL];
        if (rawReturnValue) {
          const _value = rawReturnValue[0];
          if (_options.strict && typeof value === "object" && value !== null) {
            handleReturnValue({
              rootDraft: proxyDraft,
              value,
              useRawReturn: true
            });
          }
          return finalize([_value]);
        }
        if (value !== void 0) {
          if (typeof value === "object" && value !== null) {
            handleReturnValue({ rootDraft: proxyDraft, value });
          }
          return finalize([value]);
        }
      }
      if (value === draft || value === void 0) {
        return finalize([]);
      }
      const returnedProxyDraft = getProxyDraft(value);
      if (_options === returnedProxyDraft.options) {
        if (returnedProxyDraft.operated) {
          throw new Error(`Cannot return a modified child draft.`);
        }
        return finalize([current(value)]);
      }
      return finalize([value]);
    };
    if (result instanceof Promise) {
      return result.then(returnValue, (error) => {
        revokeProxy(getProxyDraft(draft));
        throw error;
      });
    }
    return returnValue(result);
  };
};
var create = makeCreator();
var constructorString = Object.prototype.constructor.toString();

// ../logix-core/src/internal/runtime/ModuleFactory.ts
import { Context as Context10, Effect as Effect19, Layer as Layer5, Schema as Schema3 } from "https://esm.sh/effect@3.19.8";

// ../logix-core/src/internal/runtime/ModuleRuntime.ts
import {
  Effect as Effect18,
  Stream as Stream4,
  SubscriptionRef as SubscriptionRef3,
  PubSub,
  Fiber as Fiber3,
  FiberRef as FiberRef5,
  Exit,
  Cause as Cause6,
  Option as Option5,
  Queue,
  Deferred
} from "https://esm.sh/effect@3.19.8";

// ../logix-core/src/internal/runtime/core/Lifecycle.ts
import { Cause, Context, Effect, Ref } from "https://esm.sh/effect@3.19.8";
var LifecycleContext = Context.GenericTag(
  "@logix/LifecycleManager"
);
var safeRun = (label, eff) => eff.pipe(
  Effect.matchCauseEffect({
    onSuccess: () => Effect.void,
    onFailure: (cause) => Effect.logError(`[${label}] failed: ${Cause.pretty(cause)}`)
  })
);
var makeLifecycleManager = Effect.gen(
  function* () {
    const destroyRef = yield* Ref.make([]);
    const errorRef = yield* Ref.make([]);
    const registerDestroy = (effect) => Ref.update(destroyRef, (list2) => [...list2, effect]);
    const registerOnError = (handler) => Ref.update(errorRef, (list2) => [...list2, handler]);
    const runDestroy = Ref.get(destroyRef).pipe(
      Effect.flatMap(
        (effects) => Effect.forEach(
          effects,
          (effect) => safeRun("lifecycle.onDestroy", effect),
          { discard: true }
        )
      )
    );
    const notifyError = (cause, context) => Ref.get(errorRef).pipe(
      Effect.flatMap(
        (handlers) => Effect.forEach(
          handlers,
          (handler) => handler(cause, context).pipe(
            Effect.catchAllCause(
              (inner) => Effect.logError(
                `[lifecycle.onError] failed: ${Cause.pretty(inner)}`
              )
            )
          ),
          { discard: true }
        )
      )
    );
    const registerInit = (effect) => effect.pipe(
      Effect.matchCauseEffect({
        onSuccess: () => Effect.void,
        onFailure: (cause) => notifyError(cause, { phase: "lifecycle.onInit" }).pipe(
          Effect.zipRight(
            Effect.logError(
              `[lifecycle.onInit] failed: ${Cause.pretty(cause)}`
            )
          )
        )
      })
    );
    return {
      registerInit,
      registerDestroy,
      registerOnError,
      runDestroy,
      notifyError,
      hasOnErrorHandlers: Ref.get(errorRef).pipe(
        Effect.map((handlers) => handlers.length > 0)
      )
    };
  }
);

// ../logix-core/src/internal/runtime/core/DebugSink.ts
import { Cause as Cause2, Effect as Effect2, FiberRef, Layer, Logger } from "https://esm.sh/effect@3.19.8";
var currentDebugSinks = FiberRef.unsafeMake([]);
var currentRuntimeLabel = FiberRef.unsafeMake(void 0);
var currentTxnId = FiberRef.unsafeMake(void 0);
var nextEventId = 0;
var makeEventId = () => {
  nextEventId += 1;
  return String(nextEventId);
};
var lastTxnIdByRuntime = /* @__PURE__ */ new Map();
var browserLifecycleSeen = /* @__PURE__ */ new Set();
var browserDiagnosticSeen = /* @__PURE__ */ new Set();
var lifecycleErrorLog = (event) => {
  const moduleId = event.moduleId ?? "unknown";
  const causePretty = (() => {
    try {
      return Cause2.pretty(event.cause, {
        renderErrorCause: true
      });
    } catch {
      try {
        return JSON.stringify(event.cause, null, 2);
      } catch {
        return String(event.cause);
      }
    }
  })();
  const message = `[Logix][module=${moduleId}] lifecycle:error
${causePretty}`;
  return Effect2.logError(message).pipe(
    Effect2.annotateLogs({
      "logix.moduleId": moduleId,
      "logix.event": "lifecycle:error",
      "logix.cause": causePretty
    })
  );
};
var diagnosticLog = (event) => {
  const moduleId = event.moduleId ?? "unknown";
  const header = `[Logix][module=${moduleId}] diagnostic(${event.severity})`;
  const detail = `code=${event.code} message=${event.message}${event.actionTag ? ` action=${event.actionTag}` : ""}${event.hint ? `
hint: ${event.hint}` : ""}`;
  const msg = `${header}
${detail}`;
  const base = event.severity === "warning" ? Effect2.logWarning(msg) : event.severity === "info" ? Effect2.logInfo(msg) : Effect2.logError(msg);
  const annotations = {
    "logix.moduleId": moduleId,
    "logix.event": `diagnostic(${event.severity})`,
    "logix.diagnostic.code": event.code,
    "logix.diagnostic.message": event.message
  };
  if (event.hint) {
    annotations["logix.diagnostic.hint"] = event.hint;
  }
  if (event.actionTag) {
    annotations["logix.diagnostic.actionTag"] = event.actionTag;
  }
  return base.pipe(Effect2.annotateLogs(annotations));
};
var noopLayer = Layer.locallyScoped(currentDebugSinks, []);
var errorOnlySink = {
  record: (event) => event.type === "lifecycle:error" ? lifecycleErrorLog(event) : event.type === "diagnostic" && event.severity !== "info" ? diagnosticLog(event) : Effect2.void
};
var errorOnlyLayer = Layer.locallyScoped(currentDebugSinks, [errorOnlySink]);
var consoleSink = {
  record: (event) => event.type === "lifecycle:error" ? lifecycleErrorLog(event) : event.type === "diagnostic" ? diagnosticLog(event) : Effect2.logDebug({ debugEvent: event })
};
var consoleLayer = Layer.locallyScoped(currentDebugSinks, [consoleSink]);
var isBrowser = typeof window !== "undefined" && typeof document !== "undefined";
var renderBrowserConsoleEvent = (event) => {
  if (typeof event.type === "string" && event.type.startsWith("trace:")) {
    const moduleId = event.moduleId ?? "unknown";
    const type = event.type;
    return Effect2.sync(() => {
      console.groupCollapsed(
        "%c[Logix]%c trace %c" + moduleId + "%c " + String(type),
        "color:#6b7280;font-weight:bold",
        // tag
        "color:#3b82f6",
        // label
        "color:#9ca3af",
        // module id
        "color:#6b7280"
        // type
      );
      console.log(event);
      console.groupEnd();
    });
  }
  if (event.type === "lifecycle:error") {
    const moduleId = event.moduleId ?? "unknown";
    const causePretty = (() => {
      try {
        return Cause2.pretty(event.cause, { renderErrorCause: true });
      } catch {
        try {
          return JSON.stringify(event.cause, null, 2);
        } catch {
          return String(event.cause);
        }
      }
    })();
    const key = `${moduleId}|${causePretty}`;
    if (browserLifecycleSeen.has(key)) {
      return Effect2.void;
    }
    browserLifecycleSeen.add(key);
    return Effect2.sync(() => {
      console.groupCollapsed(
        "%c[Logix]%c lifecycle:error %c" + moduleId,
        "color:#ef4444;font-weight:bold",
        // tag
        "color:#ef4444",
        // label
        "color:#9ca3af"
        // module id
      );
      console.error(causePretty);
      console.groupEnd();
    });
  }
  if (event.type === "diagnostic") {
    const moduleId = event.moduleId ?? "unknown";
    const detail = `code=${event.code} message=${event.message}${event.actionTag ? ` action=${event.actionTag}` : ""}${event.hint ? `
hint: ${event.hint}` : ""}`;
    const color = event.severity === "warning" ? "color:#d97706" : event.severity === "info" ? "color:#3b82f6" : "color:#ef4444";
    const label = event.severity === "warning" ? "diagnostic(warning)" : event.severity === "info" ? "diagnostic(info)" : "diagnostic(error)";
    const key = `${moduleId}|${event.code}|${event.message}`;
    if (browserDiagnosticSeen.has(key)) {
      return Effect2.void;
    }
    browserDiagnosticSeen.add(key);
    return Effect2.sync(() => {
      console.groupCollapsed(
        "%c[Logix]%c " + label + "%c module=" + moduleId,
        "color:#6b7280;font-weight:bold",
        color,
        "color:#9ca3af"
      );
      console.log(detail);
      console.groupEnd();
    });
  }
  return Effect2.void;
};
var browserConsoleSink = {
  record: (event) => {
    if (!isBrowser) {
      return event.type === "lifecycle:error" ? lifecycleErrorLog(event) : event.type === "diagnostic" ? diagnosticLog(event) : Effect2.logDebug({ debugEvent: event });
    }
    return renderBrowserConsoleEvent(event);
  }
};
var browserConsoleLayer = Layer.locallyScoped(currentDebugSinks, [browserConsoleSink]);
var browserPrettyLoggerLayer = Logger.replace(
  Logger.defaultLogger,
  Logger.prettyLogger({ mode: "browser", colors: true })
);
var record = (event) => Effect2.gen(function* () {
  const sinks = yield* FiberRef.get(currentDebugSinks);
  const runtimeLabel2 = yield* FiberRef.get(currentRuntimeLabel);
  const txnId = yield* FiberRef.get(currentTxnId);
  const now = Date.now();
  const enriched = event;
  if (enriched.timestamp === void 0) {
    ;
    enriched.timestamp = now;
  }
  if (runtimeLabel2 && enriched.runtimeLabel === void 0) {
    ;
    enriched.runtimeLabel = runtimeLabel2;
  }
  if (txnId && enriched.type === "diagnostic" && enriched.txnId === void 0) {
    ;
    enriched.txnId = txnId;
  }
  if (sinks.length > 0) {
    yield* Effect2.forEach(
      sinks,
      (sink) => sink.record(enriched),
      {
        discard: true
      }
    );
    return;
  }
  if (isBrowser) {
    yield* renderBrowserConsoleEvent(enriched);
    return;
  }
  if (enriched.type === "lifecycle:error") {
    yield* lifecycleErrorLog(enriched);
    return;
  }
  if (enriched.type === "diagnostic") {
    yield* diagnosticLog(enriched);
    return;
  }
  yield* Effect2.void;
});
var toRuntimeDebugEventRef = (event) => {
  const eventId = makeEventId();
  const timestamp = typeof event.timestamp === "number" && Number.isFinite(event.timestamp) ? event.timestamp : Date.now();
  const base = {
    eventId,
    moduleId: event.moduleId,
    runtimeId: event.runtimeId,
    runtimeLabel: event.runtimeLabel,
    txnId: event.txnId,
    timestamp
  };
  switch (event.type) {
    case "module:init":
      return {
        ...base,
        kind: "lifecycle",
        label: "module:init"
      };
    case "module:destroy":
      return {
        ...base,
        kind: "lifecycle",
        label: "module:destroy"
      };
    case "action:dispatch": {
      const action = event.action;
      const tag2 = action?._tag ?? action?.type ?? "action:dispatch";
      return {
        ...base,
        trigger: { kind: "action", name: String(tag2) },
        kind: "action",
        label: String(tag2),
        meta: { action }
      };
    }
    case "state:update": {
      const e = event;
      const trigger = e.originKind ? { kind: e.originKind, name: e.originName } : void 0;
      const replay = e.replayEvent;
      const replayResourceId = replay && typeof replay === "object" && replay._tag === "ResourceSnapshot" && typeof replay.resourceId === "string" ? replay.resourceId : void 0;
      const replayKeyHash = replay && typeof replay === "object" && typeof replay.keyHash === "string" ? replay.keyHash : void 0;
      const ref = {
        ...base,
        trigger,
        resourceId: replayResourceId,
        keyHash: replayKeyHash,
        kind: "state",
        label: "state:update",
        meta: {
          state: e.state,
          patchCount: e.patchCount,
          originKind: e.originKind,
          originName: e.originName,
          traitSummary: e.traitSummary,
          replayEvent: e.replayEvent
        }
      };
      if (ref.runtimeId && ref.txnId) {
        lastTxnIdByRuntime.set(ref.runtimeId, ref.txnId);
      }
      return ref;
    }
    case "lifecycle:error":
      return {
        ...base,
        kind: "lifecycle",
        label: "lifecycle:error",
        meta: { cause: event.cause }
      };
    case "diagnostic":
      return {
        ...base,
        trigger: event.trigger,
        kind: "diagnostic",
        label: event.code,
        meta: {
          code: event.code,
          severity: event.severity,
          message: event.message,
          hint: event.hint,
          actionTag: event.actionTag,
          kind: event.kind
        }
      };
    default: {
      if (typeof event.type === "string" && (event.type === "trace:react-render" || event.type === "trace:react-selector")) {
        const data = event.data;
        if (data && typeof data === "object") {
          const moduleId = (data.meta && data.meta.moduleId) ?? base.moduleId;
          let txnId = (data.meta && data.meta.txnId) ?? base.txnId;
          if (!txnId && base.runtimeId) {
            const last = lastTxnIdByRuntime.get(base.runtimeId);
            if (last) {
              txnId = last;
            }
          }
          const meta = {
            componentLabel: data.componentLabel,
            selectorKey: data.selectorKey,
            fieldPaths: data.fieldPaths,
            strictModePhase: data.strictModePhase
          };
          const label = typeof data.componentLabel === "string" && data.componentLabel.length > 0 ? data.componentLabel : event.type === "trace:react-selector" ? "react-selector" : "react-render";
          return {
            ...base,
            moduleId,
            txnId,
            kind: event.type === "trace:react-selector" ? "react-selector" : "react-render",
            label,
            meta
          };
        }
      }
      if (typeof event.type === "string" && event.type === "trace:effectop") {
        const data = event.data;
        if (data && typeof data === "object") {
          const opKind = data.kind ?? "service";
          const label = typeof data.name === "string" ? data.name : "effectop";
          const opMeta = data.meta;
          const resourceId = opMeta && typeof opMeta === "object" && typeof opMeta.resourceId === "string" ? opMeta.resourceId : void 0;
          const keyHash2 = opMeta && typeof opMeta === "object" && typeof opMeta.keyHash === "string" ? opMeta.keyHash : void 0;
          const meta = {
            id: data.id,
            kind: data.kind,
            name: data.name,
            payload: data.payload,
            meta: opMeta
          };
          const moduleId = (opMeta && opMeta.moduleId) ?? base.moduleId;
          const txnId = (opMeta && opMeta.txnId) ?? base.txnId;
          return {
            ...base,
            moduleId,
            txnId,
            resourceId,
            keyHash: keyHash2,
            kind: opKind,
            label,
            meta
          };
        }
      }
      if (typeof event.type === "string" && event.type.startsWith("trace:")) {
        return {
          ...base,
          kind: "devtools",
          label: event.type,
          meta: {
            data: event.data
          }
        };
      }
      return void 0;
    }
  }
};

// ../logix-core/src/internal/runtime/core/StateTransaction.ts
import { Effect as Effect3, SubscriptionRef } from "https://esm.sh/effect@3.19.8";
var defaultNow = () => Date.now();
var makeContext = (config) => {
  const instrumentation = config.instrumentation ?? "full";
  const captureSnapshots = config.captureSnapshots ?? instrumentation === "full";
  return {
    config: {
      instrumentation,
      captureSnapshots,
      now: config.now ?? defaultNow,
      moduleId: config.moduleId,
      instanceId: config.instanceId,
      runtimeId: config.runtimeId
    },
    current: void 0
  };
};
var beginTransaction = (ctx, origin, initialState) => {
  const { config } = ctx;
  const now = config.now;
  const startedAt = now();
  const txnId = `${startedAt.toString(36)}-${Math.random().toString(36).slice(2)}`;
  const initialSnapshot = config.captureSnapshots ? initialState : void 0;
  ctx.current = {
    txnId,
    origin,
    startedAt,
    baseState: initialState,
    draft: initialState,
    initialStateSnapshot: initialSnapshot,
    patches: [],
    dirtyPaths: /* @__PURE__ */ new Set()
  };
};
var recordDirtyPath = (state, path) => {
  if (!path) return;
  state.dirtyPaths.add(path);
};
var updateDraft = (ctx, next, patch) => {
  const state = ctx.current;
  if (!state) {
    return;
  }
  if (patch) {
    recordDirtyPath(state, patch.path);
  }
  if (patch && ctx.config.instrumentation === "full") {
    state.patches.push(patch);
  }
  state.draft = next;
};
var recordPatch = (ctx, patch) => {
  const state = ctx.current;
  if (!state) {
    return;
  }
  recordDirtyPath(state, patch.path);
  if (ctx.config.instrumentation === "full") {
    state.patches.push(patch);
  }
};
var commit = (ctx, stateRef) => Effect3.gen(function* () {
  const state = ctx.current;
  if (!state) {
    return void 0;
  }
  const { config } = ctx;
  const now = config.now;
  const finalState = state.draft;
  if (Object.is(finalState, state.baseState)) {
    ctx.current = void 0;
    return void 0;
  }
  yield* SubscriptionRef.set(stateRef, finalState);
  const endedAt = now();
  const durationMs = Math.max(0, endedAt - state.startedAt);
  const transaction = {
    txnId: state.txnId,
    origin: state.origin,
    startedAt: state.startedAt,
    endedAt,
    durationMs,
    initialStateSnapshot: state.initialStateSnapshot,
    finalStateSnapshot: config.captureSnapshots ? finalState : void 0,
    patches: state.patches,
    moduleId: config.moduleId,
    instanceId: config.instanceId,
    runtimeId: config.runtimeId
  };
  ctx.current = void 0;
  return transaction;
});
var abort = (ctx) => {
  ctx.current = void 0;
};

// ../logix-core/src/internal/runtime/core/TaskRunner.ts
import { Cause as Cause3, Effect as Effect4, Fiber, FiberRef as FiberRef2, Ref as Ref2, Stream } from "https://esm.sh/effect@3.19.8";

// ../logix-core/src/internal/runtime/core/env.ts
import { Context as Context2, Layer as Layer2 } from "https://esm.sh/effect@3.19.8";
var getNodeEnv = () => {
  try {
    const env = globalThis?.process?.env;
    return typeof env?.NODE_ENV === "string" ? env.NODE_ENV : void 0;
  } catch {
    return void 0;
  }
};
var isDevEnv = () => getNodeEnv() !== "production";
var getDefaultStateTxnInstrumentation = () => isDevEnv() ? "full" : "light";
var StateTransactionConfigTagImpl = class extends Context2.Tag(
  "@logix/core/StateTransactionRuntimeConfig"
)() {
};
var StateTransactionConfigTag = StateTransactionConfigTagImpl;
var ReplayModeConfigTagImpl = class extends Context2.Tag(
  "@logix/core/ReplayModeConfig"
)() {
};
var ReplayModeConfigTag = ReplayModeConfigTagImpl;

// ../logix-core/src/internal/runtime/core/TaskRunner.ts
var inSyncTransactionFiber = FiberRef2.unsafeMake(false);
var resolve = (eff, payload) => typeof eff === "function" ? eff(payload) : eff;
var defaultOrigins = (triggerName) => ({
  pending: {
    kind: "task:pending",
    name: triggerName
  },
  success: {
    kind: "service-callback",
    name: "task:success"
  },
  failure: {
    kind: "service-callback",
    name: "task:failure"
  }
});
var emitInvalidUsageDiagnostic = (moduleId) => record({
  type: "diagnostic",
  moduleId,
  code: "logic::invalid_usage",
  severity: "error",
  message: "run*Task is not allowed inside a synchronous StateTransaction body (it may deadlock the txnQueue).",
  hint: "\u8BF7\u5C06 run*Task \u653E\u5230 $.onAction/$.onState/$.on \u7B49 watcher \u7684 run \u6BB5\uFF1B\u4E0D\u8981\u5728 reducer / trait.run / \u5355\u7B14\u4E8B\u52A1\u7684\u540C\u6B65 body \u5185\u76F4\u63A5\u8C03\u7528\u3002\u82E5\u9700\u8981\u957F\u94FE\u8DEF\uFF0C\u8BF7\u7528\u591A\u5165\u53E3\uFF08pending\u2192IO\u2192writeback\uFF09\u6A21\u5F0F\u3002",
  kind: "run_task_in_transaction"
});
var shouldNoopDueToSyncTxn = (runtime) => Effect4.gen(function* () {
  const inTxn = yield* FiberRef2.get(inSyncTransactionFiber);
  if (!inTxn) {
    return false;
  }
  if (isDevEnv()) {
    yield* emitInvalidUsageDiagnostic(runtime.moduleId);
  }
  return true;
});
var runTaskLifecycle = (payload, runtime, config, getCanWriteBack) => Effect4.gen(function* () {
  const noop = yield* shouldNoopDueToSyncTxn(runtime);
  if (noop) {
    return;
  }
  const defaults = defaultOrigins(config.triggerName);
  const origins = {
    pending: config.origin?.pending ?? defaults.pending,
    success: config.origin?.success ?? defaults.success,
    failure: config.origin?.failure ?? defaults.failure
  };
  const pending = config.pending;
  if (pending) {
    yield* Effect4.uninterruptible(
      runtime.runWithStateTransaction(
        origins.pending,
        () => Effect4.asVoid(resolve(pending, payload))
      )
    );
  }
  const io = resolve(config.effect, payload);
  const exit = yield* Effect4.exit(io);
  if (getCanWriteBack) {
    const ok = yield* getCanWriteBack;
    if (!ok) {
      return;
    }
  }
  if (exit._tag === "Success") {
    const success = config.success;
    if (success) {
      yield* runtime.runWithStateTransaction(
        origins.success,
        () => Effect4.asVoid(success(exit.value, payload))
      );
    }
    return;
  }
  const cause = exit.cause;
  if (Cause3.isInterrupted(cause)) {
    return;
  }
  const failure = config.failure;
  if (failure) {
    yield* runtime.runWithStateTransaction(
      origins.failure,
      () => Effect4.asVoid(failure(cause, payload))
    );
  }
}).pipe(
  // watcher 不应因单次 task 出错而整体崩溃：吞掉错误并记录日志
  Effect4.catchAllCause((cause) => Effect4.logError("TaskRunner error", cause))
);
var makeTaskRunner = (stream, mode, runtime, config) => {
  if (mode === "latest") {
    return Effect4.gen(function* () {
      const taskIdRef = yield* Ref2.make(0);
      const currentFiberRef = yield* Ref2.make(
        void 0
      );
      const start = (payload) => Effect4.gen(function* () {
        const taskId = yield* Ref2.updateAndGet(taskIdRef, (n) => n + 1);
        const prev = yield* Ref2.get(currentFiberRef);
        if (prev) {
          yield* Fiber.interruptFork(prev);
        }
        const canWriteBack = Ref2.get(taskIdRef).pipe(
          Effect4.map((current2) => current2 === taskId)
        );
        const fiber = yield* Effect4.fork(
          runTaskLifecycle(
            payload,
            runtime,
            config,
            canWriteBack
          )
        );
        yield* Ref2.set(currentFiberRef, fiber);
      });
      return yield* Stream.runForEach(stream, start);
    });
  }
  if (mode === "exhaust") {
    return Effect4.gen(function* () {
      const busyRef = yield* Ref2.make(false);
      const mapper = (payload) => Effect4.gen(function* () {
        const acquired = yield* Ref2.modify(
          busyRef,
          (busy) => busy ? [false, busy] : [true, true]
        );
        if (!acquired) {
          return;
        }
        try {
          yield* runTaskLifecycle(
            payload,
            runtime,
            config
          );
        } finally {
          yield* Ref2.set(busyRef, false);
        }
      });
      return yield* Stream.runDrain(
        stream.pipe(Stream.mapEffect(mapper, { concurrency: "unbounded" }))
      );
    });
  }
  if (mode === "parallel") {
    return Stream.runDrain(
      stream.pipe(
        Stream.mapEffect(
          (payload) => runTaskLifecycle(
            payload,
            runtime,
            config
          ),
          { concurrency: "unbounded" }
        )
      )
    );
  }
  return Stream.runForEach(
    stream,
    (payload) => runTaskLifecycle(payload, runtime, config)
  );
};

// ../logix-core/src/internal/runtime/core/ReducerDiagnostics.ts
import { Cause as Cause4, Chunk, Effect as Effect5 } from "https://esm.sh/effect@3.19.8";
var makeReducerError = (_tag, tag2, moduleId) => Object.assign(
  new Error(
    _tag === "ReducerDuplicateError" ? `[ModuleRuntime] Duplicate primary reducer for tag "${tag2}". Each action tag must have at most one primary reducer.` : `[ModuleRuntime] Late primary reducer registration for tag "${tag2}". Reducers must be registered before the first dispatch of this tag.`
  ),
  {
    _tag,
    tag: tag2,
    moduleId
  }
);
var emitDiagnosticsFromCause = (cause, moduleIdFromContext) => Effect5.sync(() => {
  const defects = Chunk.toReadonlyArray(Cause4.defects(cause));
  let duplicate;
  let late;
  for (const defect of defects) {
    if (!defect || typeof defect !== "object") continue;
    const error = defect;
    if (error._tag === "ReducerDuplicateError") {
      duplicate = error;
    } else if (error._tag === "ReducerLateRegistrationError") {
      late = error;
    }
  }
  const effects = [];
  if (duplicate) {
    effects.push(
      record({
        type: "diagnostic",
        moduleId: duplicate.moduleId ?? moduleIdFromContext,
        code: "reducer::duplicate",
        severity: "error",
        message: `Primary reducer for tag "${duplicate.tag}" is already registered and cannot be redefined.`,
        hint: "\u786E\u4FDD\u6BCF\u4E2A Action Tag \u4EC5\u5B9A\u4E49\u4E00\u4E2A primary reducer\u3002\u82E5\u540C\u65F6\u5728 Module.reducers \u4E0E $.reducer \u4E2D\u5B9A\u4E49\uFF0C\u8BF7\u4FDD\u7559 Module.reducers \u7248\u672C\u6216\u5408\u5E76\u4E3A\u5355\u4E00\u5B9A\u4E49\u3002",
        actionTag: duplicate.tag
      })
    );
  }
  if (late) {
    effects.push(
      record({
        type: "diagnostic",
        moduleId: late.moduleId ?? moduleIdFromContext,
        code: "reducer::late_registration",
        severity: "error",
        message: `Primary reducer for tag "${late.tag}" was registered after actions with this tag had already been dispatched.`,
        hint: '\u8BF7\u5C06\u8BE5 reducer \u63D0\u524D\u5230 Module.make({ reducers })\uFF0C\u6216\u786E\u4FDD\u5728\u9996\u6B21 dispatch \u4E4B\u524D\u6267\u884C $.reducer("tag", ...)\u3002',
        actionTag: late.tag
      })
    );
  }
  if (effects.length === 0) {
    return Effect5.void;
  }
  let combined = Effect5.void;
  for (const eff of effects) {
    combined = combined.pipe(Effect5.zipRight(eff));
  }
  return combined;
}).pipe(Effect5.flatten);

// ../logix-core/src/internal/runtime/core/LifecycleDiagnostics.ts
import { Effect as Effect6 } from "https://esm.sh/effect@3.19.8";
var emitMissingOnErrorDiagnosticIfNeeded = (lifecycle, moduleId) => lifecycle.hasOnErrorHandlers.pipe(
  Effect6.flatMap(
    (has2) => has2 || !moduleId ? Effect6.void : record({
      type: "diagnostic",
      moduleId,
      code: "lifecycle::missing_on_error",
      severity: "warning",
      message: `Module "${moduleId}" received a lifecycle error but has no $.lifecycle.onError handler registered.`,
      hint: "\u5EFA\u8BAE\u5728\u8BE5 Module \u7684 Logic \u5F00\u5934\u6DFB\u52A0 $.lifecycle.onError((cause, context) => ...) \u4EE5\u7EDF\u4E00\u515C\u5E95\u903B\u8F91\u9519\u8BEF\u3002"
    })
  )
);

// ../logix-core/src/internal/runtime/core/LogicDiagnostics.ts
import { Cause as Cause5, Context as Context3, Effect as Effect7 } from "https://esm.sh/effect@3.19.8";
var phaseDiagnosticsEnabled = () => isDevEnv();
var SERVICE_NOT_FOUND_PREFIX = "Service not found:";
var emitEnvServiceNotFoundDiagnosticIfNeeded = (cause, moduleId) => Effect7.gen(function* () {
  let pretty;
  try {
    pretty = Cause5.pretty(cause, { renderErrorCause: true });
  } catch {
    return;
  }
  if (!pretty.includes(SERVICE_NOT_FOUND_PREFIX)) {
    return;
  }
  yield* record({
    type: "diagnostic",
    moduleId,
    code: "logic::env_service_not_found",
    severity: "warning",
    message: pretty,
    hint: "Logic \u5728\u521D\u59CB\u5316\u9636\u6BB5\u5C1D\u8BD5\u8BBF\u95EE\u5C1A\u672A\u63D0\u4F9B\u7684 Env Service\uFF0C\u901A\u5E38\u662F Runtime / React \u96C6\u6210\u4E2D\u7684\u5DF2\u77E5\u521D\u59CB\u5316\u566A\u97F3\u3002\u82E5\u53EA\u5728\u5E94\u7528\u542F\u52A8\u65E9\u671F\u51FA\u73B0\u4E00\u6B21\u4E14\u540E\u7EED\u72B6\u6001\u4E0E Env \u5747\u6B63\u5E38\uFF0C\u53EF\u6682\u89C6\u4E3A\u65E0\u5BB3\uFF1B\u82E5\u6301\u7EED\u51FA\u73B0\u6216\u4F34\u968F\u4E1A\u52A1\u5F02\u5E38\uFF0C\u8BF7\u68C0\u67E5 Runtime.make / RuntimeProvider.layer \u662F\u5426\u6B63\u786E\u63D0\u4F9B\u4E86\u5BF9\u5E94 Service\u3002"
  });
  yield* record({
    type: "diagnostic",
    moduleId,
    code: "logic::invalid_phase",
    severity: "error",
    message: "$.use is not allowed before Env is fully ready.",
    hint: "setup \u6BB5\u6216 Env \u672A\u5B8C\u5168\u5C31\u7EEA\u65F6\u8BF7\u907F\u514D\u76F4\u63A5\u8BFB\u53D6 Service\uFF1B\u5EFA\u8BAE\u5C06\u5BF9 Env \u7684\u8BBF\u95EE\u79FB\u52A8\u5230 Logic \u7684 run \u6BB5\uFF0C\u6216\u901A\u8FC7 $.lifecycle.onInit \u5305\u88C5\u521D\u59CB\u5316\u6D41\u7A0B\u3002",
    kind: "env_service_not_ready"
  });
});
var LogicPhaseServiceTag = Context3.GenericTag(
  "@logix/LogicPhaseService"
);
var makeLogicPhaseError = (kind, api, phase, moduleId) => Object.assign(
  new Error(
    `[LogicPhaseError] ${api} is not allowed in ${phase} phase (kind=${kind}).`
  ),
  {
    _tag: "LogicPhaseError",
    kind,
    api,
    phase,
    moduleId
  }
);
var emitInvalidPhaseDiagnosticIfNeeded = (cause, moduleId) => Effect7.gen(function* () {
  if (!phaseDiagnosticsEnabled()) {
    return;
  }
  const allErrors = [
    ...Cause5.failures(cause),
    ...Cause5.defects(cause)
  ];
  for (const err of allErrors) {
    const logicErr = err;
    if (logicErr && logicErr._tag === "LogicPhaseError") {
      const phaseErr = logicErr;
      const hint = phaseErr.kind === "use_in_setup" || phaseErr.kind === "lifecycle_in_setup" ? "setup \u6BB5\u7981\u6B62\u8BFB\u53D6 Env/Service \u6216\u6267\u884C\u957F\u751F\u547D\u5468\u671F\u903B\u8F91\uFF0C\u8BF7\u5C06\u76F8\u5173\u8C03\u7528\u79FB\u52A8\u5230 run \u6BB5\u3002" : "\u8C03\u6574\u903B\u8F91\u5230 run \u6BB5\uFF0Csetup \u4EC5\u505A\u6CE8\u518C\u7C7B\u64CD\u4F5C\u3002";
      yield* record({
        type: "diagnostic",
        moduleId: phaseErr.moduleId ?? moduleId,
        code: "logic::invalid_phase",
        severity: "error",
        message: `${phaseErr.api ?? phaseErr.kind} is not allowed in ${phaseErr.phase} phase.`,
        hint,
        kind: phaseErr.kind
      });
      return;
    }
  }
});

// ../logix-core/src/internal/runtime/BoundApiRuntime.ts
import { Context as Context6, Effect as Effect12, FiberRef as FiberRef4, Option as Option2, Schema, Stream as Stream3 } from "https://esm.sh/effect@3.19.8";

// ../logix-core/src/internal/runtime/core/FlowRuntime.ts
import { Effect as Effect9, Stream as Stream2, Ref as Ref3, Option } from "https://esm.sh/effect@3.19.8";

// ../logix-core/src/internal/runtime/EffectOpCore.ts
import { Context as Context4, Effect as Effect8, FiberRef as FiberRef3 } from "https://esm.sh/effect@3.19.8";
var currentLinkId = FiberRef3.unsafeMake(void 0);
var EffectOpMiddlewareTag = class extends Context4.Tag(
  "Logix/EffectOpMiddleware"
)() {
};
var composeMiddleware = (stack) => {
  return (op) => stack.reduceRight(
    (eff, mw) => mw({ ...op, effect: eff }),
    op.effect
  );
};
var runWithMiddleware = (op, stack) => {
  const makeLinkId = () => `${Date.now().toString(36)}-${Math.random().toString(36).slice(2)}`;
  return Effect8.gen(function* () {
    const existing = yield* FiberRef3.get(currentLinkId);
    const linkId = op.meta?.linkId ?? existing ?? makeLinkId();
    const nextOp = {
      ...op,
      meta: {
        ...op.meta ?? {},
        linkId
      }
    };
    const program = stack.length ? composeMiddleware(stack)(nextOp) : nextOp.effect;
    return yield* Effect8.locally(currentLinkId, linkId)(program);
  });
};

// ../logix-core/src/effectop.ts
var makeId = () => Math.random().toString(36).slice(2);
var make = (params) => ({
  id: params.id ?? makeId(),
  kind: params.kind,
  name: params.name,
  payload: params.payload,
  meta: params.meta,
  effect: params.effect
});
var run = (op, stack) => runWithMiddleware(op, stack);

// ../logix-core/src/internal/runtime/core/FlowRuntime.ts
var getMiddlewareStack = () => Effect9.serviceOption(EffectOpMiddlewareTag).pipe(
  Effect9.map((maybe) => Option.isSome(maybe) ? maybe.value.stack : [])
);
var resolveEffect = (eff, payload) => typeof eff === "function" ? eff(payload) : eff;
var make2 = (runtime) => {
  const runAsFlowOp = (name, payload, eff, options) => Effect9.gen(function* () {
    const stack = yield* getMiddlewareStack();
    const op = make({
      kind: "flow",
      name,
      payload,
      effect: eff,
      meta: {
        ...options?.meta ?? {},
        policy: options?.policy,
        tags: options?.tags,
        trace: options?.trace,
        moduleId: runtime?.moduleId,
        runtimeId: runtime?.id
      }
    });
    return yield* run(op, stack);
  });
  const runEffect = (eff) => (payload) => resolveEffect(eff, payload);
  const runStreamSequential = (eff, options) => (stream) => Stream2.runForEach(
    stream,
    (payload) => runAsFlowOp(
      "flow.run",
      payload,
      runEffect(eff)(payload),
      options
    )
  );
  const runStreamParallel = (eff, options) => (stream) => Stream2.runDrain(
    stream.pipe(
      Stream2.mapEffect(
        (payload) => runAsFlowOp(
          "flow.runParallel",
          payload,
          runEffect(eff)(payload),
          options
        ),
        { concurrency: "unbounded" }
      )
    )
  );
  return {
    fromAction: (predicate) => runtime.actions$.pipe(Stream2.filter(predicate)),
    fromState: (selector) => runtime.changes(selector),
    debounce: (ms) => (stream) => Stream2.debounce(stream, ms),
    throttle: (ms) => (stream) => Stream2.throttle(stream, {
      cost: () => 1,
      units: 1,
      duration: ms,
      strategy: "enforce"
    }),
    filter: (predicate) => (stream) => Stream2.filter(stream, predicate),
    run: (eff, options) => (stream) => runStreamSequential(eff, options)(stream),
    runParallel: (eff, options) => (stream) => runStreamParallel(eff, options)(stream),
    runLatest: (eff, options) => (stream) => Stream2.runDrain(
      Stream2.map(
        stream,
        (payload) => runAsFlowOp(
          "flow.runLatest",
          payload,
          runEffect(eff)(payload),
          options
        )
      ).pipe(
        Stream2.flatMap((effect) => Stream2.fromEffect(effect), {
          switch: true
        })
      )
    ),
    runExhaust: (eff, options) => (stream) => Effect9.gen(function* () {
      const busyRef = yield* Ref3.make(false);
      const mapper = (payload) => Effect9.gen(function* () {
        const acquired = yield* Ref3.modify(
          busyRef,
          (busy) => busy ? [false, busy] : [true, true]
        );
        if (!acquired) {
          return;
        }
        try {
          yield* runAsFlowOp(
            "flow.runExhaust",
            payload,
            runEffect(eff)(payload),
            options
          );
        } finally {
          yield* Ref3.set(busyRef, false);
        }
      });
      return yield* Stream2.runDrain(
        stream.pipe(
          Stream2.mapEffect(mapper, { concurrency: "unbounded" })
        )
      );
    })
  };
};

// ../logix-core/src/internal/runtime/core/MatchBuilder.ts
import { Effect as Effect10 } from "https://esm.sh/effect@3.19.8";
var makeMatch = (value) => {
  let result;
  const chain = {
    with: (predicate, handler) => {
      if (result) return chain;
      if (predicate(value)) {
        result = handler(value);
      }
      return chain;
    },
    otherwise: (handler) => {
      if (result) return result;
      return handler(value);
    },
    exhaustive: () => {
      if (result) {
        return result;
      }
      return Effect10.dieMessage(
        "[FluentMatch] Non-exhaustive match: no pattern matched value"
      );
    }
  };
  return chain;
};
var makeMatchTag = (value) => {
  let result;
  const chain = {
    with: (t, handler) => {
      if (result) return chain;
      if (value._tag === t) {
        result = handler(value);
      }
      return chain;
    },
    otherwise: (handler) => {
      if (result) return result;
      return handler(value);
    },
    exhaustive: () => {
      if (result) {
        return result;
      }
      return Effect10.dieMessage(
        "[FluentMatchTag] Non-exhaustive match: no tag handler matched value"
      );
    }
  };
  return chain;
};

// ../logix-core/src/internal/runtime/core/Platform.ts
import { Context as Context5 } from "https://esm.sh/effect@3.19.8";
var Tag = Context5.GenericTag("@logix/Platform");

// ../logix-core/src/internal/runtime/BoundApiRuntime.ts
var globalLogicPhaseRef = {
  current: "run"
};
var LogicBuilderFactory = (runtime) => {
  const flowApi = make2(runtime);
  return (stream, triggerName) => {
    const runWithStateTransaction = (origin, body) => {
      const anyRuntime = runtime;
      const fn = anyRuntime && anyRuntime.__runWithStateTransaction;
      return fn ? fn(origin, body) : body();
    };
    const taskRunnerRuntime = {
      moduleId: runtime?.moduleId,
      runWithStateTransaction
    };
    const builder = {
      debounce: (ms) => LogicBuilderFactory(runtime)(
        flowApi.debounce(ms)(stream),
        triggerName
      ),
      throttle: (ms) => LogicBuilderFactory(runtime)(
        flowApi.throttle(ms)(stream),
        triggerName
      ),
      filter: (predicate) => LogicBuilderFactory(runtime)(
        flowApi.filter(predicate)(stream),
        triggerName
      ),
      map: (f) => LogicBuilderFactory(runtime)(
        stream.pipe(Stream3.map(f)),
        triggerName
      ),
      run(eff, options) {
        return flowApi.run(eff, options)(stream);
      },
      runLatest(eff, options) {
        return flowApi.runLatest(eff, options)(stream);
      },
      runExhaust(eff, options) {
        return flowApi.runExhaust(eff, options)(stream);
      },
      runParallel(eff, options) {
        return flowApi.runParallel(eff, options)(stream);
      },
      runFork: (eff) => Effect12.forkScoped(flowApi.run(eff)(stream)).pipe(
        Effect12.asVoid
      ),
      runParallelFork: (eff) => Effect12.forkScoped(
        flowApi.runParallel(eff)(stream)
      ).pipe(
        Effect12.asVoid
      ),
      runTask: (config) => makeTaskRunner(
        stream,
        "task",
        taskRunnerRuntime,
        {
          ...config,
          triggerName: config.triggerName ?? triggerName
        }
      ),
      runParallelTask: (config) => makeTaskRunner(
        stream,
        "parallel",
        taskRunnerRuntime,
        {
          ...config,
          triggerName: config.triggerName ?? triggerName
        }
      ),
      runLatestTask: (config) => makeTaskRunner(
        stream,
        "latest",
        taskRunnerRuntime,
        {
          ...config,
          triggerName: config.triggerName ?? triggerName
        }
      ),
      runExhaustTask: (config) => makeTaskRunner(
        stream,
        "exhaust",
        taskRunnerRuntime,
        {
          ...config,
          triggerName: config.triggerName ?? triggerName
        }
      ),
      toStream: () => stream,
      update: (reducer) => Stream3.runForEach(
        stream,
        (payload) => taskRunnerRuntime.runWithStateTransaction(
          {
            kind: "watcher:update",
            name: triggerName
          },
          () => Effect12.gen(function* () {
            const prev = yield* runtime.getState;
            const next = reducer(prev, payload);
            if (Effect12.isEffect(next)) {
              const exit = yield* Effect12.exit(
                next
              );
              if (exit._tag === "Failure") {
                yield* Effect12.logError("Flow error", exit.cause);
                return;
              }
              yield* runtime.setState(exit.value);
              return;
            }
            yield* runtime.setState(next);
          })
        )
      ).pipe(
        Effect12.catchAllCause(
          (cause) => Effect12.logError("Flow error", cause)
        )
      ),
      mutate: (reducer) => Stream3.runForEach(
        stream,
        (payload) => taskRunnerRuntime.runWithStateTransaction(
          {
            kind: "watcher:mutate",
            name: triggerName
          },
          () => Effect12.gen(function* () {
            const prev = yield* runtime.getState;
            const next = create(prev, (draft) => {
              reducer(draft, payload);
            });
            yield* runtime.setState(next);
          })
        )
      ).pipe(
        Effect12.catchAllCause(
          (cause) => Effect12.logError("Flow error", cause)
        )
      )
    };
    const andThen = (handlerOrEff) => {
      if (typeof handlerOrEff === "function") {
        if (handlerOrEff.length >= 2) {
          return builder.update(handlerOrEff);
        }
        return builder.run(handlerOrEff);
      }
      return builder.run(handlerOrEff);
    };
    const pipe = function() {
      const fns = arguments;
      let acc = builder;
      for (let i = 0; i < fns.length; i++) {
        acc = fns[i](acc);
      }
      return acc;
    };
    return Object.assign(builder, { pipe, andThen });
  };
};
function make3(shape, runtime, options) {
  const getPhase = options?.getPhase ?? (() => globalLogicPhaseRef.current);
  const guardRunOnly = (kind, api2) => {
    const phaseService = options?.phaseService;
    const phase = phaseService?.current ?? (globalLogicPhaseRef.current === "setup" ? "setup" : getPhase());
    if (phase === "setup") {
      throw makeLogicPhaseError(
        kind,
        api2,
        "setup",
        options?.moduleId
      );
    }
  };
  const flowApi = make2(runtime);
  const makeIntentBuilder = (runtime_) => LogicBuilderFactory(runtime_);
  const withLifecycle = (available, missing) => Effect12.serviceOption(LifecycleContext).pipe(
    Effect12.flatMap(
      (maybe) => Option2.match(maybe, {
        onSome: available,
        onNone: missing
      })
    )
  );
  const withPlatform = (invoke) => Effect12.serviceOption(Tag).pipe(
    Effect12.flatMap(
      (maybe) => Option2.match(maybe, {
        onSome: invoke,
        onNone: () => Effect12.void
      })
    )
  );
  const createIntentBuilder = (stream, triggerName) => makeIntentBuilder(runtime)(stream, triggerName);
  const resolveModuleRuntime = (tag2) => Effect12.gen(function* () {
    const requestedModuleId = typeof tag2?.id === "string" ? tag2.id : void 0;
    const fromModuleId = typeof options?.moduleId === "string" ? options.moduleId : void 0;
    const fromEnv = yield* Effect12.serviceOption(tag2);
    if (Option2.isSome(fromEnv)) {
      return fromEnv.value;
    }
    const tokenId = requestedModuleId ?? "<unknown module id>";
    const fix = isDevEnv() ? [
      "- Provide the child implementation in the same scope (imports).",
      `  Example: ${fromModuleId ?? "ParentModule"}.implement({ imports: [${requestedModuleId ?? "ChildModule"}.impl], ... })`,
      "- If you intentionally want a root singleton, provide it at app root (Runtime.make(...,{ layer }) / root imports),",
      "  and use Root.resolve(ModuleTag) (instead of $.use) at the callsite."
    ] : [];
    const err = new Error(
      isDevEnv() ? [
        "[MissingModuleRuntimeError] Cannot resolve ModuleRuntime for ModuleTag.",
        "",
        `tokenId: ${tokenId}`,
        "entrypoint: logic.$.use",
        "mode: strict",
        `from: ${fromModuleId ?? "<unknown module id>"}`,
        `startScope: moduleId=${fromModuleId ?? "<unknown>"}, runtimeId=${String(runtime?.id ?? "<unknown>")}`,
        "",
        "fix:",
        ...fix
      ].join("\n") : "[MissingModuleRuntimeError] module runtime not found"
    );
    err.tokenId = tokenId;
    err.entrypoint = "logic.$.use";
    err.mode = "strict";
    err.from = fromModuleId;
    err.startScope = {
      moduleId: fromModuleId,
      runtimeId: String(runtime?.id ?? "<unknown>")
    };
    err.fix = fix;
    err.name = "MissingModuleRuntimeError";
    return yield* Effect12.die(err);
  });
  const stateApi = {
    read: runtime.getState,
    update: (f) => Effect12.gen(function* () {
      const inTxn = yield* FiberRef4.get(inSyncTransactionFiber);
      if (inTxn) {
        const prev = yield* runtime.getState;
        return yield* runtime.setState(f(prev));
      }
      const anyRuntime2 = runtime;
      const runWithTxn = anyRuntime2 && anyRuntime2.__runWithStateTransaction;
      const body = () => Effect12.flatMap(runtime.getState, (prev) => runtime.setState(f(prev)));
      return yield* runWithTxn ? runWithTxn({ kind: "state", name: "update" }, body) : body();
    }),
    mutate: (f) => Effect12.gen(function* () {
      const inTxn = yield* FiberRef4.get(inSyncTransactionFiber);
      if (inTxn) {
        const prev = yield* runtime.getState;
        const next = create(prev, (draft) => {
          f(draft);
        });
        return yield* runtime.setState(next);
      }
      const anyRuntime2 = runtime;
      const runWithTxn = anyRuntime2 && anyRuntime2.__runWithStateTransaction;
      const body = () => Effect12.flatMap(runtime.getState, (prev) => {
        const next = create(prev, (draft) => {
          f(draft);
        });
        return runtime.setState(next);
      });
      return yield* runWithTxn ? runWithTxn({ kind: "state", name: "mutate" }, body) : body();
    }),
    ref: runtime.ref
  };
  const actionsApi = new Proxy({}, {
    get: (_target, prop) => {
      if (prop === "dispatch") {
        return (a) => runtime.dispatch(a);
      }
      if (prop === "actions$") {
        return runtime.actions$;
      }
      return (payload) => runtime.dispatch({ _tag: prop, payload });
    }
  });
  const matchApi = (value) => makeMatch(value);
  const matchTagApi = (value) => makeMatchTag(value);
  const reducer = (tag2, fn) => {
    return Effect12.sync(() => {
      const anyRuntime2 = runtime;
      const register = anyRuntime2 && anyRuntime2.__registerReducer;
      if (!register) {
        throw new Error(
          "[BoundApi.reducer] Primary reducer registration is not supported by this runtime (missing internal __registerReducer hook)."
        );
      }
      register(String(tag2), fn);
    });
  };
  const anyRuntime = runtime;
  const sourceRefreshRegistry = anyRuntime.__sourceRefreshRegistry ?? (anyRuntime.__sourceRefreshRegistry = /* @__PURE__ */ new Map());
  const api = {
    state: stateApi,
    actions: actionsApi,
    flow: flowApi,
    match: matchApi,
    matchTag: matchTagApi,
    lifecycle: {
      onInit: (eff) => {
        guardRunOnly("lifecycle_in_setup", "$.lifecycle.onInit");
        return withLifecycle(
          (manager) => manager.registerInit(eff),
          () => eff
        );
      },
      onDestroy: (eff) => withLifecycle(
        (manager) => manager.registerDestroy(eff),
        () => eff
      ),
      onError: (handler) => withLifecycle(
        (manager) => manager.registerOnError(handler),
        () => Effect12.void
      ),
      onSuspend: (eff) => withPlatform(
        (platform) => platform.lifecycle.onSuspend(
          Effect12.asVoid(eff)
        )
      ),
      onResume: (eff) => withPlatform(
        (platform) => platform.lifecycle.onResume(
          Effect12.asVoid(eff)
        )
      ),
      onReset: (eff) => withPlatform(
        (platform) => platform.lifecycle.onReset ? platform.lifecycle.onReset(
          Effect12.asVoid(eff)
        ) : Effect12.void
      )
    },
    traits: {
      source: {
        refresh: (fieldPath) => Effect12.gen(function* () {
          const handler = sourceRefreshRegistry.get(fieldPath);
          if (!handler) {
            return yield* Effect12.void;
          }
          const inTxn = yield* FiberRef4.get(inSyncTransactionFiber);
          if (inTxn) {
            const state2 = yield* runtime.getState;
            return yield* handler(state2);
          }
          const runWithStateTransaction = api.__runWithStateTransaction;
          if (runWithStateTransaction) {
            return yield* runWithStateTransaction(
              {
                kind: "source-refresh",
                name: fieldPath
              },
              () => Effect12.gen(function* () {
                const state2 = yield* runtime.getState;
                return yield* handler(state2);
              })
            );
          }
          const state = yield* runtime.getState;
          return yield* handler(state);
        })
      }
    },
    reducer,
    use: new Proxy(() => {
    }, {
      apply: (_target, _thisArg, [arg]) => {
        guardRunOnly("use_in_setup", "$.use");
        if (Context6.isTag(arg)) {
          const candidate = arg;
          if (candidate._kind === "Module") {
            return resolveModuleRuntime(arg).pipe(
              Effect12.map((runtime2) => {
                const actionsProxy = new Proxy(
                  {},
                  {
                    get: (_target2, prop) => (payload) => runtime2.dispatch({
                      _tag: prop,
                      payload
                    })
                  }
                );
                const handle = {
                  read: (selector) => Effect12.map(runtime2.getState, selector),
                  changes: runtime2.changes,
                  dispatch: runtime2.dispatch,
                  actions$: runtime2.actions$,
                  actions: actionsProxy
                };
                return handle;
              })
            );
          }
          return arg;
        }
        return Effect12.die("BoundApi.use: unsupported argument");
      }
    }),
    onAction: new Proxy(() => {
    }, {
      apply: (_target, _thisArg, args) => {
        guardRunOnly("use_in_setup", "$.onAction");
        const arg = args[0];
        if (typeof arg === "function") {
          return createIntentBuilder(
            runtime.actions$.pipe(Stream3.filter(arg))
          );
        }
        if (typeof arg === "string") {
          return createIntentBuilder(
            runtime.actions$.pipe(
              Stream3.filter((a) => a._tag === arg || a.type === arg)
            ),
            arg
          );
        }
        if (typeof arg === "object" && arg !== null) {
          if ("_tag" in arg) {
            return createIntentBuilder(
              runtime.actions$.pipe(
                Stream3.filter((a) => a._tag === arg._tag)
              ),
              String(arg._tag)
            );
          }
          if (Schema.isSchema(arg)) {
            return createIntentBuilder(
              runtime.actions$.pipe(
                Stream3.filter((a) => {
                  const result = Schema.decodeUnknownSync(
                    arg
                  )(a);
                  return !!result;
                })
              )
            );
          }
        }
        return createIntentBuilder(runtime.actions$);
      },
      get: (_target, prop) => {
        guardRunOnly("use_in_setup", "$.onAction");
        if (typeof prop === "string") {
          return createIntentBuilder(
            runtime.actions$.pipe(
              Stream3.filter(
                (a) => a._tag === prop || a.type === prop
              )
            ),
            prop
          );
        }
        return void 0;
      }
    }),
    onState: (selector) => {
      guardRunOnly("use_in_setup", "$.onState");
      return createIntentBuilder(runtime.changes(selector));
    },
    on: (stream) => {
      guardRunOnly("use_in_setup", "$.on");
      return createIntentBuilder(stream);
    }
  };
  api.__moduleId = options?.moduleId;
  api.__runtimeId = runtime?.id;
  api.__rowIdStore = runtime?.__rowIdStore;
  api.__registerSourceRefresh = (fieldPath, handler) => {
    sourceRefreshRegistry.set(fieldPath, handler);
  };
  api.__recordStatePatch = (patch) => {
    const anyRuntime2 = runtime;
    const record3 = anyRuntime2 && anyRuntime2.__recordStatePatch;
    if (record3) {
      record3(patch);
    }
  };
  api.__recordReplayEvent = (event) => {
    const anyRuntime2 = runtime;
    const record3 = anyRuntime2 && anyRuntime2.__recordReplayEvent;
    if (record3) {
      record3(event);
    }
  };
  api.__registerStateTraitProgram = (program) => {
    const anyRuntime2 = runtime;
    const register = anyRuntime2 && anyRuntime2.__registerStateTraitProgram;
    if (register) {
      register(program);
    }
  };
  api.__enqueueStateTraitValidateRequest = (request) => {
    const anyRuntime2 = runtime;
    const enqueue = anyRuntime2 && anyRuntime2.__enqueueStateTraitValidateRequest;
    if (enqueue) {
      enqueue(request);
    }
  };
  api.__runWithStateTransaction = (origin, body) => {
    const anyRuntime2 = runtime;
    const runWithTxn = anyRuntime2 && anyRuntime2.__runWithStateTransaction;
    return runWithTxn ? runWithTxn(origin, body) : body();
  };
  return api;
}

// ../logix-core/src/internal/state-trait/converge.ts
import { Effect as Effect13, Option as Option3 } from "https://esm.sh/effect@3.19.8";

// ../logix-core/src/internal/state-trait/deps-trace.ts
var isTraceableObject = (value) => {
  if (!value || typeof value !== "object") return false;
  if (Array.isArray(value)) return true;
  if (value instanceof Date) return false;
  if (value instanceof RegExp) return false;
  if (value instanceof Error) return false;
  if (value instanceof Map) return false;
  if (value instanceof Set) return false;
  if (value instanceof WeakMap) return false;
  if (value instanceof WeakSet) return false;
  return true;
};
var shouldIgnoreKey = (key) => key === "__proto__" || key === "prototype" || key === "constructor";
var normalizeReads = (reads) => {
  const all = Array.from(reads).filter((p) => typeof p === "string" && p.length > 0);
  all.sort();
  const isPrefix = (prefix, full) => full !== prefix && full.startsWith(prefix + ".");
  const pruned = [];
  for (const p of all) {
    let hasMoreSpecific = false;
    for (const other of all) {
      if (isPrefix(p, other)) {
        hasMoreSpecific = true;
        break;
      }
    }
    if (!hasMoreSpecific) {
      pruned.push(p);
    }
  }
  pruned.sort();
  return pruned;
};
var covers = (declared, read) => declared === read || read.startsWith(declared + ".");
var diffDeps = (declared, reads) => {
  const declaredList = Array.from(new Set(declared)).filter((p) => typeof p === "string" && p.length > 0);
  declaredList.sort();
  const readList = Array.from(new Set(reads)).filter((p) => typeof p === "string" && p.length > 0);
  readList.sort();
  const missing = readList.filter((r) => declaredList.every((d) => !covers(d, r)));
  const unused = declaredList.filter((d) => readList.every((r) => !covers(d, r)));
  if (missing.length === 0 && unused.length === 0) return void 0;
  return {
    reads: readList,
    declared: declaredList,
    missing,
    unused
  };
};
var trace = (fn, state) => {
  if (!isTraceableObject(state)) {
    return { value: fn(state), reads: [] };
  }
  const reads = /* @__PURE__ */ new Set();
  const proxyCache = /* @__PURE__ */ new WeakMap();
  const proxyToTarget = /* @__PURE__ */ new WeakMap();
  const wrap = (value2, path) => {
    if (!isTraceableObject(value2)) return value2;
    return getProxy(value2, path);
  };
  const unwrap = (value2) => {
    if (value2 && (typeof value2 === "object" || typeof value2 === "function")) {
      const target = proxyToTarget.get(value2);
      if (target) return target;
    }
    return value2;
  };
  const getProxy = (target, basePath) => {
    let byPath = proxyCache.get(target);
    if (!byPath) {
      byPath = /* @__PURE__ */ new Map();
      proxyCache.set(target, byPath);
    }
    const cached = byPath.get(basePath);
    if (cached) return cached;
    const record3 = (path) => {
      if (path) reads.add(path);
    };
    const proxy = new Proxy(target, {
      get: (t, prop, receiver) => {
        if (typeof prop === "symbol") {
          return Reflect.get(t, prop, receiver);
        }
        const key = String(prop);
        if (shouldIgnoreKey(key)) {
          return Reflect.get(t, prop, receiver);
        }
        const nextPath = basePath ? `${basePath}.${key}` : key;
        record3(nextPath);
        const value2 = Reflect.get(t, prop, receiver);
        return wrap(value2, nextPath);
      },
      has: (t, prop) => {
        if (typeof prop === "symbol") return Reflect.has(t, prop);
        const key = String(prop);
        if (!shouldIgnoreKey(key)) {
          const nextPath = basePath ? `${basePath}.${key}` : key;
          record3(nextPath);
        }
        return Reflect.has(t, prop);
      },
      ownKeys: (t) => {
        if (basePath) record3(basePath);
        return Reflect.ownKeys(t);
      },
      getOwnPropertyDescriptor: (t, prop) => {
        if (typeof prop === "symbol") {
          return Reflect.getOwnPropertyDescriptor(t, prop);
        }
        const key = String(prop);
        if (!shouldIgnoreKey(key)) {
          const nextPath = basePath ? `${basePath}.${key}` : key;
          record3(nextPath);
        }
        return Reflect.getOwnPropertyDescriptor(t, prop);
      },
      set: () => {
        throw new Error(
          "[deps-trace] Attempted to mutate state during deps tracing (state is readonly in dev-mode diagnostics)."
        );
      },
      defineProperty: () => {
        throw new Error(
          "[deps-trace] Attempted to define property on state during deps tracing (state is readonly in dev-mode diagnostics)."
        );
      },
      deleteProperty: () => {
        throw new Error(
          "[deps-trace] Attempted to delete property on state during deps tracing (state is readonly in dev-mode diagnostics)."
        );
      }
    });
    byPath.set(basePath, proxy);
    proxyToTarget.set(proxy, target);
    return proxy;
  };
  const root = getProxy(state, "");
  const value = unwrap(fn(root));
  return {
    value,
    reads: normalizeReads(reads)
  };
};

// ../logix-core/src/internal/state-trait/converge.ts
var StateTraitConfigError = class extends Error {
  constructor(code, message, fields = []) {
    super(message);
    this.code = code;
    this.fields = fields;
    this._tag = "StateTraitConfigError";
    this.name = "StateTraitConfigError";
  }
};
var getAtPath = (state, path) => {
  if (!path || state == null) return state;
  const segments = path.split(".");
  let current2 = state;
  for (let i = 0; i < segments.length; i++) {
    if (current2 == null) return void 0;
    current2 = current2[segments[i]];
  }
  return current2;
};
var setAtPathMutating = (draft, path, value) => {
  if (!path) return;
  const segments = path.split(".");
  let current2 = draft;
  for (let i = 0; i < segments.length - 1; i++) {
    const key = segments[i];
    const next = current2[key];
    if (next == null || typeof next !== "object") {
      current2[key] = {};
    }
    current2 = current2[key];
  }
  current2[segments[segments.length - 1]] = value;
};
var getMiddlewareStack2 = () => Effect13.serviceOption(EffectOpMiddlewareTag).pipe(
  Effect13.map((maybe) => Option3.isSome(maybe) ? maybe.value.stack : [])
);
var getWriterKind = (entry) => entry.kind === "computed" ? "computed" : entry.kind === "link" ? "link" : void 0;
var getWriterDeps = (entry) => {
  if (entry.kind === "computed") {
    return entry.meta?.deps ?? [];
  }
  if (entry.kind === "link") {
    return [entry.meta.from];
  }
  return [];
};
var computeTopoOrder = (writers) => {
  const writerByPath = /* @__PURE__ */ new Map();
  for (const entry of writers) {
    const existing = writerByPath.get(entry.fieldPath);
    if (existing) {
      throw new StateTraitConfigError(
        "MULTIPLE_WRITERS",
        `[StateTrait.converge] Multiple writers for field "${entry.fieldPath}" (${existing.kind} + ${entry.kind}).`,
        [entry.fieldPath]
      );
    }
    writerByPath.set(entry.fieldPath, entry);
  }
  const nodes = /* @__PURE__ */ new Set();
  for (const entry of writers) {
    nodes.add(entry.fieldPath);
  }
  const indegree = /* @__PURE__ */ new Map();
  const forward = /* @__PURE__ */ new Map();
  for (const node2 of nodes) {
    indegree.set(node2, 0);
    forward.set(node2, []);
  }
  for (const entry of writers) {
    const to = entry.fieldPath;
    const deps = getWriterDeps(entry);
    for (const dep of deps) {
      if (!nodes.has(dep)) {
        continue;
      }
      forward.get(dep).push(to);
      indegree.set(to, (indegree.get(to) ?? 0) + 1);
    }
  }
  const queue = [];
  for (const [node2, deg] of indegree.entries()) {
    if (deg === 0) queue.push(node2);
  }
  const order = [];
  while (queue.length) {
    const n = queue.shift();
    order.push(n);
    const outs = forward.get(n);
    for (const to of outs) {
      const next = (indegree.get(to) ?? 0) - 1;
      indegree.set(to, next);
      if (next === 0) queue.push(to);
    }
  }
  if (order.length !== nodes.size) {
    const remaining = Array.from(nodes).filter((n) => !order.includes(n));
    throw new StateTraitConfigError(
      "CYCLE_DETECTED",
      `[StateTrait.converge] Cycle detected in computed/link graph: ${remaining.join(", ")}`,
      remaining
    );
  }
  return order;
};
var makePatch = (path, from2, to, reason, stepId) => ({
  path,
  from: from2,
  to,
  reason,
  stepId
});
var depsTraceSettled = /* @__PURE__ */ new Set();
var depsMismatchEmitted = /* @__PURE__ */ new Set();
var formatList = (items, limit = 10) => {
  if (items.length === 0) return "";
  if (items.length <= limit) return items.join(", ");
  return `${items.slice(0, limit).join(", ")}, \u2026(+${items.length - limit})`;
};
var emitDepsMismatch = (params) => {
  const key = `${params.runtimeId ?? "unknown"}::${params.kind}::${params.fieldPath}`;
  if (depsMismatchEmitted.has(key)) return Effect13.void;
  depsMismatchEmitted.add(key);
  return record({
    type: "diagnostic",
    moduleId: params.moduleId,
    runtimeId: params.runtimeId,
    code: "state_trait::deps_mismatch",
    severity: "warning",
    message: `[deps] ${params.kind} "${params.fieldPath}" declared=[${formatList(params.diff.declared)}] reads=[${formatList(params.diff.reads)}] missing=[${formatList(params.diff.missing)}] unused=[${formatList(params.diff.unused)}]`,
    hint: 'deps \u662F\u552F\u4E00\u4F9D\u8D56\u4E8B\u5B9E\u6E90\uFF1A\u540E\u7EED\u589E\u91CF\u8C03\u5EA6/\u53CD\u5411\u95ED\u5305/\u6027\u80FD\u4F18\u5316\u90FD\u53EA\u8BA4 deps\u3002\u8BF7\u5C06 deps \u4E0E\u5B9E\u9645\u8BFB\u53D6\u4FDD\u6301\u4E00\u81F4\uFF1B\u82E5\u786E\u5B9E\u4F9D\u8D56\u6574\u68F5\u5BF9\u8C61\uFF0C\u53EF\u58F0\u660E\u66F4\u7C97\u7C92\u5EA6\u7684 deps\uFF08\u4F8B\u5982 "profile"\uFF09\u4EE5\u8986\u76D6\u5B50\u5B57\u6BB5\u8BFB\u53D6\u3002',
    kind: `deps_mismatch:${params.kind}`
  });
};
var shouldSkip = (entry, prev, next) => {
  if (entry.kind === "computed") {
    const equals2 = entry.meta?.equals;
    return equals2 ? equals2(prev, next) : Object.is(prev, next);
  }
  return Object.is(prev, next);
};
var runWriterStep = (ctx, entry, stack) => {
  const moduleId = ctx.moduleId;
  const runtimeId = ctx.runtimeId;
  const fieldPath = entry.fieldPath;
  const kind = getWriterKind(entry);
  if (!kind) return Effect13.succeed(false);
  const reason = kind === "computed" ? "trait-computed" : "trait-link";
  const opKind = kind === "computed" ? "trait-computed" : "trait-link";
  const opName = kind === "computed" ? "computed:update" : "link:propagate";
  const stepId = kind === "computed" ? `computed:${fieldPath}` : `link:${fieldPath}`;
  const deps = getWriterDeps(entry);
  const from2 = kind === "link" ? entry.meta.from : void 0;
  const body = Effect13.sync(() => {
    const current2 = ctx.getDraft();
    const prev = getAtPath(current2, fieldPath);
    let next;
    let depsDiff;
    if (kind === "computed") {
      const derive = entry.meta.derive;
      const traceKey = `${runtimeId ?? "unknown"}::computed::${fieldPath}`;
      if (isDevEnv() && !depsTraceSettled.has(traceKey)) {
        const traced = trace((s) => derive(s), current2);
        next = traced.value;
        depsTraceSettled.add(traceKey);
        depsDiff = diffDeps(entry.meta.deps ?? [], traced.reads);
      } else {
        next = derive(current2);
      }
    } else {
      next = getAtPath(current2, from2);
    }
    const changed = !shouldSkip(entry, prev, next);
    if (!changed) {
      return { changed: false, depsDiff };
    }
    const updated = create(current2, (draft) => {
      setAtPathMutating(draft, fieldPath, next);
    });
    ctx.setDraft(updated);
    ctx.recordPatch(makePatch(fieldPath, prev, next, reason, stepId));
    return { changed: true, depsDiff };
  }).pipe(
    Effect13.flatMap(
      ({ changed, depsDiff }) => depsDiff && kind === "computed" ? emitDepsMismatch({
        moduleId,
        runtimeId,
        kind: "computed",
        fieldPath,
        diff: depsDiff
      }).pipe(Effect13.as(changed)) : Effect13.succeed(changed)
    )
  );
  const op = make({
    kind: opKind,
    name: opName,
    effect: body,
    meta: {
      moduleId,
      runtimeId,
      fieldPath,
      deps,
      ...kind === "link" ? {
        from: from2,
        to: fieldPath
      } : null,
      stepId
    }
  });
  return run(op, stack);
};
var convergeInTransaction = (program, ctx) => Effect13.gen(function* () {
  const startedAt = ctx.now();
  const base = ctx.getDraft();
  const mode = ctx.mode ?? "full";
  const writers = program.entries.filter((e) => {
    const kind = getWriterKind(e);
    return kind === "computed" || kind === "link";
  });
  if (writers.length === 0) {
    return { _tag: "Noop" };
  }
  const stack = yield* getMiddlewareStack2();
  const normalizeDirtyPath = (path) => {
    if (!path) return "";
    if (path === "*") return "*";
    const idx = path.indexOf("[]");
    if (idx >= 0) return path.slice(0, idx);
    const segs = path.split(".");
    for (let i = 0; i < segs.length; i++) {
      const seg = segs[i];
      if (/^[0-9]+$/.test(seg)) {
        return segs.slice(0, i).join(".");
      }
    }
    return path;
  };
  const overlaps = (a, b) => a === b || a.startsWith(b + ".") || b.startsWith(a + ".");
  const readDirtyRoots = () => {
    if (mode !== "dirty") {
      return { dirtyAll: true, roots: ["*"] };
    }
    const raw = ctx.dirtyPaths == null ? [] : Array.isArray(ctx.dirtyPaths) ? ctx.dirtyPaths : Array.from(ctx.dirtyPaths);
    const normalized = raw.map((p) => typeof p === "string" ? normalizeDirtyPath(p) : "").filter((p) => typeof p === "string" && p.length > 0);
    const hasSpecific = normalized.some((p) => p !== "*");
    const roots = hasSpecific ? Array.from(new Set(normalized.filter((p) => p !== "*"))).sort() : normalized.includes("*") ? ["*"] : [];
    return { dirtyAll: roots.length === 1 && roots[0] === "*", roots };
  };
  const dirty = readDirtyRoots();
  const dirtyRoots = dirty.dirtyAll ? [] : dirty.roots;
  const dirtySet = new Set(dirtyRoots);
  let changedCount = 0;
  const steps = [];
  try {
    const order = computeTopoOrder(writers);
    const writerByPath = /* @__PURE__ */ new Map();
    for (const entry of writers) {
      writerByPath.set(entry.fieldPath, entry);
    }
    const totalSteps = order.length;
    for (const fieldPath of order) {
      if (ctx.now() - startedAt > ctx.budgetMs) {
        ctx.setDraft(base);
        const totalDurationMs2 = Math.max(0, ctx.now() - startedAt);
        const top32 = steps.slice().sort((a, b) => b.durationMs - a.durationMs).slice(0, 3);
        return {
          _tag: "Degraded",
          reason: "budget_exceeded",
          summary: {
            mode,
            budgetMs: ctx.budgetMs,
            totalDurationMs: totalDurationMs2,
            totalSteps,
            executedSteps: steps.length,
            skippedSteps: Math.max(0, totalSteps - steps.length),
            changedSteps: steps.filter((s) => s.changed).length,
            ...mode === "dirty" && !dirty.dirtyAll ? { dirtyRoots } : null,
            top3: top32
          }
        };
      }
      const entry = writerByPath.get(fieldPath);
      if (!entry) continue;
      if (mode === "dirty" && !dirty.dirtyAll) {
        const deps = getWriterDeps(entry).map(normalizeDirtyPath).filter((p) => p.length > 0);
        const to = normalizeDirtyPath(fieldPath);
        const shouldRun = deps.some((d) => Array.from(dirtySet).some((root) => overlaps(d, root))) || to.length > 0 && Array.from(dirtySet).some((root) => overlaps(to, root));
        if (!shouldRun) {
          continue;
        }
      }
      const stepStartedAt = ctx.now();
      const exit = yield* Effect13.exit(runWriterStep(ctx, entry, stack));
      const stepEndedAt = ctx.now();
      const durationMs = Math.max(0, stepEndedAt - stepStartedAt);
      const stepKind = entry.kind === "computed" ? "computed" : "link";
      const stepId = entry.kind === "computed" ? `computed:${fieldPath}` : `link:${fieldPath}`;
      const changed = exit._tag === "Success" ? exit.value : false;
      steps.push({
        stepId,
        kind: stepKind,
        fieldPath,
        durationMs,
        changed
      });
      if (exit._tag === "Failure") {
        ctx.setDraft(base);
        const totalDurationMs2 = Math.max(0, ctx.now() - startedAt);
        const top32 = steps.slice().sort((a, b) => b.durationMs - a.durationMs).slice(0, 3);
        return {
          _tag: "Degraded",
          reason: "runtime_error",
          error: exit.cause,
          summary: {
            mode,
            budgetMs: ctx.budgetMs,
            totalDurationMs: totalDurationMs2,
            totalSteps,
            executedSteps: steps.length,
            skippedSteps: Math.max(0, totalSteps - steps.length),
            changedSteps: steps.filter((s) => s.changed).length,
            ...mode === "dirty" && !dirty.dirtyAll ? { dirtyRoots } : null,
            top3: top32
          }
        };
      }
      if (exit.value) {
        changedCount += 1;
        if (mode === "dirty" && !dirty.dirtyAll) {
          const to = normalizeDirtyPath(fieldPath);
          if (to.length > 0) {
            dirtySet.add(to);
          }
        }
      }
    }
  } catch (e) {
    if (e instanceof StateTraitConfigError) {
      throw e;
    }
    ctx.setDraft(base);
    const totalDurationMs2 = Math.max(0, ctx.now() - startedAt);
    const top32 = steps.slice().sort((a, b) => b.durationMs - a.durationMs).slice(0, 3);
    return {
      _tag: "Degraded",
      reason: "runtime_error",
      error: e,
      summary: {
        mode,
        budgetMs: ctx.budgetMs,
        totalDurationMs: totalDurationMs2,
        totalSteps: writers.length,
        executedSteps: steps.length,
        skippedSteps: Math.max(0, writers.length - steps.length),
        changedSteps: steps.filter((s) => s.changed).length,
        ...mode === "dirty" && !dirty.dirtyAll ? { dirtyRoots } : null,
        top3: top32
      }
    };
  }
  const totalDurationMs = Math.max(0, ctx.now() - startedAt);
  const top3 = steps.slice().sort((a, b) => b.durationMs - a.durationMs).slice(0, 3);
  const summary = {
    mode,
    budgetMs: ctx.budgetMs,
    totalDurationMs,
    totalSteps: writers.length,
    executedSteps: steps.length,
    skippedSteps: Math.max(0, writers.length - steps.length),
    changedSteps: steps.filter((s) => s.changed).length,
    ...mode === "dirty" && !dirty.dirtyAll ? { dirtyRoots } : null,
    top3
  };
  return changedCount > 0 ? { _tag: "Converged", patchCount: changedCount, summary } : { _tag: "Noop", summary };
});

// ../logix-core/src/internal/state-trait/validate.ts
import { Effect as Effect14 } from "https://esm.sh/effect@3.19.8";

// ../logix-core/src/internal/state-trait/graph.ts
var buildDependencyGraph = (program) => {
  const reverseAdj = /* @__PURE__ */ new Map();
  for (const edge of program.graph.edges) {
    const list2 = reverseAdj.get(edge.from) ?? [];
    list2.push(edge.to);
    reverseAdj.set(edge.from, list2);
  }
  return {
    _tag: "StateTraitDependencyGraph",
    reverseAdj
  };
};

// ../logix-core/src/internal/state-trait/reverse-closure.ts
var reverseClosure = (graph, target) => {
  const visited = /* @__PURE__ */ new Set();
  const queue = [target];
  while (queue.length) {
    const current2 = queue.shift();
    if (!current2) break;
    if (visited.has(current2)) continue;
    visited.add(current2);
    const nexts = graph.reverseAdj.get(current2);
    if (nexts) {
      for (const n of nexts) queue.push(n);
    }
  }
  return visited;
};

// ../logix-core/src/internal/state-trait/validate.ts
var parseSegments = (path) => {
  if (!path) return [];
  return path.split(".").map(
    (seg) => /^[0-9]+$/.test(seg) ? Number(seg) : seg
  );
};
var getAtPath2 = (state, path) => {
  if (!path || state == null) return state;
  const segments = parseSegments(path);
  let current2 = state;
  for (const seg of segments) {
    if (current2 == null) return void 0;
    current2 = current2[seg];
  }
  return current2;
};
var setAtPathMutating2 = (draft, path, value) => {
  if (!path) return;
  const segments = parseSegments(path);
  if (segments.length === 0) return;
  let current2 = draft;
  for (let i = 0; i < segments.length - 1; i++) {
    const key = segments[i];
    const nextKey = segments[i + 1];
    const next = current2[key];
    if (next == null || typeof next !== "object") {
      current2[key] = typeof nextKey === "number" ? [] : {};
    }
    current2 = current2[key];
  }
  const last = segments[segments.length - 1];
  current2[last] = value;
};
var unsetAtPathMutating = (draft, path) => {
  if (!path) return;
  const segments = parseSegments(path);
  if (segments.length === 0) return;
  let current2 = draft;
  for (let i = 0; i < segments.length - 1; i++) {
    const key = segments[i];
    const next = current2[key];
    if (next == null || typeof next !== "object") {
      return;
    }
    current2 = next;
  }
  const last = segments[segments.length - 1];
  if (Array.isArray(current2) && typeof last === "number") {
    current2[last] = void 0;
    return;
  }
  if (current2 && typeof current2 === "object") {
    delete current2[last];
  }
};
var isPlainObject = (value) => typeof value === "object" && value !== null && !Array.isArray(value);
var mergeRuleErrors = (errors) => {
  if (errors.length === 0) return void 0;
  if (errors.length === 1) return errors[0];
  if (errors.every(isPlainObject)) {
    const merged = {};
    for (const patch of errors) {
      for (const key of Object.keys(patch)) {
        const incoming = patch[key];
        if (!(key in merged)) {
          merged[key] = incoming;
          continue;
        }
        const existing = merged[key];
        merged[key] = Array.isArray(existing) ? [...existing, incoming] : [existing, incoming];
      }
    }
    return merged;
  }
  return errors;
};
var toGraphTargets = (target) => {
  if (target.kind === "root") {
    return [];
  }
  if (target.kind === "field") {
    return [target.path];
  }
  if (target.kind === "list") {
    return [`${target.path}[]`];
  }
  const base = `${target.path}[]`;
  return [target.field ? `${base}.${target.field}` : base];
};
var extractIndexBindings = (requests) => {
  const map = /* @__PURE__ */ new Map();
  for (const req of requests) {
    if (req.target.kind !== "item") continue;
    const set2 = map.get(req.target.path) ?? /* @__PURE__ */ new Set();
    set2.add(req.target.index);
    map.set(req.target.path, set2);
  }
  return map;
};
var extractListBindings = (requests) => {
  const set2 = /* @__PURE__ */ new Set();
  for (const req of requests) {
    if (req.target.kind !== "list") continue;
    if (req.target.path) set2.add(req.target.path);
  }
  return set2;
};
var resolveMode = (requests) => {
  const priorities = {
    submit: 4,
    blur: 3,
    valueChange: 2,
    manual: 1
  };
  let best = "manual";
  let bestP = priorities[best];
  for (const r of requests) {
    const p = priorities[r.mode];
    if (p > bestP) {
      bestP = p;
      best = r.mode;
    }
  }
  return best;
};
var evalCheck = (entry, input, ctx) => {
  const rules = entry.meta.rules;
  const names = Object.keys(rules).sort();
  const results = [];
  for (const name of names) {
    const rule = rules[name];
    try {
      const out = typeof rule === "function" ? rule(input, ctx) : rule && typeof rule === "object" ? rule.validate(input, ctx) : void 0;
      if (out !== void 0) results.push(out);
    } catch {
    }
  }
  return mergeRuleErrors(results);
};
var validateInTransaction = (program, ctx, requests) => Effect14.sync(() => {
  if (requests.length === 0) return;
  const checks = program.entries.filter(
    (e) => e.kind === "check"
  );
  if (checks.length === 0) return;
  const hasRoot = requests.some((r) => r.target.kind === "root");
  const draft = ctx.getDraft();
  const scopesToValidate = (() => {
    if (hasRoot) {
      return new Set(checks.map((c) => c.fieldPath));
    }
    const graph = buildDependencyGraph(program);
    const set2 = /* @__PURE__ */ new Set();
    for (const req of requests) {
      for (const t of toGraphTargets(req.target)) {
        for (const node2 of reverseClosure(graph, t)) {
          set2.add(node2);
        }
      }
    }
    return set2;
  })();
  const selectedChecks = checks.filter((c) => scopesToValidate.has(c.fieldPath));
  if (selectedChecks.length === 0) return;
  const indexBindings = extractIndexBindings(requests);
  const listBindings = extractListBindings(requests);
  const mode = resolveMode(requests);
  const updates = [];
  const makeStepId = (fieldPath, index) => index === void 0 ? `check:${fieldPath}` : `check:${fieldPath}@${index}`;
  for (const check of selectedChecks) {
    const scopeFieldPath = check.fieldPath;
    if (scopeFieldPath.endsWith("[]")) {
      const listPath = scopeFieldPath.slice(0, -2);
      const indices = hasRoot || listBindings.has(listPath) ? (() => {
        const listValue = getAtPath2(draft, listPath);
        return Array.isArray(listValue) ? listValue.map((_, i) => i) : [];
      })() : Array.from(indexBindings.get(listPath) ?? []);
      for (const index of indices) {
        const boundValuePath = `${listPath}.${index}`;
        const input2 = getAtPath2(draft, boundValuePath);
        const nextError2 = evalCheck(check, input2, {
          mode,
          state: draft,
          scope: { fieldPath: scopeFieldPath, listPath, index }
        });
        const errorPath2 = `errors.${boundValuePath}`;
        const prev2 = getAtPath2(draft, errorPath2);
        if (!Object.is(prev2, nextError2)) {
          updates.push({
            errorPath: errorPath2,
            prev: prev2,
            next: nextError2,
            stepId: makeStepId(scopeFieldPath, index)
          });
        }
      }
      continue;
    }
    const input = scopeFieldPath === "$root" ? draft : getAtPath2(draft, scopeFieldPath);
    const nextError = evalCheck(check, input, {
      mode,
      state: draft,
      scope: { fieldPath: scopeFieldPath }
    });
    const errorPath = `errors.${scopeFieldPath}`;
    const prev = getAtPath2(draft, errorPath);
    if (!Object.is(prev, nextError)) {
      updates.push({
        errorPath,
        prev,
        next: nextError,
        stepId: makeStepId(scopeFieldPath)
      });
    }
  }
  if (updates.length === 0) {
    return;
  }
  const reason = "trait-check";
  const nextState = create(draft, (nextDraft) => {
    for (const u of updates) {
      if (u.next === void 0) {
        unsetAtPathMutating(nextDraft, u.errorPath);
      } else {
        setAtPathMutating2(nextDraft, u.errorPath, u.next);
      }
    }
  });
  ctx.setDraft(nextState);
  for (const u of updates) {
    ctx.recordPatch({
      path: u.errorPath,
      from: u.prev,
      to: u.next,
      reason,
      stepId: u.stepId
    });
  }
});

// ../logix-core/src/internal/state-trait/source.ts
import { Effect as Effect17, Fiber as Fiber2, Option as Option4 } from "https://esm.sh/effect@3.19.8";

// ../logix-core/src/Resource.ts
var Resource_exports = {};
__export(Resource_exports, {
  ResourceRegistryTag: () => ResourceRegistryTag,
  Snapshot: () => Snapshot,
  internal: () => internal2,
  keyHash: () => keyHash,
  layer: () => layer,
  make: () => make4
});
import { Context as Context7, Layer as Layer3 } from "https://esm.sh/effect@3.19.8";
var stableStringify = (value) => {
  const seen = /* @__PURE__ */ new WeakSet();
  const encode = (input) => {
    if (input === null) return null;
    if (typeof input === "string" || typeof input === "number" || typeof input === "boolean") {
      return input;
    }
    if (typeof input === "bigint") return input.toString();
    if (typeof input === "undefined") return "__undefined__";
    if (typeof input === "symbol") return `__symbol__:${String(input)}`;
    if (typeof input === "function") return "__function__";
    if (Array.isArray(input)) {
      return input.map((v) => encode(v));
    }
    if (input instanceof Date) {
      return `__date__:${input.toISOString()}`;
    }
    if (input instanceof Error) {
      return {
        _tag: "Error",
        name: input.name,
        message: input.message
      };
    }
    if (input && typeof input === "object") {
      const obj = input;
      if (seen.has(obj)) return "__cycle__";
      seen.add(obj);
      const record3 = input;
      const keys = Object.keys(record3).sort();
      const out = {};
      for (const k of keys) {
        out[k] = encode(record3[k]);
      }
      return out;
    }
    return String(input);
  };
  try {
    return JSON.stringify(encode(value));
  } catch {
    return String(value);
  }
};
var keyHash = (key) => stableStringify(key);
var Snapshot = {
  idle: () => ({
    status: "idle",
    keyHash: void 0,
    data: void 0,
    error: void 0
  }),
  loading: (params) => ({
    status: "loading",
    keyHash: params.keyHash,
    data: void 0,
    error: void 0
  }),
  success: (params) => ({
    status: "success",
    keyHash: params.keyHash,
    data: params.data,
    error: void 0
  }),
  error: (params) => ({
    status: "error",
    keyHash: params.keyHash,
    data: void 0,
    error: params.error
  })
};
var ResourceRegistryTag = class extends Context7.Tag(
  "@logix/core/ResourceRegistry"
)() {
};
var internal2 = {
  ResourceRegistryTag
};
var make4 = (spec) => spec;
var layer = (specs) => Layer3.succeed(
  ResourceRegistryTag,
  (() => {
    const map = /* @__PURE__ */ new Map();
    for (const spec of specs) {
      if (isDevEnv() && map.has(spec.id) && map.get(spec.id) !== spec) {
        throw new Error(
          `[Resource.layer] Duplicate resource id "${spec.id}" detected in the same runtime scope`
        );
      }
      map.set(spec.id, spec);
    }
    return { specs: map };
  })()
);

// ../logix-core/src/internal/runtime/core/ReplayLog.ts
import { Context as Context8, Effect as Effect16, Layer as Layer4 } from "https://esm.sh/effect@3.19.8";
var ReplayLog = class extends Context8.Tag("@logix/core/ReplayLog")() {
};
var snapshot = Effect16.gen(function* () {
  const log = yield* ReplayLog;
  return yield* log.snapshot;
});
var resetCursor = Effect16.gen(
  function* () {
    const log = yield* ReplayLog;
    yield* log.resetCursor;
  }
);

// ../logix-core/src/internal/state-trait/rowid.ts
var parseSegments2 = (path) => {
  if (!path) return [];
  return path.split(".").map(
    (seg) => /^[0-9]+$/.test(seg) ? Number(seg) : seg
  );
};
var getAtPath3 = (state, path) => {
  if (!path || state == null) return state;
  const segments = parseSegments2(path);
  let current2 = state;
  for (const seg of segments) {
    if (current2 == null) return void 0;
    if (typeof seg === "number") {
      current2 = Array.isArray(current2) ? current2[seg] : current2[String(seg)];
      continue;
    }
    current2 = current2[seg];
  }
  return current2;
};
var setAtPathMutating3 = (draft, path, value) => {
  if (!path) return;
  const segments = parseSegments2(path);
  if (segments.length === 0) return;
  let current2 = draft;
  for (let i = 0; i < segments.length - 1; i++) {
    const key = segments[i];
    const nextKey = segments[i + 1];
    const next = current2?.[key];
    if (next == null || typeof next !== "object") {
      current2[key] = typeof nextKey === "number" ? [] : {};
    }
    current2 = current2[key];
  }
  const last = segments[segments.length - 1];
  current2[last] = value;
};
var unsetAtPathMutating2 = (draft, path) => {
  if (!path) return;
  const segments = parseSegments2(path);
  if (segments.length === 0) return;
  let current2 = draft;
  for (let i = 0; i < segments.length - 1; i++) {
    const key = segments[i];
    const next = current2?.[key];
    if (next == null || typeof next !== "object") {
      return;
    }
    current2 = next;
  }
  const last = segments[segments.length - 1];
  if (Array.isArray(current2) && typeof last === "number") {
    current2[last] = void 0;
    return;
  }
  if (current2 && typeof current2 === "object") {
    delete current2[last];
  }
};
var parseListItemFieldPath = (fieldPath) => {
  const idx = fieldPath.indexOf("[]");
  if (idx < 0) return void 0;
  if (fieldPath.indexOf("[]", idx + 2) >= 0) return void 0;
  const listPath = fieldPath.slice(0, idx);
  const rest = fieldPath.slice(idx + 2);
  const itemPath = rest.startsWith(".") ? rest.slice(1) : rest;
  return { listPath, itemPath };
};
var toListItemValuePath = (listPath, index, itemPath) => itemPath ? `${listPath}.${index}.${itemPath}` : `${listPath}.${index}`;
var makeRowId = () => `${Date.now().toString(36)}-${Math.random().toString(36).slice(2)}`;
var readTrackBy = (item, trackBy) => {
  if (!item || typeof item !== "object") return void 0;
  const segments = trackBy.split(".");
  let current2 = item;
  for (const seg of segments) {
    if (current2 == null) return void 0;
    current2 = current2[seg];
  }
  return current2;
};
var didReorderByReference = (prevItems, nextItems) => {
  const buckets = /* @__PURE__ */ new Map();
  for (let i = 0; i < prevItems.length; i++) {
    const item = prevItems[i];
    const list2 = buckets.get(item) ?? [];
    list2.push(i);
    buckets.set(item, list2);
  }
  for (let nextIndex = 0; nextIndex < nextItems.length; nextIndex++) {
    const item = nextItems[nextIndex];
    const q = buckets.get(item);
    if (!q || q.length === 0) continue;
    const prevIndex = q.shift();
    if (prevIndex !== nextIndex) {
      return true;
    }
  }
  return false;
};
var hasStableTrackByKeys = (items, trackBy) => items.every((item) => readTrackBy(item, trackBy) !== void 0);
var isSameTrackBySequence = (prevItems, nextItems, trackBy) => {
  if (prevItems.length !== nextItems.length) return false;
  for (let i = 0; i < prevItems.length; i++) {
    if (!Object.is(
      readTrackBy(prevItems[i], trackBy),
      readTrackBy(nextItems[i], trackBy)
    )) {
      return false;
    }
  }
  return true;
};
var reconcileIds = (prev, nextItems, trackBy) => {
  if (!prev) {
    return {
      ids: nextItems.map(() => makeRowId()),
      removed: []
    };
  }
  if (prev.itemsRef === nextItems) {
    return {
      ids: prev.ids,
      removed: []
    };
  }
  const sameLength = prev.itemsRef.length === nextItems.length;
  if (sameLength) {
    if (trackBy) {
      const canUseKeys = hasStableTrackByKeys(prev.itemsRef, trackBy) && hasStableTrackByKeys(nextItems, trackBy);
      if (canUseKeys) {
        if (isSameTrackBySequence(prev.itemsRef, nextItems, trackBy)) {
          return {
            ids: prev.ids,
            removed: []
          };
        }
      } else {
        if (!didReorderByReference(prev.itemsRef, nextItems)) {
          return {
            ids: prev.ids,
            removed: []
          };
        }
      }
    } else if (!didReorderByReference(prev.itemsRef, nextItems)) {
      return {
        ids: prev.ids,
        removed: []
      };
    }
  }
  const keyOf = (item) => {
    if (!trackBy) return item;
    const k = readTrackBy(item, trackBy);
    return k !== void 0 ? k : item;
  };
  const buckets = /* @__PURE__ */ new Map();
  for (let i = 0; i < prev.itemsRef.length; i++) {
    const key = keyOf(prev.itemsRef[i]);
    const list2 = buckets.get(key) ?? [];
    list2.push(prev.ids[i]);
    buckets.set(key, list2);
  }
  const ids = [];
  for (let i = 0; i < nextItems.length; i++) {
    const key = keyOf(nextItems[i]);
    const list2 = buckets.get(key);
    if (list2 && list2.length > 0) {
      ids.push(list2.shift());
    } else {
      ids.push(makeRowId());
    }
  }
  const removed = [];
  for (const list2 of buckets.values()) {
    removed.push(...list2);
  }
  return { ids, removed };
};
var buildIndexById = (ids) => {
  const map = /* @__PURE__ */ new Map();
  for (let i = 0; i < ids.length; i++) {
    map.set(ids[i], i);
  }
  return map;
};
var RowIdStore = class {
  constructor() {
    this.lists = /* @__PURE__ */ new Map();
    this.removalListeners = /* @__PURE__ */ new Map();
  }
  onRemoved(listPath, listener) {
    const set2 = this.removalListeners.get(listPath) ?? /* @__PURE__ */ new Set();
    set2.add(listener);
    this.removalListeners.set(listPath, set2);
    return () => {
      const current2 = this.removalListeners.get(listPath);
      if (!current2) return;
      current2.delete(listener);
      if (current2.size === 0) this.removalListeners.delete(listPath);
    };
  }
  getRowId(listPath, index) {
    const state = this.lists.get(listPath);
    return state ? state.ids[index] : void 0;
  }
  getIndex(listPath, rowId) {
    const state = this.lists.get(listPath);
    if (!state) return void 0;
    return state.indexById.get(rowId);
  }
  /**
   * ensureList：
   * - 让指定 listPath 的 RowID 映射与当前 items 对齐；
   * - 返回最新的 ids（index -> RowId）。
   */
  ensureList(listPath, items, trackBy) {
    const prev = this.lists.get(listPath);
    const { ids, removed } = reconcileIds(prev, items, trackBy ?? prev?.trackBy);
    const next = {
      itemsRef: items,
      ids,
      indexById: buildIndexById(ids),
      trackBy: trackBy ?? prev?.trackBy
    };
    this.lists.set(listPath, next);
    if (removed.length > 0) {
      const listeners2 = this.removalListeners.get(listPath);
      if (listeners2 && listeners2.size > 0) {
        for (const rowId of removed) {
          for (const fn of listeners2) {
            try {
              fn(rowId);
            } catch {
            }
          }
        }
      }
    }
    return ids;
  }
  /**
   * updateAll：
   * - 在每次提交后对齐所有已知 list 的 RowID 映射；
   * - configs 来自 StateTraitProgram.spec 中的 list 声明（可携带 trackBy）。
   */
  updateAll(state, configs) {
    for (const cfg of configs) {
      const value = getAtPath3(state, cfg.path);
      const items = Array.isArray(value) ? value : [];
      this.ensureList(cfg.path, items, cfg.trackBy);
    }
  }
};
var collectListConfigs = (spec) => {
  const configs = [];
  for (const key in spec) {
    if (!Object.prototype.hasOwnProperty.call(spec, key)) continue;
    const raw = spec[key];
    if (!raw || typeof raw !== "object") continue;
    const tag2 = raw._tag;
    if (tag2 !== "StateTraitList") continue;
    const trackBy = raw.identityHint?.trackBy;
    configs.push({
      path: key,
      trackBy: typeof trackBy === "string" ? trackBy : void 0
    });
  }
  return configs;
};

// ../logix-core/src/internal/state-trait/source.ts
var makePatch2 = (path, from2, to, reason, stepId) => ({
  path,
  from: from2,
  to,
  reason,
  stepId
});
var depsTraceSettled2 = /* @__PURE__ */ new Set();
var depsMismatchEmitted2 = /* @__PURE__ */ new Set();
var formatList2 = (items, limit = 10) => {
  if (items.length === 0) return "";
  if (items.length <= limit) return items.join(", ");
  return `${items.slice(0, limit).join(", ")}, \u2026(+${items.length - limit})`;
};
var emitDepsMismatch2 = (params) => {
  const key = `${params.runtimeId ?? "unknown"}::${params.kind}::${params.fieldPath}`;
  if (depsMismatchEmitted2.has(key)) return Effect17.void;
  depsMismatchEmitted2.add(key);
  return record({
    type: "diagnostic",
    moduleId: params.moduleId,
    runtimeId: params.runtimeId,
    code: "state_trait::deps_mismatch",
    severity: "warning",
    message: `[deps] ${params.kind} "${params.fieldPath}" declared=[${formatList2(params.diff.declared)}] reads=[${formatList2(params.diff.reads)}] missing=[${formatList2(params.diff.missing)}] unused=[${formatList2(params.diff.unused)}]`,
    hint: 'deps \u662F\u552F\u4E00\u4F9D\u8D56\u4E8B\u5B9E\u6E90\uFF1A\u540E\u7EED\u589E\u91CF\u8C03\u5EA6/\u53CD\u5411\u95ED\u5305/\u6027\u80FD\u4F18\u5316\u90FD\u53EA\u8BA4 deps\u3002\u8BF7\u5C06 deps \u4E0E\u5B9E\u9645\u8BFB\u53D6\u4FDD\u6301\u4E00\u81F4\uFF1B\u82E5\u786E\u5B9E\u4F9D\u8D56\u6574\u68F5\u5BF9\u8C61\uFF0C\u53EF\u58F0\u660E\u66F4\u7C97\u7C92\u5EA6\u7684 deps\uFF08\u4F8B\u5982 "profile"\uFF09\u4EE5\u8986\u76D6\u5B50\u5B57\u6BB5\u8BFB\u53D6\u3002',
    kind: `deps_mismatch:${params.kind}`
  });
};
var getMiddlewareStack3 = () => Effect17.serviceOption(EffectOpMiddlewareTag).pipe(
  Effect17.map(
    (maybe) => Option4.isSome(maybe) ? maybe.value.stack : []
  )
);
var recordTraitPatch = (bound, patch) => {
  const record3 = bound.__recordStatePatch;
  if (record3) {
    record3(patch);
  }
};
var recordReplayEvent = (bound, event) => {
  const record3 = bound.__recordReplayEvent;
  if (record3) {
    record3(event);
  }
};
var setSnapshotInTxn = (bound, fieldPath, next, reason, stepId, traitNodeId) => Effect17.gen(function* () {
  let wrote = false;
  yield* bound.state.mutate((draft) => {
    const prev = getAtPath3(draft, fieldPath);
    if (Object.is(prev, next)) return;
    wrote = true;
    setAtPathMutating3(draft, fieldPath, next);
    recordTraitPatch(bound, {
      path: fieldPath,
      from: prev,
      to: next,
      reason,
      stepId,
      traitNodeId
    });
  });
  return wrote;
});
var writebackIfCurrentKeyHash = (bound, fieldPath, keyHash2, next, reason, stepId, traitNodeId, replayEvent) => Effect17.gen(function* () {
  let wrote = false;
  yield* bound.state.mutate((draft) => {
    const current2 = getAtPath3(draft, fieldPath);
    const currentKeyHash = current2 && typeof current2 === "object" ? current2.keyHash : void 0;
    if (currentKeyHash !== keyHash2) return;
    const prev = current2;
    if (Object.is(prev, next)) return;
    wrote = true;
    setAtPathMutating3(draft, fieldPath, next);
    if (replayEvent) {
      recordReplayEvent(bound, replayEvent);
    }
    recordTraitPatch(bound, {
      path: fieldPath,
      from: prev,
      to: next,
      reason,
      stepId,
      traitNodeId
    });
  });
  return wrote;
});
var syncIdleInTransaction = (program, ctx) => Effect17.sync(() => {
  const draft = ctx.getDraft();
  const updates = [];
  for (const entry of program.entries) {
    if (entry.kind !== "source") continue;
    const fieldPath = entry.fieldPath;
    const listItem = parseListItemFieldPath(fieldPath);
    if (listItem) {
      const listValue = getAtPath3(draft, listItem.listPath);
      const items = Array.isArray(listValue) ? listValue : [];
      for (let index = 0; index < items.length; index++) {
        const item = items[index];
        let key2;
        try {
          key2 = entry.meta.key(item);
        } catch {
          continue;
        }
        if (key2 !== void 0) continue;
        const concretePath = toListItemValuePath(
          listItem.listPath,
          index,
          listItem.itemPath
        );
        const prev2 = getAtPath3(draft, concretePath);
        const prevStatus2 = prev2 && typeof prev2 === "object" ? prev2.status : void 0;
        if (prevStatus2 === "idle") {
          const data = prev2?.data;
          const error = prev2?.error;
          if (data === void 0 && error === void 0) {
            continue;
          }
        }
        updates.push({ fieldPath: concretePath, prev: prev2 });
      }
      continue;
    }
    let key;
    try {
      key = entry.meta.key(draft);
    } catch {
      continue;
    }
    if (key !== void 0) continue;
    const prev = getAtPath3(draft, fieldPath);
    const prevStatus = prev && typeof prev === "object" ? prev.status : void 0;
    if (prevStatus === "idle") {
      const data = prev?.data;
      const error = prev?.error;
      if (data === void 0 && error === void 0) {
        continue;
      }
    }
    updates.push({ fieldPath, prev });
  }
  if (updates.length === 0) return;
  const reason = "source:idle";
  const nextDraft = create(draft, (next) => {
    for (const u of updates) {
      setAtPathMutating3(next, u.fieldPath, Snapshot.idle());
    }
  });
  ctx.setDraft(nextDraft);
  for (const u of updates) {
    ctx.recordPatch(
      makePatch2(
        u.fieldPath,
        u.prev,
        Snapshot.idle(),
        reason,
        `source:${u.fieldPath}:idle`
      )
    );
  }
});
var installSourceRefresh = (bound, step, entry) => {
  if (!step.targetFieldPath) return Effect17.void;
  const fieldPath = step.targetFieldPath;
  const resourceId = step.resourceId ?? entry.meta.resource;
  const listItem = parseListItemFieldPath(fieldPath);
  const register = bound.__registerSourceRefresh;
  if (!register) {
    return Effect17.void;
  }
  const recordSnapshot = (replayMode, replayLog, input) => {
    if (!replayLog) return Effect17.void;
    if (replayMode !== "live") return Effect17.void;
    const event = input && typeof input === "object" && input._tag === "ResourceSnapshot" ? input : {
      _tag: "ResourceSnapshot",
      resourceId,
      fieldPath: input.fieldPath,
      keyHash: input.keyHash,
      phase: input.phase,
      snapshot: input.snapshot,
      timestamp: Date.now(),
      moduleId: input.moduleId,
      runtimeId: input.runtimeId
    };
    return replayLog.record(event);
  };
  if (listItem) {
    const store = bound.__rowIdStore;
    if (!store) {
      return Effect17.void;
    }
    const listPath = listItem.listPath;
    const itemPath = listItem.itemPath;
    if (!itemPath) {
      return Effect17.void;
    }
    const concurrency2 = entry.meta.concurrency;
    const mode2 = concurrency2 ?? "switch";
    const inFlight2 = /* @__PURE__ */ new Map();
    const trailing2 = /* @__PURE__ */ new Map();
    let gen2 = 0;
    store.onRemoved(listPath, (rowId) => {
      trailing2.delete(rowId);
      inFlight2.delete(rowId);
    });
    const setSnapshotForRowInTxn = (rowId, next, reason, stepId) => Effect17.gen(function* () {
      let wrotePath;
      yield* bound.state.mutate((draft) => {
        const index = store.getIndex(listPath, rowId);
        if (index === void 0) return;
        const concretePath = toListItemValuePath(listPath, index, itemPath);
        const prev = getAtPath3(draft, concretePath);
        if (Object.is(prev, next)) return;
        wrotePath = concretePath;
        setAtPathMutating3(draft, concretePath, next);
        recordTraitPatch(bound, {
          path: concretePath,
          from: prev,
          to: next,
          reason,
          stepId,
          traitNodeId: step.debugInfo?.graphNodeId
        });
      });
      return wrotePath;
    });
    const writebackIfCurrentKeyHashForRow = (rowId, keyHash2, next, reason, stepId, phase) => Effect17.gen(function* () {
      let wrotePath;
      yield* bound.state.mutate((draft) => {
        const index = store.getIndex(listPath, rowId);
        if (index === void 0) return;
        const concretePath = toListItemValuePath(listPath, index, itemPath);
        const current2 = getAtPath3(draft, concretePath);
        const currentKeyHash = current2 && typeof current2 === "object" ? current2.keyHash : void 0;
        if (currentKeyHash !== keyHash2) return;
        const prev = current2;
        if (Object.is(prev, next)) return;
        wrotePath = concretePath;
        setAtPathMutating3(draft, concretePath, next);
        if (phase) {
          recordReplayEvent(bound, {
            _tag: "ResourceSnapshot",
            resourceId,
            fieldPath: concretePath,
            keyHash: keyHash2,
            phase,
            snapshot: next,
            timestamp: Date.now(),
            moduleId: bound.__moduleId,
            runtimeId: bound.__runtimeId
          });
        }
        recordTraitPatch(bound, {
          path: concretePath,
          from: prev,
          to: next,
          reason,
          stepId,
          traitNodeId: step.debugInfo?.graphNodeId
        });
      });
      return wrotePath;
    });
    const startFetch2 = (rowId, key, keyHash2, replayMode, replayLog) => Effect17.gen(function* () {
      const moduleId = bound.__moduleId;
      const runtimeId = bound.__runtimeId;
      const indexForLog = store.getIndex(listPath, rowId);
      const logFieldPath = indexForLog === void 0 ? void 0 : toListItemValuePath(listPath, indexForLog, itemPath);
      let loadingSnapshot = Snapshot.loading({ keyHash: keyHash2 });
      if (replayMode === "replay" && replayLog && logFieldPath) {
        const replayLoading = yield* replayLog.consumeNextResourceSnapshot({
          resourceId,
          fieldPath: logFieldPath,
          keyHash: keyHash2,
          phase: "loading"
        });
        if (replayLoading) {
          loadingSnapshot = replayLoading.snapshot;
        }
      }
      const wroteLoadingPath = yield* setSnapshotForRowInTxn(
        rowId,
        loadingSnapshot,
        "source:loading",
        `source:${fieldPath}:${rowId}:loading`
      );
      if (wroteLoadingPath) {
        const event = {
          _tag: "ResourceSnapshot",
          resourceId,
          fieldPath: wroteLoadingPath,
          keyHash: keyHash2,
          phase: "loading",
          snapshot: loadingSnapshot,
          timestamp: Date.now(),
          moduleId,
          runtimeId
        };
        recordReplayEvent(bound, event);
        yield* recordSnapshot(replayMode, replayLog, event);
      }
      const io = Effect17.gen(function* () {
        if (replayMode === "replay" && replayLog) {
          yield* Effect17.yieldNow();
          const consumePath = wroteLoadingPath ?? logFieldPath;
          if (!consumePath) return yield* Effect17.void;
          const replayed = yield* replayLog.consumeNextResourceSnapshot({
            resourceId,
            fieldPath: consumePath,
            keyHash: keyHash2
          });
          if (!replayed) return yield* Effect17.void;
          if (replayed.phase === "success") {
            yield* writebackIfCurrentKeyHashForRow(
              rowId,
              keyHash2,
              replayed.snapshot,
              "source:success",
              `source:${fieldPath}:${rowId}:success`,
              "success"
            );
          } else if (replayed.phase === "error") {
            yield* writebackIfCurrentKeyHashForRow(
              rowId,
              keyHash2,
              replayed.snapshot,
              "source:error",
              `source:${fieldPath}:${rowId}:error`,
              "error"
            );
          }
          return yield* Effect17.void;
        }
        const stack = yield* getMiddlewareStack3();
        const registryOpt = yield* Effect17.serviceOption(internal2.ResourceRegistryTag);
        const registry = Option4.isSome(registryOpt) ? registryOpt.value : void 0;
        const spec = registry?.specs.get(resourceId);
        if (!spec) {
          return yield* Effect17.void;
        }
        const loadEffect = spec.load(key);
        const op = make({
          kind: "service",
          name: resourceId,
          effect: loadEffect,
          meta: {
            moduleId,
            runtimeId,
            fieldPath,
            resourceId,
            key,
            keyHash: keyHash2,
            rowId,
            traitNodeId: step.debugInfo?.graphNodeId,
            stepId: step.id
          }
        });
        const exit = yield* Effect17.exit(run(op, stack));
        if (exit._tag === "Success") {
          const successSnapshot = Snapshot.success({ keyHash: keyHash2, data: exit.value });
          const wroteSuccessPath = yield* writebackIfCurrentKeyHashForRow(
            rowId,
            keyHash2,
            successSnapshot,
            "source:success",
            `source:${fieldPath}:${rowId}:success`,
            "success"
          );
          if (wroteSuccessPath) {
            yield* recordSnapshot(replayMode, replayLog, {
              _tag: "ResourceSnapshot",
              resourceId,
              fieldPath: wroteSuccessPath,
              keyHash: keyHash2,
              phase: "success",
              snapshot: successSnapshot,
              timestamp: Date.now(),
              moduleId,
              runtimeId
            });
          }
        } else {
          const errorSnapshot = Snapshot.error({ keyHash: keyHash2, error: exit.cause });
          const wroteErrorPath = yield* writebackIfCurrentKeyHashForRow(
            rowId,
            keyHash2,
            errorSnapshot,
            "source:error",
            `source:${fieldPath}:${rowId}:error`,
            "error"
          );
          if (wroteErrorPath) {
            yield* recordSnapshot(replayMode, replayLog, {
              _tag: "ResourceSnapshot",
              resourceId,
              fieldPath: wroteErrorPath,
              keyHash: keyHash2,
              phase: "error",
              snapshot: errorSnapshot,
              timestamp: Date.now(),
              moduleId,
              runtimeId
            });
          }
        }
      }).pipe(Effect17.catchAllCause(() => Effect17.void));
      const fiber = yield* Effect17.forkScoped(io);
      const myGen = gen2 += 1;
      inFlight2.set(rowId, { gen: myGen, fiber, keyHash: keyHash2 });
      yield* Effect17.forkScoped(
        Fiber2.await(fiber).pipe(
          Effect17.zipRight(
            Effect17.sync(() => {
              const current2 = inFlight2.get(rowId);
              if (current2 && current2.gen === myGen) {
                inFlight2.delete(rowId);
              }
            })
          ),
          Effect17.zipRight(
            mode2 === "exhaust-trailing" && trailing2.has(rowId) ? Effect17.gen(function* () {
              const next = trailing2.get(rowId);
              trailing2.delete(rowId);
              if (next) {
                yield* startFetch2(
                  rowId,
                  next.key,
                  next.keyHash,
                  replayMode,
                  replayLog
                );
              }
            }) : Effect17.void
          ),
          Effect17.catchAllCause(() => Effect17.void)
        )
      );
    });
    register(
      fieldPath,
      (state) => Effect17.gen(function* () {
        const moduleId = bound.__moduleId;
        const runtimeId = bound.__runtimeId;
        const replayModeOpt = yield* Effect17.serviceOption(ReplayModeConfigTag);
        const replayMode = Option4.isSome(replayModeOpt) ? replayModeOpt.value.mode : "live";
        const replayLogOpt = yield* Effect17.serviceOption(ReplayLog);
        const replayLog = Option4.isSome(replayLogOpt) ? replayLogOpt.value : void 0;
        const listValue = getAtPath3(state, listPath);
        const items = Array.isArray(listValue) ? listValue : [];
        const ids = store.ensureList(listPath, items);
        const traceKey = `${runtimeId ?? "unknown"}::source::${fieldPath}`;
        if (isDevEnv() && !depsTraceSettled2.has(traceKey)) {
          depsTraceSettled2.add(traceKey);
          try {
            const sample = items[0];
            if (sample !== void 0) {
              const traced = trace((s) => entry.meta.key(s), sample);
              const prefixedReads = traced.reads.map(
                (r) => r ? `${listPath}[].${r}` : `${listPath}[]`
              );
              const diff = diffDeps(
                entry.meta.deps ?? [],
                prefixedReads
              );
              if (diff) {
                yield* emitDepsMismatch2({
                  moduleId,
                  runtimeId,
                  kind: "source",
                  fieldPath,
                  diff
                });
              }
            }
          } catch {
          }
        }
        for (let index = 0; index < items.length; index++) {
          const rowId = ids[index];
          if (!rowId) continue;
          const concretePath = toListItemValuePath(listPath, index, itemPath);
          const prevSnapshot = getAtPath3(state, concretePath);
          let key;
          try {
            key = entry.meta.key(items[index]);
          } catch {
            key = void 0;
          }
          const current2 = inFlight2.get(rowId);
          if (key === void 0) {
            trailing2.delete(rowId);
            inFlight2.delete(rowId);
            if (prevSnapshot && typeof prevSnapshot === "object" && prevSnapshot.status === "idle" && prevSnapshot.data === void 0 && prevSnapshot.error === void 0) {
              continue;
            }
            const idleSnapshot = Snapshot.idle();
            const wroteIdlePath = yield* setSnapshotForRowInTxn(
              rowId,
              idleSnapshot,
              "source:idle",
              `source:${fieldPath}:${rowId}:idle`
            );
            if (wroteIdlePath) {
              const event = {
                _tag: "ResourceSnapshot",
                resourceId,
                fieldPath: wroteIdlePath,
                keyHash: void 0,
                phase: "idle",
                snapshot: idleSnapshot,
                timestamp: Date.now(),
                moduleId,
                runtimeId
              };
              recordReplayEvent(bound, event);
              yield* recordSnapshot(replayMode, replayLog, event);
            }
            continue;
          }
          const h = keyHash(key);
          if (current2 && current2.keyHash === h) {
            continue;
          }
          const prevKeyHash = prevSnapshot && typeof prevSnapshot === "object" ? prevSnapshot.keyHash : void 0;
          if (!current2 && prevKeyHash === h) {
            continue;
          }
          if (mode2 === "exhaust-trailing" && current2) {
            trailing2.set(rowId, { key, keyHash: h });
            const loadingSnapshot = Snapshot.loading({ keyHash: h });
            const wroteLoadingPath = yield* setSnapshotForRowInTxn(
              rowId,
              loadingSnapshot,
              "source:loading",
              `source:${fieldPath}:${rowId}:loading`
            );
            if (wroteLoadingPath) {
              const event = {
                _tag: "ResourceSnapshot",
                resourceId,
                fieldPath: wroteLoadingPath,
                keyHash: h,
                phase: "loading",
                snapshot: loadingSnapshot,
                timestamp: Date.now(),
                moduleId,
                runtimeId
              };
              recordReplayEvent(bound, event);
              yield* recordSnapshot(replayMode, replayLog, event);
            }
            continue;
          }
          if (mode2 === "switch" && current2) {
            trailing2.delete(rowId);
            inFlight2.delete(rowId);
          }
          yield* startFetch2(rowId, key, h, replayMode, replayLog);
        }
      })
    );
    return Effect17.void;
  }
  let inFlight;
  let gen = 0;
  let trailing;
  const concurrency = entry.meta.concurrency;
  const mode = concurrency ?? "switch";
  const startFetch = (key, keyHash2, replayMode, replayLog) => Effect17.gen(function* () {
    const moduleId = bound.__moduleId;
    const runtimeId = bound.__runtimeId;
    let loadingSnapshot = Snapshot.loading({ keyHash: keyHash2 });
    if (replayMode === "replay" && replayLog) {
      const replayLoading = yield* replayLog.consumeNextResourceSnapshot({
        resourceId,
        fieldPath,
        keyHash: keyHash2,
        phase: "loading"
      });
      if (replayLoading) {
        loadingSnapshot = replayLoading.snapshot;
      }
    }
    const wroteLoading = yield* setSnapshotInTxn(
      bound,
      fieldPath,
      loadingSnapshot,
      "source:loading",
      `source:${fieldPath}:loading`,
      step.debugInfo?.graphNodeId
    );
    if (wroteLoading) {
      const event = {
        _tag: "ResourceSnapshot",
        resourceId,
        fieldPath,
        keyHash: keyHash2,
        phase: "loading",
        snapshot: loadingSnapshot,
        timestamp: Date.now(),
        moduleId,
        runtimeId
      };
      recordReplayEvent(bound, event);
      yield* recordSnapshot(replayMode, replayLog, event);
    }
    const io = Effect17.gen(function* () {
      if (replayMode === "replay" && replayLog) {
        yield* Effect17.yieldNow();
        const replayed = yield* replayLog.consumeNextResourceSnapshot({
          resourceId,
          fieldPath,
          keyHash: keyHash2
        });
        if (!replayed) return yield* Effect17.void;
        if (replayed.phase === "success") {
          const event = {
            _tag: "ResourceSnapshot",
            resourceId,
            fieldPath,
            keyHash: keyHash2,
            phase: "success",
            snapshot: replayed.snapshot,
            timestamp: Date.now(),
            moduleId,
            runtimeId
          };
          yield* writebackIfCurrentKeyHash(
            bound,
            fieldPath,
            keyHash2,
            replayed.snapshot,
            "source:success",
            `source:${fieldPath}:success`,
            step.debugInfo?.graphNodeId,
            event
          );
        } else if (replayed.phase === "error") {
          const event = {
            _tag: "ResourceSnapshot",
            resourceId,
            fieldPath,
            keyHash: keyHash2,
            phase: "error",
            snapshot: replayed.snapshot,
            timestamp: Date.now(),
            moduleId,
            runtimeId
          };
          yield* writebackIfCurrentKeyHash(
            bound,
            fieldPath,
            keyHash2,
            replayed.snapshot,
            "source:error",
            `source:${fieldPath}:error`,
            step.debugInfo?.graphNodeId,
            event
          );
        }
        return yield* Effect17.void;
      }
      const stack = yield* getMiddlewareStack3();
      const registryOpt = yield* Effect17.serviceOption(
        internal2.ResourceRegistryTag
      );
      const registry = Option4.isSome(registryOpt) ? registryOpt.value : void 0;
      const spec = registry?.specs.get(resourceId);
      if (!spec) {
        return yield* Effect17.void;
      }
      const loadEffect = spec.load(key);
      const op = make({
        kind: "service",
        name: resourceId,
        effect: loadEffect,
        meta: {
          moduleId,
          runtimeId,
          fieldPath,
          resourceId,
          key,
          keyHash: keyHash2,
          traitNodeId: step.debugInfo?.graphNodeId,
          stepId: step.id
        }
      });
      const exit = yield* Effect17.exit(run(op, stack));
      if (exit._tag === "Success") {
        const successSnapshot = Snapshot.success({ keyHash: keyHash2, data: exit.value });
        const event = {
          _tag: "ResourceSnapshot",
          resourceId,
          fieldPath,
          keyHash: keyHash2,
          phase: "success",
          snapshot: successSnapshot,
          timestamp: Date.now(),
          moduleId,
          runtimeId
        };
        const wroteSuccess = yield* writebackIfCurrentKeyHash(
          bound,
          fieldPath,
          keyHash2,
          successSnapshot,
          "source:success",
          `source:${fieldPath}:success`,
          step.debugInfo?.graphNodeId,
          event
        );
        if (wroteSuccess) {
          yield* recordSnapshot(replayMode, replayLog, event);
        }
      } else {
        const errorSnapshot = Snapshot.error({ keyHash: keyHash2, error: exit.cause });
        const event = {
          _tag: "ResourceSnapshot",
          resourceId,
          fieldPath,
          keyHash: keyHash2,
          phase: "error",
          snapshot: errorSnapshot,
          timestamp: Date.now(),
          moduleId,
          runtimeId
        };
        const wroteError = yield* writebackIfCurrentKeyHash(
          bound,
          fieldPath,
          keyHash2,
          errorSnapshot,
          "source:error",
          `source:${fieldPath}:error`,
          step.debugInfo?.graphNodeId,
          event
        );
        if (wroteError) {
          yield* recordSnapshot(replayMode, replayLog, event);
        }
      }
    }).pipe(
      Effect17.catchAllCause(() => Effect17.void)
    );
    const fiber = yield* Effect17.forkScoped(io);
    const myGen = gen += 1;
    inFlight = { gen: myGen, fiber, keyHash: keyHash2 };
    yield* Effect17.forkScoped(
      Fiber2.await(fiber).pipe(
        Effect17.zipRight(
          Effect17.sync(() => {
            if (inFlight && inFlight.gen === myGen) {
              inFlight = void 0;
            }
          })
        ),
        Effect17.zipRight(
          mode === "exhaust-trailing" && trailing ? Effect17.gen(function* () {
            const next = trailing;
            trailing = void 0;
            if (next) {
              yield* startFetch(
                next.key,
                next.keyHash,
                replayMode,
                replayLog
              );
            }
          }) : Effect17.void
        ),
        Effect17.catchAllCause(() => Effect17.void)
      )
    );
  });
  register(
    fieldPath,
    (state) => Effect17.gen(function* () {
      const moduleId = bound.__moduleId;
      const runtimeId = bound.__runtimeId;
      const replayModeOpt = yield* Effect17.serviceOption(ReplayModeConfigTag);
      const replayMode = Option4.isSome(replayModeOpt) ? replayModeOpt.value.mode : "live";
      const replayLogOpt = yield* Effect17.serviceOption(ReplayLog);
      const replayLog = Option4.isSome(replayLogOpt) ? replayLogOpt.value : void 0;
      let key;
      try {
        key = entry.meta.key(state);
      } catch {
        key = void 0;
      }
      const traceKey = `${runtimeId ?? "unknown"}::source::${fieldPath}`;
      if (isDevEnv() && !depsTraceSettled2.has(traceKey)) {
        depsTraceSettled2.add(traceKey);
        try {
          const traced = trace((s) => entry.meta.key(s), state);
          const diff = diffDeps(
            entry.meta.deps ?? [],
            traced.reads
          );
          if (diff) {
            yield* emitDepsMismatch2({
              moduleId,
              runtimeId,
              kind: "source",
              fieldPath,
              diff
            });
          }
        } catch {
        }
      }
      if (key === void 0) {
        if (inFlight) {
          yield* Fiber2.interruptFork(inFlight.fiber);
          inFlight = void 0;
        }
        trailing = void 0;
        const idleSnapshot = Snapshot.idle();
        const wroteIdle = yield* setSnapshotInTxn(
          bound,
          fieldPath,
          idleSnapshot,
          "source:idle",
          `source:${fieldPath}:idle`,
          step.debugInfo?.graphNodeId
        );
        if (wroteIdle) {
          const event = {
            _tag: "ResourceSnapshot",
            resourceId,
            fieldPath,
            keyHash: void 0,
            phase: "idle",
            snapshot: idleSnapshot,
            timestamp: Date.now(),
            moduleId,
            runtimeId
          };
          recordReplayEvent(bound, event);
          yield* recordSnapshot(replayMode, replayLog, event);
        }
        return;
      }
      const h = keyHash(key);
      if (mode === "exhaust-trailing" && inFlight) {
        trailing = { key, keyHash: h };
        const loadingSnapshot = Snapshot.loading({ keyHash: h });
        const wroteLoading = yield* setSnapshotInTxn(
          bound,
          fieldPath,
          loadingSnapshot,
          "source:loading",
          `source:${fieldPath}:loading`,
          step.debugInfo?.graphNodeId
        );
        if (wroteLoading) {
          const event = {
            _tag: "ResourceSnapshot",
            resourceId,
            fieldPath,
            keyHash: h,
            phase: "loading",
            snapshot: loadingSnapshot,
            timestamp: Date.now(),
            moduleId,
            runtimeId
          };
          recordReplayEvent(bound, event);
          yield* recordSnapshot(replayMode, replayLog, event);
        }
        return;
      }
      if (mode === "switch" && inFlight) {
        yield* Fiber2.interruptFork(inFlight.fiber);
        inFlight = void 0;
        trailing = void 0;
      }
      yield* startFetch(key, h, replayMode, replayLog);
    })
  );
  return Effect17.void;
};

// ../logix-core/src/internal/runtime/ModuleRuntime.ts
var runtimeRegistry = /* @__PURE__ */ new WeakMap();
var runtimeByInstanceKey = /* @__PURE__ */ new Map();
var registerRuntime = (tag2, runtime) => {
  runtimeRegistry.set(
    tag2,
    runtime
  );
};
var unregisterRuntime = (tag2) => {
  runtimeRegistry.delete(tag2);
};
var getRuntimeByModuleAndInstance = (moduleId, instanceId) => runtimeByInstanceKey.get(
  `${moduleId}::${instanceId}`
);
var createPhaseRef = () => ({ current: "run" });
var getMiddlewareStack4 = () => Effect18.serviceOption(EffectOpMiddlewareTag).pipe(
  Effect18.map(
    (maybe) => Option5.isSome(maybe) ? maybe.value.stack : []
  )
);
var make5 = (initialState, options = {}) => {
  const program = Effect18.gen(function* () {
    const stateRef = options.createState ? yield* options.createState : yield* SubscriptionRef3.make(initialState);
    const actionHub = options.createActionHub ? yield* options.createActionHub : yield* PubSub.unbounded();
    const lifecycle = yield* makeLifecycleManager;
    const id = Math.random().toString(36).slice(2);
    const runtimeConfigOpt = yield* Effect18.serviceOption(StateTransactionConfigTag);
    const runtimeInstrumentation = Option5.isSome(runtimeConfigOpt) ? runtimeConfigOpt.value.instrumentation : void 0;
    const runtimeTraitConvergeBudgetMs = Option5.isSome(runtimeConfigOpt) ? runtimeConfigOpt.value.traitConvergeBudgetMs : void 0;
    const runtimeTraitConvergeMode = Option5.isSome(runtimeConfigOpt) ? runtimeConfigOpt.value.traitConvergeMode : void 0;
    const instrumentation = options.stateTransaction?.instrumentation ?? runtimeInstrumentation ?? getDefaultStateTxnInstrumentation();
    const normalizeBudgetMs = (ms) => typeof ms === "number" && Number.isFinite(ms) && ms > 0 ? ms : void 0;
    const traitConvergeBudgetMs = normalizeBudgetMs(options.stateTransaction?.traitConvergeBudgetMs) ?? normalizeBudgetMs(runtimeTraitConvergeBudgetMs) ?? 200;
    const normalizeConvergeMode = (mode) => mode === "full" || mode === "dirty" ? mode : void 0;
    const traitConvergeMode = normalizeConvergeMode(options.stateTransaction?.traitConvergeMode) ?? normalizeConvergeMode(runtimeTraitConvergeMode) ?? "full";
    const txnContext = makeContext({
      moduleId: options.moduleId,
      runtimeId: id,
      instrumentation
    });
    let stateTraitProgram;
    let stateTraitListConfigs = [];
    const rowIdStore = new RowIdStore();
    const maxTxnHistory = 500;
    const txnHistory = [];
    const txnById = /* @__PURE__ */ new Map();
    const txnQueue = yield* Queue.unbounded();
    yield* Effect18.forkScoped(
      Effect18.forever(
        Effect18.gen(function* () {
          const eff = yield* Queue.take(txnQueue);
          yield* eff;
        })
      )
    );
    const enqueueTransaction = (eff) => Effect18.gen(function* () {
      const done = yield* Deferred.make();
      const task = eff.pipe(
        Effect18.exit,
        Effect18.flatMap((exit2) => Deferred.succeed(done, exit2)),
        Effect18.asVoid
      );
      yield* Queue.offer(txnQueue, task);
      const exit = yield* Deferred.await(done);
      return yield* Exit.match(exit, {
        onFailure: (cause) => Effect18.failCause(cause),
        onSuccess: (value) => Effect18.succeed(value)
      });
    });
    const makeLinkId = () => `${Date.now().toString(36)}-${Math.random().toString(36).slice(2)}`;
    const runOperation = (kind, name, params, eff) => Effect18.gen(function* () {
      const stack = yield* getMiddlewareStack4();
      const currentTxnId2 = txnContext.current?.txnId;
      const existingLinkId = yield* FiberRef5.get(currentLinkId);
      const linkId = existingLinkId ?? makeLinkId();
      const runtimeLabel2 = yield* FiberRef5.get(currentRuntimeLabel);
      const baseMeta = {
        ...params.meta ?? {},
        // Runtime 自动补齐
        moduleId: params.meta?.moduleId ?? options.moduleId,
        runtimeId: params.meta?.runtimeId ?? id,
        runtimeLabel: params.meta?.runtimeLabel ?? runtimeLabel2,
        txnId: params.meta?.txnId ?? currentTxnId2,
        linkId
      };
      const op = make({
        kind,
        name,
        payload: params.payload,
        effect: eff,
        meta: baseMeta
      });
      const program2 = stack.length ? run(op, stack) : op.effect;
      return yield* Effect18.locally(currentLinkId, linkId)(program2);
    });
    yield* runOperation(
      "lifecycle",
      "module:init",
      { meta: { moduleId: options.moduleId, runtimeId: id } },
      record({
        type: "module:init",
        moduleId: options.moduleId,
        runtimeId: id
      })
    );
    const initialSnapshot = yield* SubscriptionRef3.get(stateRef);
    yield* runOperation(
      "state",
      "state:init",
      { meta: { moduleId: options.moduleId, runtimeId: id } },
      record({
        type: "state:update",
        moduleId: options.moduleId,
        state: initialSnapshot,
        runtimeId: id
      })
    );
    const readState = Effect18.gen(function* () {
      const inTxn = yield* FiberRef5.get(inSyncTransactionFiber);
      const current2 = txnContext.current;
      if (inTxn && current2) return current2.draft;
      return yield* SubscriptionRef3.get(stateRef);
    });
    const setStateInternal = (next, patch) => Effect18.gen(function* () {
      const inTxn = yield* FiberRef5.get(inSyncTransactionFiber);
      if (inTxn && txnContext.current) {
        updateDraft(txnContext, next, patch);
        return;
      }
      yield* enqueueTransaction(
        runOperation(
          "state",
          "state:update",
          {
            payload: next,
            meta: { moduleId: options.moduleId, runtimeId: id }
          },
          runWithStateTransaction(
            {
              kind: "state",
              name: "setState"
            },
            () => Effect18.sync(() => {
              updateDraft(txnContext, next, patch);
            })
          )
        )
      );
    });
    const runWithStateTransaction = (origin, body) => Effect18.locally(inSyncTransactionFiber, true)(
      Effect18.gen(function* () {
        const baseState = yield* SubscriptionRef3.get(stateRef);
        beginTransaction(
          txnContext,
          origin,
          baseState
        );
        txnContext.current.stateTraitValidateRequests = [];
        const txnId = txnContext.current?.txnId;
        const exit = yield* Effect18.exit(
          Effect18.locally(currentTxnId, txnId)(
            Effect18.gen(function* () {
              let traitSummary;
              yield* body();
              if (stateTraitProgram && txnContext.current) {
                const convergeExit = yield* Effect18.exit(
                  convergeInTransaction(
                    stateTraitProgram,
                    {
                      moduleId: options.moduleId,
                      runtimeId: id,
                      now: txnContext.config.now,
                      budgetMs: traitConvergeBudgetMs,
                      mode: traitConvergeMode,
                      dirtyPaths: txnContext.current?.dirtyPaths,
                      getDraft: () => txnContext.current.draft,
                      setDraft: (next) => {
                        updateDraft(txnContext, next);
                      },
                      recordPatch: (patch) => {
                        recordPatch(txnContext, patch);
                      }
                    }
                  )
                );
                if (convergeExit._tag === "Failure") {
                  const errors = [
                    ...Cause6.failures(convergeExit.cause),
                    ...Cause6.defects(convergeExit.cause)
                  ];
                  const configError = errors.find(
                    (err) => err instanceof StateTraitConfigError
                  );
                  if (configError) {
                    const fields = configError.fields ?? [];
                    yield* record({
                      type: "diagnostic",
                      moduleId: options.moduleId,
                      runtimeId: id,
                      txnId,
                      trigger: origin,
                      code: "state_trait::config_error",
                      severity: "error",
                      message: configError.message,
                      hint: configError.code === "CYCLE_DETECTED" ? `computed/link \u56FE\u5B58\u5728\u5FAA\u73AF\uFF1A${fields.join(", ")}` : `\u540C\u4E00\u5B57\u6BB5\u5B58\u5728\u591A\u4E2A writer\uFF1A${fields.join(", ")}`,
                      kind: `state_trait_config_error:${configError.code}`
                    });
                  }
                  return yield* Effect18.failCause(convergeExit.cause);
                }
                const outcome = convergeExit.value;
                traitSummary = {
                  converge: outcome.summary ? {
                    ...outcome.summary,
                    outcome: outcome._tag,
                    degradedReason: outcome._tag === "Degraded" ? outcome.reason : void 0
                  } : {
                    outcome: outcome._tag
                  }
                };
                if (outcome._tag === "Degraded") {
                  yield* record({
                    type: "diagnostic",
                    moduleId: options.moduleId,
                    runtimeId: id,
                    code: outcome.reason === "budget_exceeded" ? "trait::budget_exceeded" : "trait::runtime_error",
                    severity: "warning",
                    message: outcome.reason === "budget_exceeded" ? "Trait converge exceeded budget; derived fields are frozen for this operation window." : "Trait converge failed at runtime; derived fields are frozen for this operation window.",
                    hint: outcome.reason === "budget_exceeded" ? "\u68C0\u67E5 computed/check \u662F\u5426\u5305\u542B\u91CD\u578B\u8BA1\u7B97\uFF1B\u5C06\u5176\u4E0B\u653E\u5230 source/task \u6216\u62C6\u5206\u4E3A\u53EF\u7F13\u5B58\u7684\u6D3E\u751F\u3002" : "\u68C0\u67E5 computed/link/check \u662F\u5426\u6709\u5F02\u5E38\u8F93\u5165\u6216\u4E0D\u7EAF\u903B\u8F91\uFF1B\u5FC5\u8981\u65F6\u8865\u5145 equals \u6216 guard\u3002",
                    kind: "trait_degraded"
                  });
                }
              }
              if (stateTraitProgram && txnContext.current) {
                const pending = txnContext.current.stateTraitValidateRequests;
                if (pending && pending.length > 0) {
                  yield* validateInTransaction(
                    stateTraitProgram,
                    {
                      moduleId: options.moduleId,
                      runtimeId: id,
                      getDraft: () => txnContext.current.draft,
                      setDraft: (next) => {
                        updateDraft(txnContext, next);
                      },
                      recordPatch: (patch) => {
                        recordPatch(txnContext, patch);
                      }
                    },
                    pending
                  );
                }
              }
              if (stateTraitProgram && txnContext.current) {
                yield* syncIdleInTransaction(
                  stateTraitProgram,
                  {
                    moduleId: options.moduleId,
                    runtimeId: id,
                    getDraft: () => txnContext.current.draft,
                    setDraft: (next) => {
                      updateDraft(txnContext, next);
                    },
                    recordPatch: (patch) => {
                      recordPatch(txnContext, patch);
                    }
                  }
                );
              }
              yield* runOperation(
                "state",
                "state:update",
                { meta: { moduleId: options.moduleId, runtimeId: id } },
                Effect18.gen(function* () {
                  const replayEvent = txnContext.current?.lastReplayEvent;
                  const txn = yield* commit(txnContext, stateRef);
                  if (txn) {
                    txnHistory.push(txn);
                    txnById.set(txn.txnId, txn);
                    if (txnHistory.length > maxTxnHistory) {
                      const oldest = txnHistory.shift();
                      if (oldest) {
                        txnById.delete(oldest.txnId);
                      }
                    }
                    const nextState = txn.finalStateSnapshot !== void 0 ? txn.finalStateSnapshot : yield* SubscriptionRef3.get(stateRef);
                    if (stateTraitListConfigs.length > 0) {
                      rowIdStore.updateAll(nextState, stateTraitListConfigs);
                    }
                    yield* record({
                      type: "state:update",
                      moduleId: options.moduleId,
                      state: nextState,
                      runtimeId: id,
                      txnId: txn.txnId,
                      patchCount: txn.patches.length,
                      originKind: txn.origin.kind,
                      originName: txn.origin.name,
                      traitSummary,
                      replayEvent
                    });
                  }
                })
              );
            })
          )
        );
        if (exit._tag === "Failure") {
          abort(txnContext);
          return yield* Effect18.failCause(exit.cause);
        }
      })
    );
    const reducerMap = /* @__PURE__ */ new Map();
    if (options.reducers) {
      for (const [key, fn] of Object.entries(options.reducers)) {
        reducerMap.set(key, fn);
      }
    }
    const dispatchedTags = /* @__PURE__ */ new Set();
    const registerReducer = (tag2, fn) => {
      if (reducerMap.has(tag2)) {
        throw makeReducerError(
          "ReducerDuplicateError",
          tag2,
          options.moduleId
        );
      }
      if (dispatchedTags.has(tag2)) {
        throw makeReducerError(
          "ReducerLateRegistrationError",
          tag2,
          options.moduleId
        );
      }
      reducerMap.set(tag2, fn);
    };
    const applyPrimaryReducer = (action) => {
      const tag2 = action?._tag ?? action?.type;
      if (tag2 == null || reducerMap.size === 0) {
        return Effect18.void;
      }
      const tagKey = String(tag2);
      dispatchedTags.add(tagKey);
      const reducer = reducerMap.get(tagKey);
      if (!reducer) {
        return Effect18.void;
      }
      return readState.pipe(
        Effect18.flatMap((prev) => {
          const next = reducer(prev, action);
          return setStateInternal(next, {
            path: "*",
            to: next,
            reason: "reducer"
          });
        })
      );
    };
    const runDispatch = (action) => runOperation(
      "action",
      "action:dispatch",
      {
        payload: action,
        meta: { moduleId: options.moduleId, runtimeId: id }
      },
      runWithStateTransaction(
        {
          kind: "action",
          name: "dispatch",
          details: {
            _tag: action?._tag ?? action?.type
          }
        },
        () => Effect18.gen(function* () {
          yield* applyPrimaryReducer(action);
          yield* record({
            type: "action:dispatch",
            moduleId: options.moduleId,
            action,
            runtimeId: id,
            txnId: txnContext.current?.txnId
          });
          yield* PubSub.publish(actionHub, action);
        })
      )
    );
    const runtime = {
      id,
      // 将 moduleId 暴露到 Runtime 上，便于 React / Devtools 在视图层关联 Module 信息。
      moduleId: options.moduleId,
      getState: readState,
      setState: (next) => setStateInternal(next, {
        path: "*",
        to: next,
        reason: "state:set"
      }),
      dispatch: (action) => (
        // 将事务请求排入队列，保证单实例内按 FIFO 串行执行。
        enqueueTransaction(runDispatch(action))
      ),
      actions$: Stream4.fromPubSub(actionHub),
      changes: (selector) => Stream4.map(stateRef.changes, selector).pipe(Stream4.changes),
      ref: (selector) => {
        if (!selector) {
          return stateRef;
        }
        const readonlyRef = {
          get: Effect18.map(SubscriptionRef3.get(stateRef), selector),
          modify: () => Effect18.dieMessage("Cannot write to a derived ref")
        };
        const derived = {
          // SubscriptionRef 内部实现会访问 self.ref / self.pubsub / self.semaphore
          ref: readonlyRef,
          pubsub: {
            publish: () => Effect18.succeed(true)
          },
          semaphore: {
            withPermits: () => (self) => self
          },
          get: readonlyRef.get,
          modify: readonlyRef.modify,
          // 派生流：对原始 stateRef.changes 做 selector 映射 + 去重
          changes: Stream4.map(stateRef.changes, selector).pipe(
            Stream4.changes
          )
        };
        return derived;
      }
    };
    const importsMap = /* @__PURE__ */ new Map();
    for (const imported of options.imports ?? []) {
      const maybe = yield* Effect18.serviceOption(imported);
      if (Option5.isSome(maybe)) {
        importsMap.set(imported, maybe.value);
      }
    }
    const importsScope = {
      kind: "imports-scope",
      get: (module) => importsMap.get(module)
    };
    runtime.__importsScope = importsScope;
    yield* Effect18.addFinalizer(
      () => Effect18.sync(() => {
        importsMap.clear();
        runtime.__importsScope = void 0;
      })
    );
    const instanceKey = options.moduleId != null ? `${options.moduleId}::${id}` : void 0;
    if (instanceKey) {
      runtimeByInstanceKey.set(
        instanceKey,
        runtime
      );
    }
    ;
    runtime.__stateTransactionInstrumentation = instrumentation;
    runtime.__registerReducer = registerReducer;
    runtime.__registerStateTraitProgram = (program2) => {
      stateTraitProgram = program2;
      stateTraitListConfigs = collectListConfigs(program2.spec);
    };
    runtime.__rowIdStore = rowIdStore;
    runtime.__enqueueStateTraitValidateRequest = (request) => {
      if (!txnContext.current) return;
      const current2 = txnContext.current;
      const list2 = current2.stateTraitValidateRequests ?? [];
      list2.push(request);
      current2.stateTraitValidateRequests = list2;
    };
    runtime.__recordStatePatch = (patch) => {
      recordPatch(txnContext, patch);
    };
    runtime.__recordReplayEvent = (event) => {
      if (!txnContext.current) return;
      const current2 = txnContext.current;
      current2.lastReplayEvent = {
        ...event,
        txnId: current2.txnId,
        trigger: current2.origin
      };
    };
    runtime.__runWithStateTransaction = (origin, body) => enqueueTransaction(
      runOperation(
        origin.kind,
        origin.name ? `txn:${origin.name}` : "txn",
        { meta: { moduleId: options.moduleId, runtimeId: id } },
        runWithStateTransaction(origin, body)
      )
    );
    runtime.__applyTransactionSnapshot = (txnId, mode) => enqueueTransaction(
      Effect18.gen(function* () {
        if (!isDevEnv()) {
          return;
        }
        const txn = txnById.get(txnId);
        if (!txn) {
          return;
        }
        const targetState = mode === "before" ? txn.initialStateSnapshot : txn.finalStateSnapshot;
        if (targetState === void 0) {
          return;
        }
        yield* runWithStateTransaction(
          {
            kind: "devtools",
            name: "time-travel",
            details: {
              baseTxnId: txnId,
              mode
            }
          },
          () => Effect18.sync(() => {
            updateDraft(
              txnContext,
              targetState,
              {
                path: "*",
                reason: "devtools"
              }
            );
          })
        );
      })
    );
    if (options.tag) {
      registerRuntime(options.tag, runtime);
    }
    yield* Effect18.addFinalizer(
      () => lifecycle.runDestroy.pipe(
        Effect18.flatMap(
          () => runOperation(
            "lifecycle",
            "module:destroy",
            { meta: { moduleId: options.moduleId, runtimeId: id } },
            record({
              type: "module:destroy",
              moduleId: options.moduleId,
              runtimeId: id
            })
          )
        ),
        Effect18.tap(
          () => Effect18.sync(() => {
            if (options.tag) {
              unregisterRuntime(
                options.tag
              );
            }
            if (instanceKey) {
              runtimeByInstanceKey.delete(instanceKey);
            }
          })
        )
      )
    );
    if (options.tag && options.logics?.length) {
      const moduleIdForLogs = options.moduleId ?? "unknown";
      const withRuntimeAndLifecycle = (eff, phaseRef) => {
        const withServices = Effect18.provideService(
          Effect18.provideService(
            eff,
            LifecycleContext,
            lifecycle
          ),
          options.tag,
          runtime
        );
        const annotated = Effect18.annotateLogs({
          "logix.moduleId": moduleIdForLogs
        })(withServices);
        if (!phaseRef) {
          return annotated;
        }
        const phaseService = {
          get current() {
            return phaseRef.current;
          }
        };
        return Effect18.provideService(
          annotated,
          LogicPhaseServiceTag,
          phaseService
        );
      };
      const handleLogicFailure = (cause) => {
        const phaseErrorMarker = [
          ...Cause6.failures(cause),
          ...Cause6.defects(cause)
        ].some((err) => err?._tag === "LogicPhaseError");
        const base = lifecycle.notifyError(cause, {
          phase: "logic.fork",
          moduleId: options.moduleId
        }).pipe(
          Effect18.flatMap(
            () => runOperation(
              "lifecycle",
              "lifecycle:error",
              { payload: cause, meta: { moduleId: options.moduleId, runtimeId: id } },
              record({
                type: "lifecycle:error",
                moduleId: options.moduleId,
                cause,
                runtimeId: id
              })
            )
          ),
          Effect18.tap(
            () => emitMissingOnErrorDiagnosticIfNeeded(
              lifecycle,
              options.moduleId
            )
          ),
          Effect18.tap(
            () => emitDiagnosticsFromCause(
              cause,
              options.moduleId
            )
          ),
          Effect18.tap(
            () => emitEnvServiceNotFoundDiagnosticIfNeeded(
              cause,
              options.moduleId
            )
          ),
          Effect18.tap(
            () => emitInvalidPhaseDiagnosticIfNeeded(
              cause,
              options.moduleId
            )
          )
        );
        if (phaseErrorMarker) {
          return base;
        }
        return base.pipe(Effect18.flatMap(() => Effect18.failCause(cause)));
      };
      const isLogicPlan = (value) => Boolean(
        value && typeof value === "object" && "run" in value && "setup" in value
      );
      const returnsLogicPlan = (value) => Boolean(value?.__logicPlan === true);
      const extractPhaseRef = (value) => value?.__phaseRef;
      const normalizeToPlan = (value) => isLogicPlan(value) ? Object.assign(value, {
        __phaseRef: extractPhaseRef(value) ?? createPhaseRef()
      }) : Object.assign(
        {
          setup: Effect18.void,
          run: value
        },
        { __phaseRef: extractPhaseRef(value) ?? createPhaseRef() }
      );
      for (const rawLogic of options.logics) {
        if (isLogicPlan(rawLogic)) {
          const phaseRef = extractPhaseRef(rawLogic) ?? createPhaseRef();
          const setupPhase = withRuntimeAndLifecycle(rawLogic.setup, phaseRef);
          const runPhase2 = withRuntimeAndLifecycle(rawLogic.run, phaseRef);
          phaseRef.current = "setup";
          globalLogicPhaseRef.current = "setup";
          yield* setupPhase.pipe(Effect18.catchAllCause(handleLogicFailure));
          phaseRef.current = "run";
          globalLogicPhaseRef.current = "run";
          yield* Effect18.forkScoped(
            runPhase2.pipe(Effect18.catchAllCause(handleLogicFailure))
          );
          continue;
        }
        if (returnsLogicPlan(rawLogic)) {
          const phaseRef = extractPhaseRef(rawLogic) ?? createPhaseRef();
          const makeNoopPlan = () => Object.assign(
            {
              setup: Effect18.void,
              run: Effect18.void
            },
            {
              __phaseRef: phaseRef,
              // 标记为“仅用于 phase 诊断的占位 plan”，后续不再 fork run 段，
              // 以避免在 runSync 路径上产生 AsyncFiberException。
              __skipRun: true
            }
          );
          phaseRef.current = "setup";
          globalLogicPhaseRef.current = "setup";
          const resolvedPlan = yield* withRuntimeAndLifecycle(
            rawLogic,
            phaseRef
          ).pipe(
            Effect18.matchCauseEffect({
              onSuccess: (value) => Effect18.succeed(normalizeToPlan(value)),
              onFailure: (cause) => {
                const isLogicPhaseError = [
                  ...Cause6.failures(cause),
                  ...Cause6.defects(cause)
                ].some((err) => err?._tag === "LogicPhaseError");
                if (isLogicPhaseError) {
                  return emitInvalidPhaseDiagnosticIfNeeded(
                    cause,
                    options.moduleId
                  ).pipe(
                    Effect18.zipRight(handleLogicFailure(cause)),
                    Effect18.as(makeNoopPlan())
                  );
                }
                return emitEnvServiceNotFoundDiagnosticIfNeeded(
                  cause,
                  options.moduleId
                ).pipe(
                  Effect18.zipRight(handleLogicFailure(cause)),
                  Effect18.zipRight(Effect18.failCause(cause))
                );
              }
            })
          );
          const planPhaseRef = extractPhaseRef(resolvedPlan) ?? Object.assign(resolvedPlan, { __phaseRef: phaseRef }).__phaseRef;
          const setupPhase = withRuntimeAndLifecycle(resolvedPlan.setup, planPhaseRef);
          const runPhase2 = withRuntimeAndLifecycle(resolvedPlan.run, planPhaseRef);
          const skipRun = resolvedPlan.__skipRun === true;
          planPhaseRef.current = "setup";
          globalLogicPhaseRef.current = "setup";
          yield* setupPhase.pipe(Effect18.catchAllCause(handleLogicFailure));
          if (!skipRun) {
            planPhaseRef.current = "run";
            globalLogicPhaseRef.current = "run";
            yield* Effect18.forkScoped(
              runPhase2.pipe(Effect18.catchAllCause(handleLogicFailure))
            );
          }
          continue;
        }
        const basePhaseRef = extractPhaseRef(rawLogic);
        const runPhase = withRuntimeAndLifecycle(
          rawLogic,
          basePhaseRef
        ).pipe(Effect18.catchAllCause(handleLogicFailure));
        const runFiber = yield* Effect18.forkScoped(runPhase);
        yield* Effect18.forkScoped(
          Fiber3.await(runFiber).pipe(
            Effect18.flatMap(
              (exit) => Exit.match(exit, {
                onFailure: () => Effect18.void,
                onSuccess: (value) => {
                  const executePlan = (plan) => {
                    const phaseRef = extractPhaseRef(plan) ?? createPhaseRef();
                    const setupPhase = withRuntimeAndLifecycle(
                      plan.setup,
                      phaseRef
                    );
                    const runPlanPhase = withRuntimeAndLifecycle(
                      plan.run,
                      phaseRef
                    );
                    phaseRef.current = "setup";
                    globalLogicPhaseRef.current = "setup";
                    return setupPhase.pipe(
                      Effect18.catchAllCause(handleLogicFailure),
                      Effect18.tap(
                        () => Effect18.sync(() => {
                          phaseRef.current = "run";
                          globalLogicPhaseRef.current = "run";
                        })
                      ),
                      Effect18.zipRight(
                        Effect18.forkScoped(
                          runPlanPhase.pipe(
                            Effect18.catchAllCause(handleLogicFailure)
                          )
                        )
                      ),
                      Effect18.asVoid
                    );
                  };
                  if (isLogicPlan(value)) {
                    return executePlan(value);
                  }
                  if (returnsLogicPlan(value)) {
                    return withRuntimeAndLifecycle(
                      value,
                      basePhaseRef
                    ).pipe(
                      Effect18.map(normalizeToPlan),
                      Effect18.matchCauseEffect({
                        onFailure: (cause) => handleLogicFailure(cause),
                        onSuccess: (plan) => executePlan(plan)
                      })
                    );
                  }
                  return Effect18.void;
                }
              })
            )
          )
        );
      }
      yield* Effect18.yieldNow();
    }
    return runtime;
  });
  return program;
};

// ../logix-core/src/internal/runtime/ModuleFactory.ts
function Link(modules, logic) {
  return Effect19.gen(function* () {
    const handles = {};
    for (const [key, module] of Object.entries(modules)) {
      const runtime = yield* module;
      handles[key] = {
        read: (selector) => Effect19.map(runtime.getState, selector),
        changes: runtime.changes,
        dispatch: runtime.dispatch,
        actions$: runtime.actions$,
        actions: new Proxy({}, {
          get: (_target, prop) => (payload) => runtime.dispatch({ _tag: prop, payload })
        })
      };
    }
    return yield* logic(
      handles
    );
  });
}
function Module(id, def) {
  const shape = {
    stateSchema: def.state,
    actionSchema: Schema3.Union(
      ...Object.entries(def.actions).map(
        ([tag3, payload]) => Schema3.Struct(
          payload === Schema3.Void ? {
            _tag: Schema3.Literal(tag3),
            payload: Schema3.optional(payload)
          } : {
            _tag: Schema3.Literal(tag3),
            payload
          }
        )
      )
    ),
    actionMap: def.actions
  };
  const reducers = def.reducers && Object.fromEntries(
    Object.entries(def.reducers).map(([tag3, reducer]) => [
      tag3,
      (state, action) => (
        // 这里依赖 `_tag` 的运行时约定：只有匹配当前 tag 的 Action 会交给对应 reducer。
        reducer(
          state,
          action
        )
      )
    ])
  );
  const tag2 = Context10.GenericTag(`@logix/Module/${id}`);
  const moduleInstance = Object.assign(tag2, {
    _kind: "Module",
    id,
    shape,
    stateSchema: shape.stateSchema,
    actionSchema: shape.actionSchema,
    /**
     * 为当前 Module 构造一段 Logic 程序：
     * - 在运行时从 Context 中取出自身的 ModuleRuntime；
     * - 基于 Runtime 构造 BoundApi；
     * - 将 BoundApi 交给调用方构造业务 Logic。
     */
    logic: (build3) => {
      const phaseRef = { current: "setup" };
      const phaseService = {
        get current() {
          return phaseRef.current;
        }
      };
      const logicEffect = Effect19.gen(function* () {
        const runtime = yield* tag2;
        const api = make3(shape, runtime, {
          getPhase: () => phaseRef.current,
          phaseService,
          moduleId: id
        });
        let built;
        try {
          built = build3(api);
        } catch (err) {
          if (err?._tag === "LogicPhaseError") {
            return yield* Effect19.fail(err);
          }
          throw err;
        }
        if (built?.__logicPlan === true) {
          return yield* built;
        }
        const isLogicPlan = (value) => Boolean(
          value && typeof value === "object" && "setup" in value && "run" in value
        );
        const plan = isLogicPlan(built) ? built : {
          setup: Effect19.void,
          run: built
        };
        return Object.assign(plan, { __phaseRef: phaseRef });
      });
      logicEffect.__logicPlan = true;
      logicEffect.__phaseRef = phaseRef;
      return logicEffect;
    },
    /**
     * live：给定初始状态与一组 Logic，构造带 Scope 的 ModuleRuntime Layer。
     *
     * Env 约定：
     * - R 表示 Logic 运行所需的额外环境（Service / 平台等）；
     * - ModuleRuntime 本身只依赖 Scope.Scope，由 Layer.scoped 管理。
     */
    live: (initial, ...logics) => Layer5.scoped(
      tag2,
      make5(
        initial,
        {
          tag: tag2,
          logics,
          moduleId: id,
          reducers
        }
      )
    ),
    /**
     * implement：基于 Module 定义 + 初始状态 + Logic 集合，生成 ModuleImpl 蓝图。
     *
     * - R 表示 Logic 所需的 Env 类型；
     * - 返回的 ModuleImpl.layer 会携带 R 作为输入环境；
     * - 通过 withLayer/withLayers 可以逐步将 R 收敛为更具体的 Env（甚至 never）。
     */
    implement: (config) => {
      const importedModules = (config.imports ?? []).flatMap((item) => {
        if (item._tag === "ModuleImpl") {
          return [
            item.module
          ];
        }
        return [];
      });
      const baseLayer = Layer5.scoped(
        tag2,
        make5(
          config.initial,
          {
            tag: tag2,
            logics: config.logics || [],
            moduleId: id,
            imports: importedModules,
            reducers,
            stateTransaction: config.stateTransaction
          }
        )
      );
      const processes = config.processes ?? [];
      const makeImplWithLayer = (layer3) => ({
        _tag: "ModuleImpl",
        module: moduleInstance,
        layer: layer3,
        processes,
        stateTransaction: config.stateTransaction,
        withLayer: (extra) => {
          const provided = layer3.pipe(
            Layer5.provide(
              extra
            )
          );
          const merged = Layer5.mergeAll(
            provided,
            extra
          );
          return makeImplWithLayer(merged);
        },
        withLayers: (...extras) => extras.reduce(
          (implAcc, extra) => implAcc.withLayer(extra),
          makeImplWithLayer(
            layer3
          )
        )
      });
      const initialImpl = makeImplWithLayer(
        baseLayer
      );
      const imports = config.imports ?? [];
      const finalImpl = imports.reduce((implAcc, item) => {
        const layer3 = item._tag === "ModuleImpl" ? item.layer : item;
        return implAcc.withLayer(layer3);
      }, initialImpl);
      return finalImpl;
    }
  });
  return moduleInstance;
}

// ../logix-core/src/state-trait.ts
var state_trait_exports = {};
__export(state_trait_exports, {
  $root: () => $root,
  build: () => build2,
  computed: () => computed,
  from: () => from,
  install: () => install2,
  link: () => link,
  list: () => list,
  node: () => node,
  source: () => source
});

// ../logix-core/src/internal/state-trait/meta.ts
var uniqSortedStrings = (input) => {
  const set2 = /* @__PURE__ */ new Set();
  for (const item of input) {
    const v = item.trim();
    if (!v) continue;
    set2.add(v);
  }
  return Array.from(set2).sort((a, b) => a.localeCompare(b));
};
var sanitize = (input) => {
  if (input === null || input === void 0) return void 0;
  if (typeof input !== "object" || Array.isArray(input)) return void 0;
  const record3 = input;
  const out = {};
  const pickString = (key) => {
    const value = record3[key];
    if (typeof value !== "string") return;
    const trimmed = value.trim();
    if (!trimmed) return;
    out[key] = trimmed;
  };
  pickString("label");
  pickString("description");
  pickString("group");
  pickString("docsUrl");
  pickString("cacheGroup");
  const canonical = record3.canonical;
  if (typeof canonical === "boolean") {
    out.canonical = canonical;
  }
  const tagsRaw = record3.tags;
  if (typeof tagsRaw === "string") {
    const tags = uniqSortedStrings([tagsRaw]);
    if (tags.length > 0) out.tags = tags;
  } else if (Array.isArray(tagsRaw)) {
    const tags = uniqSortedStrings(tagsRaw.filter((x) => typeof x === "string"));
    if (tags.length > 0) out.tags = tags;
  }
  return Object.keys(out).length > 0 ? out : void 0;
};
var stableStringify2 = (meta) => {
  const out = {};
  const keys = Object.keys(meta).sort();
  for (const k of keys) {
    out[k] = meta[k];
  }
  return JSON.stringify(out);
};
var equals = (a, b) => {
  if (a === b) return true;
  if (!a || !b) return false;
  return stableStringify2(a) === stableStringify2(b);
};
var mergeCanonical = (current2, incoming) => {
  const existing = current2.meta;
  if (!existing) {
    return {
      meta: incoming.meta,
      origin: incoming.origin,
      conflicts: current2.conflicts
    };
  }
  if (equals(existing, incoming.meta)) {
    return current2;
  }
  const conflicts = [
    ...current2.conflicts ?? []
  ];
  const push = (conflict) => {
    const exists = conflicts.some(
      (c) => c.origin === conflict.origin && equals(c.meta, conflict.meta)
    );
    if (!exists) conflicts.push(conflict);
  };
  const existingCanonical = existing.canonical === true;
  const incomingCanonical = incoming.meta.canonical === true;
  if (!existingCanonical && incomingCanonical) {
    push({
      origin: current2.origin ?? "unknown",
      meta: existing
    });
    return {
      meta: incoming.meta,
      origin: incoming.origin,
      conflicts
    };
  }
  push({
    origin: incoming.origin,
    meta: incoming.meta
  });
  return {
    meta: existing,
    origin: current2.origin ?? incoming.origin,
    conflicts
  };
};

// ../logix-core/src/internal/state-trait/model.ts
var normalizeSpec = (spec) => {
  const entries = [];
  const isNode = (value) => typeof value === "object" && value !== null && value._tag === "StateTraitNode";
  const isList = (value) => typeof value === "object" && value !== null && value._tag === "StateTraitList";
  const joinPath = (prefix, suffix) => {
    if (!prefix) return suffix;
    if (!suffix) return prefix;
    return `${prefix}.${suffix}`;
  };
  const prefixDeps = (deps, prefix) => {
    if (!deps || deps.length === 0) return [];
    return deps.map((d) => prefix ? joinPath(prefix, d) : d);
  };
  const normalizeEntry = (entry, fieldPath, depPrefix) => {
    if (entry.kind === "computed") {
      const meta = entry.meta;
      const rawDeps = meta.deps;
      const deps = rawDeps !== void 0 ? prefixDeps(rawDeps, depPrefix) : void 0;
      return {
        ...entry,
        fieldPath,
        meta: { ...meta, deps }
      };
    }
    if (entry.kind === "source") {
      const meta = entry.meta;
      const rawDeps = meta.deps;
      const deps = rawDeps !== void 0 ? prefixDeps(rawDeps, depPrefix) : void 0;
      return {
        ...entry,
        fieldPath,
        meta: { ...meta, deps, _fieldPath: fieldPath }
      };
    }
    if (entry.kind === "link") {
      const meta = entry.meta;
      const from2 = prefixDeps([meta.from], depPrefix)[0] ?? meta.from;
      return {
        ...entry,
        fieldPath,
        meta: { ...meta, from: from2 }
      };
    }
    return {
      ...entry,
      fieldPath
    };
  };
  const expandNode = (scopeId, joinPrefix, node2) => {
    const addEntry = (relativeTarget, raw) => {
      const rel = raw.fieldPath ?? relativeTarget;
      const fieldPath = joinPrefix ? joinPath(joinPrefix, String(rel)) : String(rel);
      entries.push(normalizeEntry(raw, fieldPath, joinPrefix));
    };
    const expandMaybeRecord = (value) => {
      if (!value) return;
      if (typeof value.kind === "string") {
        addEntry("", value);
        return;
      }
      const record3 = value;
      for (const key in record3) {
        if (!Object.prototype.hasOwnProperty.call(record3, key)) continue;
        const entry = record3[key];
        if (!entry) continue;
        addEntry(key, entry);
      }
    };
    expandMaybeRecord(node2.computed);
    expandMaybeRecord(node2.source);
    expandMaybeRecord(node2.link);
    if (node2.check) {
      const rules = {};
      for (const name of Object.keys(node2.check)) {
        const rule = node2.check[name];
        if (typeof rule === "function") {
          rules[name] = rule;
          continue;
        }
        if (rule && typeof rule === "object") {
          const meta = sanitize(rule.meta);
          rules[name] = {
            ...rule,
            deps: prefixDeps(rule.deps, joinPrefix),
            meta
          };
          continue;
        }
      }
      entries.push({
        fieldPath: scopeId,
        kind: "check",
        meta: {
          rules,
          writeback: { kind: "errors" }
        }
      });
    }
  };
  for (const key in spec) {
    if (!Object.prototype.hasOwnProperty.call(spec, key)) continue;
    const raw = spec[key];
    if (!raw) continue;
    if (isList(raw)) {
      const listPath = key;
      if (raw.item) {
        expandNode(`${listPath}[]`, `${listPath}[]`, raw.item);
      }
      if (raw.list) {
        expandNode(listPath, listPath, raw.list);
      }
      continue;
    }
    if (isNode(raw)) {
      if (key === "$root") {
        expandNode("$root", "", raw);
      } else {
        expandNode(key, key, raw);
      }
      continue;
    }
    const entry = raw;
    const fieldPath = entry.fieldPath ?? key;
    entries.push(normalizeEntry(entry, String(fieldPath), ""));
  }
  return entries;
};
var collectNodeMeta = (spec) => {
  const out = /* @__PURE__ */ new Map();
  const isNode = (value) => typeof value === "object" && value !== null && value._tag === "StateTraitNode";
  const isList = (value) => typeof value === "object" && value !== null && value._tag === "StateTraitList";
  const add = (scopeId, node2) => {
    const meta = sanitize(node2.meta);
    if (meta) out.set(scopeId, meta);
  };
  for (const key in spec) {
    if (!Object.prototype.hasOwnProperty.call(spec, key)) continue;
    const raw = spec[key];
    if (!raw) continue;
    if (isList(raw)) {
      const listPath = key;
      if (raw.item) add(`${listPath}[]`, raw.item);
      if (raw.list) add(listPath, raw.list);
      continue;
    }
    if (isNode(raw)) {
      if (key === "$root") add("$root", raw);
      else add(key, raw);
      continue;
    }
  }
  return out;
};

// ../logix-core/src/internal/state-trait/build.ts
var toFieldTrait = (entry) => {
  const deps = [];
  if (entry.kind === "computed") {
    const meta = entry.meta;
    const list2 = meta.deps;
    if (list2) deps.push(...list2);
  } else if (entry.kind === "source") {
    const meta = entry.meta;
    const list2 = meta.deps;
    if (list2) deps.push(...list2);
  } else if (entry.kind === "link") {
    deps.push(entry.meta.from);
  } else if (entry.kind === "check") {
    const meta = entry.meta;
    const rules = meta?.rules ?? {};
    for (const name of Object.keys(rules)) {
      const rule = rules[name];
      if (rule && typeof rule === "object") {
        const list2 = rule.deps;
        if (list2) deps.push(...list2);
      }
    }
  }
  return {
    fieldId: entry.fieldPath,
    kind: entry.kind,
    // meta 在运行时保持与 Entry.meta 一致，便于 install 直接复用。
    meta: entry.meta,
    deps
  };
};
var buildGraph = (entries, nodeMetaByFieldPath) => {
  const fieldMap = /* @__PURE__ */ new Map();
  const nodes = [];
  const edges = [];
  const resourcesById = /* @__PURE__ */ new Map();
  const planSteps = [];
  const ensureField = (fieldPath) => {
    let field = fieldMap.get(fieldPath);
    if (!field) {
      field = {
        id: fieldPath,
        path: fieldPath,
        traits: []
      };
      fieldMap.set(fieldPath, field);
    }
    return field;
  };
  for (const entry of entries) {
    const fieldPath = entry.fieldPath;
    const field = ensureField(fieldPath);
    const trait = toFieldTrait(entry);
    field.traits.push(trait);
    if (entry.kind === "computed") {
      const stepId = `computed:${fieldPath}`;
      planSteps.push({
        id: stepId,
        kind: "computed-update",
        targetFieldPath: fieldPath
        // 说明：当前版本不静态分析 computed 依赖字段，sourceFieldPaths 留空。
      });
      const deps = entry.meta.deps;
      if (deps) {
        for (const dep of deps) {
          ensureField(dep);
          edges.push({
            id: `computed:${dep}->${fieldPath}`,
            from: dep,
            to: fieldPath,
            kind: "computed"
          });
        }
      }
    } else if (entry.kind === "link") {
      const from2 = entry.meta.from;
      ensureField(from2);
      const edgeId = `link:${from2}->${fieldPath}`;
      edges.push({
        id: edgeId,
        from: from2,
        to: fieldPath,
        kind: "link"
      });
      planSteps.push({
        id: `link:${fieldPath}`,
        kind: "link-propagate",
        targetFieldPath: fieldPath,
        sourceFieldPaths: [from2],
        debugInfo: {
          graphEdgeId: edgeId
        }
      });
    } else if (entry.kind === "source") {
      const resourceId = entry.meta.resource;
      const resourceMeta = sanitize(entry.meta.meta);
      const existing = resourcesById.get(resourceId);
      if (existing) {
        const ownerFields = [...existing.ownerFields, fieldPath];
        let meta = existing.meta;
        let metaOrigin = existing.metaOrigin;
        let metaConflicts = existing.metaConflicts;
        if (resourceMeta) {
          const merged = mergeCanonical(
            { meta, origin: metaOrigin, conflicts: metaConflicts },
            { origin: fieldPath, meta: resourceMeta }
          );
          meta = merged.meta;
          metaOrigin = merged.origin;
          metaConflicts = merged.conflicts;
        }
        resourcesById.set(resourceId, {
          ...existing,
          ownerFields,
          meta,
          metaOrigin,
          metaConflicts
        });
      } else {
        resourcesById.set(resourceId, {
          resourceId,
          // 暂时使用简单的标识字符串，后续可根据 key 规则进一步结构化。
          keySelector: `StateTrait.source@${fieldPath}`,
          ownerFields: [fieldPath],
          meta: resourceMeta,
          metaOrigin: resourceMeta ? fieldPath : void 0
        });
      }
      planSteps.push({
        id: `source:${fieldPath}`,
        kind: "source-refresh",
        targetFieldPath: fieldPath,
        resourceId,
        keySelectorId: `StateTrait.source@${fieldPath}`
      });
      const deps = entry.meta.deps;
      if (deps) {
        for (const dep of deps) {
          ensureField(dep);
          edges.push({
            id: `source-dep:${dep}->${fieldPath}`,
            from: dep,
            to: fieldPath,
            kind: "source-dep"
          });
        }
      }
    } else if (entry.kind === "check") {
      planSteps.push({
        id: `check:${fieldPath}`,
        kind: "check-validate",
        targetFieldPath: fieldPath
      });
      if (trait.deps.length > 0) {
        for (const dep of trait.deps) {
          ensureField(dep);
          edges.push({
            id: `check-dep:${dep}->${fieldPath}`,
            from: dep,
            to: fieldPath,
            kind: "check-dep"
          });
        }
      }
    }
  }
  for (const field of fieldMap.values()) {
    nodes.push({
      id: field.id,
      field,
      traits: field.traits,
      meta: nodeMetaByFieldPath.get(field.id)
    });
  }
  const graph = {
    _tag: "StateTraitGraph",
    nodes,
    edges,
    resources: Array.from(resourcesById.values())
  };
  const plan = {
    _tag: "StateTraitPlan",
    steps: planSteps
  };
  return { graph, plan };
};
var assertNoLinkCycles = (edges) => {
  const adjacency = /* @__PURE__ */ new Map();
  for (const edge of edges) {
    if (edge.kind !== "link") continue;
    const list2 = adjacency.get(edge.from) ?? [];
    list2.push(edge.to);
    adjacency.set(edge.from, list2);
  }
  const visited = /* @__PURE__ */ new Set();
  const stack = /* @__PURE__ */ new Set();
  const dfs = (node2) => {
    if (stack.has(node2)) {
      throw new Error(
        `[StateTrait.build] link cycle detected at field "${node2}". Please check link traits for circular dependencies.`
      );
    }
    if (visited.has(node2)) return;
    visited.add(node2);
    stack.add(node2);
    const nexts = adjacency.get(node2);
    if (nexts) {
      for (const to of nexts) {
        dfs(to);
      }
    }
    stack.delete(node2);
  };
  for (const node2 of adjacency.keys()) {
    if (!visited.has(node2)) {
      dfs(node2);
    }
  }
};
var build = (stateSchema, spec) => {
  const entries = normalizeSpec(spec);
  const nodeMetaByFieldPath = collectNodeMeta(spec);
  for (const entry of entries) {
    if (entry.kind === "computed") {
      const deps = entry.meta.deps;
      if (deps === void 0) {
        throw new Error(
          `[StateTrait.build] Missing explicit deps for computed "${entry.fieldPath}". Please use StateTrait.computed({ deps: [...], get: ... }).`
        );
      }
    }
    if (entry.kind === "source") {
      const deps = entry.meta.deps;
      if (deps === void 0) {
        throw new Error(
          `[StateTrait.build] Missing explicit deps for source "${entry.fieldPath}". Please provide meta.deps for StateTrait.source({ deps: [...], ... }).`
        );
      }
    }
    if (entry.kind === "check") {
      const rules = entry.meta?.rules ?? {};
      for (const name of Object.keys(rules)) {
        const rule = rules[name];
        if (typeof rule === "function" || !rule || typeof rule !== "object") {
          throw new Error(
            `[StateTrait.build] Missing explicit deps for check "${entry.fieldPath}" rule "${name}". Please use { deps: [...], validate: ... } form.`
          );
        }
        if (rule.deps === void 0) {
          throw new Error(
            `[StateTrait.build] Missing explicit deps for check "${entry.fieldPath}" rule "${name}". Please provide deps: [...].`
          );
        }
      }
    }
  }
  const { graph, plan } = buildGraph(entries, nodeMetaByFieldPath);
  assertNoLinkCycles(graph.edges);
  return {
    stateSchema,
    spec,
    entries,
    graph,
    plan
  };
};

// ../logix-core/src/internal/state-trait/install.ts
import { Effect as Effect20 } from "https://esm.sh/effect@3.19.8";
var buildEntryIndex = (entries) => {
  const index = /* @__PURE__ */ new Map();
  for (const entry of entries) {
    const list2 = index.get(entry.fieldPath) ?? [];
    list2.push(entry);
    index.set(entry.fieldPath, list2);
  }
  return index;
};
var install = (bound, program) => {
  const registerProgram = bound.__registerStateTraitProgram;
  if (registerProgram) {
    registerProgram(program);
  }
  const entryIndex = buildEntryIndex(program.entries);
  const installStep = (step) => {
    if (!step.targetFieldPath) {
      return Effect20.void;
    }
    if (step.kind !== "source-refresh") {
      return Effect20.void;
    }
    const candidates = entryIndex.get(step.targetFieldPath);
    if (!candidates || candidates.length === 0) {
      return Effect20.void;
    }
    const entry = candidates.find((e) => e.kind === "source");
    if (!entry) {
      return Effect20.void;
    }
    return installSourceRefresh(
      bound,
      step,
      entry
    );
  };
  return Effect20.forEach(program.plan.steps, (step) => installStep(step)).pipe(Effect20.asVoid);
};

// ../logix-core/src/state-trait.ts
var $root = "$root";
var from = (_schema) => (spec) => spec;
var node = (spec) => ({
  _tag: "StateTraitNode",
  ...spec
});
var list = (spec) => ({
  _tag: "StateTraitList",
  ...spec
});
var computed = (input) => {
  return {
    fieldPath: void 0,
    kind: "computed",
    meta: { deps: input.deps, derive: input.get, equals: input.equals }
  };
};
var source = (meta) => ({
  fieldPath: void 0,
  kind: "source",
  meta
});
var link = (meta) => ({
  fieldPath: void 0,
  kind: "link",
  meta
});
var build2 = (stateSchema, spec) => build(stateSchema, spec);
var install2 = (bound, program) => install(bound, program);

// ../logix-core/src/internal/debug/ModuleTraitsRegistry.ts
var programsById = /* @__PURE__ */ new Map();
var registerModuleProgram = (moduleId, program) => {
  if (!isDevEnv()) {
    return;
  }
  programsById.set(moduleId, program);
};
var getModuleProgramById = (moduleId) => programsById.get(moduleId);

// ../logix-core/src/Module.ts
var Reducer = {
  mutate: (mutator) => (state, action) => create(state, (draft) => {
    mutator(draft, action);
  })
};
var makeImpl = (id, def) => Module(id, def);
var make6 = (id, def) => {
  const moduleInstance = makeImpl(id, def);
  if (!def.traits) {
    return moduleInstance;
  }
  const stateSchema = def.state;
  const traitsSpec = def.traits;
  const program = build2(stateSchema, traitsSpec);
  registerModuleProgram(id, program);
  moduleInstance.__stateTraitProgram = program;
  const makeTraitLogic = () => moduleInstance.logic(($) => ({
    setup: install2($, program),
    run: Effect21.void
  }));
  const originalImplement = moduleInstance.implement;
  moduleInstance.implement = ((config) => {
    const traitLogic = makeTraitLogic();
    const mergedLogics = config.logics ? [traitLogic, ...config.logics] : [traitLogic];
    return originalImplement({
      ...config,
      logics: mergedLogics
    });
  });
  return moduleInstance;
};

// ../logix-core/src/State.ts
var State_exports = {};

// ../logix-core/src/Actions.ts
var Actions_exports = {};

// ../logix-core/src/Logic.ts
var Logic_exports = {};
__export(Logic_exports, {
  RuntimeTag: () => RuntimeTag,
  of: () => of
});
import { Context as Context11 } from "https://esm.sh/effect@3.19.8";
var RuntimeTag = Context11.GenericTag("@logix/Runtime");
function of(eff) {
  return eff;
}

// ../logix-core/src/Bound.ts
var Bound_exports = {};
__export(Bound_exports, {
  make: () => make7
});
function make7(shape, runtime) {
  return make3(shape, runtime);
}

// ../logix-core/src/Link.ts
var Link_exports = {};
__export(Link_exports, {
  make: () => make8
});
function make8(config, logic) {
  const linkId = config.id ?? [...config.modules].map((m) => m.id).sort().join("~");
  const modulesRecord = /* @__PURE__ */ Object.create(null);
  for (const module of config.modules) {
    ;
    modulesRecord[module.id] = module;
  }
  const effect = Link(
    modulesRecord,
    logic
  );
  effect._linkId = linkId;
  return effect;
}

// ../logix-core/src/Flow.ts
var Flow_exports = {};
__export(Flow_exports, {
  make: () => make9
});
var make9 = make2;

// ../logix-core/src/MatchBuilder.ts
var MatchBuilder_exports2 = {};
__export(MatchBuilder_exports2, {
  makeMatch: () => makeMatch2,
  makeMatchTag: () => makeMatchTag2
});
var makeMatch2 = makeMatch;
var makeMatchTag2 = makeMatchTag;

// ../logix-core/src/trait-lifecycle.ts
var trait_lifecycle_exports = {};
__export(trait_lifecycle_exports, {
  Ref: () => Ref6,
  cleanup: () => cleanup2,
  install: () => install4,
  scopedExecute: () => scopedExecute2,
  scopedValidate: () => scopedValidate2
});

// ../logix-core/src/internal/trait-lifecycle/index.ts
import { Effect as Effect23, FiberRef as FiberRef6, Option as Option6 } from "https://esm.sh/effect@3.19.8";
var Ref5 = {
  field: (path) => ({ kind: "field", path }),
  list: (path, listIndexPath) => ({
    kind: "list",
    path,
    listIndexPath
  }),
  item: (path, index, options) => ({
    kind: "item",
    path,
    index,
    listIndexPath: options?.listIndexPath,
    field: options?.field
  }),
  root: () => ({ kind: "root" })
};
var scopedValidate = (bound, request) => Effect23.gen(function* () {
  const enqueue = bound.__enqueueStateTraitValidateRequest;
  if (!enqueue) {
    return;
  }
  const toTarget = (ref) => {
    if (ref.kind === "root") return { kind: "root" };
    if (ref.kind === "field") return { kind: "field", path: ref.path };
    if (ref.kind === "list") return { kind: "list", path: ref.path };
    return {
      kind: "item",
      path: ref.path,
      index: ref.index,
      field: ref.field
    };
  };
  const internal4 = {
    mode: request.mode,
    target: toTarget(request.target)
  };
  const inTxn = yield* FiberRef6.get(inSyncTransactionFiber);
  if (inTxn) {
    enqueue(internal4);
    return;
  }
  const runWithTxn = bound.__runWithStateTransaction;
  if (!runWithTxn) {
    return;
  }
  yield* runWithTxn(
    { kind: "trait", name: "scopedValidate", details: request },
    () => Effect23.sync(() => {
      enqueue(internal4);
    })
  );
});
var scopedExecute = (bound, request) => Effect23.gen(function* () {
  if (request.kind === "source:refresh") {
    const toFieldPath = (ref) => {
      if (ref.kind === "root") return void 0;
      if (ref.kind === "field" || ref.kind === "list") return ref.path;
      const base = `${ref.path}[]`;
      return ref.field ? `${base}.${ref.field}` : base;
    };
    const fieldPath = toFieldPath(request.target);
    if (!fieldPath) {
      return;
    }
    yield* bound.traits.source.refresh(fieldPath);
    return;
  }
  if (request.kind !== "query:invalidate") {
    return;
  }
  const replayLogOpt = yield* Effect23.serviceOption(ReplayLog);
  if (Option6.isNone(replayLogOpt)) {
    return;
  }
  const moduleId = bound.__moduleId;
  const runtimeId = bound.__runtimeId;
  yield* replayLogOpt.value.record({
    _tag: "InvalidateRequest",
    timestamp: Date.now(),
    moduleId,
    runtimeId,
    kind: "query",
    target: "query",
    meta: request.request
  });
});
var cleanup = (bound, request) => Effect23.gen(function* () {
  const apply = () => bound.state.mutate((draft) => {
    const clearAt = (root, path) => {
      if (!path) return;
      unsetAtPathMutating2(draft, `${root}.${path}`);
    };
    if (request.kind === "field:unregister") {
      const target = request.target;
      if (target.kind !== "field") return;
      clearAt("errors", target.path);
      clearAt("ui", target.path);
      return;
    }
    if (request.kind === "list:item:remove") {
      const target = request.target;
      if (target.kind !== "item") return;
      const base = `${target.path}.${target.index}`;
      const path = target.field ? `${base}.${target.field}` : base;
      clearAt("errors", path);
      clearAt("ui", path);
      return;
    }
    if (request.kind === "list:reorder") {
      return;
    }
  });
  const inTxn = yield* FiberRef6.get(inSyncTransactionFiber);
  if (inTxn) {
    return yield* apply();
  }
  const runWithTxn = bound.__runWithStateTransaction;
  if (!runWithTxn) {
    return yield* apply();
  }
  return yield* runWithTxn(
    { kind: "trait", name: "cleanup", details: request },
    apply
  );
});
var install3 = (_bound) => Effect23.void;

// ../logix-core/src/trait-lifecycle.ts
var Ref6 = Ref5;
var scopedValidate2 = (bound, request) => scopedValidate(bound, request);
var scopedExecute2 = (bound, request) => scopedExecute(bound, request);
var cleanup2 = (bound, request) => cleanup(bound, request);
var install4 = (bound) => install3(bound);

// ../logix-core/src/Runtime.ts
var Runtime_exports = {};
__export(Runtime_exports, {
  applyTransactionSnapshot: () => applyTransactionSnapshot,
  make: () => make10
});
import { Effect as Effect28, Layer as Layer9 } from "https://esm.sh/effect@3.19.8";

// ../logix-core/src/internal/runtime/AppRuntime.ts
import { Effect as Effect24, Layer as Layer7, ManagedRuntime } from "https://esm.sh/effect@3.19.8";

// ../logix-core/src/internal/runtime/core/RootContext.ts
import { Context as Context12 } from "https://esm.sh/effect@3.19.8";
var RootContextTagImpl = class extends Context12.Tag(
  "@logix/core/RootContext"
)() {
};
var RootContextTag = RootContextTagImpl;

// ../logix-core/src/internal/runtime/AppRuntime.ts
var getTagKey = (tag2) => {
  const anyTag = tag2;
  if (typeof anyTag.key === "string") {
    return anyTag.key;
  }
  if (typeof anyTag._id === "string") {
    return anyTag._id;
  }
  if (typeof anyTag.toString === "function") {
    return anyTag.toString();
  }
  return "[unknown-tag]";
};
var buildTagIndex = (entries) => {
  const index = /* @__PURE__ */ new Map();
  for (const entry of entries) {
    const ownerId = String(entry.module.id);
    const moduleTag = entry.module;
    const moduleKey = getTagKey(moduleTag);
    const moduleInfo = {
      key: moduleKey,
      tag: moduleTag,
      ownerModuleId: ownerId,
      source: "module"
    };
    const existingModuleInfos = index.get(moduleKey);
    if (existingModuleInfos) {
      existingModuleInfos.push(moduleInfo);
    } else {
      index.set(moduleKey, [moduleInfo]);
    }
    if (entry.serviceTags && entry.serviceTags.length > 0) {
      for (const tag2 of entry.serviceTags) {
        const key = getTagKey(tag2);
        const info = {
          key,
          tag: tag2,
          ownerModuleId: ownerId,
          source: "service"
        };
        const existingInfos = index.get(key);
        if (existingInfos) {
          existingInfos.push(info);
        } else {
          index.set(key, [info]);
        }
      }
    }
  }
  return index;
};
var validateTags = (entries) => {
  const index = buildTagIndex(entries);
  const collisions = [];
  for (const [key, infos] of index) {
    if (infos.length <= 1) {
      continue;
    }
    const owners = /* @__PURE__ */ new Set();
    for (const info of infos) {
      owners.add(info.ownerModuleId);
    }
    if (owners.size > 1) {
      collisions.push({ key, conflicts: infos });
    }
  }
  if (collisions.length === 0) {
    return;
  }
  const message = "[Logix] Tag collision detected:\n" + collisions.map((c) => {
    const header = `- key: ${c.key}`;
    const lines = c.conflicts.map((i) => `  - owner: ${i.ownerModuleId}, source: ${i.source}`);
    return [header, ...lines].join("\n");
  }).join("\n");
  const error = Object.assign(new Error(message), {
    _tag: "TagCollisionError",
    collisions
  });
  throw error;
};
var makeApp = (config) => {
  const seenIds = /* @__PURE__ */ new Set();
  for (const entry of config.modules) {
    const id = String(entry.module.id);
    if (seenIds.has(id)) {
      throw new Error(
        `[Logix] Duplicate Module ID/Tag detected: "${id}". 
Ensure all modules in the application Runtime have unique IDs.`
      );
    }
    seenIds.add(id);
  }
  validateTags(config.modules);
  const stateTxnLayer = config.stateTransaction ? Layer7.succeed(StateTransactionConfigTag, config.stateTransaction) : Layer7.empty;
  const baseLayer = Layer7.mergeAll(config.layer, stateTxnLayer);
  const moduleLayers = config.modules.map(
    (entry) => (
      // 确保每个模块层都能看到 App 级 Env（baseLayer），避免在初始化阶段找不到 Root Env。
      Layer7.provide(entry.layer, baseLayer)
    )
  );
  const envLayer = moduleLayers.length > 0 ? Layer7.mergeAll(baseLayer, ...moduleLayers) : baseLayer;
  const finalLayer = Layer7.unwrapScoped(
    Effect24.gen(function* () {
      const scope = yield* Effect24.scope;
      const [patch, env] = yield* Effect24.diffFiberRefs(Layer7.buildWithScope(envLayer, scope));
      yield* Effect24.forEach(
        config.processes,
        (process) => Effect24.forkScoped(
          Effect24.provide(
            config.onError ? Effect24.catchAllCause(process, config.onError) : process,
            env
          )
        ),
        { discard: true }
      );
      const fiberRefsLayer = Layer7.scopedDiscard(Effect24.patchFiberRefs(patch));
      return Layer7.mergeAll(
        Layer7.succeedContext(env),
        fiberRefsLayer,
        Layer7.succeed(RootContextTag, { context: env })
      );
    })
  );
  return {
    definition: config,
    layer: finalLayer,
    makeRuntime: () => ManagedRuntime.make(finalLayer)
  };
};
var provide = (module, resource) => {
  const layer3 = isLayer(resource) ? resource : Layer7.succeed(module, resource);
  return { module, layer: layer3 };
};
var isLayer = (value) => typeof value === "object" && value !== null && Layer7.LayerTypeId in value;

// ../logix-core/src/Debug.ts
var Debug_exports = {};
__export(Debug_exports, {
  appendSinks: () => appendSinks,
  clearDevtoolsEvents: () => clearDevtoolsEvents2,
  devtoolsHubLayer: () => devtoolsHubLayer,
  getDevtoolsSnapshot: () => getDevtoolsSnapshot2,
  getInstanceLabel: () => getInstanceLabel2,
  getModuleTraits: () => getModuleTraits,
  getModuleTraitsById: () => getModuleTraitsById,
  internal: () => internal3,
  isDevtoolsEnabled: () => isDevtoolsEnabled2,
  layer: () => layer2,
  makeModuleInstanceCounterSink: () => makeModuleInstanceCounterSink,
  makeRingBufferSink: () => makeRingBufferSink,
  noopLayer: () => noopLayer2,
  record: () => record2,
  replace: () => replace,
  runtimeLabel: () => runtimeLabel,
  setInstanceLabel: () => setInstanceLabel2,
  subscribeDevtoolsSnapshot: () => subscribeDevtoolsSnapshot2,
  traceLayer: () => traceLayer,
  withPrettyLogger: () => withPrettyLogger
});
import { Effect as Effect26, Layer as Layer8, Logger as Logger2 } from "https://esm.sh/effect@3.19.8";

// ../logix-core/src/internal/runtime/core/DevtoolsHub.ts
import { Effect as Effect25 } from "https://esm.sh/effect@3.19.8";
var instances = /* @__PURE__ */ new Map();
var latestStates = /* @__PURE__ */ new Map();
var latestTraitSummaries = /* @__PURE__ */ new Map();
var instanceLabels = /* @__PURE__ */ new Map();
var bufferSize = 500;
var ringBuffer = [];
var currentSnapshot = {
  instances,
  events: ringBuffer,
  latestStates,
  latestTraitSummaries
};
var listeners = /* @__PURE__ */ new Set();
var notifyScheduled = false;
var scheduleNotify = () => {
  if (notifyScheduled) return;
  notifyScheduled = true;
  queueMicrotask(() => {
    notifyScheduled = false;
    for (const listener of listeners) {
      listener();
    }
  });
};
var devtoolsEnabled = false;
var configureDevtoolsHub = (options) => {
  devtoolsEnabled = true;
  if (typeof options?.bufferSize === "number" && Number.isFinite(options.bufferSize)) {
    const next = Math.floor(options.bufferSize);
    bufferSize = next > 0 ? next : bufferSize;
    if (ringBuffer.length > bufferSize) {
      ringBuffer.splice(0, ringBuffer.length - bufferSize);
    }
    scheduleNotify();
  }
};
var isDevtoolsEnabled = () => devtoolsEnabled;
var getDevtoolsSnapshot = () => currentSnapshot;
var subscribeDevtoolsSnapshot = (listener) => {
  listeners.add(listener);
  return () => {
    listeners.delete(listener);
  };
};
var clearDevtoolsEvents = () => {
  ringBuffer.length = 0;
  scheduleNotify();
};
var setInstanceLabel = (runtimeId, label) => {
  instanceLabels.set(runtimeId, label);
  scheduleNotify();
};
var getInstanceLabel = (runtimeId) => instanceLabels.get(runtimeId);
var devtoolsHubSink = {
  record: (event) => Effect25.sync(() => {
    if (event.type === "trace:instanceLabel") {
      const runtimeId = event.runtimeId;
      const data = event.data;
      const label = data && typeof data === "object" && "label" in data ? String(data.label) : void 0;
      if (runtimeId && label) {
        instanceLabels.set(runtimeId, label);
      }
    }
    if (event.type === "module:init" || event.type === "module:destroy") {
      const moduleId = event.moduleId ?? "unknown";
      const runtimeLabel2 = event.runtimeLabel ?? "unknown";
      const key = `${runtimeLabel2}::${moduleId}`;
      const prev = instances.get(key) ?? 0;
      if (event.type === "module:init") {
        instances.set(key, prev + 1);
      } else {
        const next = prev - 1;
        if (next <= 0) {
          instances.delete(key);
        } else {
          instances.set(key, next);
        }
      }
    }
    if (event.type === "state:update") {
      const moduleId = event.moduleId ?? "unknown";
      const runtimeLabel2 = event.runtimeLabel ?? "unknown";
      const runtimeId = event.runtimeId ?? "unknown";
      const key = `${runtimeLabel2}::${moduleId}::${runtimeId}`;
      latestStates.set(key, event.state);
      const traitSummary = event.traitSummary;
      if (traitSummary !== void 0) {
        latestTraitSummaries.set(key, traitSummary);
      }
    }
    if (event.type === "module:destroy") {
      const runtimeId = event.runtimeId;
      if (runtimeId) {
        instanceLabels.delete(runtimeId);
      }
    }
    if (bufferSize > 0) {
      if (ringBuffer.length >= bufferSize) {
        ringBuffer.shift();
      }
      ringBuffer.push(event);
    }
    scheduleNotify();
  })
};

// ../logix-core/src/Debug.ts
var internal3 = {
  currentDebugSinks,
  currentRuntimeLabel,
  toRuntimeDebugEventRef
};
var getDevtoolsSnapshot2 = getDevtoolsSnapshot;
var subscribeDevtoolsSnapshot2 = subscribeDevtoolsSnapshot;
var clearDevtoolsEvents2 = clearDevtoolsEvents;
var setInstanceLabel2 = setInstanceLabel;
var getInstanceLabel2 = getInstanceLabel;
var isDevtoolsEnabled2 = isDevtoolsEnabled;
var makeModuleInstanceCounterSink = () => {
  const counts = /* @__PURE__ */ new Map();
  const sink = {
    record: (event) => Effect26.sync(() => {
      if (event.type === "module:init") {
        const moduleId = event.moduleId ?? "unknown";
        const runtimeLabel2 = "runtimeLabel" in event && event.runtimeLabel ? event.runtimeLabel : "unknown";
        const key = `${runtimeLabel2}::${moduleId}`;
        const prev = counts.get(key) ?? 0;
        counts.set(key, prev + 1);
        return;
      }
      if (event.type === "module:destroy") {
        const moduleId = event.moduleId ?? "unknown";
        const runtimeLabel2 = "runtimeLabel" in event && event.runtimeLabel ? event.runtimeLabel : "unknown";
        const key = `${runtimeLabel2}::${moduleId}`;
        const prev = counts.get(key) ?? 0;
        const next = prev - 1;
        if (next <= 0) {
          counts.delete(key);
        } else {
          counts.set(key, next);
        }
      }
    })
  };
  const getSnapshot = () => new Map(counts);
  return { sink, getSnapshot };
};
var makeRingBufferSink = (capacity = 1e3) => {
  const buffer = [];
  const sink = {
    record: (event) => Effect26.sync(() => {
      if (capacity <= 0) {
        return;
      }
      if (buffer.length >= capacity) {
        buffer.shift();
      }
      buffer.push(event);
    })
  };
  const getSnapshot = () => buffer.slice();
  const clear = () => {
    buffer.length = 0;
  };
  return { sink, getSnapshot, clear };
};
var record2 = record;
var noopLayer2 = noopLayer;
var resolveMode2 = (mode) => {
  if (mode && mode !== "auto") {
    return mode;
  }
  const env = getNodeEnv();
  return env === "production" ? "prod" : "dev";
};
var layer2 = (options) => {
  const mode = resolveMode2(options?.mode);
  switch (mode) {
    case "off":
      return noopLayer;
    case "prod":
      return errorOnlyLayer;
    case "dev":
    case "auto": {
      return browserConsoleLayer;
    }
  }
};
var withPrettyLogger = (base, options) => Layer8.merge(
  base,
  Logger2.replace(
    Logger2.defaultLogger,
    Logger2.prettyLogger(options)
  )
);
var replace = (sinks) => Layer8.locallyScoped(
  internal3.currentDebugSinks,
  sinks
);
var appendSinks = (sinks) => Layer8.fiberRefLocallyScopedWith(
  currentDebugSinks,
  (current2) => [...current2, ...sinks]
);
function devtoolsHubLayer(baseOrOptions, maybeOptions) {
  const isLayerValue = (value) => typeof value === "object" && value !== null && "_op_layer" in value;
  const hasBase = isLayerValue(baseOrOptions);
  const base = hasBase ? baseOrOptions : Layer8.empty;
  const options = hasBase ? maybeOptions : baseOrOptions;
  configureDevtoolsHub(options);
  const append = appendSinks([devtoolsHubSink]);
  return Layer8.provideMerge(append, base);
}
var runtimeLabel = (label) => Layer8.fiberRefLocallyScopedWith(
  internal3.currentRuntimeLabel,
  () => label
);
var getModuleTraits = (module) => {
  const anyModule = module;
  const program = anyModule.__stateTraitProgram;
  if (!program) {
    return {};
  }
  return {
    program,
    graph: program.graph,
    plan: program.plan
  };
};
var getModuleTraitsById = (moduleId) => {
  const program = getModuleProgramById(moduleId);
  if (!program) {
    return void 0;
  }
  return {
    program,
    graph: program.graph,
    plan: program.plan
  };
};
var isLayer2 = (value) => typeof value === "object" && value !== null && "_op_layer" in value;
function traceLayer(baseOrHandler, maybeOnTrace) {
  const hasBase = isLayer2(baseOrHandler);
  const base = hasBase ? baseOrHandler : Layer8.empty;
  const onTrace = hasBase ? maybeOnTrace : baseOrHandler;
  const traceSink = {
    record: (event) => typeof event.type === "string" && event.type.startsWith("trace:") ? onTrace ? onTrace(event) : Effect26.logDebug({ traceEvent: event }) : Effect26.void
  };
  const appendTrace = Layer8.fiberRefLocallyScopedWith(
    currentDebugSinks,
    (sinks) => [...sinks, traceSink]
  );
  return Layer8.provideMerge(appendTrace, base);
}

// ../logix-core/src/middleware/index.ts
import { Effect as Effect27 } from "https://esm.sh/effect@3.19.8";
var makeDebugLogger = (config) => (op) => Effect27.gen(function* () {
  if (op.meta?.policy?.disableObservers) {
    return yield* op.effect;
  }
  if (config?.logger) {
    config.logger(op);
  } else {
    yield* Effect27.logDebug(
      `[EffectOp] kind=${op.kind} name=${op.name}`
    );
  }
  return yield* op.effect;
});
var applyDebug = (stack, config) => [...stack, makeDebugLogger(config)];
var makeDebugObserver = (config) => (op) => Effect27.gen(function* () {
  if (op.meta?.policy?.disableObservers) {
    return yield* op.effect;
  }
  if (!config?.filter || config.filter(op)) {
    yield* record2({
      type: "trace:effectop",
      moduleId: op.meta?.moduleId ?? void 0,
      data: op
    });
  }
  return yield* op.effect;
});
var applyDebugObserver = (stack, config) => [...stack, makeDebugObserver(config)];
var withDebug = (stack, options) => {
  let next = stack;
  if (options?.logger !== false) {
    const loggerConfig = typeof options?.logger === "function" ? { logger: options.logger } : void 0;
    next = applyDebug(next, loggerConfig);
  }
  if (options?.observer !== false) {
    const observerOption = options?.observer;
    const observerConfig = observerOption === void 0 ? void 0 : observerOption;
    next = applyDebugObserver(next, observerConfig);
  }
  return next;
};

// ../logix-core/src/Runtime.ts
var make10 = (rootImpl, options) => {
  const userLayer = options?.layer ?? Layer9.empty;
  let middlewareStack = options?.middleware ?? [];
  const devtoolsOptions = options?.devtools === true ? {} : options?.devtools;
  if (options?.devtools) {
    const observerConfig = devtoolsOptions?.observer === false ? false : devtoolsOptions?.observer;
    middlewareStack = withDebug(middlewareStack, {
      logger: false,
      observer: observerConfig
    });
  }
  const effectOpLayer = middlewareStack.length > 0 ? Layer9.succeed(EffectOpMiddlewareTag, {
    stack: middlewareStack
  }) : Layer9.empty;
  const baseLayer = options?.label != null ? Layer9.mergeAll(
    runtimeLabel(options.label),
    userLayer
  ) : userLayer;
  const baseWithDevtools = options?.devtools ? devtoolsHubLayer(baseLayer, {
    bufferSize: devtoolsOptions?.bufferSize
  }) : baseLayer;
  const appLayer = Layer9.mergeAll(
    baseWithDevtools,
    effectOpLayer
  );
  const appConfig = {
    layer: appLayer,
    modules: [provide(rootImpl.module, rootImpl.layer)],
    processes: rootImpl.processes ?? [],
    onError: options?.onError,
    stateTransaction: options?.stateTransaction
  };
  const app = makeApp(appConfig);
  return app.makeRuntime();
};
var applyTransactionSnapshot = (moduleId, instanceId, txnId, mode) => Effect28.gen(function* () {
  const runtime = getRuntimeByModuleAndInstance(
    moduleId,
    instanceId
  );
  if (!runtime) {
    return;
  }
  const applySnapshot = runtime.__applyTransactionSnapshot;
  if (!applySnapshot) {
    return;
  }
  yield* applySnapshot(txnId, mode);
});

// ../logix-core/src/Root.ts
var Root_exports = {};
__export(Root_exports, {
  resolve: () => resolve2
});
import { Context as Context14, Effect as Effect29 } from "https://esm.sh/effect@3.19.8";
var tagIdOf = (tag2) => typeof tag2?.id === "string" ? String(tag2.id) : typeof tag2?.key === "string" ? String(tag2.key) : "<unknown tag>";
var resolve2 = (tag2) => Effect29.gen(function* () {
  const root = yield* RootContextTag;
  try {
    return Context14.get(root.context, tag2);
  } catch {
    const requested = tagIdOf(tag2);
    const msg = isDevEnv() ? `[Root.resolve] Tag not found in root provider: ${requested}
Fix:
- Provide it when creating the runtime tree (Logix.Runtime.make(...,{ layer }) / ManagedRuntime.make(Layer.mergeAll(...))).
- Do not rely on nested RuntimeProvider.layer to mock Root.resolve.` : "[Root.resolve] tag not found";
    const err = new Error(msg);
    err.name = "MissingRootProviderError";
    return yield* Effect29.die(err);
  }
});

// ../logix-core/src/env.ts
var env_exports = {};
__export(env_exports, {
  getNodeEnv: () => getNodeEnv2,
  isDevEnv: () => isDevEnv2
});
var getNodeEnv2 = () => getNodeEnv();
var isDevEnv2 = () => isDevEnv();

// ../logix-core/src/Platform.ts
var Platform_exports2 = {};
__export(Platform_exports2, {
  NoopPlatform: () => NoopPlatform,
  NoopPlatformLayer: () => NoopPlatformLayer,
  defaultLayer: () => defaultLayer,
  tag: () => tag
});
import { Effect as Effect30, Layer as Layer10 } from "https://esm.sh/effect@3.19.8";
var tag = Tag;
var NoopPlatform = class {
  constructor() {
    this.lifecycle = {
      onSuspend: (_eff) => Effect30.void,
      onResume: (_eff) => Effect30.void,
      onReset: (_eff) => Effect30.void
    };
  }
};
var NoopPlatformLayer = Layer10.succeed(
  tag,
  new NoopPlatform()
);
var defaultLayer = NoopPlatformLayer;
export {
  Actions_exports as Actions,
  Bound_exports as Bound,
  Debug_exports as Debug,
  env_exports as Env,
  Flow_exports as Flow,
  Link_exports as Link,
  Logic_exports as Logic,
  MatchBuilder_exports2 as MatchBuilder,
  Module_exports as Module,
  Platform_exports2 as Platform,
  Resource_exports as Resource,
  Root_exports as Root,
  Runtime_exports as Runtime,
  State_exports as State,
  state_trait_exports as StateTrait,
  trait_lifecycle_exports as TraitLifecycle,
  appendSinks,
  clearDevtoolsEvents2 as clearDevtoolsEvents,
  devtoolsHubLayer,
  getDevtoolsSnapshot2 as getDevtoolsSnapshot,
  getInstanceLabel2 as getInstanceLabel,
  getModuleTraits,
  getModuleTraitsById,
  internal3 as internal,
  isDevtoolsEnabled2 as isDevtoolsEnabled,
  layer2 as layer,
  makeModuleInstanceCounterSink,
  makeRingBufferSink,
  noopLayer2 as noopLayer,
  record2 as record,
  replace,
  runtimeLabel,
  setInstanceLabel2 as setInstanceLabel,
  subscribeDevtoolsSnapshot2 as subscribeDevtoolsSnapshot,
  traceLayer,
  withPrettyLogger
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vbG9naXgtY29yZS9zcmMvTW9kdWxlLnRzIiwgIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9tdXRhdGl2ZUAxLjMuMC9ub2RlX21vZHVsZXMvbXV0YXRpdmUvc3JjL2ludGVyZmFjZS50cyIsICIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vbXV0YXRpdmVAMS4zLjAvbm9kZV9tb2R1bGVzL211dGF0aXZlL3NyYy9jb25zdGFudC50cyIsICIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vbXV0YXRpdmVAMS4zLjAvbm9kZV9tb2R1bGVzL211dGF0aXZlL3NyYy9pbnRlcm5hbC50cyIsICIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vbXV0YXRpdmVAMS4zLjAvbm9kZV9tb2R1bGVzL211dGF0aXZlL3NyYy91dGlscy9wcm90by50cyIsICIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vbXV0YXRpdmVAMS4zLjAvbm9kZV9tb2R1bGVzL211dGF0aXZlL3NyYy91dGlscy9kcmFmdC50cyIsICIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vbXV0YXRpdmVAMS4zLjAvbm9kZV9tb2R1bGVzL211dGF0aXZlL3NyYy91dGlscy9jb3B5LnRzIiwgIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9tdXRhdGl2ZUAxLjMuMC9ub2RlX21vZHVsZXMvbXV0YXRpdmUvc3JjL3V0aWxzL21hcmsudHMiLCAiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL211dGF0aXZlQDEuMy4wL25vZGVfbW9kdWxlcy9tdXRhdGl2ZS9zcmMvdXRpbHMvZGVlcEZyZWV6ZS50cyIsICIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vbXV0YXRpdmVAMS4zLjAvbm9kZV9tb2R1bGVzL211dGF0aXZlL3NyYy91dGlscy9mb3JFYWNoLnRzIiwgIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9tdXRhdGl2ZUAxLjMuMC9ub2RlX21vZHVsZXMvbXV0YXRpdmUvc3JjL3V0aWxzL2ZpbmFsaXplLnRzIiwgIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9tdXRhdGl2ZUAxLjMuMC9ub2RlX21vZHVsZXMvbXV0YXRpdmUvc3JjL3BhdGNoLnRzIiwgIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9tdXRhdGl2ZUAxLjMuMC9ub2RlX21vZHVsZXMvbXV0YXRpdmUvc3JjL3Vuc2FmZS50cyIsICIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vbXV0YXRpdmVAMS4zLjAvbm9kZV9tb2R1bGVzL211dGF0aXZlL3NyYy9tYXAudHMiLCAiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL211dGF0aXZlQDEuMy4wL25vZGVfbW9kdWxlcy9tdXRhdGl2ZS9zcmMvc2V0LnRzIiwgIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9tdXRhdGl2ZUAxLjMuMC9ub2RlX21vZHVsZXMvbXV0YXRpdmUvc3JjL2RyYWZ0LnRzIiwgIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9tdXRhdGl2ZUAxLjMuMC9ub2RlX21vZHVsZXMvbXV0YXRpdmUvc3JjL2RyYWZ0aWZ5LnRzIiwgIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9tdXRhdGl2ZUAxLjMuMC9ub2RlX21vZHVsZXMvbXV0YXRpdmUvc3JjL2N1cnJlbnQudHMiLCAiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL211dGF0aXZlQDEuMy4wL25vZGVfbW9kdWxlcy9tdXRhdGl2ZS9zcmMvbWFrZUNyZWF0b3IudHMiLCAiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL211dGF0aXZlQDEuMy4wL25vZGVfbW9kdWxlcy9tdXRhdGl2ZS9zcmMvY3JlYXRlLnRzIiwgIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9tdXRhdGl2ZUAxLjMuMC9ub2RlX21vZHVsZXMvbXV0YXRpdmUvc3JjL2FwcGx5LnRzIiwgIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9tdXRhdGl2ZUAxLjMuMC9ub2RlX21vZHVsZXMvbXV0YXRpdmUvc3JjL29yaWdpbmFsLnRzIiwgIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9tdXRhdGl2ZUAxLjMuMC9ub2RlX21vZHVsZXMvbXV0YXRpdmUvc3JjL3Jhd1JldHVybi50cyIsICIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vbXV0YXRpdmVAMS4zLjAvbm9kZV9tb2R1bGVzL211dGF0aXZlL3NyYy91dGlscy9tYXJrZXIudHMiLCAiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL211dGF0aXZlQDEuMy4wL25vZGVfbW9kdWxlcy9tdXRhdGl2ZS9zcmMvdXRpbHMvY2FzdC50cyIsICIuLi8uLi8uLi9sb2dpeC1jb3JlL3NyYy9pbnRlcm5hbC9ydW50aW1lL01vZHVsZUZhY3RvcnkudHMiLCAiLi4vLi4vLi4vbG9naXgtY29yZS9zcmMvaW50ZXJuYWwvcnVudGltZS9Nb2R1bGVSdW50aW1lLnRzIiwgIi4uLy4uLy4uL2xvZ2l4LWNvcmUvc3JjL2ludGVybmFsL3J1bnRpbWUvY29yZS9MaWZlY3ljbGUudHMiLCAiLi4vLi4vLi4vbG9naXgtY29yZS9zcmMvaW50ZXJuYWwvcnVudGltZS9jb3JlL0RlYnVnU2luay50cyIsICIuLi8uLi8uLi9sb2dpeC1jb3JlL3NyYy9pbnRlcm5hbC9ydW50aW1lL2NvcmUvU3RhdGVUcmFuc2FjdGlvbi50cyIsICIuLi8uLi8uLi9sb2dpeC1jb3JlL3NyYy9pbnRlcm5hbC9ydW50aW1lL2NvcmUvVGFza1J1bm5lci50cyIsICIuLi8uLi8uLi9sb2dpeC1jb3JlL3NyYy9pbnRlcm5hbC9ydW50aW1lL2NvcmUvZW52LnRzIiwgIi4uLy4uLy4uL2xvZ2l4LWNvcmUvc3JjL2ludGVybmFsL3J1bnRpbWUvY29yZS9SZWR1Y2VyRGlhZ25vc3RpY3MudHMiLCAiLi4vLi4vLi4vbG9naXgtY29yZS9zcmMvaW50ZXJuYWwvcnVudGltZS9jb3JlL0xpZmVjeWNsZURpYWdub3N0aWNzLnRzIiwgIi4uLy4uLy4uL2xvZ2l4LWNvcmUvc3JjL2ludGVybmFsL3J1bnRpbWUvY29yZS9Mb2dpY0RpYWdub3N0aWNzLnRzIiwgIi4uLy4uLy4uL2xvZ2l4LWNvcmUvc3JjL2ludGVybmFsL3J1bnRpbWUvQm91bmRBcGlSdW50aW1lLnRzIiwgIi4uLy4uLy4uL2xvZ2l4LWNvcmUvc3JjL2ludGVybmFsL3J1bnRpbWUvY29yZS9GbG93UnVudGltZS50cyIsICIuLi8uLi8uLi9sb2dpeC1jb3JlL3NyYy9pbnRlcm5hbC9ydW50aW1lL0VmZmVjdE9wQ29yZS50cyIsICIuLi8uLi8uLi9sb2dpeC1jb3JlL3NyYy9lZmZlY3RvcC50cyIsICIuLi8uLi8uLi9sb2dpeC1jb3JlL3NyYy9pbnRlcm5hbC9ydW50aW1lL2NvcmUvTWF0Y2hCdWlsZGVyLnRzIiwgIi4uLy4uLy4uL2xvZ2l4LWNvcmUvc3JjL2ludGVybmFsL3J1bnRpbWUvY29yZS9QbGF0Zm9ybS50cyIsICIuLi8uLi8uLi9sb2dpeC1jb3JlL3NyYy9pbnRlcm5hbC9zdGF0ZS10cmFpdC9jb252ZXJnZS50cyIsICIuLi8uLi8uLi9sb2dpeC1jb3JlL3NyYy9pbnRlcm5hbC9zdGF0ZS10cmFpdC9kZXBzLXRyYWNlLnRzIiwgIi4uLy4uLy4uL2xvZ2l4LWNvcmUvc3JjL2ludGVybmFsL3N0YXRlLXRyYWl0L3ZhbGlkYXRlLnRzIiwgIi4uLy4uLy4uL2xvZ2l4LWNvcmUvc3JjL2ludGVybmFsL3N0YXRlLXRyYWl0L2dyYXBoLnRzIiwgIi4uLy4uLy4uL2xvZ2l4LWNvcmUvc3JjL2ludGVybmFsL3N0YXRlLXRyYWl0L3JldmVyc2UtY2xvc3VyZS50cyIsICIuLi8uLi8uLi9sb2dpeC1jb3JlL3NyYy9pbnRlcm5hbC9zdGF0ZS10cmFpdC9zb3VyY2UudHMiLCAiLi4vLi4vLi4vbG9naXgtY29yZS9zcmMvUmVzb3VyY2UudHMiLCAiLi4vLi4vLi4vbG9naXgtY29yZS9zcmMvaW50ZXJuYWwvcnVudGltZS9jb3JlL1JlcGxheUxvZy50cyIsICIuLi8uLi8uLi9sb2dpeC1jb3JlL3NyYy9pbnRlcm5hbC9zdGF0ZS10cmFpdC9yb3dpZC50cyIsICIuLi8uLi8uLi9sb2dpeC1jb3JlL3NyYy9zdGF0ZS10cmFpdC50cyIsICIuLi8uLi8uLi9sb2dpeC1jb3JlL3NyYy9pbnRlcm5hbC9zdGF0ZS10cmFpdC9tZXRhLnRzIiwgIi4uLy4uLy4uL2xvZ2l4LWNvcmUvc3JjL2ludGVybmFsL3N0YXRlLXRyYWl0L21vZGVsLnRzIiwgIi4uLy4uLy4uL2xvZ2l4LWNvcmUvc3JjL2ludGVybmFsL3N0YXRlLXRyYWl0L2J1aWxkLnRzIiwgIi4uLy4uLy4uL2xvZ2l4LWNvcmUvc3JjL2ludGVybmFsL3N0YXRlLXRyYWl0L2luc3RhbGwudHMiLCAiLi4vLi4vLi4vbG9naXgtY29yZS9zcmMvaW50ZXJuYWwvZGVidWcvTW9kdWxlVHJhaXRzUmVnaXN0cnkudHMiLCAiLi4vLi4vLi4vbG9naXgtY29yZS9zcmMvU3RhdGUudHMiLCAiLi4vLi4vLi4vbG9naXgtY29yZS9zcmMvQWN0aW9ucy50cyIsICIuLi8uLi8uLi9sb2dpeC1jb3JlL3NyYy9Mb2dpYy50cyIsICIuLi8uLi8uLi9sb2dpeC1jb3JlL3NyYy9Cb3VuZC50cyIsICIuLi8uLi8uLi9sb2dpeC1jb3JlL3NyYy9MaW5rLnRzIiwgIi4uLy4uLy4uL2xvZ2l4LWNvcmUvc3JjL0Zsb3cudHMiLCAiLi4vLi4vLi4vbG9naXgtY29yZS9zcmMvTWF0Y2hCdWlsZGVyLnRzIiwgIi4uLy4uLy4uL2xvZ2l4LWNvcmUvc3JjL3RyYWl0LWxpZmVjeWNsZS50cyIsICIuLi8uLi8uLi9sb2dpeC1jb3JlL3NyYy9pbnRlcm5hbC90cmFpdC1saWZlY3ljbGUvaW5kZXgudHMiLCAiLi4vLi4vLi4vbG9naXgtY29yZS9zcmMvUnVudGltZS50cyIsICIuLi8uLi8uLi9sb2dpeC1jb3JlL3NyYy9pbnRlcm5hbC9ydW50aW1lL0FwcFJ1bnRpbWUudHMiLCAiLi4vLi4vLi4vbG9naXgtY29yZS9zcmMvaW50ZXJuYWwvcnVudGltZS9jb3JlL1Jvb3RDb250ZXh0LnRzIiwgIi4uLy4uLy4uL2xvZ2l4LWNvcmUvc3JjL0RlYnVnLnRzIiwgIi4uLy4uLy4uL2xvZ2l4LWNvcmUvc3JjL2ludGVybmFsL3J1bnRpbWUvY29yZS9EZXZ0b29sc0h1Yi50cyIsICIuLi8uLi8uLi9sb2dpeC1jb3JlL3NyYy9taWRkbGV3YXJlL2luZGV4LnRzIiwgIi4uLy4uLy4uL2xvZ2l4LWNvcmUvc3JjL1Jvb3QudHMiLCAiLi4vLi4vLi4vbG9naXgtY29yZS9zcmMvZW52LnRzIiwgIi4uLy4uLy4uL2xvZ2l4LWNvcmUvc3JjL1BsYXRmb3JtLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBFZmZlY3QsIExheWVyLCBTY2hlbWEgfSBmcm9tIFwiZWZmZWN0XCJcbmltcG9ydCB7IGNyZWF0ZSB9IGZyb20gXCJtdXRhdGl2ZVwiXG5pbXBvcnQgKiBhcyBMb2dpYyBmcm9tIFwiLi9Mb2dpYy5qc1wiXG5pbXBvcnQgKiBhcyBNb2R1bGVGYWN0b3J5IGZyb20gXCIuL2ludGVybmFsL3J1bnRpbWUvTW9kdWxlRmFjdG9yeS5qc1wiXG5pbXBvcnQgdHlwZSB7XG4gIEFjdGlvbnNGcm9tTWFwLFxuICBBbnlNb2R1bGVTaGFwZSxcbiAgQW55U2NoZW1hLFxuICBCb3VuZEFwaSxcbiAgQWN0aW9uT2YsXG4gIE1vZHVsZUltcGwsXG4gIE1vZHVsZUluc3RhbmNlLFxuICBNb2R1bGVMb2dpYyxcbiAgTW9kdWxlU2hhcGUsXG4gIE1vZHVsZVJ1bnRpbWUsXG4gIE1vZHVsZVRhZyxcbiAgTW9kdWxlSGFuZGxlLFxuICBNb2R1bGVIYW5kbGVVbmlvbixcbiAgUmVkdWNlcnNGcm9tTWFwLFxuICBTdGF0ZU9mLFxufSBmcm9tIFwiLi9pbnRlcm5hbC9tb2R1bGUuanNcIlxuaW1wb3J0ICogYXMgU3RhdGVUcmFpdCBmcm9tIFwiLi9zdGF0ZS10cmFpdC5qc1wiXG5pbXBvcnQgdHlwZSB7IFN0YXRlVHJhaXRQcm9ncmFtIH0gZnJvbSBcIi4vc3RhdGUtdHJhaXQuanNcIlxuaW1wb3J0ICogYXMgTW9kdWxlVHJhaXRzUmVnaXN0cnkgZnJvbSBcIi4vaW50ZXJuYWwvZGVidWcvTW9kdWxlVHJhaXRzUmVnaXN0cnkuanNcIlxuXG4vKipcbiAqIE1vZHVsZSAvIE1vZHVsZVJ1bnRpbWUgLyBNb2R1bGVJbXBsIFx1N0I0OVx1NjgzOFx1NUZDM1x1N0M3Qlx1NTc4Qlx1NUI5QVx1NEU0OVx1NzY4NFx1NTE2Q1x1NUYwMFx1NTFGQVx1NTNFM1x1MzAwMlxuICpcbiAqIFx1NEUwRSBkb2NzL3NwZWNzL3J1bnRpbWUtbG9naXgvY29yZS8wMi1tb2R1bGUtYW5kLWxvZ2ljLWFwaS5tZCBcdTRGRERcdTYzMDFcdTVCRjlcdTlGNTBcdTMwMDJcbiAqIFx1NTE3N1x1NEY1M1x1N0M3Qlx1NTc4Qlx1NUI5QVx1NEU0OVx1OTZDNlx1NEUyRFx1NTcyOCBpbnRlcm5hbC9tb2R1bGUudHMgXHU0RTJEXHVGRjBDXHU2NzJDXHU2QTIxXHU1NzU3XHU4RDFGXHU4RDIzXHU3RUM0XHU1NDA4XHU1REU1XHU1MzgyXHU1QjlFXHU3M0IwXHUzMDAyXG4gKi9cbmV4cG9ydCB0eXBlIHtcbiAgQW55U2NoZW1hLFxuICBBbnlNb2R1bGVTaGFwZSxcbiAgTW9kdWxlU2hhcGUsXG4gIE1vZHVsZUxvZ2ljLFxuICBNb2R1bGVJbnN0YW5jZSxcbiAgTW9kdWxlSW1wbCxcbiAgTW9kdWxlUnVudGltZSxcbiAgTW9kdWxlVGFnLFxuICBNb2R1bGVIYW5kbGUsXG4gIE1vZHVsZUhhbmRsZVVuaW9uLFxuICBTdGF0ZU9mLFxuICBBY3Rpb25zRnJvbU1hcCxcbiAgUmVkdWNlcnNGcm9tTWFwLFxuICBCb3VuZEFwaSxcbiAgQWN0aW9uT2YsXG59IGZyb20gXCIuL2ludGVybmFsL21vZHVsZS5qc1wiXG5cbi8qKlxuICogUmVkdWNlciBcdTVFMkVcdTUyQTlcdTVERTVcdTUxNzdcdUZGMUFcbiAqIC0gYFJlZHVjZXIubXV0YXRlYCBcdTYzRDBcdTRGOUJcdTRFMEUgYCQuc3RhdGUubXV0YXRlYCBcdTRFMDBcdTgxRjRcdTc2ODQgbXV0YXRpdmUgXHU5OENFXHU2ODNDXHU1MTk5XHU2Q0Q1XHVGRjFCXG4gKiAtIFx1OTAxQVx1OEZDN1x1NTE4NVx1OTBFOFx1NTdGQVx1NEU4RSBtdXRhdGl2ZSBcdTc2ODRcdTRFMERcdTUzRUZcdTUzRDhcdTY2RjRcdTY1QjBcdUZGMENcdTVDMDZcdTMwMENcdTVDMzFcdTU3MzBcdTRGRUVcdTY1MzkgZHJhZnRcdTMwMERcdTY2MjBcdTVDMDRcdTRFM0FcdTdFQUYgYChzdGF0ZSwgYWN0aW9uKSA9PiBzdGF0ZWAgXHU1MUZEXHU2NTcwXHUzMDAyXG4gKlxuICogXHU3NTI4XHU2Q0Q1XHU3OTNBXHU0RjhCXHVGRjFBXG4gKlxuICogICBjb25zdCBDb3VudGVyID0gTG9naXguTW9kdWxlLm1ha2UoXCJDb3VudGVyXCIsIHtcbiAqICAgICBzdGF0ZTogQ291bnRlclN0YXRlLFxuICogICAgIGFjdGlvbnM6IENvdW50ZXJBY3Rpb25zLFxuICogICAgIHJlZHVjZXJzOiB7XG4gKiAgICAgICBpbmM6IExvZ2l4Lk1vZHVsZS5SZWR1Y2VyLm11dGF0ZSgoZHJhZnQsIF9hY3Rpb24pID0+IHtcbiAqICAgICAgICAgZHJhZnQuY291bnQgKz0gMVxuICogICAgICAgfSksXG4gKiAgICAgfSxcbiAqICAgfSlcbiAqXG4gKiAgIHlpZWxkKiAkLnJlZHVjZXIoXG4gKiAgICAgXCJzZXRWYWx1ZVwiLFxuICogICAgIExvZ2l4Lk1vZHVsZS5SZWR1Y2VyLm11dGF0ZSgoZHJhZnQsIGFjdGlvbikgPT4ge1xuICogICAgICAgZHJhZnQudmFsdWUgPSBhY3Rpb24ucGF5bG9hZFxuICogICAgIH0pLFxuICogICApXG4gKi9cbmV4cG9ydCBjb25zdCBSZWR1Y2VyID0ge1xuICBtdXRhdGU6IDxTLCBBPihcbiAgICBtdXRhdG9yOiAoZHJhZnQ6IExvZ2ljLkRyYWZ0PFM+LCBhY3Rpb246IEEpID0+IHZvaWRcbiAgKTogKChzdGF0ZTogUywgYWN0aW9uOiBBKSA9PiBTKSA9PlxuICAgIChzdGF0ZSwgYWN0aW9uKSA9PlxuICAgICAgY3JlYXRlKHN0YXRlIGFzIFMsIChkcmFmdCkgPT4ge1xuICAgICAgICBtdXRhdG9yKGRyYWZ0IGFzIExvZ2ljLkRyYWZ0PFM+LCBhY3Rpb24pXG4gICAgICB9KSBhcyBTLFxufVxuXG4vKipcbiAqIFx1N0I4MFx1NTMxNlx1NzY4NCBTaGFwZSBcdTVCOUFcdTRFNDlcdTUyQTlcdTYyNEJcdUZGMENcdTRFMTNcdTRFM0EgQWN0aW9uIE1hcCBcdThCQkVcdThCQTFcdTMwMDJcbiAqIEBleGFtcGxlIHR5cGUgTXlTaGFwZSA9IFNoYXBlPHR5cGVvZiBNeVN0YXRlLCB0eXBlb2YgTXlBY3Rpb25NYXA+XG4gKi9cbmV4cG9ydCB0eXBlIFNoYXBlPFxuICBTIGV4dGVuZHMgQW55U2NoZW1hLFxuICBNIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgQW55U2NoZW1hPlxuPiA9IE1vZHVsZVNoYXBlPFMsIFNjaGVtYS5TY2hlbWE8QWN0aW9uc0Zyb21NYXA8TT4+LCBNPlxuXG5jb25zdCBtYWtlSW1wbCA9IDxcbiAgSWQgZXh0ZW5kcyBzdHJpbmcsXG4gIFNTY2hlbWEgZXh0ZW5kcyBBbnlTY2hlbWEsXG4gIEFNYXAgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBBbnlTY2hlbWE+XG4+KFxuICBpZDogSWQsXG4gIGRlZjoge1xuICAgIHJlYWRvbmx5IHN0YXRlOiBTU2NoZW1hXG4gICAgcmVhZG9ubHkgYWN0aW9uczogQU1hcFxuICAgIHJlYWRvbmx5IHJlZHVjZXJzPzogUmVkdWNlcnNGcm9tTWFwPFNTY2hlbWEsIEFNYXA+XG4gIH1cbik6IE1vZHVsZUluc3RhbmNlPFxuICBJZCxcbiAgTW9kdWxlU2hhcGU8U1NjaGVtYSwgU2NoZW1hLlNjaGVtYTxBY3Rpb25zRnJvbU1hcDxBTWFwPj4sIEFNYXA+XG4+ID0+IE1vZHVsZUZhY3RvcnkuTW9kdWxlKGlkLCBkZWYpIGFzIE1vZHVsZUluc3RhbmNlPFxuICBJZCxcbiAgTW9kdWxlU2hhcGU8U1NjaGVtYSwgU2NoZW1hLlNjaGVtYTxBY3Rpb25zRnJvbU1hcDxBTWFwPj4sIEFNYXA+XG4+XG5cbi8qKlxuICogTW9kdWxlLm1ha2VcdUZGMUFcbiAqIC0gXHU0RUU1XHU3RUQ5XHU1QjlBIGlkIFx1NEUwRSBzdGF0ZS9hY3Rpb25zL3JlZHVjZXJzIFx1NUI5QVx1NEU0OVx1NEUwMFx1NEUyQVx1OTg4Nlx1NTdERlx1NkEyMVx1NTc1N1x1RkYxQlxuICogLSBcdThGRDRcdTU2REVcdTc2ODQgTW9kdWxlSW5zdGFuY2UgXHU2NUUyXHU2NjJGIENvbnRleHQuVGFnXHVGRjBDXHU1M0M4XHU2NDNBXHU1RTI2IFNoYXBlIFx1NEUwRVx1NURFNVx1NTM4Mlx1ODBGRFx1NTI5Qlx1MzAwMlxuICpcbiAqIFx1NTE3OFx1NTc4Qlx1NzUyOFx1NkNENVx1RkYxQVxuICpcbiAqICAgY29uc3QgQ291bnRlciA9IExvZ2l4Lk1vZHVsZS5tYWtlKFwiQ291bnRlclwiLCB7XG4gKiAgICAgc3RhdGU6IENvdW50ZXJTdGF0ZSxcbiAqICAgICBhY3Rpb25zOiBDb3VudGVyQWN0aW9ucyxcbiAqICAgfSlcbiAqL1xuZXhwb3J0IGNvbnN0IG1ha2UgPSA8XG4gIElkIGV4dGVuZHMgc3RyaW5nLFxuICBTU2NoZW1hIGV4dGVuZHMgQW55U2NoZW1hLFxuICBBTWFwIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgQW55U2NoZW1hPlxuPihcbiAgaWQ6IElkLFxuICBkZWY6IHtcbiAgICByZWFkb25seSBzdGF0ZTogU1NjaGVtYVxuICAgIHJlYWRvbmx5IGFjdGlvbnM6IEFNYXBcbiAgICByZWFkb25seSByZWR1Y2Vycz86IFJlZHVjZXJzRnJvbU1hcDxTU2NoZW1hLCBBTWFwPlxuICAgIC8qKlxuICAgICAqIFx1OTg4NFx1NzU1OVx1RkYxQXRyYWl0cyBcdTY5RkRcdTRGNERcdTc1MjhcdTRFOEVcdTYzMDJcdThGN0QgU3RhdGVUcmFpdFNwZWNcdUZGMDhcdThCRTZcdTg5QzEgc3BlY3MvMDAxLW1vZHVsZS10cmFpdHMtcnVudGltZVx1RkYwOVx1MzAwMlxuICAgICAqIC0gXHU1RjUzXHU1MjREIFBoYXNlIFx1NEVDNVx1NTcyOFx1N0M3Qlx1NTc4Qlx1NUM0Mlx1NTE0MVx1OEJCOFx1OEJFNVx1NUI1N1x1NkJCNVx1NUI1OFx1NTcyOFx1RkYwQ1x1OEZEMFx1ODg0Q1x1NjVGNlx1NUI5RVx1NzNCMFx1NUMxQVx1NjcyQVx1NkQ4OFx1OEQzOVx1RkYxQlxuICAgICAqIC0gXHU1NDBFXHU3RUVEIFBoYXNlIFx1NUMwNlx1NTcyOCBNb2R1bGVJbXBsIC8gUnVudGltZSBcdTRFMkRcdThCQzZcdTUyMkJcdTVFNzZcdTYzQTVcdTUxNjUgU3RhdGVUcmFpdFByb2dyYW0gXHU0RTBFIGluc3RhbGwgXHU5MDNCXHU4RjkxXHUzMDAyXG4gICAgICovXG4gICAgcmVhZG9ubHkgdHJhaXRzPzogdW5rbm93blxuICB9XG4pOiBNb2R1bGVJbnN0YW5jZTxcbiAgSWQsXG4gIE1vZHVsZVNoYXBlPFNTY2hlbWEsIFNjaGVtYS5TY2hlbWE8QWN0aW9uc0Zyb21NYXA8QU1hcD4+LCBBTWFwPlxuPiA9PiB7XG4gIGNvbnN0IG1vZHVsZUluc3RhbmNlID0gbWFrZUltcGwoaWQsIGRlZilcblxuICAvLyBcdTgyRTVcdTY3MkFcdTYzRDBcdTRGOUIgdHJhaXRzIFx1NjlGRFx1NEY0RFx1RkYwQ1x1NzZGNFx1NjNBNVx1OEZENFx1NTZERVx1NTdGQVx1Nzg0MCBNb2R1bGUgXHU1QjlFXHU0RjhCXHUzMDAyXG4gIGlmICghZGVmLnRyYWl0cykge1xuICAgIHJldHVybiBtb2R1bGVJbnN0YW5jZVxuICB9XG5cbiAgLy8gXHU1N0ZBXHU0RThFIE1vZHVsZSBcdTVCOUFcdTRFNDlcdTY3ODRcdTkwMjAgU3RhdGVUcmFpdFByb2dyYW1cdUZGMUFcbiAgLy8gLSBTIFx1ODlDNlx1NEUzQSBzdGF0ZVNjaGVtYSBcdTc2ODRcdThGOTNcdTUxRkFcdTdDN0JcdTU3OEJcdUZGMUJcbiAgLy8gLSB0cmFpdHMgXHU4OUM2XHU0RTNBIFN0YXRlVHJhaXRTcGVjPFM+XHVGRjA4XHU4QzAzXHU3NTI4XHU2NUI5XHU5MDFBXHU4RkM3IFN0YXRlVHJhaXQuZnJvbSBcdTY1MzZcdTdBODRcdThERUZcdTVGODRcdTRFMEVcdTdDN0JcdTU3OEJcdUZGMDlcdTMwMDJcbiAgdHlwZSBTID0gU2NoZW1hLlNjaGVtYS5UeXBlPFNTY2hlbWE+XG5cbiAgY29uc3Qgc3RhdGVTY2hlbWEgPSBkZWYuc3RhdGUgYXMgU2NoZW1hLlNjaGVtYTxhbnksIGFueT5cbiAgY29uc3QgdHJhaXRzU3BlYyA9IGRlZi50cmFpdHMgYXMgU3RhdGVUcmFpdC5TdGF0ZVRyYWl0U3BlYzxhbnk+XG5cbiAgY29uc3QgcHJvZ3JhbSA9IFN0YXRlVHJhaXQuYnVpbGQoc3RhdGVTY2hlbWEgYXMgYW55LCB0cmFpdHNTcGVjIGFzIGFueSlcblxuICAvLyBcdTZDRThcdTUxOENcdTUyMzAgRGVidWcvRGV2dG9vbHMgXHU3NTI4XHU3Njg0XHU1MTY4XHU1QzQwXHU3RDIyXHU1RjE1XHVGRjBDXHU0RkJGXHU0RThFXHU2MzA5IG1vZHVsZUlkIFx1NjdFNVx1OEJFMiBTdGF0ZVRyYWl0UHJvZ3JhbVx1MzAwMlxuICBNb2R1bGVUcmFpdHNSZWdpc3RyeS5yZWdpc3Rlck1vZHVsZVByb2dyYW0oaWQsIHByb2dyYW0gYXMgU3RhdGVUcmFpdFByb2dyYW08YW55PilcblxuICAvLyBcdTVDMDYgUHJvZ3JhbSBcdTYzMDJcdTU3MjggTW9kdWxlIFx1NUI5RVx1NEY4Qlx1NEUwQVx1RkYwQ1x1NEY5Qlx1NTQwRVx1N0VFRCBEZWJ1Zy9EZXZ0b29scyBcdThCRkJcdTUzRDZcdTMwMDJcbiAgOyhtb2R1bGVJbnN0YW5jZSBhcyBhbnkpLl9fc3RhdGVUcmFpdFByb2dyYW0gPSBwcm9ncmFtXG5cbiAgLy8gXHU1QzAxXHU4OEM1XHU0RTAwXHU0RTJBXHU1MTg1XHU5MEU4IExvZ2ljXHVGRjBDXHU3NTI4XHU0RThFXHU1NzI4IFJ1bnRpbWUgXHU1MjFEXHU1OUNCXHU1MzE2XHU5NjM2XHU2QkI1XHU1Qjg5XHU4OEM1IFN0YXRlVHJhaXQgXHU4ODRDXHU0RTNBXHUzMDAyXG4gIGNvbnN0IG1ha2VUcmFpdExvZ2ljID0gKCk6IE1vZHVsZUxvZ2ljPFxuICAgIE1vZHVsZVNoYXBlPFNTY2hlbWEsIFNjaGVtYS5TY2hlbWE8QWN0aW9uc0Zyb21NYXA8QU1hcD4+LCBBTWFwPixcbiAgICBuZXZlcixcbiAgICBuZXZlclxuICA+ID0+XG4gICAgbW9kdWxlSW5zdGFuY2UubG9naWMoKCQpID0+ICh7XG4gICAgICBzZXR1cDogU3RhdGVUcmFpdC5pbnN0YWxsKCQgYXMgdW5rbm93biBhcyBCb3VuZEFwaTxhbnksIGFueT4sIHByb2dyYW0pLFxuICAgICAgcnVuOiBFZmZlY3Qudm9pZCxcbiAgICB9KSkgYXMgTW9kdWxlTG9naWM8XG4gICAgICBNb2R1bGVTaGFwZTxTU2NoZW1hLCBTY2hlbWEuU2NoZW1hPEFjdGlvbnNGcm9tTWFwPEFNYXA+PiwgQU1hcD4sXG4gICAgICBuZXZlcixcbiAgICAgIG5ldmVyXG4gICAgPlxuXG4gIC8vIFx1NTMwNVx1ODhDNSBpbXBsZW1lbnRcdUZGMUFcdTU0MENcdTY4MzdcdTU3MjhcdTVCOUVcdTczQjBcdTVDNDJcdTgxRUFcdTUyQThcdTZDRThcdTUxNjUgU3RhdGVUcmFpdCBcdTVCODlcdTg4QzVcdTkwM0JcdThGOTFcdTMwMDJcbiAgY29uc3Qgb3JpZ2luYWxJbXBsZW1lbnQgPSBtb2R1bGVJbnN0YW5jZS5pbXBsZW1lbnRcbiAgOyhtb2R1bGVJbnN0YW5jZSBhcyBhbnkpLmltcGxlbWVudCA9ICg8UiA9IG5ldmVyPihjb25maWc6IHtcbiAgICBpbml0aWFsOiBTdGF0ZU9mPHR5cGVvZiBtb2R1bGVJbnN0YW5jZS5zaGFwZT5cbiAgICBsb2dpY3M/OiBBcnJheTxNb2R1bGVMb2dpYzx0eXBlb2YgbW9kdWxlSW5zdGFuY2Uuc2hhcGUsIFIsIGFueT4+XG4gICAgaW1wb3J0cz86IFJlYWRvbmx5QXJyYXk8XG4gICAgICBMYXllci5MYXllcjxhbnksIGFueSwgYW55PiB8IE1vZHVsZUltcGw8YW55LCBBbnlNb2R1bGVTaGFwZSwgYW55PlxuICAgID5cbiAgICBwcm9jZXNzZXM/OiBSZWFkb25seUFycmF5PEVmZmVjdC5FZmZlY3Q8dm9pZCwgYW55LCBhbnk+PlxuICB9KSA9PiB7XG4gICAgY29uc3QgdHJhaXRMb2dpYyA9IG1ha2VUcmFpdExvZ2ljKCkgYXMgTW9kdWxlTG9naWM8XG4gICAgICB0eXBlb2YgbW9kdWxlSW5zdGFuY2Uuc2hhcGUsXG4gICAgICBSLFxuICAgICAgYW55XG4gICAgPlxuICAgIGNvbnN0IG1lcmdlZExvZ2ljcyA9IGNvbmZpZy5sb2dpY3NcbiAgICAgID8gW3RyYWl0TG9naWMsIC4uLmNvbmZpZy5sb2dpY3NdXG4gICAgICA6IFt0cmFpdExvZ2ljXVxuICAgIHJldHVybiBvcmlnaW5hbEltcGxlbWVudDxSPih7XG4gICAgICAuLi5jb25maWcsXG4gICAgICBsb2dpY3M6IG1lcmdlZExvZ2ljcyxcbiAgICB9KVxuICB9KSBhcyB0eXBlb2YgbW9kdWxlSW5zdGFuY2UuaW1wbGVtZW50XG5cbiAgcmV0dXJuIG1vZHVsZUluc3RhbmNlXG59XG4iLCAiaW1wb3J0IHsgZGF0YVR5cGVzIH0gZnJvbSAnLi9jb25zdGFudCc7XG5cbmV4cG9ydCBjb25zdCBlbnVtIERyYWZ0VHlwZSB7XG4gIE9iamVjdCxcbiAgQXJyYXksXG4gIE1hcCxcbiAgU2V0LFxufVxuXG5leHBvcnQgY29uc3QgT3BlcmF0aW9uID0ge1xuICBSZW1vdmU6ICdyZW1vdmUnLFxuICBSZXBsYWNlOiAncmVwbGFjZScsXG4gIEFkZDogJ2FkZCcsXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgdHlwZSBEYXRhVHlwZSA9IGtleW9mIHR5cGVvZiBkYXRhVHlwZXM7XG5cbmV4cG9ydCB0eXBlIFBhdGNoZXNPcHRpb25zID1cbiAgfCBib29sZWFuXG4gIHwge1xuICAgICAgLyoqXG4gICAgICAgKiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBgdHJ1ZWAuIElmIGl0J3MgYHRydWVgLCB0aGUgcGF0aCB3aWxsIGJlIGFuIGFycmF5LCBvdGhlcndpc2UgaXQgaXMgYSBzdHJpbmcuXG4gICAgICAgKi9cbiAgICAgIHBhdGhBc0FycmF5PzogYm9vbGVhbjtcbiAgICAgIC8qKlxuICAgICAgICogVGhlIGRlZmF1bHQgdmFsdWUgaXMgYHRydWVgLiBJZiBpdCdzIGB0cnVlYCwgdGhlIGFycmF5IGxlbmd0aCB3aWxsIGJlIGluY2x1ZGVkIGluIHRoZSBwYXRjaGVzLCBvdGhlcndpc2Ugbm8gaW5jbHVkZSBhcnJheSBsZW5ndGguXG4gICAgICAgKi9cbiAgICAgIGFycmF5TGVuZ3RoQXNzaWdubWVudD86IGJvb2xlYW47XG4gICAgfTtcblxuZXhwb3J0IGludGVyZmFjZSBGaW5hbGl0aWVzIHtcbiAgZHJhZnQ6ICgocGF0Y2hlcz86IFBhdGNoZXMsIGludmVyc2VQYXRjaGVzPzogUGF0Y2hlcykgPT4gdm9pZClbXTtcbiAgcmV2b2tlOiAoKCkgPT4gdm9pZClbXTtcbiAgaGFuZGxlZFNldDogV2Vha1NldDxhbnk+O1xuICBkcmFmdHNDYWNoZTogV2Vha1NldDxvYmplY3Q+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFByb3h5RHJhZnQ8VCA9IGFueT4ge1xuICB0eXBlOiBEcmFmdFR5cGU7XG4gIG9wZXJhdGVkPzogYm9vbGVhbjtcbiAgZmluYWxpemVkOiBib29sZWFuO1xuICBvcmlnaW5hbDogVDtcbiAgY29weTogVCB8IG51bGw7XG4gIHByb3h5OiBUIHwgbnVsbDtcbiAgZmluYWxpdGllczogRmluYWxpdGllcztcbiAgb3B0aW9uczogT3B0aW9uczxhbnksIGFueT4gJiB7IHVwZGF0ZWRWYWx1ZXM/OiBXZWFrTWFwPGFueSwgYW55PiB9O1xuICBwYXJlbnQ/OiBQcm94eURyYWZ0IHwgbnVsbDtcbiAga2V5Pzogc3RyaW5nIHwgbnVtYmVyIHwgc3ltYm9sO1xuICBzZXRNYXA/OiBNYXA8YW55LCBQcm94eURyYWZ0PjtcbiAgYXNzaWduZWRNYXA/OiBNYXA8YW55LCBib29sZWFuPjtcbiAgY2FsbGJhY2tzPzogKChwYXRjaGVzPzogUGF0Y2hlcywgaW52ZXJzZVBhdGNoZXM/OiBQYXRjaGVzKSA9PiB2b2lkKVtdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElQYXRjaCB7XG4gIG9wOiAodHlwZW9mIE9wZXJhdGlvbilba2V5b2YgdHlwZW9mIE9wZXJhdGlvbl07XG4gIHZhbHVlPzogYW55O1xufVxuXG5leHBvcnQgdHlwZSBQYXRjaDxQIGV4dGVuZHMgUGF0Y2hlc09wdGlvbnMgPSBhbnk+ID0gUCBleHRlbmRzIHtcbiAgcGF0aEFzQXJyYXk6IGZhbHNlO1xufVxuICA/IElQYXRjaCAmIHtcbiAgICAgIHBhdGg6IHN0cmluZztcbiAgICB9XG4gIDogUCBleHRlbmRzIHRydWUgfCBvYmplY3RcbiAgICA/IElQYXRjaCAmIHtcbiAgICAgICAgcGF0aDogKHN0cmluZyB8IG51bWJlcilbXTtcbiAgICAgIH1cbiAgICA6IElQYXRjaCAmIHtcbiAgICAgICAgcGF0aDogc3RyaW5nIHwgKHN0cmluZyB8IG51bWJlcilbXTtcbiAgICAgIH07XG5cbmV4cG9ydCB0eXBlIFBhdGNoZXM8UCBleHRlbmRzIFBhdGNoZXNPcHRpb25zID0gYW55PiA9IFBhdGNoPFA+W107XG5cbmV4cG9ydCB0eXBlIFJlc3VsdDxcbiAgVCBleHRlbmRzIGFueSxcbiAgTyBleHRlbmRzIFBhdGNoZXNPcHRpb25zLFxuICBGIGV4dGVuZHMgYm9vbGVhbixcbj4gPSBPIGV4dGVuZHMgdHJ1ZSB8IG9iamVjdFxuICA/IFtGIGV4dGVuZHMgdHJ1ZSA/IEltbXV0YWJsZTxUPiA6IFQsIFBhdGNoZXM8Tz4sIFBhdGNoZXM8Tz5dXG4gIDogRiBleHRlbmRzIHRydWVcbiAgICA/IEltbXV0YWJsZTxUPlxuICAgIDogVDtcblxuZXhwb3J0IHR5cGUgQ3JlYXRlUmVzdWx0PFxuICBUIGV4dGVuZHMgYW55LFxuICBPIGV4dGVuZHMgUGF0Y2hlc09wdGlvbnMsXG4gIEYgZXh0ZW5kcyBib29sZWFuLFxuICBSIGV4dGVuZHMgdm9pZCB8IFByb21pc2U8dm9pZD4gfCBUIHwgUHJvbWlzZTxUPixcbj4gPSBSIGV4dGVuZHMgUHJvbWlzZTx2b2lkPiB8IFByb21pc2U8VD5cbiAgPyBQcm9taXNlPFJlc3VsdDxULCBPLCBGPj5cbiAgOiBSZXN1bHQ8VCwgTywgRj47XG5cbnR5cGUgQmFzZU1hcmsgPSBudWxsIHwgdW5kZWZpbmVkIHwgRGF0YVR5cGU7XG50eXBlIE1hcmtXaXRoQ29weSA9IEJhc2VNYXJrIHwgKCgpID0+IGFueSk7XG5cbmV4cG9ydCB0eXBlIE1hcms8TyBleHRlbmRzIFBhdGNoZXNPcHRpb25zLCBGIGV4dGVuZHMgYm9vbGVhbj4gPSAoXG4gIHRhcmdldDogYW55LFxuICB0eXBlczogdHlwZW9mIGRhdGFUeXBlc1xuKSA9PiBPIGV4dGVuZHMgdHJ1ZSB8IG9iamVjdFxuICA/IEJhc2VNYXJrXG4gIDogRiBleHRlbmRzIHRydWVcbiAgICA/IEJhc2VNYXJrXG4gICAgOiBNYXJrV2l0aENvcHk7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXBwbHlNdXRhYmxlT3B0aW9ucyB7XG4gIC8qKlxuICAgKiBJZiBpdCdzIGB0cnVlYCwgdGhlIHN0YXRlIHdpbGwgYmUgbXV0YXRlZCBkaXJlY3RseS5cbiAgICovXG4gIG11dGFibGU/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE9wdGlvbnM8TyBleHRlbmRzIFBhdGNoZXNPcHRpb25zLCBGIGV4dGVuZHMgYm9vbGVhbj4ge1xuICAvKipcbiAgICogSW4gc3RyaWN0IG1vZGUsIEZvcmJpZCBhY2Nlc3Npbmcgbm9uLWRyYWZ0YWJsZSB2YWx1ZXMgYW5kIGZvcmJpZCByZXR1cm5pbmcgYSBub24tZHJhZnQgdmFsdWUuXG4gICAqL1xuICBzdHJpY3Q/OiBib29sZWFuO1xuICAvKipcbiAgICogRW5hYmxlIHBhdGNoLCBhbmQgcmV0dXJuIHRoZSBwYXRjaGVzIGFuZCBpbnZlcnNlUGF0Y2hlcy5cbiAgICovXG4gIGVuYWJsZVBhdGNoZXM/OiBPO1xuICAvKipcbiAgICogRW5hYmxlIGF1dG9GcmVlemUsIGFuZCByZXR1cm4gZnJvemVuIHN0YXRlLlxuICAgKi9cbiAgZW5hYmxlQXV0b0ZyZWV6ZT86IEY7XG4gIC8qKlxuICAgKiBTZXQgYSBtYXJrIHRvIGRldGVybWluZSBpZiB0aGUgb2JqZWN0IGlzIG11dGFibGUgb3IgaWYgYW4gaW5zdGFuY2UgaXMgYW4gaW1tdXRhYmxlLlxuICAgKiBBbmQgaXQgY2FuIGFsc28gcmV0dXJuIGEgc2hhbGxvdyBjb3B5IGZ1bmN0aW9uKEF1dG9GcmVlemUgYW5kIFBhdGNoZXMgc2hvdWxkIGJvdGggYmUgZGlzYWJsZWQpLlxuICAgKi9cbiAgbWFyaz86IE1hcms8TywgRj47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRXh0ZXJuYWxPcHRpb25zPE8gZXh0ZW5kcyBQYXRjaGVzT3B0aW9ucywgRiBleHRlbmRzIGJvb2xlYW4+IHtcbiAgLyoqXG4gICAqIEluIHN0cmljdCBtb2RlLCBGb3JiaWQgYWNjZXNzaW5nIG5vbi1kcmFmdGFibGUgdmFsdWVzIGFuZCBmb3JiaWQgcmV0dXJuaW5nIGEgbm9uLWRyYWZ0IHZhbHVlLlxuICAgKi9cbiAgc3RyaWN0PzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIEVuYWJsZSBwYXRjaCwgYW5kIHJldHVybiB0aGUgcGF0Y2hlcyBhbmQgaW52ZXJzZVBhdGNoZXMuXG4gICAqL1xuICBlbmFibGVQYXRjaGVzPzogTztcbiAgLyoqXG4gICAqIEVuYWJsZSBhdXRvRnJlZXplLCBhbmQgcmV0dXJuIGZyb3plbiBzdGF0ZS5cbiAgICovXG4gIGVuYWJsZUF1dG9GcmVlemU/OiBGO1xuICAvKipcbiAgICogU2V0IGEgbWFyayB0byBkZXRlcm1pbmUgaWYgdGhlIG9iamVjdCBpcyBtdXRhYmxlIG9yIGlmIGFuIGluc3RhbmNlIGlzIGFuIGltbXV0YWJsZS5cbiAgICogQW5kIGl0IGNhbiBhbHNvIHJldHVybiBhIHNoYWxsb3cgY29weSBmdW5jdGlvbihBdXRvRnJlZXplIGFuZCBQYXRjaGVzIHNob3VsZCBib3RoIGJlIGRpc2FibGVkKS5cbiAgICovXG4gIG1hcms/OiBNYXJrPE8sIEY+W10gfCBNYXJrPE8sIEY+O1xufVxuXG4vLyBFeGNsdWRlIGBzeW1ib2xgXG50eXBlIFByaW1pdGl2ZSA9IHN0cmluZyB8IG51bWJlciB8IGJpZ2ludCB8IGJvb2xlYW4gfCBudWxsIHwgdW5kZWZpbmVkO1xuXG50eXBlIEltbXV0YWJsZU1hcDxLLCBWPiA9IFJlYWRvbmx5TWFwPEltbXV0YWJsZTxLPiwgSW1tdXRhYmxlPFY+PjtcbnR5cGUgSW1tdXRhYmxlU2V0PFQ+ID0gUmVhZG9ubHlTZXQ8SW1tdXRhYmxlPFQ+PjtcbnR5cGUgSW1tdXRhYmxlT2JqZWN0PFQ+ID0geyByZWFkb25seSBbSyBpbiBrZXlvZiBUXTogSW1tdXRhYmxlPFRbS10+IH07XG5cbmV4cG9ydCB0eXBlIElmQXZhaWxhYmxlPFQsIEZhbGxiYWNrID0gdm9pZD4gPSB0cnVlIHwgZmFsc2UgZXh0ZW5kcyAoXG4gIFQgZXh0ZW5kcyBuZXZlciA/IHRydWUgOiBmYWxzZVxuKVxuICA/IEZhbGxiYWNrXG4gIDoga2V5b2YgVCBleHRlbmRzIG5ldmVyXG4gICAgPyBGYWxsYmFja1xuICAgIDogVDtcbnR5cGUgV2Vha1JlZmVyZW5jZXMgPVxuICB8IElmQXZhaWxhYmxlPFdlYWtNYXA8YW55LCBhbnk+PlxuICB8IElmQXZhaWxhYmxlPFdlYWtTZXQ8YW55Pj47XG50eXBlIEF0b21pY09iamVjdCA9IEZ1bmN0aW9uIHwgUHJvbWlzZTxhbnk+IHwgRGF0ZSB8IFJlZ0V4cDtcblxuZXhwb3J0IHR5cGUgSW1tdXRhYmxlPFQ+ID0gVCBleHRlbmRzIFByaW1pdGl2ZSB8IEF0b21pY09iamVjdFxuICA/IFRcbiAgOiBUIGV4dGVuZHMgSWZBdmFpbGFibGU8UmVhZG9ubHlNYXA8aW5mZXIgSywgaW5mZXIgVj4+XG4gICAgPyBJbW11dGFibGVNYXA8SywgVj5cbiAgICA6IFQgZXh0ZW5kcyBJZkF2YWlsYWJsZTxSZWFkb25seVNldDxpbmZlciBWPj5cbiAgICAgID8gSW1tdXRhYmxlU2V0PFY+XG4gICAgICA6IFQgZXh0ZW5kcyBXZWFrUmVmZXJlbmNlc1xuICAgICAgICA/IFRcbiAgICAgICAgOiBUIGV4dGVuZHMgb2JqZWN0XG4gICAgICAgICAgPyBJbW11dGFibGVPYmplY3Q8VD5cbiAgICAgICAgICA6IFQ7XG5cbnR5cGUgRHJhZnRlZE1hcDxLLCBWPiA9IE1hcDxLLCBEcmFmdDxWPj47XG50eXBlIERyYWZ0ZWRTZXQ8VD4gPSBTZXQ8RHJhZnQ8VD4+O1xuZXhwb3J0IHR5cGUgRHJhZnRlZE9iamVjdDxUPiA9IHtcbiAgLXJlYWRvbmx5IFtLIGluIGtleW9mIFRdOiBEcmFmdDxUW0tdPjtcbn07XG5cbmV4cG9ydCB0eXBlIERyYWZ0PFQ+ID0gVCBleHRlbmRzIFByaW1pdGl2ZSB8IEF0b21pY09iamVjdFxuICA/IFRcbiAgOiBUIGV4dGVuZHMgSWZBdmFpbGFibGU8UmVhZG9ubHlNYXA8aW5mZXIgSywgaW5mZXIgVj4+XG4gICAgPyBEcmFmdGVkTWFwPEssIFY+XG4gICAgOiBUIGV4dGVuZHMgSWZBdmFpbGFibGU8UmVhZG9ubHlTZXQ8aW5mZXIgVj4+XG4gICAgICA/IERyYWZ0ZWRTZXQ8Vj5cbiAgICAgIDogVCBleHRlbmRzIFdlYWtSZWZlcmVuY2VzXG4gICAgICAgID8gVFxuICAgICAgICA6IFQgZXh0ZW5kcyBvYmplY3RcbiAgICAgICAgICA/IERyYWZ0ZWRPYmplY3Q8VD5cbiAgICAgICAgICA6IFQ7XG5cbmV4cG9ydCB0eXBlIEFwcGx5T3B0aW9uczxGIGV4dGVuZHMgYm9vbGVhbj4gPVxuICB8IFBpY2s8XG4gICAgICBPcHRpb25zPGJvb2xlYW4sIEY+LFxuICAgICAgRXhjbHVkZTxrZXlvZiBPcHRpb25zPGJvb2xlYW4sIEY+LCAnZW5hYmxlUGF0Y2hlcyc+XG4gICAgPlxuICB8IEFwcGx5TXV0YWJsZU9wdGlvbnM7XG5cbmV4cG9ydCB0eXBlIEFwcGx5UmVzdWx0PFxuICBUIGV4dGVuZHMgb2JqZWN0LFxuICBGIGV4dGVuZHMgYm9vbGVhbiA9IGZhbHNlLFxuICBBIGV4dGVuZHMgQXBwbHlPcHRpb25zPEY+ID0gQXBwbHlPcHRpb25zPEY+LFxuPiA9IEEgZXh0ZW5kcyB7IG11dGFibGU6IHRydWUgfSA/IHZvaWQgOiBUO1xuIiwgIi8vIERvbid0IHVzZSBgU3ltYm9sKClgIGp1c3QgZm9yIDNyZCBwYXJ0eSBhY2Nlc3MgdGhlIGRyYWZ0XG5leHBvcnQgY29uc3QgUFJPWFlfRFJBRlQgPSBTeW1ib2wuZm9yKCdfX01VVEFUSVZFX1BST1hZX0RSQUZUX18nKTtcbmV4cG9ydCBjb25zdCBSQVdfUkVUVVJOX1NZTUJPTCA9IFN5bWJvbCgnX19NVVRBVElWRV9SQVdfUkVUVVJOX1NZTUJPTF9fJyk7XG5cbmV4cG9ydCBjb25zdCBpdGVyYXRvclN5bWJvbDogdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9IFN5bWJvbC5pdGVyYXRvcjtcblxuZXhwb3J0IGNvbnN0IGRhdGFUeXBlcyA9IHtcbiAgbXV0YWJsZTogJ211dGFibGUnLFxuICBpbW11dGFibGU6ICdpbW11dGFibGUnLFxufSBhcyBjb25zdDtcbiIsICJpbXBvcnQgeyBjcmVhdGVEcmFmdCB9IGZyb20gJy4vZHJhZnQnO1xuXG5leHBvcnQgY29uc3QgaW50ZXJuYWwgPSB7fSBhcyB7XG4gIGNyZWF0ZURyYWZ0OiB0eXBlb2YgY3JlYXRlRHJhZnQ7XG59O1xuIiwgImV4cG9ydCBmdW5jdGlvbiBoYXModGFyZ2V0OiBvYmplY3QsIGtleTogUHJvcGVydHlLZXkpIHtcbiAgcmV0dXJuIHRhcmdldCBpbnN0YW5jZW9mIE1hcFxuICAgID8gdGFyZ2V0LmhhcyhrZXkpXG4gICAgOiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGFyZ2V0LCBrZXkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVzY3JpcHRvcih0YXJnZXQ6IG9iamVjdCwga2V5OiBQcm9wZXJ0eUtleSkge1xuICBpZiAoa2V5IGluIHRhcmdldCkge1xuICAgIGxldCBwcm90b3R5cGUgPSBSZWZsZWN0LmdldFByb3RvdHlwZU9mKHRhcmdldCk7XG4gICAgd2hpbGUgKHByb3RvdHlwZSkge1xuICAgICAgY29uc3QgZGVzY3JpcHRvciA9IFJlZmxlY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHByb3RvdHlwZSwga2V5KTtcbiAgICAgIGlmIChkZXNjcmlwdG9yKSByZXR1cm4gZGVzY3JpcHRvcjtcbiAgICAgIHByb3RvdHlwZSA9IFJlZmxlY3QuZ2V0UHJvdG90eXBlT2YocHJvdG90eXBlKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNCYXNlU2V0SW5zdGFuY2Uob2JqOiBhbnkpIHtcbiAgcmV0dXJuIE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmopID09PSBTZXQucHJvdG90eXBlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNCYXNlTWFwSW5zdGFuY2Uob2JqOiBhbnkpIHtcbiAgcmV0dXJuIE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmopID09PSBNYXAucHJvdG90eXBlO1xufVxuIiwgImltcG9ydCB7IERyYWZ0VHlwZSwgTWFyaywgUHJveHlEcmFmdCB9IGZyb20gJy4uL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBkYXRhVHlwZXMsIFBST1hZX0RSQUZUIH0gZnJvbSAnLi4vY29uc3RhbnQnO1xuaW1wb3J0IHsgaGFzIH0gZnJvbSAnLi9wcm90byc7XG5cbmV4cG9ydCBmdW5jdGlvbiBsYXRlc3Q8VCA9IGFueT4ocHJveHlEcmFmdDogUHJveHlEcmFmdCk6IFQge1xuICByZXR1cm4gcHJveHlEcmFmdC5jb3B5ID8/IHByb3h5RHJhZnQub3JpZ2luYWw7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIHZhbHVlIGlzIGEgZHJhZnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRHJhZnQodGFyZ2V0OiBhbnkpIHtcbiAgcmV0dXJuICEhZ2V0UHJveHlEcmFmdCh0YXJnZXQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UHJveHlEcmFmdDxUIGV4dGVuZHMgYW55Pih2YWx1ZTogVCk6IFByb3h5RHJhZnQgfCBudWxsIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ29iamVjdCcpIHJldHVybiBudWxsO1xuICByZXR1cm4gKHZhbHVlIGFzIHsgW1BST1hZX0RSQUZUXTogYW55IH0pPy5bUFJPWFlfRFJBRlRdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VmFsdWU8VCBleHRlbmRzIG9iamVjdD4odmFsdWU6IFQpOiBUIHtcbiAgY29uc3QgcHJveHlEcmFmdCA9IGdldFByb3h5RHJhZnQodmFsdWUpO1xuICByZXR1cm4gcHJveHlEcmFmdCA/IChwcm94eURyYWZ0LmNvcHkgPz8gcHJveHlEcmFmdC5vcmlnaW5hbCkgOiB2YWx1ZTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIHZhbHVlIGlzIGRyYWZ0YWJsZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNEcmFmdGFibGUodmFsdWU6IGFueSwgb3B0aW9ucz86IHsgbWFyaz86IE1hcms8YW55LCBhbnk+IH0pIHtcbiAgaWYgKCF2YWx1ZSB8fCB0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnKSByZXR1cm4gZmFsc2U7XG4gIGxldCBtYXJrUmVzdWx0OiBhbnk7XG4gIHJldHVybiAoXG4gICAgT2JqZWN0LmdldFByb3RvdHlwZU9mKHZhbHVlKSA9PT0gT2JqZWN0LnByb3RvdHlwZSB8fFxuICAgIEFycmF5LmlzQXJyYXkodmFsdWUpIHx8XG4gICAgdmFsdWUgaW5zdGFuY2VvZiBNYXAgfHxcbiAgICB2YWx1ZSBpbnN0YW5jZW9mIFNldCB8fFxuICAgICghIW9wdGlvbnM/Lm1hcmsgJiZcbiAgICAgICgobWFya1Jlc3VsdCA9IG9wdGlvbnMubWFyayh2YWx1ZSwgZGF0YVR5cGVzKSkgPT09IGRhdGFUeXBlcy5pbW11dGFibGUgfHxcbiAgICAgICAgdHlwZW9mIG1hcmtSZXN1bHQgPT09ICdmdW5jdGlvbicpKVxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGF0aChcbiAgdGFyZ2V0OiBQcm94eURyYWZ0LFxuICBwYXRoOiBhbnlbXSA9IFtdXG4pOiAoc3RyaW5nIHwgbnVtYmVyIHwgb2JqZWN0KVtdIHwgbnVsbCB7XG4gIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbCh0YXJnZXQsICdrZXknKSkge1xuICAgIC8vIGNoZWNrIGlmIHRoZSBwYXJlbnQgaXMgYSBkcmFmdCBhbmQgdGhlIG9yaWdpbmFsIHZhbHVlIGlzIG5vdCBlcXVhbCB0byB0aGUgY3VycmVudCB2YWx1ZVxuICAgIGNvbnN0IHBhcmVudENvcHkgPSB0YXJnZXQucGFyZW50IS5jb3B5O1xuICAgIGNvbnN0IHByb3h5RHJhZnQgPSBnZXRQcm94eURyYWZ0KGdldChwYXJlbnRDb3B5LCB0YXJnZXQua2V5ISkpO1xuICAgIGlmIChwcm94eURyYWZ0ICE9PSBudWxsICYmIHByb3h5RHJhZnQ/Lm9yaWdpbmFsICE9PSB0YXJnZXQub3JpZ2luYWwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBpc1NldCA9IHRhcmdldC5wYXJlbnQhLnR5cGUgPT09IERyYWZ0VHlwZS5TZXQ7XG4gICAgY29uc3Qga2V5ID0gaXNTZXRcbiAgICAgID8gQXJyYXkuZnJvbSh0YXJnZXQucGFyZW50IS5zZXRNYXAhLmtleXMoKSkuaW5kZXhPZih0YXJnZXQua2V5KVxuICAgICAgOiB0YXJnZXQua2V5O1xuICAgIC8vIGNoZWNrIGlmIHRoZSBrZXkgaXMgc3RpbGwgaW4gdGhlIG5leHQgc3RhdGUgcGFyZW50XG4gICAgaWYgKFxuICAgICAgISgoaXNTZXQgJiYgcGFyZW50Q29weS5zaXplID4gKGtleSBhcyBudW1iZXIpKSB8fCBoYXMocGFyZW50Q29weSwga2V5ISkpXG4gICAgKVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgcGF0aC5wdXNoKGtleSk7XG4gIH1cbiAgaWYgKHRhcmdldC5wYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0UGF0aCh0YXJnZXQucGFyZW50LCBwYXRoKTtcbiAgfVxuICAvLyBgdGFyZ2V0YCBpcyByb290IGRyYWZ0LlxuICBwYXRoLnJldmVyc2UoKTtcbiAgdHJ5IHtcbiAgICAvLyBjaGVjayBpZiB0aGUgcGF0aCBpcyB2YWxpZFxuICAgIHJlc29sdmVQYXRoKHRhcmdldC5jb3B5LCBwYXRoKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBwYXRoO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHlwZSh0YXJnZXQ6IGFueSkge1xuICBpZiAoQXJyYXkuaXNBcnJheSh0YXJnZXQpKSByZXR1cm4gRHJhZnRUeXBlLkFycmF5O1xuICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgTWFwKSByZXR1cm4gRHJhZnRUeXBlLk1hcDtcbiAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIFNldCkgcmV0dXJuIERyYWZ0VHlwZS5TZXQ7XG4gIHJldHVybiBEcmFmdFR5cGUuT2JqZWN0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0KHRhcmdldDogYW55LCBrZXk6IFByb3BlcnR5S2V5KSB7XG4gIHJldHVybiBnZXRUeXBlKHRhcmdldCkgPT09IERyYWZ0VHlwZS5NYXAgPyB0YXJnZXQuZ2V0KGtleSkgOiB0YXJnZXRba2V5XTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldCh0YXJnZXQ6IGFueSwga2V5OiBQcm9wZXJ0eUtleSwgdmFsdWU6IGFueSkge1xuICBjb25zdCB0eXBlID0gZ2V0VHlwZSh0YXJnZXQpO1xuICBpZiAodHlwZSA9PT0gRHJhZnRUeXBlLk1hcCkge1xuICAgIHRhcmdldC5zZXQoa2V5LCB2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgdGFyZ2V0W2tleV0gPSB2YWx1ZTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcGVlayh0YXJnZXQ6IGFueSwga2V5OiBQcm9wZXJ0eUtleSkge1xuICBjb25zdCBzdGF0ZSA9IGdldFByb3h5RHJhZnQodGFyZ2V0KTtcbiAgY29uc3Qgc291cmNlID0gc3RhdGUgPyBsYXRlc3Qoc3RhdGUpIDogdGFyZ2V0O1xuICByZXR1cm4gc291cmNlW2tleV07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0VxdWFsKHg6IGFueSwgeTogYW55KSB7XG4gIGlmICh4ID09PSB5KSB7XG4gICAgcmV0dXJuIHggIT09IDAgfHwgMSAvIHggPT09IDEgLyB5O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB4ICE9PSB4ICYmIHkgIT09IHk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJldm9rZVByb3h5KHByb3h5RHJhZnQ6IFByb3h5RHJhZnQgfCBudWxsKSB7XG4gIGlmICghcHJveHlEcmFmdCkgcmV0dXJuO1xuICB3aGlsZSAocHJveHlEcmFmdC5maW5hbGl0aWVzLnJldm9rZS5sZW5ndGggPiAwKSB7XG4gICAgY29uc3QgcmV2b2tlID0gcHJveHlEcmFmdC5maW5hbGl0aWVzLnJldm9rZS5wb3AoKSE7XG4gICAgcmV2b2tlKCk7XG4gIH1cbn1cblxuLy8gaGFuZGxlIEpTT04gUG9pbnRlciBwYXRoIHdpdGggc3BlYyBodHRwczovL3d3dy5yZmMtZWRpdG9yLm9yZy9yZmMvcmZjNjkwMVxuZXhwb3J0IGZ1bmN0aW9uIGVzY2FwZVBhdGgocGF0aDogc3RyaW5nW10sIHBhdGhBc0FycmF5OiBib29sZWFuKSB7XG4gIHJldHVybiBwYXRoQXNBcnJheVxuICAgID8gcGF0aFxuICAgIDogWycnXVxuICAgICAgICAuY29uY2F0KHBhdGgpXG4gICAgICAgIC5tYXAoKF9pdGVtKSA9PiB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IGAke19pdGVtfWA7XG4gICAgICAgICAgaWYgKGl0ZW0uaW5kZXhPZignLycpID09PSAtMSAmJiBpdGVtLmluZGV4T2YoJ34nKSA9PT0gLTEpIHJldHVybiBpdGVtO1xuICAgICAgICAgIHJldHVybiBpdGVtLnJlcGxhY2UoL34vZywgJ34wJykucmVwbGFjZSgvXFwvL2csICd+MScpO1xuICAgICAgICB9KVxuICAgICAgICAuam9pbignLycpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdW5lc2NhcGVQYXRoKHBhdGg6IHN0cmluZyB8IChzdHJpbmcgfCBudW1iZXIpW10pIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkocGF0aCkpIHJldHVybiBwYXRoO1xuICByZXR1cm4gcGF0aFxuICAgIC5zcGxpdCgnLycpXG4gICAgLm1hcCgoX2l0ZW0pID0+IF9pdGVtLnJlcGxhY2UoL34xL2csICcvJykucmVwbGFjZSgvfjAvZywgJ34nKSlcbiAgICAuc2xpY2UoMSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlUGF0aChiYXNlOiBhbnksIHBhdGg6IChzdHJpbmcgfCBudW1iZXIpW10pIHtcbiAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHBhdGgubGVuZ3RoIC0gMTsgaW5kZXggKz0gMSkge1xuICAgIGNvbnN0IGtleSA9IHBhdGhbaW5kZXhdO1xuICAgIC8vIHVzZSBgaW5kZXhgIGluIFNldCBkcmFmdFxuICAgIGJhc2UgPSBnZXQoZ2V0VHlwZShiYXNlKSA9PT0gRHJhZnRUeXBlLlNldCA/IEFycmF5LmZyb20oYmFzZSkgOiBiYXNlLCBrZXkpO1xuICAgIGlmICh0eXBlb2YgYmFzZSAhPT0gJ29iamVjdCcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHJlc29sdmUgcGF0Y2ggYXQgJyR7cGF0aC5qb2luKCcvJyl9Jy5gKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGJhc2U7XG59XG4iLCAiaW1wb3J0IHR5cGUgeyBPcHRpb25zLCBQcm94eURyYWZ0IH0gZnJvbSAnLi4vaW50ZXJmYWNlJztcbmltcG9ydCB7IGRhdGFUeXBlcyB9IGZyb20gJy4uL2NvbnN0YW50JztcbmltcG9ydCB7IGdldFZhbHVlLCBpc0RyYWZ0LCBpc0RyYWZ0YWJsZSB9IGZyb20gJy4vZHJhZnQnO1xuaW1wb3J0IHsgaXNCYXNlTWFwSW5zdGFuY2UsIGlzQmFzZVNldEluc3RhbmNlIH0gZnJvbSAnLi9wcm90byc7XG5cbmZ1bmN0aW9uIHN0cmljdENvcHkodGFyZ2V0OiBhbnkpIHtcbiAgY29uc3QgY29weSA9IE9iamVjdC5jcmVhdGUoT2JqZWN0LmdldFByb3RvdHlwZU9mKHRhcmdldCkpO1xuICBSZWZsZWN0Lm93bktleXModGFyZ2V0KS5mb3JFYWNoKChrZXk6IGFueSkgPT4ge1xuICAgIGxldCBkZXNjID0gUmVmbGVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpITtcbiAgICBpZiAoZGVzYy5lbnVtZXJhYmxlICYmIGRlc2MuY29uZmlndXJhYmxlICYmIGRlc2Mud3JpdGFibGUpIHtcbiAgICAgIGNvcHlba2V5XSA9IHRhcmdldFtrZXldO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBmb3IgZnJlZXplXG4gICAgaWYgKCFkZXNjLndyaXRhYmxlKSB7XG4gICAgICBkZXNjLndyaXRhYmxlID0gdHJ1ZTtcbiAgICAgIGRlc2MuY29uZmlndXJhYmxlID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KVxuICAgICAgZGVzYyA9IHtcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgZW51bWVyYWJsZTogZGVzYy5lbnVtZXJhYmxlLFxuICAgICAgICB2YWx1ZTogdGFyZ2V0W2tleV0sXG4gICAgICB9O1xuICAgIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkoY29weSwga2V5LCBkZXNjKTtcbiAgfSk7XG4gIHJldHVybiBjb3B5O1xufVxuXG5jb25zdCBwcm9wSXNFbnVtID0gT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZTtcblxuZXhwb3J0IGZ1bmN0aW9uIHNoYWxsb3dDb3B5KG9yaWdpbmFsOiBhbnksIG9wdGlvbnM/OiBPcHRpb25zPGFueSwgYW55Pikge1xuICBsZXQgbWFya1Jlc3VsdDogYW55O1xuICBpZiAoQXJyYXkuaXNBcnJheShvcmlnaW5hbCkpIHtcbiAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5jYWxsKG9yaWdpbmFsKTtcbiAgfSBlbHNlIGlmIChvcmlnaW5hbCBpbnN0YW5jZW9mIFNldCkge1xuICAgIGlmICghaXNCYXNlU2V0SW5zdGFuY2Uob3JpZ2luYWwpKSB7XG4gICAgICBjb25zdCBTdWJDbGFzcyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvcmlnaW5hbCkuY29uc3RydWN0b3I7XG4gICAgICByZXR1cm4gbmV3IFN1YkNsYXNzKG9yaWdpbmFsLnZhbHVlcygpKTtcbiAgICB9XG4gICAgcmV0dXJuIFNldC5wcm90b3R5cGUuZGlmZmVyZW5jZVxuICAgICAgPyBTZXQucHJvdG90eXBlLmRpZmZlcmVuY2UuY2FsbChvcmlnaW5hbCwgbmV3IFNldCgpKVxuICAgICAgOiBuZXcgU2V0KG9yaWdpbmFsLnZhbHVlcygpKTtcbiAgfSBlbHNlIGlmIChvcmlnaW5hbCBpbnN0YW5jZW9mIE1hcCkge1xuICAgIGlmICghaXNCYXNlTWFwSW5zdGFuY2Uob3JpZ2luYWwpKSB7XG4gICAgICBjb25zdCBTdWJDbGFzcyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvcmlnaW5hbCkuY29uc3RydWN0b3I7XG4gICAgICByZXR1cm4gbmV3IFN1YkNsYXNzKG9yaWdpbmFsKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBNYXAob3JpZ2luYWwpO1xuICB9IGVsc2UgaWYgKFxuICAgIG9wdGlvbnM/Lm1hcmsgJiZcbiAgICAoKG1hcmtSZXN1bHQgPSBvcHRpb25zLm1hcmsob3JpZ2luYWwsIGRhdGFUeXBlcykpLFxuICAgIG1hcmtSZXN1bHQgIT09IHVuZGVmaW5lZCkgJiZcbiAgICBtYXJrUmVzdWx0ICE9PSBkYXRhVHlwZXMubXV0YWJsZVxuICApIHtcbiAgICBpZiAobWFya1Jlc3VsdCA9PT0gZGF0YVR5cGVzLmltbXV0YWJsZSkge1xuICAgICAgcmV0dXJuIHN0cmljdENvcHkob3JpZ2luYWwpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIG1hcmtSZXN1bHQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGlmIChfX0RFVl9fICYmIChvcHRpb25zLmVuYWJsZVBhdGNoZXMgfHwgb3B0aW9ucy5lbmFibGVBdXRvRnJlZXplKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYFlvdSBjYW4ndCB1c2UgbWFyayBhbmQgcGF0Y2hlcyBvciBhdXRvIGZyZWV6ZSB0b2dldGhlci5gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWFya1Jlc3VsdCgpO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIG1hcmsgcmVzdWx0OiAke21hcmtSZXN1bHR9YCk7XG4gIH0gZWxzZSBpZiAoXG4gICAgdHlwZW9mIG9yaWdpbmFsID09PSAnb2JqZWN0JyAmJlxuICAgIE9iamVjdC5nZXRQcm90b3R5cGVPZihvcmlnaW5hbCkgPT09IE9iamVjdC5wcm90b3R5cGVcbiAgKSB7XG4gICAgLy8gRm9yIGJlc3QgcGVyZm9ybWFuY2Ugd2l0aCBzaGFsbG93IGNvcGllcyxcbiAgICAvLyBkb24ndCB1c2UgYE9iamVjdC5jcmVhdGUoT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaiksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG9iaikpO2AgYnkgZGVmYXVsdC5cbiAgICBjb25zdCBjb3B5OiBSZWNvcmQ8c3RyaW5nIHwgc3ltYm9sLCBhbnk+ID0ge307XG4gICAgT2JqZWN0LmtleXMob3JpZ2luYWwpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgY29weVtrZXldID0gb3JpZ2luYWxba2V5XTtcbiAgICB9KTtcbiAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9yaWdpbmFsKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIGlmIChwcm9wSXNFbnVtLmNhbGwob3JpZ2luYWwsIGtleSkpIHtcbiAgICAgICAgY29weVtrZXldID0gb3JpZ2luYWxba2V5XTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gY29weTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgUGxlYXNlIGNoZWNrIG1hcmsoKSB0byBlbnN1cmUgdGhhdCBpdCBpcyBhIHN0YWJsZSBtYXJrZXIgZHJhZnRhYmxlIGZ1bmN0aW9uLmBcbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlbnN1cmVTaGFsbG93Q29weSh0YXJnZXQ6IFByb3h5RHJhZnQpIHtcbiAgaWYgKHRhcmdldC5jb3B5KSByZXR1cm47XG4gIHRhcmdldC5jb3B5ID0gc2hhbGxvd0NvcHkodGFyZ2V0Lm9yaWdpbmFsLCB0YXJnZXQub3B0aW9ucykhO1xufVxuXG5mdW5jdGlvbiBkZWVwQ2xvbmU8VD4odGFyZ2V0OiBUKTogVDtcbmZ1bmN0aW9uIGRlZXBDbG9uZSh0YXJnZXQ6IGFueSkge1xuICBpZiAoIWlzRHJhZnRhYmxlKHRhcmdldCkpIHJldHVybiBnZXRWYWx1ZSh0YXJnZXQpO1xuICBpZiAoQXJyYXkuaXNBcnJheSh0YXJnZXQpKSByZXR1cm4gdGFyZ2V0Lm1hcChkZWVwQ2xvbmUpO1xuICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgTWFwKSB7XG4gICAgY29uc3QgaXRlcmFibGUgPSBBcnJheS5mcm9tKHRhcmdldC5lbnRyaWVzKCkpLm1hcCgoW2ssIHZdKSA9PiBbXG4gICAgICBrLFxuICAgICAgZGVlcENsb25lKHYpLFxuICAgIF0pIGFzIEl0ZXJhYmxlPHJlYWRvbmx5IFthbnksIGFueV0+O1xuICAgIGlmICghaXNCYXNlTWFwSW5zdGFuY2UodGFyZ2V0KSkge1xuICAgICAgY29uc3QgU3ViQ2xhc3MgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGFyZ2V0KS5jb25zdHJ1Y3RvcjtcbiAgICAgIHJldHVybiBuZXcgU3ViQ2xhc3MoaXRlcmFibGUpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IE1hcChpdGVyYWJsZSk7XG4gIH1cbiAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIFNldCkge1xuICAgIGNvbnN0IGl0ZXJhYmxlID0gQXJyYXkuZnJvbSh0YXJnZXQpLm1hcChkZWVwQ2xvbmUpO1xuICAgIGlmICghaXNCYXNlU2V0SW5zdGFuY2UodGFyZ2V0KSkge1xuICAgICAgY29uc3QgU3ViQ2xhc3MgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGFyZ2V0KS5jb25zdHJ1Y3RvcjtcbiAgICAgIHJldHVybiBuZXcgU3ViQ2xhc3MoaXRlcmFibGUpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFNldChpdGVyYWJsZSk7XG4gIH1cbiAgY29uc3QgY29weSA9IE9iamVjdC5jcmVhdGUoT2JqZWN0LmdldFByb3RvdHlwZU9mKHRhcmdldCkpO1xuICBmb3IgKGNvbnN0IGtleSBpbiB0YXJnZXQpIGNvcHlba2V5XSA9IGRlZXBDbG9uZSh0YXJnZXRba2V5XSk7XG4gIHJldHVybiBjb3B5O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xvbmVJZk5lZWRlZDxUPih0YXJnZXQ6IFQpOiBUIHtcbiAgcmV0dXJuIGlzRHJhZnQodGFyZ2V0KSA/IGRlZXBDbG9uZSh0YXJnZXQpIDogdGFyZ2V0O1xufVxuXG5leHBvcnQgeyBkZWVwQ2xvbmUgfTtcbiIsICJpbXBvcnQgeyBQcm94eURyYWZ0IH0gZnJvbSAnLi4vaW50ZXJmYWNlJztcblxuZXhwb3J0IGZ1bmN0aW9uIG1hcmtDaGFuZ2VkKHByb3h5RHJhZnQ6IFByb3h5RHJhZnQpIHtcbiAgcHJveHlEcmFmdC5hc3NpZ25lZE1hcCA9IHByb3h5RHJhZnQuYXNzaWduZWRNYXAgPz8gbmV3IE1hcCgpO1xuICBpZiAoIXByb3h5RHJhZnQub3BlcmF0ZWQpIHtcbiAgICBwcm94eURyYWZ0Lm9wZXJhdGVkID0gdHJ1ZTtcbiAgICBpZiAocHJveHlEcmFmdC5wYXJlbnQpIHtcbiAgICAgIG1hcmtDaGFuZ2VkKHByb3h5RHJhZnQucGFyZW50KTtcbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBEcmFmdFR5cGUgfSBmcm9tICcuLi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgZ2V0VHlwZSwgaXNEcmFmdCB9IGZyb20gJy4vZHJhZnQnO1xuXG5mdW5jdGlvbiB0aHJvd0Zyb3plbkVycm9yKCkge1xuICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBtb2RpZnkgZnJvemVuIG9iamVjdCcpO1xufVxuXG5mdW5jdGlvbiBpc0ZyZWV6YWJsZSh2YWx1ZTogYW55KSB7XG4gIHJldHVybiAoXG4gICAgX19ERVZfXyB8fCAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiAhT2JqZWN0LmlzRnJvemVuKHZhbHVlKSlcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlZXBGcmVlemUoXG4gIHRhcmdldDogYW55LFxuICBzdWJLZXk/OiBhbnksXG4gIHVwZGF0ZWRWYWx1ZXM/OiBXZWFrTWFwPGFueSwgYW55PixcbiAgc3RhY2s/OiBhbnlbXSxcbiAga2V5cz86IGFueVtdXG4pIHtcbiAgaWYgKF9fREVWX18pIHtcbiAgICB1cGRhdGVkVmFsdWVzID0gdXBkYXRlZFZhbHVlcyA/PyBuZXcgV2Vha01hcCgpO1xuICAgIHN0YWNrID0gc3RhY2sgPz8gW107XG4gICAga2V5cyA9IGtleXMgPz8gW107XG4gICAgY29uc3QgdmFsdWUgPSB1cGRhdGVkVmFsdWVzLmhhcyh0YXJnZXQpXG4gICAgICA/IHVwZGF0ZWRWYWx1ZXMuZ2V0KHRhcmdldClcbiAgICAgIDogdGFyZ2V0O1xuICAgIGlmIChzdGFjay5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBpbmRleCA9IHN0YWNrLmluZGV4T2YodmFsdWUpO1xuICAgICAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgaW5kZXggIT09IC0xKSB7XG4gICAgICAgIGlmIChzdGFja1swXSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZvcmJpZHMgY2lyY3VsYXIgcmVmZXJlbmNlYCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBGb3JiaWRzIGNpcmN1bGFyIHJlZmVyZW5jZTogfi8ke2tleXNcbiAgICAgICAgICAgIC5zbGljZSgwLCBpbmRleClcbiAgICAgICAgICAgIC5tYXAoKGtleSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBrZXkgPT09ICdzeW1ib2wnKSByZXR1cm4gYFske2tleS50b1N0cmluZygpfV1gO1xuICAgICAgICAgICAgICBjb25zdCBwYXJlbnQgPSBzdGFjayFbaW5kZXhdO1xuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgdHlwZW9mIGtleSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgICAgICAgICAocGFyZW50IGluc3RhbmNlb2YgTWFwIHx8IHBhcmVudCBpbnN0YW5jZW9mIFNldClcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKHBhcmVudC5rZXlzKCkpLmluZGV4T2Yoa2V5KTtcbiAgICAgICAgICAgICAgcmV0dXJuIGtleTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuam9pbignLycpfWBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHN0YWNrLnB1c2godmFsdWUpO1xuICAgICAga2V5cy5wdXNoKHN1YktleSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0YWNrLnB1c2godmFsdWUpO1xuICAgIH1cbiAgfVxuICBpZiAoT2JqZWN0LmlzRnJvemVuKHRhcmdldCkgfHwgaXNEcmFmdCh0YXJnZXQpKSB7XG4gICAgaWYgKF9fREVWX18pIHtcbiAgICAgIHN0YWNrIS5wb3AoKTtcbiAgICAgIGtleXMhLnBvcCgpO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgdHlwZSA9IGdldFR5cGUodGFyZ2V0KTtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBEcmFmdFR5cGUuTWFwOlxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgdGFyZ2V0KSB7XG4gICAgICAgIGlmIChpc0ZyZWV6YWJsZShrZXkpKSBkZWVwRnJlZXplKGtleSwga2V5LCB1cGRhdGVkVmFsdWVzLCBzdGFjaywga2V5cyk7XG4gICAgICAgIGlmIChpc0ZyZWV6YWJsZSh2YWx1ZSkpXG4gICAgICAgICAgZGVlcEZyZWV6ZSh2YWx1ZSwga2V5LCB1cGRhdGVkVmFsdWVzLCBzdGFjaywga2V5cyk7XG4gICAgICB9XG4gICAgICB0YXJnZXQuc2V0ID0gdGFyZ2V0LmNsZWFyID0gdGFyZ2V0LmRlbGV0ZSA9IHRocm93RnJvemVuRXJyb3I7XG4gICAgICBicmVhaztcbiAgICBjYXNlIERyYWZ0VHlwZS5TZXQ6XG4gICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRhcmdldCkge1xuICAgICAgICBpZiAoaXNGcmVlemFibGUodmFsdWUpKVxuICAgICAgICAgIGRlZXBGcmVlemUodmFsdWUsIHZhbHVlLCB1cGRhdGVkVmFsdWVzLCBzdGFjaywga2V5cyk7XG4gICAgICB9XG4gICAgICB0YXJnZXQuYWRkID0gdGFyZ2V0LmNsZWFyID0gdGFyZ2V0LmRlbGV0ZSA9IHRocm93RnJvemVuRXJyb3I7XG4gICAgICBicmVhaztcbiAgICBjYXNlIERyYWZ0VHlwZS5BcnJheTpcbiAgICAgIE9iamVjdC5mcmVlemUodGFyZ2V0KTtcbiAgICAgIGxldCBpbmRleCA9IDA7XG4gICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRhcmdldCkge1xuICAgICAgICBpZiAoaXNGcmVlemFibGUodmFsdWUpKVxuICAgICAgICAgIGRlZXBGcmVlemUodmFsdWUsIGluZGV4LCB1cGRhdGVkVmFsdWVzLCBzdGFjaywga2V5cyk7XG4gICAgICAgIGluZGV4ICs9IDE7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgT2JqZWN0LmZyZWV6ZSh0YXJnZXQpO1xuICAgICAgLy8gaWdub3JlIG5vbi1lbnVtZXJhYmxlIG9yIHN5bWJvbCBwcm9wZXJ0aWVzXG4gICAgICBPYmplY3Qua2V5cyh0YXJnZXQpLmZvckVhY2goKG5hbWUpID0+IHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSB0YXJnZXRbbmFtZV07XG4gICAgICAgIGlmIChpc0ZyZWV6YWJsZSh2YWx1ZSkpXG4gICAgICAgICAgZGVlcEZyZWV6ZSh2YWx1ZSwgbmFtZSwgdXBkYXRlZFZhbHVlcywgc3RhY2ssIGtleXMpO1xuICAgICAgfSk7XG4gIH1cbiAgaWYgKF9fREVWX18pIHtcbiAgICBzdGFjayEucG9wKCk7XG4gICAga2V5cyEucG9wKCk7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBEcmFmdFR5cGUgfSBmcm9tICcuLi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgZ2V0VHlwZSB9IGZyb20gJy4vZHJhZnQnO1xuXG5leHBvcnQgZnVuY3Rpb24gZm9yRWFjaDxUIGV4dGVuZHMgb2JqZWN0PihcbiAgdGFyZ2V0OiBULFxuICBpdGVyOiAoa2V5OiBzdHJpbmcgfCBudW1iZXIgfCBzeW1ib2wsIHZhbHVlOiBhbnksIHNvdXJjZTogVCkgPT4gdm9pZFxuKSB7XG4gIGNvbnN0IHR5cGUgPSBnZXRUeXBlKHRhcmdldCk7XG4gIGlmICh0eXBlID09PSBEcmFmdFR5cGUuT2JqZWN0KSB7XG4gICAgUmVmbGVjdC5vd25LZXlzKHRhcmdldCkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICBpdGVyKGtleSwgKHRhcmdldCBhcyBhbnkpW2tleV0sIHRhcmdldCk7XG4gICAgfSk7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gRHJhZnRUeXBlLkFycmF5KSB7XG4gICAgbGV0IGluZGV4ID0gMDtcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHRhcmdldCBhcyBhbnlbXSkge1xuICAgICAgaXRlcihpbmRleCwgZW50cnksIHRhcmdldCk7XG4gICAgICBpbmRleCArPSAxO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAodGFyZ2V0IGFzIE1hcDxhbnksIGFueT4gfCBTZXQ8YW55PikuZm9yRWFjaCgoZW50cnk6IGFueSwgaW5kZXg6IGFueSkgPT5cbiAgICAgIGl0ZXIoaW5kZXgsIGVudHJ5LCB0YXJnZXQpXG4gICAgKTtcbiAgfVxufVxuIiwgImltcG9ydCB7IERyYWZ0VHlwZSwgUGF0Y2hlcywgUHJveHlEcmFmdCB9IGZyb20gJy4uL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBlbnN1cmVTaGFsbG93Q29weSB9IGZyb20gJy4vY29weSc7XG5pbXBvcnQge1xuICBnZXQsXG4gIGdldFBhdGgsXG4gIGdldFByb3h5RHJhZnQsXG4gIGdldFZhbHVlLFxuICBpc0RyYWZ0LFxuICBpc0RyYWZ0YWJsZSxcbiAgaXNFcXVhbCxcbiAgc2V0LFxufSBmcm9tICcuL2RyYWZ0JztcbmltcG9ydCB7IGZvckVhY2ggfSBmcm9tICcuL2ZvckVhY2gnO1xuXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlVmFsdWUoXG4gIHRhcmdldDogYW55LFxuICBoYW5kbGVkU2V0OiBXZWFrU2V0PGFueT4sXG4gIG9wdGlvbnM/OiBQcm94eURyYWZ0WydvcHRpb25zJ11cbikge1xuICBpZiAoXG4gICAgaXNEcmFmdCh0YXJnZXQpIHx8XG4gICAgIWlzRHJhZnRhYmxlKHRhcmdldCwgb3B0aW9ucykgfHxcbiAgICBoYW5kbGVkU2V0Lmhhcyh0YXJnZXQpIHx8XG4gICAgT2JqZWN0LmlzRnJvemVuKHRhcmdldClcbiAgKVxuICAgIHJldHVybjtcbiAgY29uc3QgaXNTZXQgPSB0YXJnZXQgaW5zdGFuY2VvZiBTZXQ7XG4gIGNvbnN0IHNldE1hcDogTWFwPGFueSwgYW55PiB8IHVuZGVmaW5lZCA9IGlzU2V0ID8gbmV3IE1hcCgpIDogdW5kZWZpbmVkO1xuICBoYW5kbGVkU2V0LmFkZCh0YXJnZXQpO1xuICBmb3JFYWNoKHRhcmdldCwgKGtleSwgdmFsdWUpID0+IHtcbiAgICBpZiAoaXNEcmFmdCh2YWx1ZSkpIHtcbiAgICAgIGNvbnN0IHByb3h5RHJhZnQgPSBnZXRQcm94eURyYWZ0KHZhbHVlKSE7XG4gICAgICBlbnN1cmVTaGFsbG93Q29weShwcm94eURyYWZ0KTtcbiAgICAgIC8vIEEgZHJhZnQgd2hlcmUgYSBjaGlsZCBub2RlIGhhcyBiZWVuIGNoYW5nZWQsIG9yIGFzc2lnbmVkIGEgdmFsdWVcbiAgICAgIGNvbnN0IHVwZGF0ZWRWYWx1ZSA9XG4gICAgICAgIHByb3h5RHJhZnQuYXNzaWduZWRNYXA/LnNpemUgfHwgcHJveHlEcmFmdC5vcGVyYXRlZFxuICAgICAgICAgID8gcHJveHlEcmFmdC5jb3B5XG4gICAgICAgICAgOiBwcm94eURyYWZ0Lm9yaWdpbmFsO1xuICAgICAgLy8gZmluYWwgdXBkYXRlIHZhbHVlXG4gICAgICBzZXQoaXNTZXQgPyBzZXRNYXAhIDogdGFyZ2V0LCBrZXksIHVwZGF0ZWRWYWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGhhbmRsZVZhbHVlKHZhbHVlLCBoYW5kbGVkU2V0LCBvcHRpb25zKTtcbiAgICB9XG4gIH0pO1xuICBpZiAoc2V0TWFwKSB7XG4gICAgY29uc3Qgc2V0ID0gdGFyZ2V0IGFzIFNldDxhbnk+O1xuICAgIGNvbnN0IHZhbHVlcyA9IEFycmF5LmZyb20oc2V0KTtcbiAgICBzZXQuY2xlYXIoKTtcbiAgICB2YWx1ZXMuZm9yRWFjaCgodmFsdWUpID0+IHtcbiAgICAgIHNldC5hZGQoc2V0TWFwIS5oYXModmFsdWUpID8gc2V0TWFwIS5nZXQodmFsdWUpIDogdmFsdWUpO1xuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaW5hbGl6ZUFzc2lnbmVkKHByb3h5RHJhZnQ6IFByb3h5RHJhZnQsIGtleTogUHJvcGVydHlLZXkpIHtcbiAgLy8gaGFuZGxlIHRoZSBkcmFmdGFibGUgYXNzaWduZWQgdmFsdWVzXHVGRjBDIGFuZCB0aGUgdmFsdWUgaXMgbm90IGEgZHJhZnRcbiAgY29uc3QgY29weSA9XG4gICAgcHJveHlEcmFmdC50eXBlID09PSBEcmFmdFR5cGUuU2V0ID8gcHJveHlEcmFmdC5zZXRNYXAgOiBwcm94eURyYWZ0LmNvcHk7XG4gIGlmIChcbiAgICBwcm94eURyYWZ0LmZpbmFsaXRpZXMucmV2b2tlLmxlbmd0aCA+IDEgJiZcbiAgICBwcm94eURyYWZ0LmFzc2lnbmVkTWFwIS5nZXQoa2V5KSAmJlxuICAgIGNvcHlcbiAgKSB7XG4gICAgaGFuZGxlVmFsdWUoXG4gICAgICBnZXQoY29weSwga2V5KSxcbiAgICAgIHByb3h5RHJhZnQuZmluYWxpdGllcy5oYW5kbGVkU2V0LFxuICAgICAgcHJveHlEcmFmdC5vcHRpb25zXG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgdHlwZSBHZW5lcmF0ZVBhdGNoZXMgPSAoXG4gIHByb3h5U3RhdGU6IFByb3h5RHJhZnQsXG4gIGJhc2VQYXRoOiBhbnlbXSxcbiAgcGF0Y2hlczogUGF0Y2hlcyxcbiAgaW52ZXJzZVBhdGNoZXM6IFBhdGNoZXNcbikgPT4gdm9pZDtcblxuZXhwb3J0IGZ1bmN0aW9uIGZpbmFsaXplU2V0VmFsdWUodGFyZ2V0OiBQcm94eURyYWZ0KSB7XG4gIGlmICh0YXJnZXQudHlwZSA9PT0gRHJhZnRUeXBlLlNldCAmJiB0YXJnZXQuY29weSkge1xuICAgIHRhcmdldC5jb3B5LmNsZWFyKCk7XG4gICAgdGFyZ2V0LnNldE1hcCEuZm9yRWFjaCgodmFsdWUpID0+IHtcbiAgICAgIHRhcmdldC5jb3B5IS5hZGQoZ2V0VmFsdWUodmFsdWUpKTtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZmluYWxpemVQYXRjaGVzKFxuICB0YXJnZXQ6IFByb3h5RHJhZnQsXG4gIGdlbmVyYXRlUGF0Y2hlczogR2VuZXJhdGVQYXRjaGVzLFxuICBwYXRjaGVzPzogUGF0Y2hlcyxcbiAgaW52ZXJzZVBhdGNoZXM/OiBQYXRjaGVzXG4pIHtcbiAgY29uc3Qgc2hvdWxkRmluYWxpemUgPVxuICAgIHRhcmdldC5vcGVyYXRlZCAmJlxuICAgIHRhcmdldC5hc3NpZ25lZE1hcCAmJlxuICAgIHRhcmdldC5hc3NpZ25lZE1hcC5zaXplID4gMCAmJlxuICAgICF0YXJnZXQuZmluYWxpemVkO1xuICBpZiAoc2hvdWxkRmluYWxpemUpIHtcbiAgICBpZiAocGF0Y2hlcyAmJiBpbnZlcnNlUGF0Y2hlcykge1xuICAgICAgY29uc3QgYmFzZVBhdGggPSBnZXRQYXRoKHRhcmdldCk7XG4gICAgICBpZiAoYmFzZVBhdGgpIHtcbiAgICAgICAgZ2VuZXJhdGVQYXRjaGVzKHRhcmdldCwgYmFzZVBhdGgsIHBhdGNoZXMsIGludmVyc2VQYXRjaGVzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGFyZ2V0LmZpbmFsaXplZCA9IHRydWU7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1hcmtGaW5hbGl6YXRpb24oXG4gIHRhcmdldDogUHJveHlEcmFmdCxcbiAga2V5OiBhbnksXG4gIHZhbHVlOiBhbnksXG4gIGdlbmVyYXRlUGF0Y2hlczogR2VuZXJhdGVQYXRjaGVzXG4pIHtcbiAgY29uc3QgcHJveHlEcmFmdCA9IGdldFByb3h5RHJhZnQodmFsdWUpO1xuICBpZiAocHJveHlEcmFmdCkge1xuICAgIC8vICFjYXNlOiBhc3NpZ24gdGhlIGRyYWZ0IHZhbHVlXG4gICAgaWYgKCFwcm94eURyYWZ0LmNhbGxiYWNrcykge1xuICAgICAgcHJveHlEcmFmdC5jYWxsYmFja3MgPSBbXTtcbiAgICB9XG4gICAgcHJveHlEcmFmdC5jYWxsYmFja3MucHVzaCgocGF0Y2hlcywgaW52ZXJzZVBhdGNoZXMpID0+IHtcbiAgICAgIGNvbnN0IGNvcHkgPSB0YXJnZXQudHlwZSA9PT0gRHJhZnRUeXBlLlNldCA/IHRhcmdldC5zZXRNYXAgOiB0YXJnZXQuY29weTtcbiAgICAgIGlmIChpc0VxdWFsKGdldChjb3B5LCBrZXkpLCB2YWx1ZSkpIHtcbiAgICAgICAgbGV0IHVwZGF0ZWRWYWx1ZSA9IHByb3h5RHJhZnQub3JpZ2luYWw7XG4gICAgICAgIGlmIChwcm94eURyYWZ0LmNvcHkpIHtcbiAgICAgICAgICB1cGRhdGVkVmFsdWUgPSBwcm94eURyYWZ0LmNvcHk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxpemVTZXRWYWx1ZSh0YXJnZXQpO1xuICAgICAgICBmaW5hbGl6ZVBhdGNoZXModGFyZ2V0LCBnZW5lcmF0ZVBhdGNoZXMsIHBhdGNoZXMsIGludmVyc2VQYXRjaGVzKTtcbiAgICAgICAgaWYgKF9fREVWX18gJiYgdGFyZ2V0Lm9wdGlvbnMuZW5hYmxlQXV0b0ZyZWV6ZSkge1xuICAgICAgICAgIHRhcmdldC5vcHRpb25zLnVwZGF0ZWRWYWx1ZXMgPVxuICAgICAgICAgICAgdGFyZ2V0Lm9wdGlvbnMudXBkYXRlZFZhbHVlcyA/PyBuZXcgV2Vha01hcCgpO1xuICAgICAgICAgIHRhcmdldC5vcHRpb25zLnVwZGF0ZWRWYWx1ZXMuc2V0KHVwZGF0ZWRWYWx1ZSwgcHJveHlEcmFmdC5vcmlnaW5hbCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZmluYWwgdXBkYXRlIHZhbHVlXG4gICAgICAgIHNldChjb3B5LCBrZXksIHVwZGF0ZWRWYWx1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKHRhcmdldC5vcHRpb25zLmVuYWJsZUF1dG9GcmVlemUpIHtcbiAgICAgIC8vICFjYXNlOiBhc3NpZ24gdGhlIGRyYWZ0IHZhbHVlIGluIGNyb3NzIGRyYWZ0IHRyZWVcbiAgICAgIGlmIChwcm94eURyYWZ0LmZpbmFsaXRpZXMgIT09IHRhcmdldC5maW5hbGl0aWVzKSB7XG4gICAgICAgIHRhcmdldC5vcHRpb25zLmVuYWJsZUF1dG9GcmVlemUgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKGlzRHJhZnRhYmxlKHZhbHVlLCB0YXJnZXQub3B0aW9ucykpIHtcbiAgICAvLyAhY2FzZTogYXNzaWduIHRoZSBub24tZHJhZnQgdmFsdWVcbiAgICB0YXJnZXQuZmluYWxpdGllcy5kcmFmdC5wdXNoKCgpID0+IHtcbiAgICAgIGNvbnN0IGNvcHkgPSB0YXJnZXQudHlwZSA9PT0gRHJhZnRUeXBlLlNldCA/IHRhcmdldC5zZXRNYXAgOiB0YXJnZXQuY29weTtcbiAgICAgIGlmIChpc0VxdWFsKGdldChjb3B5LCBrZXkpLCB2YWx1ZSkpIHtcbiAgICAgICAgZmluYWxpemVBc3NpZ25lZCh0YXJnZXQsIGtleSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBEcmFmdFR5cGUsIE9wZXJhdGlvbiwgUGF0Y2hlcywgUHJveHlEcmFmdCB9IGZyb20gJy4vaW50ZXJmYWNlJztcbmltcG9ydCB7IGNsb25lSWZOZWVkZWQsIGVzY2FwZVBhdGgsIGdldCwgaGFzLCBpc0VxdWFsIH0gZnJvbSAnLi91dGlscyc7XG5cbmZ1bmN0aW9uIGdlbmVyYXRlQXJyYXlQYXRjaGVzKFxuICBwcm94eVN0YXRlOiBQcm94eURyYWZ0PEFycmF5PGFueT4+LFxuICBiYXNlUGF0aDogYW55W10sXG4gIHBhdGNoZXM6IFBhdGNoZXMsXG4gIGludmVyc2VQYXRjaGVzOiBQYXRjaGVzLFxuICBwYXRoQXNBcnJheTogYm9vbGVhblxuKSB7XG4gIGxldCB7IG9yaWdpbmFsLCBhc3NpZ25lZE1hcCwgb3B0aW9ucyB9ID0gcHJveHlTdGF0ZTtcbiAgbGV0IGNvcHkgPSBwcm94eVN0YXRlLmNvcHkhO1xuICBpZiAoY29weS5sZW5ndGggPCBvcmlnaW5hbC5sZW5ndGgpIHtcbiAgICBbb3JpZ2luYWwsIGNvcHldID0gW2NvcHksIG9yaWdpbmFsXTtcbiAgICBbcGF0Y2hlcywgaW52ZXJzZVBhdGNoZXNdID0gW2ludmVyc2VQYXRjaGVzLCBwYXRjaGVzXTtcbiAgfVxuICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgb3JpZ2luYWwubGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgaWYgKGFzc2lnbmVkTWFwIS5nZXQoaW5kZXgudG9TdHJpbmcoKSkgJiYgY29weVtpbmRleF0gIT09IG9yaWdpbmFsW2luZGV4XSkge1xuICAgICAgY29uc3QgX3BhdGggPSBiYXNlUGF0aC5jb25jYXQoW2luZGV4XSk7XG4gICAgICBjb25zdCBwYXRoID0gZXNjYXBlUGF0aChfcGF0aCwgcGF0aEFzQXJyYXkpO1xuICAgICAgcGF0Y2hlcy5wdXNoKHtcbiAgICAgICAgb3A6IE9wZXJhdGlvbi5SZXBsYWNlLFxuICAgICAgICBwYXRoLFxuICAgICAgICAvLyBJZiBpdCBpcyBhIGRyYWZ0LCBpdCBuZWVkcyB0byBiZSBkZWVwIGNsb25lZCwgYW5kIGl0IG1heSBhbHNvIGJlIG5vbi1kcmFmdC5cbiAgICAgICAgdmFsdWU6IGNsb25lSWZOZWVkZWQoY29weVtpbmRleF0pLFxuICAgICAgfSk7XG4gICAgICBpbnZlcnNlUGF0Y2hlcy5wdXNoKHtcbiAgICAgICAgb3A6IE9wZXJhdGlvbi5SZXBsYWNlLFxuICAgICAgICBwYXRoLFxuICAgICAgICAvLyBJZiBpdCBpcyBhIGRyYWZ0LCBpdCBuZWVkcyB0byBiZSBkZWVwIGNsb25lZCwgYW5kIGl0IG1heSBhbHNvIGJlIG5vbi1kcmFmdC5cbiAgICAgICAgdmFsdWU6IGNsb25lSWZOZWVkZWQob3JpZ2luYWxbaW5kZXhdKSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBmb3IgKGxldCBpbmRleCA9IG9yaWdpbmFsLmxlbmd0aDsgaW5kZXggPCBjb3B5Lmxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgIGNvbnN0IF9wYXRoID0gYmFzZVBhdGguY29uY2F0KFtpbmRleF0pO1xuICAgIGNvbnN0IHBhdGggPSBlc2NhcGVQYXRoKF9wYXRoLCBwYXRoQXNBcnJheSk7XG4gICAgcGF0Y2hlcy5wdXNoKHtcbiAgICAgIG9wOiBPcGVyYXRpb24uQWRkLFxuICAgICAgcGF0aCxcbiAgICAgIC8vIElmIGl0IGlzIGEgZHJhZnQsIGl0IG5lZWRzIHRvIGJlIGRlZXAgY2xvbmVkLCBhbmQgaXQgbWF5IGFsc28gYmUgbm9uLWRyYWZ0LlxuICAgICAgdmFsdWU6IGNsb25lSWZOZWVkZWQoY29weVtpbmRleF0pLFxuICAgIH0pO1xuICB9XG4gIGlmIChvcmlnaW5hbC5sZW5ndGggPCBjb3B5Lmxlbmd0aCkge1xuICAgIC8vIGh0dHBzOi8vd3d3LnJmYy1lZGl0b3Iub3JnL3JmYy9yZmM2OTAyI2FwcGVuZGl4LUEuNFxuICAgIC8vIEZvciBwZXJmb3JtYW5jZSwgaGVyZSB3ZSBvbmx5IGdlbmVyYXRlIGFuIG9wZXJhdGlvbiB0aGF0IHJlcGxhY2VzIHRoZSBsZW5ndGggb2YgdGhlIGFycmF5LFxuICAgIC8vIHdoaWNoIGlzIGluY29uc2lzdGVudCB3aXRoIEpTT04gUGF0Y2ggc3BlY2lmaWNhdGlvblxuICAgIGNvbnN0IHsgYXJyYXlMZW5ndGhBc3NpZ25tZW50ID0gdHJ1ZSB9ID0gb3B0aW9ucy5lbmFibGVQYXRjaGVzO1xuICAgIGlmIChhcnJheUxlbmd0aEFzc2lnbm1lbnQpIHtcbiAgICAgIGNvbnN0IF9wYXRoID0gYmFzZVBhdGguY29uY2F0KFsnbGVuZ3RoJ10pO1xuICAgICAgY29uc3QgcGF0aCA9IGVzY2FwZVBhdGgoX3BhdGgsIHBhdGhBc0FycmF5KTtcbiAgICAgIGludmVyc2VQYXRjaGVzLnB1c2goe1xuICAgICAgICBvcDogT3BlcmF0aW9uLlJlcGxhY2UsXG4gICAgICAgIHBhdGgsXG4gICAgICAgIHZhbHVlOiBvcmlnaW5hbC5sZW5ndGgsXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChsZXQgaW5kZXggPSBjb3B5Lmxlbmd0aDsgb3JpZ2luYWwubGVuZ3RoIDwgaW5kZXg7IGluZGV4IC09IDEpIHtcbiAgICAgICAgY29uc3QgX3BhdGggPSBiYXNlUGF0aC5jb25jYXQoW2luZGV4IC0gMV0pO1xuICAgICAgICBjb25zdCBwYXRoID0gZXNjYXBlUGF0aChfcGF0aCwgcGF0aEFzQXJyYXkpO1xuICAgICAgICBpbnZlcnNlUGF0Y2hlcy5wdXNoKHtcbiAgICAgICAgICBvcDogT3BlcmF0aW9uLlJlbW92ZSxcbiAgICAgICAgICBwYXRoLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVQYXRjaGVzRnJvbUFzc2lnbmVkKFxuICB7IG9yaWdpbmFsLCBjb3B5LCBhc3NpZ25lZE1hcCB9OiBQcm94eURyYWZ0PFJlY29yZDxzdHJpbmcsIGFueT4+LFxuICBiYXNlUGF0aDogYW55W10sXG4gIHBhdGNoZXM6IFBhdGNoZXMsXG4gIGludmVyc2VQYXRjaGVzOiBQYXRjaGVzLFxuICBwYXRoQXNBcnJheTogYm9vbGVhblxuKSB7XG4gIGFzc2lnbmVkTWFwIS5mb3JFYWNoKChhc3NpZ25lZFZhbHVlLCBrZXkpID0+IHtcbiAgICBjb25zdCBvcmlnaW5hbFZhbHVlID0gZ2V0KG9yaWdpbmFsLCBrZXkpO1xuICAgIGNvbnN0IHZhbHVlID0gY2xvbmVJZk5lZWRlZChnZXQoY29weSwga2V5KSk7XG4gICAgY29uc3Qgb3AgPSAhYXNzaWduZWRWYWx1ZVxuICAgICAgPyBPcGVyYXRpb24uUmVtb3ZlXG4gICAgICA6IGhhcyhvcmlnaW5hbCwga2V5KVxuICAgICAgICA/IE9wZXJhdGlvbi5SZXBsYWNlXG4gICAgICAgIDogT3BlcmF0aW9uLkFkZDtcbiAgICBpZiAoaXNFcXVhbChvcmlnaW5hbFZhbHVlLCB2YWx1ZSkgJiYgb3AgPT09IE9wZXJhdGlvbi5SZXBsYWNlKSByZXR1cm47XG4gICAgY29uc3QgX3BhdGggPSBiYXNlUGF0aC5jb25jYXQoa2V5KTtcbiAgICBjb25zdCBwYXRoID0gZXNjYXBlUGF0aChfcGF0aCwgcGF0aEFzQXJyYXkpO1xuICAgIHBhdGNoZXMucHVzaChvcCA9PT0gT3BlcmF0aW9uLlJlbW92ZSA/IHsgb3AsIHBhdGggfSA6IHsgb3AsIHBhdGgsIHZhbHVlIH0pO1xuICAgIGludmVyc2VQYXRjaGVzLnB1c2goXG4gICAgICBvcCA9PT0gT3BlcmF0aW9uLkFkZFxuICAgICAgICA/IHsgb3A6IE9wZXJhdGlvbi5SZW1vdmUsIHBhdGggfVxuICAgICAgICA6IG9wID09PSBPcGVyYXRpb24uUmVtb3ZlXG4gICAgICAgICAgPyB7IG9wOiBPcGVyYXRpb24uQWRkLCBwYXRoLCB2YWx1ZTogb3JpZ2luYWxWYWx1ZSB9XG4gICAgICAgICAgOiB7IG9wOiBPcGVyYXRpb24uUmVwbGFjZSwgcGF0aCwgdmFsdWU6IG9yaWdpbmFsVmFsdWUgfVxuICAgICk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZVNldFBhdGNoZXMoXG4gIHsgb3JpZ2luYWwsIGNvcHkgfTogUHJveHlEcmFmdDxTZXQ8YW55Pj4sXG4gIGJhc2VQYXRoOiBhbnlbXSxcbiAgcGF0Y2hlczogUGF0Y2hlcyxcbiAgaW52ZXJzZVBhdGNoZXM6IFBhdGNoZXMsXG4gIHBhdGhBc0FycmF5OiBib29sZWFuXG4pIHtcbiAgbGV0IGluZGV4ID0gMDtcbiAgb3JpZ2luYWwuZm9yRWFjaCgodmFsdWU6IGFueSkgPT4ge1xuICAgIGlmICghY29weSEuaGFzKHZhbHVlKSkge1xuICAgICAgY29uc3QgX3BhdGggPSBiYXNlUGF0aC5jb25jYXQoW2luZGV4XSk7XG4gICAgICBjb25zdCBwYXRoID0gZXNjYXBlUGF0aChfcGF0aCwgcGF0aEFzQXJyYXkpO1xuICAgICAgcGF0Y2hlcy5wdXNoKHtcbiAgICAgICAgb3A6IE9wZXJhdGlvbi5SZW1vdmUsXG4gICAgICAgIHBhdGgsXG4gICAgICAgIHZhbHVlLFxuICAgICAgfSk7XG4gICAgICBpbnZlcnNlUGF0Y2hlcy51bnNoaWZ0KHtcbiAgICAgICAgb3A6IE9wZXJhdGlvbi5BZGQsXG4gICAgICAgIHBhdGgsXG4gICAgICAgIHZhbHVlLFxuICAgICAgfSk7XG4gICAgfVxuICAgIGluZGV4ICs9IDE7XG4gIH0pO1xuICBpbmRleCA9IDA7XG4gIGNvcHkhLmZvckVhY2goKHZhbHVlOiBhbnkpID0+IHtcbiAgICBpZiAoIW9yaWdpbmFsLmhhcyh2YWx1ZSkpIHtcbiAgICAgIGNvbnN0IF9wYXRoID0gYmFzZVBhdGguY29uY2F0KFtpbmRleF0pO1xuICAgICAgY29uc3QgcGF0aCA9IGVzY2FwZVBhdGgoX3BhdGgsIHBhdGhBc0FycmF5KTtcbiAgICAgIHBhdGNoZXMucHVzaCh7XG4gICAgICAgIG9wOiBPcGVyYXRpb24uQWRkLFxuICAgICAgICBwYXRoLFxuICAgICAgICB2YWx1ZSxcbiAgICAgIH0pO1xuICAgICAgaW52ZXJzZVBhdGNoZXMudW5zaGlmdCh7XG4gICAgICAgIG9wOiBPcGVyYXRpb24uUmVtb3ZlLFxuICAgICAgICBwYXRoLFxuICAgICAgICB2YWx1ZSxcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpbmRleCArPSAxO1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlUGF0Y2hlcyhcbiAgcHJveHlTdGF0ZTogUHJveHlEcmFmdCxcbiAgYmFzZVBhdGg6IGFueVtdLFxuICBwYXRjaGVzOiBQYXRjaGVzLFxuICBpbnZlcnNlUGF0Y2hlczogUGF0Y2hlc1xuKSB7XG4gIGNvbnN0IHsgcGF0aEFzQXJyYXkgPSB0cnVlIH0gPSBwcm94eVN0YXRlLm9wdGlvbnMuZW5hYmxlUGF0Y2hlcztcbiAgc3dpdGNoIChwcm94eVN0YXRlLnR5cGUpIHtcbiAgICBjYXNlIERyYWZ0VHlwZS5PYmplY3Q6XG4gICAgY2FzZSBEcmFmdFR5cGUuTWFwOlxuICAgICAgcmV0dXJuIGdlbmVyYXRlUGF0Y2hlc0Zyb21Bc3NpZ25lZChcbiAgICAgICAgcHJveHlTdGF0ZSxcbiAgICAgICAgYmFzZVBhdGgsXG4gICAgICAgIHBhdGNoZXMsXG4gICAgICAgIGludmVyc2VQYXRjaGVzLFxuICAgICAgICBwYXRoQXNBcnJheVxuICAgICAgKTtcbiAgICBjYXNlIERyYWZ0VHlwZS5BcnJheTpcbiAgICAgIHJldHVybiBnZW5lcmF0ZUFycmF5UGF0Y2hlcyhcbiAgICAgICAgcHJveHlTdGF0ZSxcbiAgICAgICAgYmFzZVBhdGgsXG4gICAgICAgIHBhdGNoZXMsXG4gICAgICAgIGludmVyc2VQYXRjaGVzLFxuICAgICAgICBwYXRoQXNBcnJheVxuICAgICAgKTtcbiAgICBjYXNlIERyYWZ0VHlwZS5TZXQ6XG4gICAgICByZXR1cm4gZ2VuZXJhdGVTZXRQYXRjaGVzKFxuICAgICAgICBwcm94eVN0YXRlLFxuICAgICAgICBiYXNlUGF0aCxcbiAgICAgICAgcGF0Y2hlcyxcbiAgICAgICAgaW52ZXJzZVBhdGNoZXMsXG4gICAgICAgIHBhdGhBc0FycmF5XG4gICAgICApO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgT3B0aW9ucyB9IGZyb20gJy4vaW50ZXJmYWNlJztcbmltcG9ydCB7IGlzRHJhZnRhYmxlIH0gZnJvbSAnLi91dGlscyc7XG5cbmxldCByZWFkYWJsZSA9IGZhbHNlO1xuXG5leHBvcnQgY29uc3QgY2hlY2tSZWFkYWJsZSA9IChcbiAgdmFsdWU6IGFueSxcbiAgb3B0aW9uczogT3B0aW9uczxhbnksIGFueT4sXG4gIGlnbm9yZUNoZWNrRHJhZnRhYmxlID0gZmFsc2VcbikgPT4ge1xuICBpZiAoXG4gICAgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJlxuICAgIHZhbHVlICE9PSBudWxsICYmXG4gICAgKCFpc0RyYWZ0YWJsZSh2YWx1ZSwgb3B0aW9ucykgfHwgaWdub3JlQ2hlY2tEcmFmdGFibGUpICYmXG4gICAgIXJlYWRhYmxlXG4gICkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBTdHJpY3QgbW9kZTogTXV0YWJsZSBkYXRhIGNhbm5vdCBiZSBhY2Nlc3NlZCBkaXJlY3RseSwgcGxlYXNlIHVzZSAndW5zYWZlKGNhbGxiYWNrKScgd3JhcC5gXG4gICAgKTtcbiAgfVxufTtcblxuLyoqXG4gKiBgdW5zYWZlKGNhbGxiYWNrKWAgdG8gYWNjZXNzIG11dGFibGUgZGF0YSBkaXJlY3RseSBpbiBzdHJpY3QgbW9kZS5cbiAqXG4gKiAjIyBFeGFtcGxlXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IGNyZWF0ZSwgdW5zYWZlIH0gZnJvbSAnLi4vaW5kZXgnO1xuICpcbiAqIGNsYXNzIEZvb2JhciB7XG4gKiAgIGJhciA9IDE7XG4gKiB9XG4gKlxuICogY29uc3QgYmFzZVN0YXRlID0geyBmb29iYXI6IG5ldyBGb29iYXIoKSB9O1xuICogY29uc3Qgc3RhdGUgPSBjcmVhdGUoXG4gKiAgIGJhc2VTdGF0ZSxcbiAqICAgKGRyYWZ0KSA9PiB7XG4gKiAgICB1bnNhZmUoKCkgPT4ge1xuICogICAgICBkcmFmdC5mb29iYXIuYmFyID0gMjtcbiAqICAgIH0pO1xuICogICB9LFxuICogICB7XG4gKiAgICAgc3RyaWN0OiB0cnVlLFxuICogICB9XG4gKiApO1xuICpcbiAqIGV4cGVjdChzdGF0ZSkudG9CZShiYXNlU3RhdGUpO1xuICogZXhwZWN0KHN0YXRlLmZvb2JhcikudG9CZShiYXNlU3RhdGUuZm9vYmFyKTtcbiAqIGV4cGVjdChzdGF0ZS5mb29iYXIuYmFyKS50b0JlKDIpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1bnNhZmU8VD4oY2FsbGJhY2s6ICgpID0+IFQpOiBUIHtcbiAgcmVhZGFibGUgPSB0cnVlO1xuICBsZXQgcmVzdWx0OiBUO1xuICB0cnkge1xuICAgIHJlc3VsdCA9IGNhbGxiYWNrKCk7XG4gIH0gZmluYWxseSB7XG4gICAgcmVhZGFibGUgPSBmYWxzZTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuIiwgImltcG9ydCB7IGRhdGFUeXBlcywgaXRlcmF0b3JTeW1ib2wgfSBmcm9tICcuL2NvbnN0YW50JztcbmltcG9ydCB7IGludGVybmFsIH0gZnJvbSAnLi9pbnRlcm5hbCc7XG5pbXBvcnQgeyBnZW5lcmF0ZVBhdGNoZXMgfSBmcm9tICcuL3BhdGNoJztcbmltcG9ydCB7IGNoZWNrUmVhZGFibGUgfSBmcm9tICcuL3Vuc2FmZSc7XG5pbXBvcnQge1xuICBlbnN1cmVTaGFsbG93Q29weSxcbiAgZ2V0UHJveHlEcmFmdCxcbiAgaXNEcmFmdGFibGUsXG4gIGlzRXF1YWwsXG4gIGxhdGVzdCxcbiAgbWFya0NoYW5nZWQsXG4gIG1hcmtGaW5hbGl6YXRpb24sXG59IGZyb20gJy4vdXRpbHMnO1xuXG5leHBvcnQgY29uc3QgbWFwSGFuZGxlciA9IHtcbiAgZ2V0IHNpemUoKSB7XG4gICAgY29uc3QgY3VycmVudDogTWFwPGFueSwgYW55PiA9IGxhdGVzdChnZXRQcm94eURyYWZ0KHRoaXMpISk7XG4gICAgcmV0dXJuIGN1cnJlbnQuc2l6ZTtcbiAgfSxcbiAgaGFzKGtleTogYW55KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGxhdGVzdChnZXRQcm94eURyYWZ0KHRoaXMpISkuaGFzKGtleSk7XG4gIH0sXG4gIHNldChrZXk6IGFueSwgdmFsdWU6IGFueSkge1xuICAgIGNvbnN0IHRhcmdldCA9IGdldFByb3h5RHJhZnQodGhpcykhO1xuICAgIGNvbnN0IHNvdXJjZSA9IGxhdGVzdCh0YXJnZXQpO1xuICAgIGlmICghc291cmNlLmhhcyhrZXkpIHx8ICFpc0VxdWFsKHNvdXJjZS5nZXQoa2V5KSwgdmFsdWUpKSB7XG4gICAgICBlbnN1cmVTaGFsbG93Q29weSh0YXJnZXQpO1xuICAgICAgbWFya0NoYW5nZWQodGFyZ2V0KTtcbiAgICAgIHRhcmdldC5hc3NpZ25lZE1hcCEuc2V0KGtleSwgdHJ1ZSk7XG4gICAgICB0YXJnZXQuY29weS5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgICBtYXJrRmluYWxpemF0aW9uKHRhcmdldCwga2V5LCB2YWx1ZSwgZ2VuZXJhdGVQYXRjaGVzKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG4gIGRlbGV0ZShrZXk6IGFueSk6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy5oYXMoa2V5KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCB0YXJnZXQgPSBnZXRQcm94eURyYWZ0KHRoaXMpITtcbiAgICBlbnN1cmVTaGFsbG93Q29weSh0YXJnZXQpO1xuICAgIG1hcmtDaGFuZ2VkKHRhcmdldCk7XG4gICAgaWYgKHRhcmdldC5vcmlnaW5hbC5oYXMoa2V5KSkge1xuICAgICAgdGFyZ2V0LmFzc2lnbmVkTWFwIS5zZXQoa2V5LCBmYWxzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRhcmdldC5hc3NpZ25lZE1hcCEuZGVsZXRlKGtleSk7XG4gICAgfVxuICAgIHRhcmdldC5jb3B5LmRlbGV0ZShrZXkpO1xuICAgIHJldHVybiB0cnVlO1xuICB9LFxuICBjbGVhcigpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBnZXRQcm94eURyYWZ0KHRoaXMpITtcbiAgICBpZiAoIXRoaXMuc2l6ZSkgcmV0dXJuO1xuICAgIGVuc3VyZVNoYWxsb3dDb3B5KHRhcmdldCk7XG4gICAgbWFya0NoYW5nZWQodGFyZ2V0KTtcbiAgICB0YXJnZXQuYXNzaWduZWRNYXAgPSBuZXcgTWFwKCk7XG4gICAgZm9yIChjb25zdCBba2V5XSBvZiB0YXJnZXQub3JpZ2luYWwpIHtcbiAgICAgIHRhcmdldC5hc3NpZ25lZE1hcC5zZXQoa2V5LCBmYWxzZSk7XG4gICAgfVxuICAgIHRhcmdldC5jb3B5IS5jbGVhcigpO1xuICB9LFxuICBmb3JFYWNoKGNhbGxiYWNrOiAodmFsdWU6IGFueSwga2V5OiBhbnksIHNlbGY6IGFueSkgPT4gdm9pZCwgdGhpc0FyZz86IGFueSkge1xuICAgIGNvbnN0IHRhcmdldCA9IGdldFByb3h5RHJhZnQodGhpcykhO1xuICAgIGxhdGVzdCh0YXJnZXQpLmZvckVhY2goKF92YWx1ZTogYW55LCBfa2V5OiBhbnkpID0+IHtcbiAgICAgIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgdGhpcy5nZXQoX2tleSksIF9rZXksIHRoaXMpO1xuICAgIH0pO1xuICB9LFxuICBnZXQoa2V5OiBhbnkpOiBhbnkge1xuICAgIGNvbnN0IHRhcmdldCA9IGdldFByb3h5RHJhZnQodGhpcykhO1xuICAgIGNvbnN0IHZhbHVlID0gbGF0ZXN0KHRhcmdldCkuZ2V0KGtleSk7XG4gICAgY29uc3QgbXV0YWJsZSA9XG4gICAgICB0YXJnZXQub3B0aW9ucy5tYXJrPy4odmFsdWUsIGRhdGFUeXBlcykgPT09IGRhdGFUeXBlcy5tdXRhYmxlO1xuICAgIGlmICh0YXJnZXQub3B0aW9ucy5zdHJpY3QpIHtcbiAgICAgIGNoZWNrUmVhZGFibGUodmFsdWUsIHRhcmdldC5vcHRpb25zLCBtdXRhYmxlKTtcbiAgICB9XG4gICAgaWYgKG11dGFibGUpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgaWYgKHRhcmdldC5maW5hbGl6ZWQgfHwgIWlzRHJhZnRhYmxlKHZhbHVlLCB0YXJnZXQub3B0aW9ucykpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgLy8gZHJhZnRlZCBvciByZWFzc2lnbmVkXG4gICAgaWYgKHZhbHVlICE9PSB0YXJnZXQub3JpZ2luYWwuZ2V0KGtleSkpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgY29uc3QgZHJhZnQgPSBpbnRlcm5hbC5jcmVhdGVEcmFmdCh7XG4gICAgICBvcmlnaW5hbDogdmFsdWUsXG4gICAgICBwYXJlbnREcmFmdDogdGFyZ2V0LFxuICAgICAga2V5LFxuICAgICAgZmluYWxpdGllczogdGFyZ2V0LmZpbmFsaXRpZXMsXG4gICAgICBvcHRpb25zOiB0YXJnZXQub3B0aW9ucyxcbiAgICB9KTtcbiAgICBlbnN1cmVTaGFsbG93Q29weSh0YXJnZXQpO1xuICAgIHRhcmdldC5jb3B5LnNldChrZXksIGRyYWZ0KTtcbiAgICByZXR1cm4gZHJhZnQ7XG4gIH0sXG4gIGtleXMoKTogSXRlcmFibGVJdGVyYXRvcjxhbnk+IHtcbiAgICByZXR1cm4gbGF0ZXN0KGdldFByb3h5RHJhZnQodGhpcykhKS5rZXlzKCk7XG4gIH0sXG4gIHZhbHVlcygpOiBJdGVyYWJsZUl0ZXJhdG9yPGFueT4ge1xuICAgIGNvbnN0IGl0ZXJhdG9yID0gdGhpcy5rZXlzKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIFtpdGVyYXRvclN5bWJvbF06ICgpID0+IHRoaXMudmFsdWVzKCksXG4gICAgICBuZXh0OiAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgaWYgKHJlc3VsdC5kb25lKSByZXR1cm4gcmVzdWx0O1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuZ2V0KHJlc3VsdC52YWx1ZSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZG9uZTogZmFsc2UsXG4gICAgICAgICAgdmFsdWUsXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgIH0gYXMgYW55O1xuICB9LFxuICBlbnRyaWVzKCk6IEl0ZXJhYmxlSXRlcmF0b3I8W2FueSwgYW55XT4ge1xuICAgIGNvbnN0IGl0ZXJhdG9yID0gdGhpcy5rZXlzKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIFtpdGVyYXRvclN5bWJvbF06ICgpID0+IHRoaXMuZW50cmllcygpLFxuICAgICAgbmV4dDogKCkgPT4ge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBpdGVyYXRvci5uZXh0KCk7XG4gICAgICAgIGlmIChyZXN1bHQuZG9uZSkgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLmdldChyZXN1bHQudmFsdWUpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGRvbmU6IGZhbHNlLFxuICAgICAgICAgIHZhbHVlOiBbcmVzdWx0LnZhbHVlLCB2YWx1ZV0sXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgIH0gYXMgYW55O1xuICB9LFxuICBbaXRlcmF0b3JTeW1ib2xdKCkge1xuICAgIHJldHVybiB0aGlzLmVudHJpZXMoKTtcbiAgfSxcbn07XG5cbmV4cG9ydCBjb25zdCBtYXBIYW5kbGVyS2V5cyA9IFJlZmxlY3Qub3duS2V5cyhtYXBIYW5kbGVyKTtcbiIsICJpbXBvcnQgeyBQcm94eURyYWZ0IH0gZnJvbSAnLi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgZGF0YVR5cGVzLCBpdGVyYXRvclN5bWJvbCB9IGZyb20gJy4vY29uc3RhbnQnO1xuaW1wb3J0IHsgaW50ZXJuYWwgfSBmcm9tICcuL2ludGVybmFsJztcbmltcG9ydCB7XG4gIGVuc3VyZVNoYWxsb3dDb3B5LFxuICBnZXRQcm94eURyYWZ0LFxuICBpc0RyYWZ0YWJsZSxcbiAgbWFya0NoYW5nZWQsXG4gIG1hcmtGaW5hbGl6YXRpb24sXG59IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHsgY2hlY2tSZWFkYWJsZSB9IGZyb20gJy4vdW5zYWZlJztcbmltcG9ydCB7IGdlbmVyYXRlUGF0Y2hlcyB9IGZyb20gJy4vcGF0Y2gnO1xuXG5jb25zdCBnZXROZXh0SXRlcmF0b3IgPVxuICAoXG4gICAgdGFyZ2V0OiBQcm94eURyYWZ0PGFueT4sXG4gICAgaXRlcmF0b3I6IEl0ZXJhYmxlSXRlcmF0b3I8YW55PixcbiAgICB7IGlzVmFsdWVzSXRlcmF0b3IgfTogeyBpc1ZhbHVlc0l0ZXJhdG9yOiBib29sZWFuIH1cbiAgKSA9PlxuICAoKSA9PiB7XG4gICAgY29uc3QgcmVzdWx0ID0gaXRlcmF0b3IubmV4dCgpO1xuICAgIGlmIChyZXN1bHQuZG9uZSkgcmV0dXJuIHJlc3VsdDtcbiAgICBjb25zdCBrZXkgPSByZXN1bHQudmFsdWUgYXMgYW55O1xuICAgIGxldCB2YWx1ZSA9IHRhcmdldC5zZXRNYXAhLmdldChrZXkpO1xuICAgIGNvbnN0IGN1cnJlbnREcmFmdCA9IGdldFByb3h5RHJhZnQodmFsdWUpO1xuICAgIGNvbnN0IG11dGFibGUgPVxuICAgICAgdGFyZ2V0Lm9wdGlvbnMubWFyaz8uKHZhbHVlLCBkYXRhVHlwZXMpID09PSBkYXRhVHlwZXMubXV0YWJsZTtcbiAgICBpZiAodGFyZ2V0Lm9wdGlvbnMuc3RyaWN0KSB7XG4gICAgICBjaGVja1JlYWRhYmxlKGtleSwgdGFyZ2V0Lm9wdGlvbnMsIG11dGFibGUpO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICAhbXV0YWJsZSAmJlxuICAgICAgIWN1cnJlbnREcmFmdCAmJlxuICAgICAgaXNEcmFmdGFibGUoa2V5LCB0YXJnZXQub3B0aW9ucykgJiZcbiAgICAgICF0YXJnZXQuZmluYWxpemVkICYmXG4gICAgICB0YXJnZXQub3JpZ2luYWwhLmhhcyhrZXkpXG4gICAgKSB7XG4gICAgICAvLyBkcmFmdCBhIGRyYWZ0YWJsZSBvcmlnaW5hbCBzZXQgaXRlbVxuICAgICAgY29uc3QgcHJveHkgPSBpbnRlcm5hbC5jcmVhdGVEcmFmdCh7XG4gICAgICAgIG9yaWdpbmFsOiBrZXksXG4gICAgICAgIHBhcmVudERyYWZ0OiB0YXJnZXQsXG4gICAgICAgIGtleSxcbiAgICAgICAgZmluYWxpdGllczogdGFyZ2V0LmZpbmFsaXRpZXMsXG4gICAgICAgIG9wdGlvbnM6IHRhcmdldC5vcHRpb25zLFxuICAgICAgfSk7XG4gICAgICB0YXJnZXQuc2V0TWFwIS5zZXQoa2V5LCBwcm94eSk7XG4gICAgICB2YWx1ZSA9IHByb3h5O1xuICAgIH0gZWxzZSBpZiAoY3VycmVudERyYWZ0KSB7XG4gICAgICAvLyBkcmFmdGVkXG4gICAgICB2YWx1ZSA9IGN1cnJlbnREcmFmdC5wcm94eTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGRvbmU6IGZhbHNlLFxuICAgICAgdmFsdWU6IGlzVmFsdWVzSXRlcmF0b3IgPyB2YWx1ZSA6IFt2YWx1ZSwgdmFsdWVdLFxuICAgIH07XG4gIH07XG5cbmV4cG9ydCBjb25zdCBzZXRIYW5kbGVyID0ge1xuICBnZXQgc2l6ZSgpIHtcbiAgICBjb25zdCB0YXJnZXQ6IFByb3h5RHJhZnQ8YW55PiA9IGdldFByb3h5RHJhZnQodGhpcykhO1xuICAgIHJldHVybiB0YXJnZXQuc2V0TWFwIS5zaXplO1xuICB9LFxuICBoYXModmFsdWU6IGFueSkge1xuICAgIGNvbnN0IHRhcmdldCA9IGdldFByb3h5RHJhZnQodGhpcykhO1xuICAgIC8vIHJlYXNzaWduZWQgb3Igbm9uLWRyYWZ0YWJsZSB2YWx1ZXNcbiAgICBpZiAodGFyZ2V0LnNldE1hcCEuaGFzKHZhbHVlKSkgcmV0dXJuIHRydWU7XG4gICAgZW5zdXJlU2hhbGxvd0NvcHkodGFyZ2V0KTtcbiAgICBjb25zdCB2YWx1ZVByb3h5RHJhZnQgPSBnZXRQcm94eURyYWZ0KHZhbHVlKSE7XG4gICAgLy8gZHJhZnRlZFxuICAgIGlmICh2YWx1ZVByb3h5RHJhZnQgJiYgdGFyZ2V0LnNldE1hcCEuaGFzKHZhbHVlUHJveHlEcmFmdC5vcmlnaW5hbCkpXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0sXG4gIGFkZCh2YWx1ZTogYW55KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZ2V0UHJveHlEcmFmdCh0aGlzKSE7XG4gICAgaWYgKCF0aGlzLmhhcyh2YWx1ZSkpIHtcbiAgICAgIGVuc3VyZVNoYWxsb3dDb3B5KHRhcmdldCk7XG4gICAgICBtYXJrQ2hhbmdlZCh0YXJnZXQpO1xuICAgICAgdGFyZ2V0LmFzc2lnbmVkTWFwIS5zZXQodmFsdWUsIHRydWUpO1xuICAgICAgdGFyZ2V0LnNldE1hcCEuc2V0KHZhbHVlLCB2YWx1ZSk7XG4gICAgICBtYXJrRmluYWxpemF0aW9uKHRhcmdldCwgdmFsdWUsIHZhbHVlLCBnZW5lcmF0ZVBhdGNoZXMpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfSxcbiAgZGVsZXRlKHZhbHVlOiBhbnkpOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMuaGFzKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCB0YXJnZXQgPSBnZXRQcm94eURyYWZ0KHRoaXMpITtcbiAgICBlbnN1cmVTaGFsbG93Q29weSh0YXJnZXQpO1xuICAgIG1hcmtDaGFuZ2VkKHRhcmdldCk7XG4gICAgY29uc3QgdmFsdWVQcm94eURyYWZ0ID0gZ2V0UHJveHlEcmFmdCh2YWx1ZSkhO1xuICAgIGlmICh2YWx1ZVByb3h5RHJhZnQgJiYgdGFyZ2V0LnNldE1hcCEuaGFzKHZhbHVlUHJveHlEcmFmdC5vcmlnaW5hbCkpIHtcbiAgICAgIC8vIGRlbGV0ZSBkcmFmdGVkXG4gICAgICB0YXJnZXQuYXNzaWduZWRNYXAhLnNldCh2YWx1ZVByb3h5RHJhZnQub3JpZ2luYWwsIGZhbHNlKTtcbiAgICAgIHJldHVybiB0YXJnZXQuc2V0TWFwIS5kZWxldGUodmFsdWVQcm94eURyYWZ0Lm9yaWdpbmFsKTtcbiAgICB9XG4gICAgaWYgKCF2YWx1ZVByb3h5RHJhZnQgJiYgdGFyZ2V0LnNldE1hcCEuaGFzKHZhbHVlKSkge1xuICAgICAgLy8gbm9uLWRyYWZ0YWJsZSB2YWx1ZXNcbiAgICAgIHRhcmdldC5hc3NpZ25lZE1hcCEuc2V0KHZhbHVlLCBmYWxzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHJlYXNzaWduZWRcbiAgICAgIHRhcmdldC5hc3NpZ25lZE1hcCEuZGVsZXRlKHZhbHVlKTtcbiAgICB9XG4gICAgLy8gZGVsZXRlIHJlYXNzaWduZWQgb3Igbm9uLWRyYWZ0YWJsZSB2YWx1ZXNcbiAgICByZXR1cm4gdGFyZ2V0LnNldE1hcCEuZGVsZXRlKHZhbHVlKTtcbiAgfSxcbiAgY2xlYXIoKSB7XG4gICAgaWYgKCF0aGlzLnNpemUpIHJldHVybjtcbiAgICBjb25zdCB0YXJnZXQgPSBnZXRQcm94eURyYWZ0KHRoaXMpITtcbiAgICBlbnN1cmVTaGFsbG93Q29weSh0YXJnZXQpO1xuICAgIG1hcmtDaGFuZ2VkKHRhcmdldCk7XG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0YXJnZXQub3JpZ2luYWwpIHtcbiAgICAgIHRhcmdldC5hc3NpZ25lZE1hcCEuc2V0KHZhbHVlLCBmYWxzZSk7XG4gICAgfVxuICAgIHRhcmdldC5zZXRNYXAhLmNsZWFyKCk7XG4gIH0sXG4gIHZhbHVlcygpOiBJdGVyYWJsZUl0ZXJhdG9yPGFueT4ge1xuICAgIGNvbnN0IHRhcmdldCA9IGdldFByb3h5RHJhZnQodGhpcykhO1xuICAgIGVuc3VyZVNoYWxsb3dDb3B5KHRhcmdldCk7XG4gICAgY29uc3QgaXRlcmF0b3IgPSB0YXJnZXQuc2V0TWFwIS5rZXlzKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIFtTeW1ib2wuaXRlcmF0b3JdOiAoKSA9PiB0aGlzLnZhbHVlcygpLFxuICAgICAgbmV4dDogZ2V0TmV4dEl0ZXJhdG9yKHRhcmdldCwgaXRlcmF0b3IsIHsgaXNWYWx1ZXNJdGVyYXRvcjogdHJ1ZSB9KSxcbiAgICB9O1xuICB9LFxuICBlbnRyaWVzKCk6IEl0ZXJhYmxlSXRlcmF0b3I8W2FueSwgYW55XT4ge1xuICAgIGNvbnN0IHRhcmdldCA9IGdldFByb3h5RHJhZnQodGhpcykhO1xuICAgIGVuc3VyZVNoYWxsb3dDb3B5KHRhcmdldCk7XG4gICAgY29uc3QgaXRlcmF0b3IgPSB0YXJnZXQuc2V0TWFwIS5rZXlzKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIFtTeW1ib2wuaXRlcmF0b3JdOiAoKSA9PiB0aGlzLmVudHJpZXMoKSxcbiAgICAgIG5leHQ6IGdldE5leHRJdGVyYXRvcih0YXJnZXQsIGl0ZXJhdG9yLCB7XG4gICAgICAgIGlzVmFsdWVzSXRlcmF0b3I6IGZhbHNlLFxuICAgICAgfSkgYXMgKCkgPT4gSXRlcmF0b3JSZXR1cm5SZXN1bHQ8YW55PixcbiAgICB9O1xuICB9LFxuICBrZXlzKCk6IEl0ZXJhYmxlSXRlcmF0b3I8YW55PiB7XG4gICAgcmV0dXJuIHRoaXMudmFsdWVzKCk7XG4gIH0sXG4gIFtpdGVyYXRvclN5bWJvbF0oKSB7XG4gICAgcmV0dXJuIHRoaXMudmFsdWVzKCk7XG4gIH0sXG4gIGZvckVhY2goY2FsbGJhY2s6IGFueSwgdGhpc0FyZz86IGFueSkge1xuICAgIGNvbnN0IGl0ZXJhdG9yID0gdGhpcy52YWx1ZXMoKTtcbiAgICBsZXQgcmVzdWx0ID0gaXRlcmF0b3IubmV4dCgpO1xuICAgIHdoaWxlICghcmVzdWx0LmRvbmUpIHtcbiAgICAgIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgcmVzdWx0LnZhbHVlLCByZXN1bHQudmFsdWUsIHRoaXMpO1xuICAgICAgcmVzdWx0ID0gaXRlcmF0b3IubmV4dCgpO1xuICAgIH1cbiAgfSxcbn07XG5cbmlmIChTZXQucHJvdG90eXBlLmRpZmZlcmVuY2UpIHtcbiAgLy8gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBuZXcgU2V0IG1ldGhvZHNcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtc2V0LW1ldGhvZHNcbiAgLy8gQW5kIGBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1zZXQtbWV0aG9kcy9ibG9iL21haW4vZGV0YWlscy5tZCNzeW1ib2xzcGVjaWVzYCBoYXMgc29tZSBkZXRhaWxzIGFib3V0IHRoZSBgQEBzcGVjaWVzYCBzeW1ib2wuXG4gIC8vIFNvIHdlIGNhbid0IHVzZSBTdWJTZXQgaW5zdGFuY2UgY29uc3RydWN0b3IgdG8gZ2V0IHRoZSBjb25zdHJ1Y3RvciBvZiB0aGUgU3ViU2V0IGluc3RhbmNlLlxuICBPYmplY3QuYXNzaWduKHNldEhhbmRsZXIsIHtcbiAgICBpbnRlcnNlY3Rpb24odGhpczogU2V0PGFueT4sIG90aGVyOiBSZWFkb25seVNldExpa2U8YW55Pik6IFNldDxhbnk+IHtcbiAgICAgIHJldHVybiBTZXQucHJvdG90eXBlLmludGVyc2VjdGlvbi5jYWxsKG5ldyBTZXQodGhpcy52YWx1ZXMoKSksIG90aGVyKTtcbiAgICB9LFxuICAgIHVuaW9uKHRoaXM6IFNldDxhbnk+LCBvdGhlcjogUmVhZG9ubHlTZXRMaWtlPGFueT4pOiBTZXQ8YW55PiB7XG4gICAgICByZXR1cm4gU2V0LnByb3RvdHlwZS51bmlvbi5jYWxsKG5ldyBTZXQodGhpcy52YWx1ZXMoKSksIG90aGVyKTtcbiAgICB9LFxuICAgIGRpZmZlcmVuY2UodGhpczogU2V0PGFueT4sIG90aGVyOiBSZWFkb25seVNldExpa2U8YW55Pik6IFNldDxhbnk+IHtcbiAgICAgIHJldHVybiBTZXQucHJvdG90eXBlLmRpZmZlcmVuY2UuY2FsbChuZXcgU2V0KHRoaXMudmFsdWVzKCkpLCBvdGhlcik7XG4gICAgfSxcbiAgICBzeW1tZXRyaWNEaWZmZXJlbmNlKHRoaXM6IFNldDxhbnk+LCBvdGhlcjogUmVhZG9ubHlTZXRMaWtlPGFueT4pOiBTZXQ8YW55PiB7XG4gICAgICByZXR1cm4gU2V0LnByb3RvdHlwZS5zeW1tZXRyaWNEaWZmZXJlbmNlLmNhbGwoXG4gICAgICAgIG5ldyBTZXQodGhpcy52YWx1ZXMoKSksXG4gICAgICAgIG90aGVyXG4gICAgICApO1xuICAgIH0sXG4gICAgaXNTdWJzZXRPZih0aGlzOiBTZXQ8YW55Piwgb3RoZXI6IFJlYWRvbmx5U2V0TGlrZTxhbnk+KTogYm9vbGVhbiB7XG4gICAgICByZXR1cm4gU2V0LnByb3RvdHlwZS5pc1N1YnNldE9mLmNhbGwobmV3IFNldCh0aGlzLnZhbHVlcygpKSwgb3RoZXIpO1xuICAgIH0sXG4gICAgaXNTdXBlcnNldE9mKHRoaXM6IFNldDxhbnk+LCBvdGhlcjogUmVhZG9ubHlTZXRMaWtlPGFueT4pOiBib29sZWFuIHtcbiAgICAgIHJldHVybiBTZXQucHJvdG90eXBlLmlzU3VwZXJzZXRPZi5jYWxsKG5ldyBTZXQodGhpcy52YWx1ZXMoKSksIG90aGVyKTtcbiAgICB9LFxuICAgIGlzRGlzam9pbnRGcm9tKHRoaXM6IFNldDxhbnk+LCBvdGhlcjogUmVhZG9ubHlTZXRMaWtlPGFueT4pOiBib29sZWFuIHtcbiAgICAgIHJldHVybiBTZXQucHJvdG90eXBlLmlzRGlzam9pbnRGcm9tLmNhbGwobmV3IFNldCh0aGlzLnZhbHVlcygpKSwgb3RoZXIpO1xuICAgIH0sXG4gIH0pO1xufVxuXG5leHBvcnQgY29uc3Qgc2V0SGFuZGxlcktleXMgPSBSZWZsZWN0Lm93bktleXMoc2V0SGFuZGxlcik7XG4iLCAiaW1wb3J0IHtcbiAgRHJhZnRUeXBlLFxuICBGaW5hbGl0aWVzLFxuICBQYXRjaGVzLFxuICBQcm94eURyYWZ0LFxuICBPcHRpb25zLFxuICBPcGVyYXRpb24sXG59IGZyb20gJy4vaW50ZXJmYWNlJztcbmltcG9ydCB7IGRhdGFUeXBlcywgUFJPWFlfRFJBRlQgfSBmcm9tICcuL2NvbnN0YW50JztcbmltcG9ydCB7IG1hcEhhbmRsZXIsIG1hcEhhbmRsZXJLZXlzIH0gZnJvbSAnLi9tYXAnO1xuaW1wb3J0IHsgc2V0SGFuZGxlciwgc2V0SGFuZGxlcktleXMgfSBmcm9tICcuL3NldCc7XG5pbXBvcnQgeyBpbnRlcm5hbCB9IGZyb20gJy4vaW50ZXJuYWwnO1xuaW1wb3J0IHtcbiAgZGVlcEZyZWV6ZSxcbiAgZW5zdXJlU2hhbGxvd0NvcHksXG4gIGdldERlc2NyaXB0b3IsXG4gIGdldFByb3h5RHJhZnQsXG4gIGdldFR5cGUsXG4gIGdldFZhbHVlLFxuICBoYXMsXG4gIGlzRXF1YWwsXG4gIGlzRHJhZnRhYmxlLFxuICBsYXRlc3QsXG4gIG1hcmtDaGFuZ2VkLFxuICBwZWVrLFxuICBnZXQsXG4gIHNldCxcbiAgcmV2b2tlUHJveHksXG4gIGZpbmFsaXplU2V0VmFsdWUsXG4gIG1hcmtGaW5hbGl6YXRpb24sXG4gIGZpbmFsaXplUGF0Y2hlcyxcbiAgaXNEcmFmdCxcbn0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgeyBjaGVja1JlYWRhYmxlIH0gZnJvbSAnLi91bnNhZmUnO1xuaW1wb3J0IHsgZ2VuZXJhdGVQYXRjaGVzIH0gZnJvbSAnLi9wYXRjaCc7XG5cbmNvbnN0IHByb3h5SGFuZGxlcjogUHJveHlIYW5kbGVyPFByb3h5RHJhZnQ+ID0ge1xuICBnZXQodGFyZ2V0OiBQcm94eURyYWZ0LCBrZXk6IHN0cmluZyB8IG51bWJlciB8IHN5bWJvbCwgcmVjZWl2ZXI6IGFueSkge1xuICAgIGNvbnN0IGNvcHkgPSB0YXJnZXQuY29weT8uW2tleV07XG4gICAgLy8gSW1wcm92ZSBkcmFmdCByZWFkaW5nIHBlcmZvcm1hbmNlIGJ5IGNhY2hpbmcgdGhlIGRyYWZ0IGNvcHkuXG4gICAgaWYgKGNvcHkgJiYgdGFyZ2V0LmZpbmFsaXRpZXMuZHJhZnRzQ2FjaGUuaGFzKGNvcHkpKSB7XG4gICAgICByZXR1cm4gY29weTtcbiAgICB9XG4gICAgaWYgKGtleSA9PT0gUFJPWFlfRFJBRlQpIHJldHVybiB0YXJnZXQ7XG4gICAgbGV0IG1hcmtSZXN1bHQ6IGFueTtcbiAgICBpZiAodGFyZ2V0Lm9wdGlvbnMubWFyaykge1xuICAgICAgLy8gaGFuZGxlIGBVbmNhdWdodCBUeXBlRXJyb3I6IE1ldGhvZCBnZXQgTWFwLnByb3RvdHlwZS5zaXplIGNhbGxlZCBvbiBpbmNvbXBhdGlibGUgcmVjZWl2ZXIgIzxNYXA+YFxuICAgICAgLy8gb3IgYFVuY2F1Z2h0IFR5cGVFcnJvcjogTWV0aG9kIGdldCBTZXQucHJvdG90eXBlLnNpemUgY2FsbGVkIG9uIGluY29tcGF0aWJsZSByZWNlaXZlciAjPFNldD5gXG4gICAgICBjb25zdCB2YWx1ZSA9XG4gICAgICAgIGtleSA9PT0gJ3NpemUnICYmXG4gICAgICAgICh0YXJnZXQub3JpZ2luYWwgaW5zdGFuY2VvZiBNYXAgfHwgdGFyZ2V0Lm9yaWdpbmFsIGluc3RhbmNlb2YgU2V0KVxuICAgICAgICAgID8gUmVmbGVjdC5nZXQodGFyZ2V0Lm9yaWdpbmFsLCBrZXkpXG4gICAgICAgICAgOiBSZWZsZWN0LmdldCh0YXJnZXQub3JpZ2luYWwsIGtleSwgcmVjZWl2ZXIpO1xuICAgICAgbWFya1Jlc3VsdCA9IHRhcmdldC5vcHRpb25zLm1hcmsodmFsdWUsIGRhdGFUeXBlcyk7XG4gICAgICBpZiAobWFya1Jlc3VsdCA9PT0gZGF0YVR5cGVzLm11dGFibGUpIHtcbiAgICAgICAgaWYgKHRhcmdldC5vcHRpb25zLnN0cmljdCkge1xuICAgICAgICAgIGNoZWNrUmVhZGFibGUodmFsdWUsIHRhcmdldC5vcHRpb25zLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHNvdXJjZSA9IGxhdGVzdCh0YXJnZXQpO1xuXG4gICAgaWYgKHNvdXJjZSBpbnN0YW5jZW9mIE1hcCAmJiBtYXBIYW5kbGVyS2V5cy5pbmNsdWRlcyhrZXkgYXMgYW55KSkge1xuICAgICAgaWYgKGtleSA9PT0gJ3NpemUnKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG1hcEhhbmRsZXIsICdzaXplJykhLmdldCEuY2FsbChcbiAgICAgICAgICB0YXJnZXQucHJveHlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGhhbmRsZSA9IG1hcEhhbmRsZXJba2V5IGFzIGtleW9mIHR5cGVvZiBtYXBIYW5kbGVyXSBhcyBGdW5jdGlvbjtcbiAgICAgIHJldHVybiBoYW5kbGUuYmluZCh0YXJnZXQucHJveHkpO1xuICAgIH1cblxuICAgIGlmIChzb3VyY2UgaW5zdGFuY2VvZiBTZXQgJiYgc2V0SGFuZGxlcktleXMuaW5jbHVkZXMoa2V5IGFzIGFueSkpIHtcbiAgICAgIGlmIChrZXkgPT09ICdzaXplJykge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzZXRIYW5kbGVyLCAnc2l6ZScpIS5nZXQhLmNhbGwoXG4gICAgICAgICAgdGFyZ2V0LnByb3h5XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBjb25zdCBoYW5kbGUgPSBzZXRIYW5kbGVyW2tleSBhcyBrZXlvZiB0eXBlb2Ygc2V0SGFuZGxlcl0gYXMgRnVuY3Rpb247XG4gICAgICByZXR1cm4gaGFuZGxlLmJpbmQodGFyZ2V0LnByb3h5KTtcbiAgICB9XG5cbiAgICBpZiAoIWhhcyhzb3VyY2UsIGtleSkpIHtcbiAgICAgIGNvbnN0IGRlc2MgPSBnZXREZXNjcmlwdG9yKHNvdXJjZSwga2V5KTtcbiAgICAgIHJldHVybiBkZXNjXG4gICAgICAgID8gYHZhbHVlYCBpbiBkZXNjXG4gICAgICAgICAgPyBkZXNjLnZhbHVlXG4gICAgICAgICAgOiAvLyAhY2FzZTogc3VwcG9ydCBmb3IgZ2V0dGVyXG4gICAgICAgICAgICBkZXNjLmdldD8uY2FsbCh0YXJnZXQucHJveHkpXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCB2YWx1ZSA9IHNvdXJjZVtrZXldO1xuICAgIGlmICh0YXJnZXQub3B0aW9ucy5zdHJpY3QpIHtcbiAgICAgIGNoZWNrUmVhZGFibGUodmFsdWUsIHRhcmdldC5vcHRpb25zKTtcbiAgICB9XG4gICAgaWYgKHRhcmdldC5maW5hbGl6ZWQgfHwgIWlzRHJhZnRhYmxlKHZhbHVlLCB0YXJnZXQub3B0aW9ucykpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgLy8gRW5zdXJlIHRoYXQgdGhlIGFzc2lnbmVkIHZhbHVlcyBhcmUgbm90IGRyYWZ0ZWRcbiAgICBpZiAodmFsdWUgPT09IHBlZWsodGFyZ2V0Lm9yaWdpbmFsLCBrZXkpKSB7XG4gICAgICBlbnN1cmVTaGFsbG93Q29weSh0YXJnZXQpO1xuICAgICAgdGFyZ2V0LmNvcHkhW2tleV0gPSBjcmVhdGVEcmFmdCh7XG4gICAgICAgIG9yaWdpbmFsOiB0YXJnZXQub3JpZ2luYWxba2V5XSxcbiAgICAgICAgcGFyZW50RHJhZnQ6IHRhcmdldCxcbiAgICAgICAga2V5OiB0YXJnZXQudHlwZSA9PT0gRHJhZnRUeXBlLkFycmF5ID8gTnVtYmVyKGtleSkgOiBrZXksXG4gICAgICAgIGZpbmFsaXRpZXM6IHRhcmdldC5maW5hbGl0aWVzLFxuICAgICAgICBvcHRpb25zOiB0YXJnZXQub3B0aW9ucyxcbiAgICAgIH0pO1xuICAgICAgLy8gIWNhc2U6IHN1cHBvcnQgZm9yIGN1c3RvbSBzaGFsbG93IGNvcHkgZnVuY3Rpb25cbiAgICAgIGlmICh0eXBlb2YgbWFya1Jlc3VsdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBjb25zdCBzdWJQcm94eURyYWZ0ID0gZ2V0UHJveHlEcmFmdCh0YXJnZXQuY29weSFba2V5XSkhO1xuICAgICAgICBlbnN1cmVTaGFsbG93Q29weShzdWJQcm94eURyYWZ0KTtcbiAgICAgICAgLy8gVHJpZ2dlciBhIGN1c3RvbSBzaGFsbG93IGNvcHkgdG8gdXBkYXRlIHRvIGEgbmV3IGNvcHlcbiAgICAgICAgbWFya0NoYW5nZWQoc3ViUHJveHlEcmFmdCk7XG4gICAgICAgIHJldHVybiBzdWJQcm94eURyYWZ0LmNvcHk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGFyZ2V0LmNvcHkhW2tleV07XG4gICAgfVxuICAgIGlmIChpc0RyYWZ0KHZhbHVlKSkge1xuICAgICAgdGFyZ2V0LmZpbmFsaXRpZXMuZHJhZnRzQ2FjaGUuYWRkKHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9LFxuICBzZXQodGFyZ2V0OiBQcm94eURyYWZ0LCBrZXk6IHN0cmluZyB8IG51bWJlciB8IHN5bWJvbCwgdmFsdWU6IGFueSkge1xuICAgIGlmICh0YXJnZXQudHlwZSA9PT0gRHJhZnRUeXBlLlNldCB8fCB0YXJnZXQudHlwZSA9PT0gRHJhZnRUeXBlLk1hcCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgTWFwL1NldCBkcmFmdCBkb2VzIG5vdCBzdXBwb3J0IGFueSBwcm9wZXJ0eSBhc3NpZ25tZW50LmBcbiAgICAgICk7XG4gICAgfVxuICAgIGxldCBfa2V5OiBudW1iZXI7XG4gICAgaWYgKFxuICAgICAgdGFyZ2V0LnR5cGUgPT09IERyYWZ0VHlwZS5BcnJheSAmJlxuICAgICAga2V5ICE9PSAnbGVuZ3RoJyAmJlxuICAgICAgIShcbiAgICAgICAgTnVtYmVyLmlzSW50ZWdlcigoX2tleSA9IE51bWJlcihrZXkpKSkgJiZcbiAgICAgICAgX2tleSA+PSAwICYmXG4gICAgICAgIChrZXkgPT09IDAgfHwgX2tleSA9PT0gMCB8fCBTdHJpbmcoX2tleSkgPT09IFN0cmluZyhrZXkpKVxuICAgICAgKVxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgT25seSBzdXBwb3J0cyBzZXR0aW5nIGFycmF5IGluZGljZXMgYW5kIHRoZSAnbGVuZ3RoJyBwcm9wZXJ0eS5gXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCBkZXNjID0gZ2V0RGVzY3JpcHRvcihsYXRlc3QodGFyZ2V0KSwga2V5KTtcbiAgICBpZiAoZGVzYz8uc2V0KSB7XG4gICAgICAvLyAhY2FzZTogY292ZXIgdGhlIGNhc2Ugb2Ygc2V0dGVyXG4gICAgICBkZXNjLnNldC5jYWxsKHRhcmdldC5wcm94eSwgdmFsdWUpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNvbnN0IGN1cnJlbnQgPSBwZWVrKGxhdGVzdCh0YXJnZXQpLCBrZXkpO1xuICAgIGNvbnN0IGN1cnJlbnRQcm94eURyYWZ0ID0gZ2V0UHJveHlEcmFmdChjdXJyZW50KTtcbiAgICBpZiAoY3VycmVudFByb3h5RHJhZnQgJiYgaXNFcXVhbChjdXJyZW50UHJveHlEcmFmdC5vcmlnaW5hbCwgdmFsdWUpKSB7XG4gICAgICAvLyAhY2FzZTogaWdub3JlIHRoZSBjYXNlIG9mIGFzc2lnbmluZyB0aGUgb3JpZ2luYWwgZHJhZnRhYmxlIHZhbHVlIHRvIGEgZHJhZnRcbiAgICAgIHRhcmdldC5jb3B5IVtrZXldID0gdmFsdWU7XG4gICAgICB0YXJnZXQuYXNzaWduZWRNYXAgPSB0YXJnZXQuYXNzaWduZWRNYXAgPz8gbmV3IE1hcCgpO1xuICAgICAgdGFyZ2V0LmFzc2lnbmVkTWFwLnNldChrZXksIGZhbHNlKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvLyAhY2FzZTogaGFuZGxlIG5ldyBwcm9wcyB3aXRoIHZhbHVlICd1bmRlZmluZWQnXG4gICAgaWYgKFxuICAgICAgaXNFcXVhbCh2YWx1ZSwgY3VycmVudCkgJiZcbiAgICAgICh2YWx1ZSAhPT0gdW5kZWZpbmVkIHx8IGhhcyh0YXJnZXQub3JpZ2luYWwsIGtleSkpXG4gICAgKVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgZW5zdXJlU2hhbGxvd0NvcHkodGFyZ2V0KTtcbiAgICBtYXJrQ2hhbmdlZCh0YXJnZXQpO1xuICAgIGlmIChoYXModGFyZ2V0Lm9yaWdpbmFsLCBrZXkpICYmIGlzRXF1YWwodmFsdWUsIHRhcmdldC5vcmlnaW5hbFtrZXldKSkge1xuICAgICAgLy8gIWNhc2U6IGhhbmRsZSB0aGUgY2FzZSBvZiBhc3NpZ25pbmcgdGhlIG9yaWdpbmFsIG5vbi1kcmFmdGFibGUgdmFsdWUgdG8gYSBkcmFmdFxuICAgICAgdGFyZ2V0LmFzc2lnbmVkTWFwIS5kZWxldGUoa2V5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGFyZ2V0LmFzc2lnbmVkTWFwIS5zZXQoa2V5LCB0cnVlKTtcbiAgICB9XG4gICAgdGFyZ2V0LmNvcHkhW2tleV0gPSB2YWx1ZTtcbiAgICBtYXJrRmluYWxpemF0aW9uKHRhcmdldCwga2V5LCB2YWx1ZSwgZ2VuZXJhdGVQYXRjaGVzKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSxcbiAgaGFzKHRhcmdldDogUHJveHlEcmFmdCwga2V5OiBzdHJpbmcgfCBzeW1ib2wpIHtcbiAgICByZXR1cm4ga2V5IGluIGxhdGVzdCh0YXJnZXQpO1xuICB9LFxuICBvd25LZXlzKHRhcmdldDogUHJveHlEcmFmdCkge1xuICAgIHJldHVybiBSZWZsZWN0Lm93bktleXMobGF0ZXN0KHRhcmdldCkpO1xuICB9LFxuICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0OiBQcm94eURyYWZ0LCBrZXk6IHN0cmluZyB8IHN5bWJvbCkge1xuICAgIGNvbnN0IHNvdXJjZSA9IGxhdGVzdCh0YXJnZXQpO1xuICAgIGNvbnN0IGRlc2NyaXB0b3IgPSBSZWZsZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSk7XG4gICAgaWYgKCFkZXNjcmlwdG9yKSByZXR1cm4gZGVzY3JpcHRvcjtcbiAgICByZXR1cm4ge1xuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRhcmdldC50eXBlICE9PSBEcmFmdFR5cGUuQXJyYXkgfHwga2V5ICE9PSAnbGVuZ3RoJyxcbiAgICAgIGVudW1lcmFibGU6IGRlc2NyaXB0b3IuZW51bWVyYWJsZSxcbiAgICAgIHZhbHVlOiBzb3VyY2Vba2V5XSxcbiAgICB9O1xuICB9LFxuICBnZXRQcm90b3R5cGVPZih0YXJnZXQ6IFByb3h5RHJhZnQpIHtcbiAgICByZXR1cm4gUmVmbGVjdC5nZXRQcm90b3R5cGVPZih0YXJnZXQub3JpZ2luYWwpO1xuICB9LFxuICBzZXRQcm90b3R5cGVPZigpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBjYWxsICdzZXRQcm90b3R5cGVPZigpJyBvbiBkcmFmdHNgKTtcbiAgfSxcbiAgZGVmaW5lUHJvcGVydHkoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgY2FsbCAnZGVmaW5lUHJvcGVydHkoKScgb24gZHJhZnRzYCk7XG4gIH0sXG4gIGRlbGV0ZVByb3BlcnR5KHRhcmdldDogUHJveHlEcmFmdCwga2V5OiBzdHJpbmcgfCBzeW1ib2wpIHtcbiAgICBpZiAodGFyZ2V0LnR5cGUgPT09IERyYWZ0VHlwZS5BcnJheSkge1xuICAgICAgcmV0dXJuIHByb3h5SGFuZGxlci5zZXQhLmNhbGwodGhpcywgdGFyZ2V0LCBrZXksIHVuZGVmaW5lZCwgdGFyZ2V0LnByb3h5KTtcbiAgICB9XG4gICAgaWYgKHBlZWsodGFyZ2V0Lm9yaWdpbmFsLCBrZXkpICE9PSB1bmRlZmluZWQgfHwga2V5IGluIHRhcmdldC5vcmlnaW5hbCkge1xuICAgICAgLy8gIWNhc2U6IGRlbGV0ZSBhbiBleGlzdGluZyBrZXlcbiAgICAgIGVuc3VyZVNoYWxsb3dDb3B5KHRhcmdldCk7XG4gICAgICBtYXJrQ2hhbmdlZCh0YXJnZXQpO1xuICAgICAgdGFyZ2V0LmFzc2lnbmVkTWFwIS5zZXQoa2V5LCBmYWxzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRhcmdldC5hc3NpZ25lZE1hcCA9IHRhcmdldC5hc3NpZ25lZE1hcCA/PyBuZXcgTWFwKCk7XG4gICAgICAvLyBUaGUgb3JpZ2luYWwgbm9uLWV4aXN0ZW50IGtleSBoYXMgYmVlbiBkZWxldGVkXG4gICAgICB0YXJnZXQuYXNzaWduZWRNYXAuZGVsZXRlKGtleSk7XG4gICAgfVxuICAgIGlmICh0YXJnZXQuY29weSkgZGVsZXRlIHRhcmdldC5jb3B5W2tleV07XG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRHJhZnQ8VCBleHRlbmRzIG9iamVjdD4oY3JlYXRlRHJhZnRPcHRpb25zOiB7XG4gIG9yaWdpbmFsOiBUO1xuICBwYXJlbnREcmFmdD86IFByb3h5RHJhZnQgfCBudWxsO1xuICBrZXk/OiBzdHJpbmcgfCBudW1iZXIgfCBzeW1ib2w7XG4gIGZpbmFsaXRpZXM6IEZpbmFsaXRpZXM7XG4gIG9wdGlvbnM6IE9wdGlvbnM8YW55LCBhbnk+O1xufSk6IFQge1xuICBjb25zdCB7IG9yaWdpbmFsLCBwYXJlbnREcmFmdCwga2V5LCBmaW5hbGl0aWVzLCBvcHRpb25zIH0gPVxuICAgIGNyZWF0ZURyYWZ0T3B0aW9ucztcbiAgY29uc3QgdHlwZSA9IGdldFR5cGUob3JpZ2luYWwpO1xuICBjb25zdCBwcm94eURyYWZ0OiBQcm94eURyYWZ0ID0ge1xuICAgIHR5cGUsXG4gICAgZmluYWxpemVkOiBmYWxzZSxcbiAgICBwYXJlbnQ6IHBhcmVudERyYWZ0LFxuICAgIG9yaWdpbmFsLFxuICAgIGNvcHk6IG51bGwsXG4gICAgcHJveHk6IG51bGwsXG4gICAgZmluYWxpdGllcyxcbiAgICBvcHRpb25zLFxuICAgIC8vIE1hcHBpbmcgb2YgZHJhZnQgU2V0IGl0ZW1zIHRvIHRoZWlyIGNvcnJlc3BvbmRpbmcgZHJhZnQgdmFsdWVzLlxuICAgIHNldE1hcDpcbiAgICAgIHR5cGUgPT09IERyYWZ0VHlwZS5TZXRcbiAgICAgICAgPyBuZXcgTWFwKChvcmlnaW5hbCBhcyBTZXQ8YW55PikuZW50cmllcygpKVxuICAgICAgICA6IHVuZGVmaW5lZCxcbiAgfTtcbiAgLy8gIWNhc2U6IHVuZGVmaW5lZCBhcyBhIGRyYWZ0IG1hcCBrZXlcbiAgaWYgKGtleSB8fCAna2V5JyBpbiBjcmVhdGVEcmFmdE9wdGlvbnMpIHtcbiAgICBwcm94eURyYWZ0LmtleSA9IGtleTtcbiAgfVxuICBjb25zdCB7IHByb3h5LCByZXZva2UgfSA9IFByb3h5LnJldm9jYWJsZTxhbnk+KFxuICAgIHR5cGUgPT09IERyYWZ0VHlwZS5BcnJheSA/IE9iamVjdC5hc3NpZ24oW10sIHByb3h5RHJhZnQpIDogcHJveHlEcmFmdCxcbiAgICBwcm94eUhhbmRsZXJcbiAgKTtcbiAgZmluYWxpdGllcy5yZXZva2UucHVzaChyZXZva2UpO1xuICBwcm94eURyYWZ0LnByb3h5ID0gcHJveHk7XG4gIGlmIChwYXJlbnREcmFmdCkge1xuICAgIGNvbnN0IHRhcmdldCA9IHBhcmVudERyYWZ0O1xuICAgIHRhcmdldC5maW5hbGl0aWVzLmRyYWZ0LnB1c2goKHBhdGNoZXMsIGludmVyc2VQYXRjaGVzKSA9PiB7XG4gICAgICBjb25zdCBvbGRQcm94eURyYWZ0ID0gZ2V0UHJveHlEcmFmdChwcm94eSkhO1xuICAgICAgLy8gaWYgdGFyZ2V0IGlzIGEgU2V0IGRyYWZ0LCBgc2V0TWFwYCBpcyB0aGUgcmVhbCBTZXQgY29waWVzIHByb3h5IG1hcHBpbmcuXG4gICAgICBsZXQgY29weSA9IHRhcmdldC50eXBlID09PSBEcmFmdFR5cGUuU2V0ID8gdGFyZ2V0LnNldE1hcCA6IHRhcmdldC5jb3B5O1xuICAgICAgY29uc3QgZHJhZnQgPSBnZXQoY29weSwga2V5ISk7XG4gICAgICBjb25zdCBwcm94eURyYWZ0ID0gZ2V0UHJveHlEcmFmdChkcmFmdCk7XG4gICAgICBpZiAocHJveHlEcmFmdCkge1xuICAgICAgICAvLyBhc3NpZ24gdGhlIHVwZGF0ZWQgdmFsdWUgdG8gdGhlIGNvcHkgb2JqZWN0XG4gICAgICAgIGxldCB1cGRhdGVkVmFsdWUgPSBwcm94eURyYWZ0Lm9yaWdpbmFsO1xuICAgICAgICBpZiAocHJveHlEcmFmdC5vcGVyYXRlZCkge1xuICAgICAgICAgIHVwZGF0ZWRWYWx1ZSA9IGdldFZhbHVlKGRyYWZ0KTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGl6ZVNldFZhbHVlKHByb3h5RHJhZnQpO1xuICAgICAgICBmaW5hbGl6ZVBhdGNoZXMocHJveHlEcmFmdCwgZ2VuZXJhdGVQYXRjaGVzLCBwYXRjaGVzLCBpbnZlcnNlUGF0Y2hlcyk7XG4gICAgICAgIGlmIChfX0RFVl9fICYmIHRhcmdldC5vcHRpb25zLmVuYWJsZUF1dG9GcmVlemUpIHtcbiAgICAgICAgICB0YXJnZXQub3B0aW9ucy51cGRhdGVkVmFsdWVzID1cbiAgICAgICAgICAgIHRhcmdldC5vcHRpb25zLnVwZGF0ZWRWYWx1ZXMgPz8gbmV3IFdlYWtNYXAoKTtcbiAgICAgICAgICB0YXJnZXQub3B0aW9ucy51cGRhdGVkVmFsdWVzLnNldCh1cGRhdGVkVmFsdWUsIHByb3h5RHJhZnQub3JpZ2luYWwpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGZpbmFsIHVwZGF0ZSB2YWx1ZVxuICAgICAgICBzZXQoY29weSwga2V5ISwgdXBkYXRlZFZhbHVlKTtcbiAgICAgIH1cbiAgICAgIC8vICFjYXNlOiBoYW5kbGUgdGhlIGRlbGV0ZWQga2V5XG4gICAgICBvbGRQcm94eURyYWZ0LmNhbGxiYWNrcz8uZm9yRWFjaCgoY2FsbGJhY2spID0+IHtcbiAgICAgICAgY2FsbGJhY2socGF0Y2hlcywgaW52ZXJzZVBhdGNoZXMpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gIWNhc2U6IGhhbmRsZSB0aGUgcm9vdCBkcmFmdFxuICAgIGNvbnN0IHRhcmdldCA9IGdldFByb3h5RHJhZnQocHJveHkpITtcbiAgICB0YXJnZXQuZmluYWxpdGllcy5kcmFmdC5wdXNoKChwYXRjaGVzLCBpbnZlcnNlUGF0Y2hlcykgPT4ge1xuICAgICAgZmluYWxpemVTZXRWYWx1ZSh0YXJnZXQpO1xuICAgICAgZmluYWxpemVQYXRjaGVzKHRhcmdldCwgZ2VuZXJhdGVQYXRjaGVzLCBwYXRjaGVzLCBpbnZlcnNlUGF0Y2hlcyk7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHByb3h5O1xufVxuXG5pbnRlcm5hbC5jcmVhdGVEcmFmdCA9IGNyZWF0ZURyYWZ0O1xuXG5leHBvcnQgZnVuY3Rpb24gZmluYWxpemVEcmFmdDxUPihcbiAgcmVzdWx0OiBULFxuICByZXR1cm5lZFZhbHVlOiBbVF0gfCBbXSxcbiAgcGF0Y2hlcz86IFBhdGNoZXMsXG4gIGludmVyc2VQYXRjaGVzPzogUGF0Y2hlcyxcbiAgZW5hYmxlQXV0b0ZyZWV6ZT86IGJvb2xlYW5cbikge1xuICBjb25zdCBwcm94eURyYWZ0ID0gZ2V0UHJveHlEcmFmdChyZXN1bHQpO1xuICBjb25zdCBvcmlnaW5hbCA9IHByb3h5RHJhZnQ/Lm9yaWdpbmFsID8/IHJlc3VsdDtcbiAgY29uc3QgaGFzUmV0dXJuZWRWYWx1ZSA9ICEhcmV0dXJuZWRWYWx1ZS5sZW5ndGg7XG4gIGlmIChwcm94eURyYWZ0Py5vcGVyYXRlZCkge1xuICAgIHdoaWxlIChwcm94eURyYWZ0LmZpbmFsaXRpZXMuZHJhZnQubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgZmluYWxpemUgPSBwcm94eURyYWZ0LmZpbmFsaXRpZXMuZHJhZnQucG9wKCkhO1xuICAgICAgZmluYWxpemUocGF0Y2hlcywgaW52ZXJzZVBhdGNoZXMpO1xuICAgIH1cbiAgfVxuICBjb25zdCBzdGF0ZSA9IGhhc1JldHVybmVkVmFsdWVcbiAgICA/IHJldHVybmVkVmFsdWVbMF1cbiAgICA6IHByb3h5RHJhZnRcbiAgICAgID8gcHJveHlEcmFmdC5vcGVyYXRlZFxuICAgICAgICA/IHByb3h5RHJhZnQuY29weVxuICAgICAgICA6IHByb3h5RHJhZnQub3JpZ2luYWxcbiAgICAgIDogcmVzdWx0O1xuICBpZiAocHJveHlEcmFmdCkgcmV2b2tlUHJveHkocHJveHlEcmFmdCk7XG4gIGlmIChlbmFibGVBdXRvRnJlZXplKSB7XG4gICAgZGVlcEZyZWV6ZShzdGF0ZSwgc3RhdGUsIHByb3h5RHJhZnQ/Lm9wdGlvbnMudXBkYXRlZFZhbHVlcyk7XG4gIH1cbiAgcmV0dXJuIFtcbiAgICBzdGF0ZSxcbiAgICBwYXRjaGVzICYmIGhhc1JldHVybmVkVmFsdWVcbiAgICAgID8gW3sgb3A6IE9wZXJhdGlvbi5SZXBsYWNlLCBwYXRoOiBbXSwgdmFsdWU6IHJldHVybmVkVmFsdWVbMF0gfV1cbiAgICAgIDogcGF0Y2hlcyxcbiAgICBpbnZlcnNlUGF0Y2hlcyAmJiBoYXNSZXR1cm5lZFZhbHVlXG4gICAgICA/IFt7IG9wOiBPcGVyYXRpb24uUmVwbGFjZSwgcGF0aDogW10sIHZhbHVlOiBvcmlnaW5hbCB9XVxuICAgICAgOiBpbnZlcnNlUGF0Y2hlcyxcbiAgXSBhcyBbVCwgUGF0Y2hlcyB8IHVuZGVmaW5lZCwgUGF0Y2hlcyB8IHVuZGVmaW5lZF07XG59XG4iLCAiaW1wb3J0IHtcbiAgRmluYWxpdGllcyxcbiAgT3B0aW9ucyxcbiAgUGF0Y2hlcyxcbiAgUGF0Y2hlc09wdGlvbnMsXG4gIFJlc3VsdCxcbn0gZnJvbSAnLi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgY3JlYXRlRHJhZnQsIGZpbmFsaXplRHJhZnQgfSBmcm9tICcuL2RyYWZ0JztcbmltcG9ydCB7IGlzRHJhZnRhYmxlIH0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgeyBkYXRhVHlwZXMgfSBmcm9tICcuL2NvbnN0YW50JztcblxuZXhwb3J0IGZ1bmN0aW9uIGRyYWZ0aWZ5PFxuICBUIGV4dGVuZHMgb2JqZWN0LFxuICBPIGV4dGVuZHMgUGF0Y2hlc09wdGlvbnMgPSBmYWxzZSxcbiAgRiBleHRlbmRzIGJvb2xlYW4gPSBmYWxzZSxcbj4oXG4gIGJhc2VTdGF0ZTogVCxcbiAgb3B0aW9uczogT3B0aW9uczxPLCBGPlxuKTogW1QsIChyZXR1cm5lZFZhbHVlOiBbVF0gfCBbXSkgPT4gUmVzdWx0PFQsIE8sIEY+XSB7XG4gIGNvbnN0IGZpbmFsaXRpZXM6IEZpbmFsaXRpZXMgPSB7XG4gICAgZHJhZnQ6IFtdLFxuICAgIHJldm9rZTogW10sXG4gICAgaGFuZGxlZFNldDogbmV3IFdlYWtTZXQ8YW55PigpLFxuICAgIGRyYWZ0c0NhY2hlOiBuZXcgV2Vha1NldDxvYmplY3Q+KCksXG4gIH07XG4gIGxldCBwYXRjaGVzOiBQYXRjaGVzIHwgdW5kZWZpbmVkO1xuICBsZXQgaW52ZXJzZVBhdGNoZXM6IFBhdGNoZXMgfCB1bmRlZmluZWQ7XG4gIGlmIChvcHRpb25zLmVuYWJsZVBhdGNoZXMpIHtcbiAgICBwYXRjaGVzID0gW107XG4gICAgaW52ZXJzZVBhdGNoZXMgPSBbXTtcbiAgfVxuICBjb25zdCBpc011dGFibGUgPVxuICAgIG9wdGlvbnMubWFyaz8uKGJhc2VTdGF0ZSwgZGF0YVR5cGVzKSA9PT0gZGF0YVR5cGVzLm11dGFibGUgfHxcbiAgICAhaXNEcmFmdGFibGUoYmFzZVN0YXRlLCBvcHRpb25zKTtcbiAgY29uc3QgZHJhZnQgPSBpc011dGFibGVcbiAgICA/IGJhc2VTdGF0ZVxuICAgIDogY3JlYXRlRHJhZnQoe1xuICAgICAgICBvcmlnaW5hbDogYmFzZVN0YXRlLFxuICAgICAgICBwYXJlbnREcmFmdDogbnVsbCxcbiAgICAgICAgZmluYWxpdGllcyxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgIH0pO1xuICByZXR1cm4gW1xuICAgIGRyYWZ0LFxuICAgIChyZXR1cm5lZFZhbHVlOiBbVF0gfCBbXSA9IFtdKSA9PiB7XG4gICAgICBjb25zdCBbZmluYWxpemVkU3RhdGUsIGZpbmFsaXplZFBhdGNoZXMsIGZpbmFsaXplZEludmVyc2VQYXRjaGVzXSA9XG4gICAgICAgIGZpbmFsaXplRHJhZnQoXG4gICAgICAgICAgZHJhZnQsXG4gICAgICAgICAgcmV0dXJuZWRWYWx1ZSxcbiAgICAgICAgICBwYXRjaGVzLFxuICAgICAgICAgIGludmVyc2VQYXRjaGVzLFxuICAgICAgICAgIG9wdGlvbnMuZW5hYmxlQXV0b0ZyZWV6ZVxuICAgICAgICApO1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgb3B0aW9ucy5lbmFibGVQYXRjaGVzXG4gICAgICAgICAgPyBbZmluYWxpemVkU3RhdGUsIGZpbmFsaXplZFBhdGNoZXMsIGZpbmFsaXplZEludmVyc2VQYXRjaGVzXVxuICAgICAgICAgIDogZmluYWxpemVkU3RhdGVcbiAgICAgICkgYXMgUmVzdWx0PFQsIE8sIEY+O1xuICAgIH0sXG4gIF07XG59XG4iLCAiaW1wb3J0IHsgdHlwZSBEcmFmdCwgRHJhZnRUeXBlLCB0eXBlIFByb3h5RHJhZnQgfSBmcm9tICcuL2ludGVyZmFjZSc7XG5pbXBvcnQge1xuICBmb3JFYWNoLFxuICBnZXQsXG4gIGdldFByb3h5RHJhZnQsXG4gIGdldFR5cGUsXG4gIGlzQmFzZU1hcEluc3RhbmNlLFxuICBpc0Jhc2VTZXRJbnN0YW5jZSxcbiAgaXNEcmFmdCxcbiAgaXNEcmFmdGFibGUsXG4gIGlzRXF1YWwsXG4gIHNldCxcbiAgc2hhbGxvd0NvcHksXG59IGZyb20gJy4vdXRpbHMnO1xuXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlUmV0dXJuVmFsdWU8VCBleHRlbmRzIG9iamVjdD4ob3B0aW9uczoge1xuICByb290RHJhZnQ6IFByb3h5RHJhZnQ8YW55PiB8IHVuZGVmaW5lZDtcbiAgdmFsdWU6IFQ7XG4gIHVzZVJhd1JldHVybj86IGJvb2xlYW47XG4gIGlzQ29udGFpbkRyYWZ0PzogYm9vbGVhbjtcbiAgaXNSb290PzogYm9vbGVhbjtcbn0pIHtcbiAgY29uc3QgeyByb290RHJhZnQsIHZhbHVlLCB1c2VSYXdSZXR1cm4gPSBmYWxzZSwgaXNSb290ID0gdHJ1ZSB9ID0gb3B0aW9ucztcbiAgZm9yRWFjaCh2YWx1ZSwgKGtleSwgaXRlbSwgc291cmNlKSA9PiB7XG4gICAgY29uc3QgcHJveHlEcmFmdCA9IGdldFByb3h5RHJhZnQoaXRlbSk7XG4gICAgLy8ganVzdCBoYW5kbGUgdGhlIGRyYWZ0IHdoaWNoIGlzIGNyZWF0ZWQgYnkgdGhlIHNhbWUgcm9vdERyYWZ0XG4gICAgaWYgKFxuICAgICAgcHJveHlEcmFmdCAmJlxuICAgICAgcm9vdERyYWZ0ICYmXG4gICAgICBwcm94eURyYWZ0LmZpbmFsaXRpZXMgPT09IHJvb3REcmFmdC5maW5hbGl0aWVzXG4gICAgKSB7XG4gICAgICBvcHRpb25zLmlzQ29udGFpbkRyYWZ0ID0gdHJ1ZTtcbiAgICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IHByb3h5RHJhZnQub3JpZ2luYWw7XG4gICAgICAvLyBmaW5hbCB1cGRhdGUgdmFsdWUsIGJ1dCBqdXN0IGhhbmRsZSByZXR1cm4gdmFsdWVcbiAgICAgIGlmIChzb3VyY2UgaW5zdGFuY2VvZiBTZXQpIHtcbiAgICAgICAgY29uc3QgYXJyID0gQXJyYXkuZnJvbShzb3VyY2UpO1xuICAgICAgICBzb3VyY2UuY2xlYXIoKTtcbiAgICAgICAgYXJyLmZvckVhY2goKF9pdGVtKSA9PlxuICAgICAgICAgIHNvdXJjZS5hZGQoa2V5ID09PSBfaXRlbSA/IGN1cnJlbnRWYWx1ZSA6IF9pdGVtKVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0KHNvdXJjZSwga2V5LCBjdXJyZW50VmFsdWUpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnICYmIGl0ZW0gIT09IG51bGwpIHtcbiAgICAgIG9wdGlvbnMudmFsdWUgPSBpdGVtO1xuICAgICAgb3B0aW9ucy5pc1Jvb3QgPSBmYWxzZTtcbiAgICAgIGhhbmRsZVJldHVyblZhbHVlKG9wdGlvbnMpO1xuICAgIH1cbiAgfSk7XG4gIGlmIChfX0RFVl9fICYmIGlzUm9vdCkge1xuICAgIGlmICghb3B0aW9ucy5pc0NvbnRhaW5EcmFmdClcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgYFRoZSByZXR1cm4gdmFsdWUgZG9lcyBub3QgY29udGFpbiBhbnkgZHJhZnQsIHBsZWFzZSB1c2UgJ3Jhd1JldHVybigpJyB0byB3cmFwIHRoZSByZXR1cm4gdmFsdWUgdG8gaW1wcm92ZSBwZXJmb3JtYW5jZS5gXG4gICAgICApO1xuXG4gICAgaWYgKHVzZVJhd1JldHVybikge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBgVGhlIHJldHVybiB2YWx1ZSBjb250YWlucyBkcmFmdHMsIHBsZWFzZSBkb24ndCB1c2UgJ3Jhd1JldHVybigpJyB0byB3cmFwIHRoZSByZXR1cm4gdmFsdWUuYFxuICAgICAgKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0Q3VycmVudCh0YXJnZXQ6IGFueSkge1xuICBjb25zdCBwcm94eURyYWZ0ID0gZ2V0UHJveHlEcmFmdCh0YXJnZXQpO1xuICBpZiAoIWlzRHJhZnRhYmxlKHRhcmdldCwgcHJveHlEcmFmdD8ub3B0aW9ucykpIHJldHVybiB0YXJnZXQ7XG4gIGNvbnN0IHR5cGUgPSBnZXRUeXBlKHRhcmdldCk7XG4gIGlmIChwcm94eURyYWZ0ICYmICFwcm94eURyYWZ0Lm9wZXJhdGVkKSByZXR1cm4gcHJveHlEcmFmdC5vcmlnaW5hbDtcbiAgbGV0IGN1cnJlbnRWYWx1ZTogYW55O1xuICBmdW5jdGlvbiBlbnN1cmVTaGFsbG93Q29weSgpIHtcbiAgICBjdXJyZW50VmFsdWUgPVxuICAgICAgdHlwZSA9PT0gRHJhZnRUeXBlLk1hcFxuICAgICAgICA/ICFpc0Jhc2VNYXBJbnN0YW5jZSh0YXJnZXQpXG4gICAgICAgICAgPyBuZXcgKE9iamVjdC5nZXRQcm90b3R5cGVPZih0YXJnZXQpLmNvbnN0cnVjdG9yKSh0YXJnZXQpXG4gICAgICAgICAgOiBuZXcgTWFwKHRhcmdldClcbiAgICAgICAgOiB0eXBlID09PSBEcmFmdFR5cGUuU2V0XG4gICAgICAgICAgPyBBcnJheS5mcm9tKHByb3h5RHJhZnQhLnNldE1hcCEudmFsdWVzKCkhKVxuICAgICAgICAgIDogc2hhbGxvd0NvcHkodGFyZ2V0LCBwcm94eURyYWZ0Py5vcHRpb25zKTtcbiAgfVxuXG4gIGlmIChwcm94eURyYWZ0KSB7XG4gICAgLy8gSXQncyBhIHByb3h5IGRyYWZ0LCBsZXQncyBjcmVhdGUgYSBzaGFsbG93IGNvcHkgZWFnZXJseVxuICAgIHByb3h5RHJhZnQuZmluYWxpemVkID0gdHJ1ZTtcbiAgICB0cnkge1xuICAgICAgZW5zdXJlU2hhbGxvd0NvcHkoKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgcHJveHlEcmFmdC5maW5hbGl6ZWQgPSBmYWxzZTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gSXQncyBub3QgYSBwcm94eSBkcmFmdCwgbGV0J3MgdXNlIHRoZSB0YXJnZXQgZGlyZWN0bHkgYW5kIGxldCdzIHNlZVxuICAgIC8vIGxhemlseSBpZiB3ZSBuZWVkIHRvIGNyZWF0ZSBhIHNoYWxsb3cgY29weVxuICAgIGN1cnJlbnRWYWx1ZSA9IHRhcmdldDtcbiAgfVxuXG4gIGZvckVhY2goY3VycmVudFZhbHVlLCAoa2V5LCB2YWx1ZSkgPT4ge1xuICAgIGlmIChwcm94eURyYWZ0ICYmIGlzRXF1YWwoZ2V0KHByb3h5RHJhZnQub3JpZ2luYWwsIGtleSksIHZhbHVlKSkgcmV0dXJuO1xuICAgIGNvbnN0IG5ld1ZhbHVlID0gZ2V0Q3VycmVudCh2YWx1ZSk7XG4gICAgaWYgKG5ld1ZhbHVlICE9PSB2YWx1ZSkge1xuICAgICAgaWYgKGN1cnJlbnRWYWx1ZSA9PT0gdGFyZ2V0KSBlbnN1cmVTaGFsbG93Q29weSgpO1xuICAgICAgc2V0KGN1cnJlbnRWYWx1ZSwga2V5LCBuZXdWYWx1ZSk7XG4gICAgfVxuICB9KTtcbiAgaWYgKHR5cGUgPT09IERyYWZ0VHlwZS5TZXQpIHtcbiAgICBjb25zdCB2YWx1ZSA9IHByb3h5RHJhZnQ/Lm9yaWdpbmFsID8/IGN1cnJlbnRWYWx1ZTtcbiAgICByZXR1cm4gIWlzQmFzZVNldEluc3RhbmNlKHZhbHVlKVxuICAgICAgPyBuZXcgKE9iamVjdC5nZXRQcm90b3R5cGVPZih2YWx1ZSkuY29uc3RydWN0b3IpKGN1cnJlbnRWYWx1ZSlcbiAgICAgIDogbmV3IFNldChjdXJyZW50VmFsdWUpO1xuICB9XG4gIHJldHVybiBjdXJyZW50VmFsdWU7XG59XG5cbi8qKlxuICogYGN1cnJlbnQoZHJhZnQpYCB0byBnZXQgY3VycmVudCBzdGF0ZSBpbiB0aGUgZHJhZnQgbXV0YXRpb24gZnVuY3Rpb24uXG4gKlxuICogIyMgRXhhbXBsZVxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBjcmVhdGUsIGN1cnJlbnQgfSBmcm9tICcuLi9pbmRleCc7XG4gKlxuICogY29uc3QgYmFzZVN0YXRlID0geyBmb286IHsgYmFyOiAnc3RyJyB9LCBhcnI6IFtdIH07XG4gKiBjb25zdCBzdGF0ZSA9IGNyZWF0ZShcbiAqICAgYmFzZVN0YXRlLFxuICogICAoZHJhZnQpID0+IHtcbiAqICAgICBkcmFmdC5mb28uYmFyID0gJ3N0cjInO1xuICogICAgIGV4cGVjdChjdXJyZW50KGRyYWZ0LmZvbykpLnRvRXF1YWwoeyBiYXI6ICdzdHIyJyB9KTtcbiAqICAgfSxcbiAqICk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGN1cnJlbnQ8VCBleHRlbmRzIG9iamVjdD4odGFyZ2V0OiBEcmFmdDxUPik6IFQ7XG4vKiogQGRlcHJlY2F0ZWQgWW91IHNob3VsZCBjYWxsIGN1cnJlbnQgb25seSBvbiBgRHJhZnQ8VD5gIHR5cGVzLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGN1cnJlbnQ8VCBleHRlbmRzIG9iamVjdD4odGFyZ2V0OiBUKTogVDtcbmV4cG9ydCBmdW5jdGlvbiBjdXJyZW50PFQgZXh0ZW5kcyBvYmplY3Q+KHRhcmdldDogVCB8IERyYWZ0PFQ+KTogVCB7XG4gIGlmICghaXNEcmFmdCh0YXJnZXQpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBjdXJyZW50KCkgaXMgb25seSB1c2VkIGZvciBEcmFmdCwgcGFyYW1ldGVyOiAke3RhcmdldH1gKTtcbiAgfVxuICByZXR1cm4gZ2V0Q3VycmVudCh0YXJnZXQpO1xufVxuIiwgImltcG9ydCB7XG4gIENyZWF0ZVJlc3VsdCxcbiAgRHJhZnQsXG4gIE1hcmssXG4gIE9wdGlvbnMsXG4gIEV4dGVybmFsT3B0aW9ucyxcbiAgUGF0Y2hlc09wdGlvbnMsXG4gIFJlc3VsdCxcbn0gZnJvbSAnLi9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgZHJhZnRpZnkgfSBmcm9tICcuL2RyYWZ0aWZ5JztcbmltcG9ydCB7XG4gIGdldFByb3h5RHJhZnQsXG4gIGlzRHJhZnQsXG4gIGlzRHJhZnRhYmxlLFxuICBpc0VxdWFsLFxuICByZXZva2VQcm94eSxcbn0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgeyBjdXJyZW50LCBoYW5kbGVSZXR1cm5WYWx1ZSB9IGZyb20gJy4vY3VycmVudCc7XG5pbXBvcnQgeyBSQVdfUkVUVVJOX1NZTUJPTCwgZGF0YVR5cGVzIH0gZnJvbSAnLi9jb25zdGFudCc7XG5cbnR5cGUgTWFrZUNyZWF0b3IgPSA8XG4gIF9GIGV4dGVuZHMgYm9vbGVhbiA9IGZhbHNlLFxuICBfTyBleHRlbmRzIFBhdGNoZXNPcHRpb25zID0gZmFsc2UsXG4+KFxuICBvcHRpb25zPzogRXh0ZXJuYWxPcHRpb25zPF9PLCBfRj5cbikgPT4ge1xuICA8XG4gICAgVCBleHRlbmRzIGFueSxcbiAgICBGIGV4dGVuZHMgYm9vbGVhbiA9IF9GLFxuICAgIE8gZXh0ZW5kcyBQYXRjaGVzT3B0aW9ucyA9IF9PLFxuICAgIFIgZXh0ZW5kcyB2b2lkIHwgUHJvbWlzZTx2b2lkPiB8IFQgfCBQcm9taXNlPFQ+ID0gdm9pZCxcbiAgPihcbiAgICBiYXNlOiBULFxuICAgIG11dGF0ZTogKGRyYWZ0OiBEcmFmdDxUPikgPT4gUixcbiAgICBvcHRpb25zPzogRXh0ZXJuYWxPcHRpb25zPE8sIEY+XG4gICk6IENyZWF0ZVJlc3VsdDxULCBPLCBGLCBSPjtcbiAgPFxuICAgIFQgZXh0ZW5kcyBhbnksXG4gICAgRiBleHRlbmRzIGJvb2xlYW4gPSBfRixcbiAgICBPIGV4dGVuZHMgUGF0Y2hlc09wdGlvbnMgPSBfTyxcbiAgICBSIGV4dGVuZHMgdm9pZCB8IFByb21pc2U8dm9pZD4gPSB2b2lkLFxuICA+KFxuICAgIGJhc2U6IFQsXG4gICAgbXV0YXRlOiAoZHJhZnQ6IFQpID0+IFIsXG4gICAgb3B0aW9ucz86IEV4dGVybmFsT3B0aW9uczxPLCBGPlxuICApOiBDcmVhdGVSZXN1bHQ8VCwgTywgRiwgUj47XG4gIDxcbiAgICBUIGV4dGVuZHMgYW55LFxuICAgIFAgZXh0ZW5kcyBhbnlbXSA9IFtdLFxuICAgIEYgZXh0ZW5kcyBib29sZWFuID0gX0YsXG4gICAgTyBleHRlbmRzIFBhdGNoZXNPcHRpb25zID0gX08sXG4gICAgUiBleHRlbmRzIHZvaWQgfCBQcm9taXNlPHZvaWQ+ID0gdm9pZCxcbiAgPihcbiAgICBtdXRhdGU6IChkcmFmdDogRHJhZnQ8VD4sIC4uLmFyZ3M6IFApID0+IFIsXG4gICAgb3B0aW9ucz86IEV4dGVybmFsT3B0aW9uczxPLCBGPlxuICApOiAoYmFzZTogVCwgLi4uYXJnczogUCkgPT4gQ3JlYXRlUmVzdWx0PFQsIE8sIEYsIFI+O1xuICA8VCBleHRlbmRzIGFueSwgTyBleHRlbmRzIFBhdGNoZXNPcHRpb25zID0gX08sIEYgZXh0ZW5kcyBib29sZWFuID0gX0Y+KFxuICAgIGJhc2U6IFQsXG4gICAgb3B0aW9ucz86IEV4dGVybmFsT3B0aW9uczxPLCBGPlxuICApOiBbRHJhZnQ8VD4sICgpID0+IFJlc3VsdDxULCBPLCBGPl07XG59O1xuXG4vKipcbiAqIGBtYWtlQ3JlYXRvcihvcHRpb25zKWAgdG8gbWFrZSBhIGNyZWF0b3IgZnVuY3Rpb24uXG4gKlxuICogIyMgRXhhbXBsZVxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBtYWtlQ3JlYXRvciB9IGZyb20gJy4uL2luZGV4JztcbiAqXG4gKiBjb25zdCBiYXNlU3RhdGUgPSB7IGZvbzogeyBiYXI6ICdzdHInIH0sIGFycjogW10gfTtcbiAqIGNvbnN0IGNyZWF0ZSA9IG1ha2VDcmVhdG9yKHsgZW5hYmxlQXV0b0ZyZWV6ZTogdHJ1ZSB9KTtcbiAqIGNvbnN0IHN0YXRlID0gY3JlYXRlKFxuICogICBiYXNlU3RhdGUsXG4gKiAgIChkcmFmdCkgPT4ge1xuICogICAgIGRyYWZ0LmZvby5iYXIgPSAnc3RyMic7XG4gKiAgIH0sXG4gKiApO1xuICpcbiAqIGV4cGVjdChzdGF0ZSkudG9FcXVhbCh7IGZvbzogeyBiYXI6ICdzdHIyJyB9LCBhcnI6IFtdIH0pO1xuICogZXhwZWN0KHN0YXRlKS5ub3QudG9CZShiYXNlU3RhdGUpO1xuICogZXhwZWN0KHN0YXRlLmZvbykubm90LnRvQmUoYmFzZVN0YXRlLmZvbyk7XG4gKiBleHBlY3Qoc3RhdGUuYXJyKS50b0JlKGJhc2VTdGF0ZS5hcnIpO1xuICogZXhwZWN0KE9iamVjdC5pc0Zyb3plbihzdGF0ZSkpLnRvQmVUcnV0aHkoKTtcbiAqIGBgYFxuICovXG5leHBvcnQgY29uc3QgbWFrZUNyZWF0b3I6IE1ha2VDcmVhdG9yID0gKGFyZykgPT4ge1xuICBpZiAoXG4gICAgX19ERVZfXyAmJlxuICAgIGFyZyAhPT0gdW5kZWZpbmVkICYmXG4gICAgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyZykgIT09ICdbb2JqZWN0IE9iamVjdF0nXG4gICkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBJbnZhbGlkIG9wdGlvbnM6ICR7U3RyaW5nKGFyZyl9LCAnb3B0aW9ucycgc2hvdWxkIGJlIGFuIG9iamVjdC5gXG4gICAgKTtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24gY3JlYXRlKGFyZzA6IGFueSwgYXJnMTogYW55LCBhcmcyPzogYW55KTogYW55IHtcbiAgICBpZiAodHlwZW9mIGFyZzAgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGFyZzEgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAodGhpczogYW55LCBiYXNlOiBhbnksIC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGUoXG4gICAgICAgICAgYmFzZSxcbiAgICAgICAgICAoZHJhZnQ6IGFueSkgPT4gYXJnMC5jYWxsKHRoaXMsIGRyYWZ0LCAuLi5hcmdzKSxcbiAgICAgICAgICBhcmcxXG4gICAgICAgICk7XG4gICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBiYXNlID0gYXJnMDtcbiAgICBjb25zdCBtdXRhdGUgPSBhcmcxIGFzICguLi5hcmdzOiBhbnlbXSkgPT4gYW55O1xuICAgIGxldCBvcHRpb25zID0gYXJnMjtcbiAgICBpZiAodHlwZW9mIGFyZzEgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIG9wdGlvbnMgPSBhcmcxO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICBfX0RFVl9fICYmXG4gICAgICBvcHRpb25zICE9PSB1bmRlZmluZWQgJiZcbiAgICAgIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvcHRpb25zKSAhPT0gJ1tvYmplY3QgT2JqZWN0XSdcbiAgICApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYEludmFsaWQgb3B0aW9uczogJHtvcHRpb25zfSwgJ29wdGlvbnMnIHNob3VsZCBiZSBhbiBvYmplY3QuYFxuICAgICAgKTtcbiAgICB9XG4gICAgb3B0aW9ucyA9IHtcbiAgICAgIC4uLmFyZyxcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgfTtcbiAgICBjb25zdCBzdGF0ZSA9IGlzRHJhZnQoYmFzZSkgPyBjdXJyZW50KGJhc2UpIDogYmFzZTtcbiAgICBjb25zdCBtYXJrID0gQXJyYXkuaXNBcnJheShvcHRpb25zLm1hcmspXG4gICAgICA/ICgoKHZhbHVlOiB1bmtub3duLCB0eXBlczogdHlwZW9mIGRhdGFUeXBlcykgPT4ge1xuICAgICAgICAgIGZvciAoY29uc3QgbWFyayBvZiBvcHRpb25zLm1hcmsgYXMgTWFyazxhbnksIGFueT5bXSkge1xuICAgICAgICAgICAgaWYgKF9fREVWX18gJiYgdHlwZW9mIG1hcmsgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgIGBJbnZhbGlkIG1hcms6ICR7bWFya30sICdtYXJrJyBzaG91bGQgYmUgYSBmdW5jdGlvbi5gXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBtYXJrKHZhbHVlLCB0eXBlcyk7XG4gICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSkgYXMgTWFyazxhbnksIGFueT4pXG4gICAgICA6IG9wdGlvbnMubWFyaztcbiAgICBjb25zdCBlbmFibGVQYXRjaGVzID0gb3B0aW9ucy5lbmFibGVQYXRjaGVzID8/IGZhbHNlO1xuICAgIGNvbnN0IHN0cmljdCA9IG9wdGlvbnMuc3RyaWN0ID8/IGZhbHNlO1xuICAgIGNvbnN0IGVuYWJsZUF1dG9GcmVlemUgPSBvcHRpb25zLmVuYWJsZUF1dG9GcmVlemUgPz8gZmFsc2U7XG4gICAgY29uc3QgX29wdGlvbnM6IE9wdGlvbnM8YW55LCBhbnk+ID0ge1xuICAgICAgZW5hYmxlQXV0b0ZyZWV6ZSxcbiAgICAgIG1hcmssXG4gICAgICBzdHJpY3QsXG4gICAgICBlbmFibGVQYXRjaGVzLFxuICAgIH07XG4gICAgaWYgKFxuICAgICAgIWlzRHJhZnRhYmxlKHN0YXRlLCBfb3B0aW9ucykgJiZcbiAgICAgIHR5cGVvZiBzdGF0ZSA9PT0gJ29iamVjdCcgJiZcbiAgICAgIHN0YXRlICE9PSBudWxsXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBJbnZhbGlkIGJhc2Ugc3RhdGU6IGNyZWF0ZSgpIG9ubHkgc3VwcG9ydHMgcGxhaW4gb2JqZWN0cywgYXJyYXlzLCBTZXQsIE1hcCBvciB1c2luZyBtYXJrKCkgdG8gbWFyayB0aGUgc3RhdGUgYXMgaW1tdXRhYmxlLmBcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IFtkcmFmdCwgZmluYWxpemVdID0gZHJhZnRpZnkoc3RhdGUsIF9vcHRpb25zKTtcbiAgICBpZiAodHlwZW9mIGFyZzEgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGlmICghaXNEcmFmdGFibGUoc3RhdGUsIF9vcHRpb25zKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYEludmFsaWQgYmFzZSBzdGF0ZTogY3JlYXRlKCkgb25seSBzdXBwb3J0cyBwbGFpbiBvYmplY3RzLCBhcnJheXMsIFNldCwgTWFwIG9yIHVzaW5nIG1hcmsoKSB0byBtYXJrIHRoZSBzdGF0ZSBhcyBpbW11dGFibGUuYFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFtkcmFmdCwgZmluYWxpemVdO1xuICAgIH1cbiAgICBsZXQgcmVzdWx0OiBhbnk7XG4gICAgdHJ5IHtcbiAgICAgIHJlc3VsdCA9IG11dGF0ZShkcmFmdCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldm9rZVByb3h5KGdldFByb3h5RHJhZnQoZHJhZnQpKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgICBjb25zdCByZXR1cm5WYWx1ZSA9ICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICBjb25zdCBwcm94eURyYWZ0ID0gZ2V0UHJveHlEcmFmdChkcmFmdCkhO1xuICAgICAgaWYgKCFpc0RyYWZ0KHZhbHVlKSkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdmFsdWUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICFpc0VxdWFsKHZhbHVlLCBkcmFmdCkgJiZcbiAgICAgICAgICBwcm94eURyYWZ0Py5vcGVyYXRlZFxuICAgICAgICApIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBgRWl0aGVyIHRoZSB2YWx1ZSBpcyByZXR1cm5lZCBhcyBhIG5ldyBub24tZHJhZnQgdmFsdWUsIG9yIG9ubHkgdGhlIGRyYWZ0IGlzIG1vZGlmaWVkIHdpdGhvdXQgcmV0dXJuaW5nIGFueSB2YWx1ZS5gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByYXdSZXR1cm5WYWx1ZSA9IHZhbHVlPy5bUkFXX1JFVFVSTl9TWU1CT0xdIGFzIFthbnldIHwgdW5kZWZpbmVkO1xuICAgICAgICBpZiAocmF3UmV0dXJuVmFsdWUpIHtcbiAgICAgICAgICBjb25zdCBfdmFsdWUgPSByYXdSZXR1cm5WYWx1ZVswXTtcbiAgICAgICAgICBpZiAoX29wdGlvbnMuc3RyaWN0ICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhhbmRsZVJldHVyblZhbHVlKHtcbiAgICAgICAgICAgICAgcm9vdERyYWZ0OiBwcm94eURyYWZ0LFxuICAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgICAgdXNlUmF3UmV0dXJuOiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBmaW5hbGl6ZShbX3ZhbHVlXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaGFuZGxlUmV0dXJuVmFsdWUoeyByb290RHJhZnQ6IHByb3h5RHJhZnQsIHZhbHVlIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZmluYWxpemUoW3ZhbHVlXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZSA9PT0gZHJhZnQgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZmluYWxpemUoW10pO1xuICAgICAgfVxuICAgICAgY29uc3QgcmV0dXJuZWRQcm94eURyYWZ0ID0gZ2V0UHJveHlEcmFmdCh2YWx1ZSkhO1xuICAgICAgaWYgKF9vcHRpb25zID09PSByZXR1cm5lZFByb3h5RHJhZnQub3B0aW9ucykge1xuICAgICAgICBpZiAocmV0dXJuZWRQcm94eURyYWZ0Lm9wZXJhdGVkKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgcmV0dXJuIGEgbW9kaWZpZWQgY2hpbGQgZHJhZnQuYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZpbmFsaXplKFtjdXJyZW50KHZhbHVlKV0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZpbmFsaXplKFt2YWx1ZV0pO1xuICAgIH07XG4gICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgIHJldHVybiByZXN1bHQudGhlbihyZXR1cm5WYWx1ZSwgKGVycm9yKSA9PiB7XG4gICAgICAgIHJldm9rZVByb3h5KGdldFByb3h5RHJhZnQoZHJhZnQpISk7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiByZXR1cm5WYWx1ZShyZXN1bHQpO1xuICB9O1xufTtcbiIsICJpbXBvcnQgeyBtYWtlQ3JlYXRvciB9IGZyb20gJy4vbWFrZUNyZWF0b3InO1xuXG4vKipcbiAqIGBjcmVhdGUoYmFzZVN0YXRlLCBjYWxsYmFjaywgb3B0aW9ucylgIHRvIGNyZWF0ZSB0aGUgbmV4dCBzdGF0ZVxuICpcbiAqICMjIEV4YW1wbGVcbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgY3JlYXRlIH0gZnJvbSAnLi4vaW5kZXgnO1xuICpcbiAqIGNvbnN0IGJhc2VTdGF0ZSA9IHsgZm9vOiB7IGJhcjogJ3N0cicgfSwgYXJyOiBbXSB9O1xuICogY29uc3Qgc3RhdGUgPSBjcmVhdGUoXG4gKiAgIGJhc2VTdGF0ZSxcbiAqICAgKGRyYWZ0KSA9PiB7XG4gKiAgICAgZHJhZnQuZm9vLmJhciA9ICdzdHIyJztcbiAqICAgfSxcbiAqICk7XG4gKlxuICogZXhwZWN0KHN0YXRlKS50b0VxdWFsKHsgZm9vOiB7IGJhcjogJ3N0cjInIH0sIGFycjogW10gfSk7XG4gKiBleHBlY3Qoc3RhdGUpLm5vdC50b0JlKGJhc2VTdGF0ZSk7XG4gKiBleHBlY3Qoc3RhdGUuZm9vKS5ub3QudG9CZShiYXNlU3RhdGUuZm9vKTtcbiAqIGV4cGVjdChzdGF0ZS5hcnIpLnRvQmUoYmFzZVN0YXRlLmFycik7XG4gKiBgYGBcbiAqL1xuY29uc3QgY3JlYXRlID0gbWFrZUNyZWF0b3IoKTtcblxuZXhwb3J0IHsgY3JlYXRlIH07XG4iLCAiaW1wb3J0IHsgT3BlcmF0aW9uLCBEcmFmdFR5cGUgfSBmcm9tICcuL2ludGVyZmFjZSc7XG5pbXBvcnQgdHlwZSB7XG4gIERyYWZ0LFxuICBQYXRjaGVzLFxuICBBcHBseU11dGFibGVPcHRpb25zLFxuICBBcHBseU9wdGlvbnMsXG4gIEFwcGx5UmVzdWx0LFxufSBmcm9tICcuL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBkZWVwQ2xvbmUsIGdldCwgZ2V0VHlwZSwgaXNEcmFmdCwgdW5lc2NhcGVQYXRoIH0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgeyBjcmVhdGUgfSBmcm9tICcuL2NyZWF0ZSc7XG5cbi8qKlxuICogYGFwcGx5KHN0YXRlLCBwYXRjaGVzKWAgdG8gYXBwbHkgcGF0Y2hlcyB0byBzdGF0ZVxuICpcbiAqICMjIEV4YW1wbGVcbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgY3JlYXRlLCBhcHBseSB9IGZyb20gJy4uL2luZGV4JztcbiAqXG4gKiBjb25zdCBiYXNlU3RhdGUgPSB7IGZvbzogeyBiYXI6ICdzdHInIH0sIGFycjogW10gfTtcbiAqIGNvbnN0IFtzdGF0ZSwgcGF0Y2hlc10gPSBjcmVhdGUoXG4gKiAgIGJhc2VTdGF0ZSxcbiAqICAgKGRyYWZ0KSA9PiB7XG4gKiAgICAgZHJhZnQuZm9vLmJhciA9ICdzdHIyJztcbiAqICAgfSxcbiAqICAgeyBlbmFibGVQYXRjaGVzOiB0cnVlIH1cbiAqICk7XG4gKiBleHBlY3Qoc3RhdGUpLnRvRXF1YWwoeyBmb286IHsgYmFyOiAnc3RyMicgfSwgYXJyOiBbXSB9KTtcbiAqIGV4cGVjdChwYXRjaGVzKS50b0VxdWFsKFt7IG9wOiAncmVwbGFjZScsIHBhdGg6IFsnZm9vJywgJ2JhciddLCB2YWx1ZTogJ3N0cjInIH1dKTtcbiAqIGV4cGVjdChzdGF0ZSkudG9FcXVhbChhcHBseShiYXNlU3RhdGUsIHBhdGNoZXMpKTtcbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwbHk8XG4gIFQgZXh0ZW5kcyBvYmplY3QsXG4gIEYgZXh0ZW5kcyBib29sZWFuID0gZmFsc2UsXG4gIEEgZXh0ZW5kcyBBcHBseU9wdGlvbnM8Rj4gPSBBcHBseU9wdGlvbnM8Rj4sXG4+KHN0YXRlOiBULCBwYXRjaGVzOiBQYXRjaGVzLCBhcHBseU9wdGlvbnM/OiBBKTogQXBwbHlSZXN1bHQ8VCwgRiwgQT4ge1xuICBsZXQgaTogbnVtYmVyO1xuICBmb3IgKGkgPSBwYXRjaGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaSAtPSAxKSB7XG4gICAgY29uc3QgeyB2YWx1ZSwgb3AsIHBhdGggfSA9IHBhdGNoZXNbaV07XG4gICAgaWYgKFxuICAgICAgKCFwYXRoLmxlbmd0aCAmJiBvcCA9PT0gT3BlcmF0aW9uLlJlcGxhY2UpIHx8XG4gICAgICAocGF0aCA9PT0gJycgJiYgb3AgPT09IE9wZXJhdGlvbi5BZGQpXG4gICAgKSB7XG4gICAgICBzdGF0ZSA9IHZhbHVlO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIGlmIChpID4gLTEpIHtcbiAgICBwYXRjaGVzID0gcGF0Y2hlcy5zbGljZShpICsgMSk7XG4gIH1cbiAgY29uc3QgbXV0YXRlID0gKGRyYWZ0OiBEcmFmdDxUPiB8IFQpID0+IHtcbiAgICBwYXRjaGVzLmZvckVhY2goKHBhdGNoKSA9PiB7XG4gICAgICBjb25zdCB7IHBhdGg6IF9wYXRoLCBvcCB9ID0gcGF0Y2g7XG4gICAgICBjb25zdCBwYXRoID0gdW5lc2NhcGVQYXRoKF9wYXRoKTtcbiAgICAgIGxldCBiYXNlOiBhbnkgPSBkcmFmdDtcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBwYXRoLmxlbmd0aCAtIDE7IGluZGV4ICs9IDEpIHtcbiAgICAgICAgY29uc3QgcGFyZW50VHlwZSA9IGdldFR5cGUoYmFzZSk7XG4gICAgICAgIGxldCBrZXkgPSBwYXRoW2luZGV4XTtcbiAgICAgICAgaWYgKHR5cGVvZiBrZXkgIT09ICdzdHJpbmcnICYmIHR5cGVvZiBrZXkgIT09ICdudW1iZXInKSB7XG4gICAgICAgICAga2V5ID0gU3RyaW5nKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgICgocGFyZW50VHlwZSA9PT0gRHJhZnRUeXBlLk9iamVjdCB8fFxuICAgICAgICAgICAgcGFyZW50VHlwZSA9PT0gRHJhZnRUeXBlLkFycmF5KSAmJlxuICAgICAgICAgICAgKGtleSA9PT0gJ19fcHJvdG9fXycgfHwga2V5ID09PSAnY29uc3RydWN0b3InKSkgfHxcbiAgICAgICAgICAodHlwZW9mIGJhc2UgPT09ICdmdW5jdGlvbicgJiYga2V5ID09PSAncHJvdG90eXBlJylcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYFBhdGNoaW5nIHJlc2VydmVkIGF0dHJpYnV0ZXMgbGlrZSBfX3Byb3RvX18gYW5kIGNvbnN0cnVjdG9yIGlzIG5vdCBhbGxvd2VkLmBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIC8vIHVzZSBgaW5kZXhgIGluIFNldCBkcmFmdFxuICAgICAgICBiYXNlID0gZ2V0KHBhcmVudFR5cGUgPT09IERyYWZ0VHlwZS5TZXQgPyBBcnJheS5mcm9tKGJhc2UpIDogYmFzZSwga2V5KTtcbiAgICAgICAgaWYgKHR5cGVvZiBiYXNlICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGFwcGx5IHBhdGNoIGF0ICcke3BhdGguam9pbignLycpfScuYCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgdHlwZSA9IGdldFR5cGUoYmFzZSk7XG4gICAgICAvLyBlbnN1cmUgdGhlIG9yaWdpbmFsIHBhdGNoIGlzIG5vdCBtb2RpZmllZC5cbiAgICAgIGNvbnN0IHZhbHVlID0gZGVlcENsb25lKHBhdGNoLnZhbHVlKTtcbiAgICAgIGNvbnN0IGtleSA9IHBhdGhbcGF0aC5sZW5ndGggLSAxXTtcbiAgICAgIHN3aXRjaCAob3ApIHtcbiAgICAgICAgY2FzZSBPcGVyYXRpb24uUmVwbGFjZTpcbiAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgRHJhZnRUeXBlLk1hcDpcbiAgICAgICAgICAgICAgcmV0dXJuIGJhc2Uuc2V0KGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgY2FzZSBEcmFmdFR5cGUuU2V0OlxuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBhcHBseSByZXBsYWNlIHBhdGNoIHRvIHNldC5gKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIHJldHVybiAoYmFzZVtrZXldID0gdmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgY2FzZSBPcGVyYXRpb24uQWRkOlxuICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSBEcmFmdFR5cGUuQXJyYXk6XG4gICAgICAgICAgICAgIC8vIElmIHRoZSBcIi1cIiBjaGFyYWN0ZXIgaXMgdXNlZCB0b1xuICAgICAgICAgICAgICAvLyBpbmRleCB0aGUgZW5kIG9mIHRoZSBhcnJheSAoc2VlIFtSRkM2OTAxXShodHRwczovL2RhdGF0cmFja2VyLmlldGYub3JnL2RvYy9odG1sL3JmYzY5MDIpKSxcbiAgICAgICAgICAgICAgLy8gdGhpcyBoYXMgdGhlIGVmZmVjdCBvZiBhcHBlbmRpbmcgdGhlIHZhbHVlIHRvIHRoZSBhcnJheS5cbiAgICAgICAgICAgICAgcmV0dXJuIGtleSA9PT0gJy0nXG4gICAgICAgICAgICAgICAgPyBiYXNlLnB1c2godmFsdWUpXG4gICAgICAgICAgICAgICAgOiBiYXNlLnNwbGljZShrZXkgYXMgbnVtYmVyLCAwLCB2YWx1ZSk7XG4gICAgICAgICAgICBjYXNlIERyYWZ0VHlwZS5NYXA6XG4gICAgICAgICAgICAgIHJldHVybiBiYXNlLnNldChrZXksIHZhbHVlKTtcbiAgICAgICAgICAgIGNhc2UgRHJhZnRUeXBlLlNldDpcbiAgICAgICAgICAgICAgcmV0dXJuIGJhc2UuYWRkKHZhbHVlKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIHJldHVybiAoYmFzZVtrZXldID0gdmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgY2FzZSBPcGVyYXRpb24uUmVtb3ZlOlxuICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSBEcmFmdFR5cGUuQXJyYXk6XG4gICAgICAgICAgICAgIHJldHVybiBiYXNlLnNwbGljZShrZXkgYXMgbnVtYmVyLCAxKTtcbiAgICAgICAgICAgIGNhc2UgRHJhZnRUeXBlLk1hcDpcbiAgICAgICAgICAgICAgcmV0dXJuIGJhc2UuZGVsZXRlKGtleSk7XG4gICAgICAgICAgICBjYXNlIERyYWZ0VHlwZS5TZXQ6XG4gICAgICAgICAgICAgIHJldHVybiBiYXNlLmRlbGV0ZShwYXRjaC52YWx1ZSk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICByZXR1cm4gZGVsZXRlIGJhc2Vba2V5XTtcbiAgICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBwYXRjaCBvcGVyYXRpb246ICR7b3B9LmApO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuICBpZiAoKGFwcGx5T3B0aW9ucyBhcyBBcHBseU11dGFibGVPcHRpb25zKT8ubXV0YWJsZSkge1xuICAgIGlmIChfX0RFVl9fKSB7XG4gICAgICBpZiAoXG4gICAgICAgIE9iamVjdC5rZXlzKGFwcGx5T3B0aW9ucyEpLmZpbHRlcigoa2V5KSA9PiBrZXkgIT09ICdtdXRhYmxlJykubGVuZ3RoXG4gICAgICApIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICdUaGUgXCJtdXRhYmxlXCIgb3B0aW9uIGlzIG5vdCBhbGxvd2VkIHRvIGJlIHVzZWQgd2l0aCBvdGhlciBvcHRpb25zLidcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgbXV0YXRlKHN0YXRlKTtcbiAgICByZXR1cm4gdW5kZWZpbmVkIGFzIEFwcGx5UmVzdWx0PFQsIEYsIEE+O1xuICB9XG4gIGlmIChpc0RyYWZ0KHN0YXRlKSkge1xuICAgIGlmIChhcHBseU9wdGlvbnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgYXBwbHkgcGF0Y2hlcyB3aXRoIG9wdGlvbnMgdG8gYSBkcmFmdC5gKTtcbiAgICB9XG4gICAgbXV0YXRlKHN0YXRlIGFzIERyYWZ0PFQ+KTtcbiAgICByZXR1cm4gc3RhdGUgYXMgQXBwbHlSZXN1bHQ8VCwgRiwgQT47XG4gIH1cbiAgcmV0dXJuIGNyZWF0ZTxULCBGPihzdGF0ZSwgbXV0YXRlLCB7XG4gICAgLi4uYXBwbHlPcHRpb25zLFxuICAgIGVuYWJsZVBhdGNoZXM6IGZhbHNlLFxuICB9KSBhcyBUIGFzIEFwcGx5UmVzdWx0PFQsIEYsIEE+O1xufVxuIiwgImltcG9ydCB7IGdldFByb3h5RHJhZnQgfSBmcm9tICcuL3V0aWxzJztcblxuLyoqXG4gKiBgb3JpZ2luYWwoZHJhZnQpYCB0byBnZXQgb3JpZ2luYWwgc3RhdGUgaW4gdGhlIGRyYWZ0IG11dGF0aW9uIGZ1bmN0aW9uLlxuICpcbiAqICMjIEV4YW1wbGVcbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgY3JlYXRlLCBvcmlnaW5hbCB9IGZyb20gJy4uL2luZGV4JztcbiAqXG4gKiBjb25zdCBiYXNlU3RhdGUgPSB7IGZvbzogeyBiYXI6ICdzdHInIH0sIGFycjogW10gfTtcbiAqIGNvbnN0IHN0YXRlID0gY3JlYXRlKFxuICogICBiYXNlU3RhdGUsXG4gKiAgIChkcmFmdCkgPT4ge1xuICogICAgIGRyYWZ0LmZvby5iYXIgPSAnc3RyMic7XG4gKiAgICAgZXhwZWN0KG9yaWdpbmFsKGRyYWZ0LmZvbykpLnRvRXF1YWwoeyBiYXI6ICdzdHInIH0pO1xuICogICB9XG4gKiApO1xuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvcmlnaW5hbDxUPih0YXJnZXQ6IFQpOiBUIHtcbiAgY29uc3QgcHJveHlEcmFmdCA9IGdldFByb3h5RHJhZnQodGFyZ2V0KTtcbiAgaWYgKCFwcm94eURyYWZ0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYG9yaWdpbmFsKCkgaXMgb25seSB1c2VkIGZvciBhIGRyYWZ0LCBwYXJhbWV0ZXI6ICR7dGFyZ2V0fWBcbiAgICApO1xuICB9XG4gIHJldHVybiBwcm94eURyYWZ0Lm9yaWdpbmFsO1xufVxuIiwgImltcG9ydCB7IFJBV19SRVRVUk5fU1lNQk9MIH0gZnJvbSAnLi9jb25zdGFudCc7XG5cbi8qKlxuICogVXNlIHJhd1JldHVybigpIHRvIHdyYXAgdGhlIHJldHVybiB2YWx1ZSB0byBza2lwIHRoZSBkcmFmdCBjaGVjayBhbmQgdGh1cyBpbXByb3ZlIHBlcmZvcm1hbmNlLlxuICpcbiAqICMjIEV4YW1wbGVcbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgY3JlYXRlLCByYXdSZXR1cm4gfSBmcm9tICcuLi9pbmRleCc7XG4gKlxuICogY29uc3QgYmFzZVN0YXRlID0geyBmb286IHsgYmFyOiAnc3RyJyB9LCBhcnI6IFtdIH07XG4gKiBjb25zdCBzdGF0ZSA9IGNyZWF0ZShcbiAqICAgYmFzZVN0YXRlLFxuICogICAoZHJhZnQpID0+IHtcbiAqICAgICByZXR1cm4gcmF3UmV0dXJuKGJhc2VTdGF0ZSk7XG4gKiAgIH0sXG4gKiApO1xuICogZXhwZWN0KHN0YXRlKS50b0JlKGJhc2VTdGF0ZSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJhd1JldHVybjxUIGV4dGVuZHMgb2JqZWN0IHwgdW5kZWZpbmVkPih2YWx1ZTogVCk6IFQge1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcigncmF3UmV0dXJuKCkgbXVzdCBiZSBjYWxsZWQgd2l0aCBhIHZhbHVlLicpO1xuICB9XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncmF3UmV0dXJuKCkgbXVzdCBiZSBjYWxsZWQgd2l0aCBvbmUgYXJndW1lbnQuJyk7XG4gIH1cbiAgaWYgKFxuICAgIF9fREVWX18gJiZcbiAgICB2YWx1ZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgKHR5cGVvZiB2YWx1ZSAhPT0gJ29iamVjdCcgfHwgdmFsdWUgPT09IG51bGwpXG4gICkge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgICdyYXdSZXR1cm4oKSBtdXN0IGJlIGNhbGxlZCB3aXRoIGFuIG9iamVjdChpbmNsdWRpbmcgcGxhaW4gb2JqZWN0LCBhcnJheXMsIFNldCwgTWFwLCBldGMuKSBvciBgdW5kZWZpbmVkYCwgb3RoZXIgdHlwZXMgZG8gbm90IG5lZWQgdG8gYmUgcmV0dXJuZWQgdmlhIHJhd1JldHVybigpLidcbiAgICApO1xuICB9XG4gIHJldHVybiB7XG4gICAgW1JBV19SRVRVUk5fU1lNQk9MXTogW3ZhbHVlXSxcbiAgfSBhcyBuZXZlcjtcbn1cbiIsICJpbXBvcnQgeyBkYXRhVHlwZXMgfSBmcm9tICcuLi9jb25zdGFudCc7XG5cbmNvbnN0IGNvbnN0cnVjdG9yU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvci50b1N0cmluZygpO1xuLyoqXG4gKiBDaGVjayBpZiB0aGUgdmFsdWUgaXMgYSBzaW1wbGUgb2JqZWN0KE5vIHByb3RvdHlwZSBjaGFpbiBvYmplY3Qgb3IgaWZyYW1lIHNhbWUtb3JpZ2luIG9iamVjdCksXG4gKiBzdXBwb3J0IGNhc2U6IGh0dHBzOi8vZ2l0aHViLmNvbS91bmFkbGliL211dGF0aXZlL2lzc3Vlcy8xN1xuICovXG5jb25zdCBpc1NpbXBsZU9iamVjdCA9ICh2YWx1ZTogdW5rbm93bikgPT4ge1xuICBpZiAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZSAhPT0gJ29iamVjdCcpIHJldHVybiBmYWxzZTtcbiAgY29uc3QgcHJvdG90eXBlID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHZhbHVlKTtcbiAgaWYgKHByb3RvdHlwZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGNvbnN0IGNvbnN0cnVjdG9yID1cbiAgICBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChwcm90b3R5cGUsICdjb25zdHJ1Y3RvcicpICYmXG4gICAgcHJvdG90eXBlLmNvbnN0cnVjdG9yO1xuXG4gIGlmIChjb25zdHJ1Y3RvciA9PT0gT2JqZWN0KSByZXR1cm4gdHJ1ZTtcblxuICByZXR1cm4gKFxuICAgIHR5cGVvZiBjb25zdHJ1Y3RvciA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgIEZ1bmN0aW9uLnRvU3RyaW5nLmNhbGwoY29uc3RydWN0b3IpID09PSBjb25zdHJ1Y3RvclN0cmluZ1xuICApO1xufTtcblxuZXhwb3J0IGNvbnN0IG1hcmtTaW1wbGVPYmplY3QgPSAodmFsdWU6IHVua25vd24pID0+IHtcbiAgaWYgKGlzU2ltcGxlT2JqZWN0KHZhbHVlKSkge1xuICAgIHJldHVybiBkYXRhVHlwZXMuaW1tdXRhYmxlO1xuICB9XG4gIHJldHVybjtcbn07XG4iLCAiaW1wb3J0IHsgRHJhZnQsIEltbXV0YWJsZSB9IGZyb20gJy4uL2ludGVyZmFjZSc7XG5cbi8qKlxuICogQ2FzdCBhIHZhbHVlIHRvIGFuIERyYWZ0IHR5cGUgdmFsdWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjYXN0RHJhZnQ8VD4odmFsdWU6IFQpOiBEcmFmdDxUPiB7XG4gIHJldHVybiB2YWx1ZSBhcyBhbnk7XG59XG5cbi8qKlxuICogQ2FzdCBhIHZhbHVlIHRvIGFuIEltbXV0YWJsZSB0eXBlIHZhbHVlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FzdEltbXV0YWJsZTxUPih2YWx1ZTogVCk6IEltbXV0YWJsZTxUPiB7XG4gIHJldHVybiB2YWx1ZSBhcyBhbnk7XG59XG5cbi8qKlxuICogQ2FzdCBhIHZhbHVlIHRvIGFuIE11dGFibGUgdHlwZSB2YWx1ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNhc3RNdXRhYmxlPFQ+KGRyYWZ0OiBEcmFmdDxUPik6IFQge1xuICByZXR1cm4gZHJhZnQgYXMgYW55O1xufVxuIiwgImltcG9ydCB7IENvbnRleHQsIEVmZmVjdCwgTGF5ZXIsIFNjaGVtYSB9IGZyb20gXCJlZmZlY3RcIlxuaW1wb3J0ICogYXMgTW9kdWxlUnVudGltZUltcGwgZnJvbSBcIi4vTW9kdWxlUnVudGltZS5qc1wiXG5pbXBvcnQgKiBhcyBCb3VuZEFwaVJ1bnRpbWUgZnJvbSBcIi4vQm91bmRBcGlSdW50aW1lLmpzXCJcbmltcG9ydCAqIGFzIExvZ2ljRGlhZ25vc3RpY3MgZnJvbSBcIi4vY29yZS9Mb2dpY0RpYWdub3N0aWNzLmpzXCJcbmltcG9ydCB0eXBlIHtcbiAgQW55TW9kdWxlU2hhcGUsXG4gIEFueVNjaGVtYSxcbiAgQWN0aW9uc0Zyb21NYXAsXG4gIE1vZHVsZUluc3RhbmNlLFxuICBNb2R1bGVTaGFwZSxcbiAgUmVkdWNlcnNGcm9tTWFwLFxuICBTdGF0ZU9mLFxuICBBY3Rpb25PZixcbiAgTW9kdWxlSGFuZGxlLFxuICBNb2R1bGVMb2dpYyxcbiAgTW9kdWxlSW1wbCxcbiAgTW9kdWxlSW1wbGVtZW50U3RhdGVUcmFuc2FjdGlvbk9wdGlvbnMsXG59IGZyb20gXCIuL2NvcmUvbW9kdWxlLmpzXCJcblxuLyoqXG4gKiB2MzogTGluayAoXHU1MzlGIE9yY2hlc3RyYXRvcilcbiAqIFx1NzUyOFx1NEU4RVx1OERFOFx1NkEyMVx1NTc1N1x1NTM0Rlx1NEY1Q1x1NzY4NFx1ODBGNlx1NkMzNFx1NUM0Mlx1MzAwMlxuICpcbiAqIC0gXHU0RTBEXHU2MzAxXHU2NzA5XHU4MUVBXHU1REYxXHU3Njg0IFN0YXRlXHVGRjFCXG4gKiAtIFx1NTNFRlx1NEVFNVx1OEJCRlx1OTVFRVx1NTkxQVx1NEUyQSBNb2R1bGUgXHU3Njg0IFJlYWRvbmx5SGFuZGxlXHVGRjFCXG4gKiAtIFx1NTNFQVx1ODBGRFx1NUI5QVx1NEU0OSBMb2dpY1x1RkYwQ1x1NEUwRFx1ODBGRFx1NUI5QVx1NEU0OSBTdGF0ZS9BY3Rpb25cdTMwMDJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIExpbms8XG4gIE1vZHVsZXMgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBNb2R1bGVJbnN0YW5jZTxhbnksIEFueU1vZHVsZVNoYXBlPj4sXG4gIEUgPSBuZXZlcixcbiAgUiA9IG5ldmVyXG4+KFxuICBtb2R1bGVzOiBNb2R1bGVzLFxuICBsb2dpYzogKFxuICAgICQ6IHsgW0sgaW4ga2V5b2YgTW9kdWxlc106IE1vZHVsZUhhbmRsZTxNb2R1bGVzW0tdW1wic2hhcGVcIl0+IH1cbiAgKSA9PiBFZmZlY3QuRWZmZWN0PHZvaWQsIEUsIFI+XG4pOiBFZmZlY3QuRWZmZWN0PHZvaWQsIEUsIFI+IHtcbiAgcmV0dXJuIEVmZmVjdC5nZW4oZnVuY3Rpb24qICgpIHtcbiAgICBjb25zdCBoYW5kbGVzOiBSZWNvcmQ8c3RyaW5nLCBNb2R1bGVIYW5kbGU8QW55TW9kdWxlU2hhcGU+PiA9IHt9XG5cbiAgICBmb3IgKGNvbnN0IFtrZXksIG1vZHVsZV0gb2YgT2JqZWN0LmVudHJpZXMobW9kdWxlcykpIHtcbiAgICAgIGNvbnN0IHJ1bnRpbWUgPSB5aWVsZCogbW9kdWxlXG5cbiAgICAgIGhhbmRsZXNba2V5XSA9IHtcbiAgICAgICAgcmVhZDogKHNlbGVjdG9yOiBhbnkpID0+IEVmZmVjdC5tYXAocnVudGltZS5nZXRTdGF0ZSwgc2VsZWN0b3IpLFxuICAgICAgICBjaGFuZ2VzOiBydW50aW1lLmNoYW5nZXMsXG4gICAgICAgIGRpc3BhdGNoOiBydW50aW1lLmRpc3BhdGNoLFxuICAgICAgICBhY3Rpb25zJDogcnVudGltZS5hY3Rpb25zJCxcbiAgICAgICAgYWN0aW9uczogbmV3IFByb3h5KHt9LCB7XG4gICAgICAgICAgZ2V0OiAoX3RhcmdldCwgcHJvcCkgPT5cbiAgICAgICAgICAgIChwYXlsb2FkOiBhbnkpID0+XG4gICAgICAgICAgICAgIHJ1bnRpbWUuZGlzcGF0Y2goeyBfdGFnOiBwcm9wIGFzIHN0cmluZywgcGF5bG9hZCB9KSxcbiAgICAgICAgfSksXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHlpZWxkKiBsb2dpYyhcbiAgICAgIGhhbmRsZXMgYXMge1xuICAgICAgICBbSyBpbiBrZXlvZiBNb2R1bGVzXTogTW9kdWxlSGFuZGxlPE1vZHVsZXNbS11bXCJzaGFwZVwiXT5cbiAgICAgIH1cbiAgICApXG4gIH0pXG59XG5cbi8qKlxuICogTW9kdWxlIFx1NURFNVx1NTM4Mlx1NUI5RVx1NzNCMFx1RkYxQVx1NjgzOVx1NjM2RSBpZCBcdTU0OEMgU2NoZW1hIFx1NUI5QVx1NEU0OVx1Njc4NFx1OTAyMCBNb2R1bGVJbnN0YW5jZVx1MzAwMlxuICovXG5leHBvcnQgZnVuY3Rpb24gTW9kdWxlPFxuICBJZCBleHRlbmRzIHN0cmluZyxcbiAgU1NjaGVtYSBleHRlbmRzIEFueVNjaGVtYSxcbiAgQU1hcCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIEFueVNjaGVtYT5cbj4oXG4gIGlkOiBJZCxcbiAgZGVmOiB7XG4gICAgcmVhZG9ubHkgc3RhdGU6IFNTY2hlbWFcbiAgICByZWFkb25seSBhY3Rpb25zOiBBTWFwXG4gICAgcmVhZG9ubHkgcmVkdWNlcnM/OiBSZWR1Y2Vyc0Zyb21NYXA8U1NjaGVtYSwgQU1hcD5cbiAgfVxuKTogTW9kdWxlSW5zdGFuY2U8XG4gIElkLFxuICBNb2R1bGVTaGFwZTxTU2NoZW1hLCBTY2hlbWEuU2NoZW1hPEFjdGlvbnNGcm9tTWFwPEFNYXA+PiwgQU1hcD5cbj4ge1xuICBjb25zdCBzaGFwZTogTW9kdWxlU2hhcGU8XG4gICAgU1NjaGVtYSxcbiAgICBTY2hlbWEuU2NoZW1hPEFjdGlvbnNGcm9tTWFwPEFNYXA+PixcbiAgICBBTWFwXG4gID4gPSB7XG4gICAgc3RhdGVTY2hlbWE6IGRlZi5zdGF0ZSxcbiAgICBhY3Rpb25TY2hlbWE6IFNjaGVtYS5VbmlvbihcbiAgICAgIC4uLk9iamVjdC5lbnRyaWVzKGRlZi5hY3Rpb25zKS5tYXAoKFt0YWcsIHBheWxvYWRdKSA9PlxuICAgICAgICBTY2hlbWEuU3RydWN0KFxuICAgICAgICAgIHBheWxvYWQgPT09IFNjaGVtYS5Wb2lkXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICBfdGFnOiBTY2hlbWEuTGl0ZXJhbCh0YWcpLFxuICAgICAgICAgICAgICAgIHBheWxvYWQ6IFNjaGVtYS5vcHRpb25hbChwYXlsb2FkKSxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgX3RhZzogU2NoZW1hLkxpdGVyYWwodGFnKSxcbiAgICAgICAgICAgICAgICBwYXlsb2FkLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICApLFxuICAgICAgKVxuICAgICkgYXMgYW55LFxuICAgIGFjdGlvbk1hcDogZGVmLmFjdGlvbnMsXG4gIH1cblxuICB0eXBlIFNoYXBlU3RhdGUgPSBTdGF0ZU9mPHR5cGVvZiBzaGFwZT5cbiAgdHlwZSBTaGFwZUFjdGlvbiA9IEFjdGlvbk9mPHR5cGVvZiBzaGFwZT5cblxuICAvLyBcdTVDMDZcdTYzMDkgVGFnIFx1NTIwNlx1N0VDNFx1NzY4NCByZWR1Y2VyIFx1NjYyMFx1NUMwNFx1NEUzQVx1N0I4MFx1NTM1NVx1NzY4NCBgX3RhZyAtPiAoc3RhdGUsIGFjdGlvbikgPT4gc3RhdGVgIFx1NUY2Mlx1NjAwMVx1RkYwQ1x1NEY5QiBSdW50aW1lIFx1NEY3Rlx1NzUyOFx1MzAwMlxuICBjb25zdCByZWR1Y2VycyA9XG4gICAgZGVmLnJlZHVjZXJzICYmXG4gICAgKE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgIE9iamVjdC5lbnRyaWVzKGRlZi5yZWR1Y2VycykubWFwKChbdGFnLCByZWR1Y2VyXSkgPT4gW1xuICAgICAgICB0YWcsXG4gICAgICAgIChzdGF0ZTogU2hhcGVTdGF0ZSwgYWN0aW9uOiBTaGFwZUFjdGlvbikgPT5cbiAgICAgICAgICAvLyBcdThGRDlcdTkxQ0NcdTRGOURcdThENTYgYF90YWdgIFx1NzY4NFx1OEZEMFx1ODg0Q1x1NjVGNlx1N0VBNlx1NUI5QVx1RkYxQVx1NTNFQVx1NjcwOVx1NTMzOVx1OTE0RFx1NUY1M1x1NTI0RCB0YWcgXHU3Njg0IEFjdGlvbiBcdTRGMUFcdTRFQTRcdTdFRDlcdTVCRjlcdTVFOTQgcmVkdWNlclx1MzAwMlxuICAgICAgICAgIChyZWR1Y2VyIGFzIGFueSkoXG4gICAgICAgICAgICBzdGF0ZSxcbiAgICAgICAgICAgIGFjdGlvbiBhcyB7XG4gICAgICAgICAgICAgIHJlYWRvbmx5IF90YWc6IHN0cmluZ1xuICAgICAgICAgICAgICByZWFkb25seSBwYXlsb2FkOiB1bmtub3duXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICkgYXMgU2hhcGVTdGF0ZSxcbiAgICAgIF0pLFxuICAgICkgYXMgUmVjb3JkPHN0cmluZywgKHN0YXRlOiBTaGFwZVN0YXRlLCBhY3Rpb246IFNoYXBlQWN0aW9uKSA9PiBTaGFwZVN0YXRlPilcblxuICBjb25zdCB0YWcgPSBDb250ZXh0LkdlbmVyaWNUYWc8XG4gICAgYW55LFxuICAgIGltcG9ydChcIi4vY29yZS9tb2R1bGUuanNcIikuTW9kdWxlUnVudGltZTxTdGF0ZU9mPHR5cGVvZiBzaGFwZT4sIEFjdGlvbk9mPHR5cGVvZiBzaGFwZT4+XG4gID4oYEBsb2dpeC9Nb2R1bGUvJHtpZH1gKVxuXG4gIGNvbnN0IG1vZHVsZUluc3RhbmNlID0gT2JqZWN0LmFzc2lnbih0YWcsIHtcbiAgICBfa2luZDogXCJNb2R1bGVcIiBhcyBjb25zdCxcbiAgICBpZCxcbiAgICBzaGFwZSxcbiAgICBzdGF0ZVNjaGVtYTogc2hhcGUuc3RhdGVTY2hlbWEsXG4gICAgYWN0aW9uU2NoZW1hOiBzaGFwZS5hY3Rpb25TY2hlbWEsXG4gICAgLyoqXG4gICAgICogXHU0RTNBXHU1RjUzXHU1MjREIE1vZHVsZSBcdTY3ODRcdTkwMjBcdTRFMDBcdTZCQjUgTG9naWMgXHU3QTBCXHU1RThGXHVGRjFBXG4gICAgICogLSBcdTU3MjhcdThGRDBcdTg4NENcdTY1RjZcdTRFQ0UgQ29udGV4dCBcdTRFMkRcdTUzRDZcdTUxRkFcdTgxRUFcdThFQUJcdTc2ODQgTW9kdWxlUnVudGltZVx1RkYxQlxuICAgICAqIC0gXHU1N0ZBXHU0RThFIFJ1bnRpbWUgXHU2Nzg0XHU5MDIwIEJvdW5kQXBpXHVGRjFCXG4gICAgICogLSBcdTVDMDYgQm91bmRBcGkgXHU0RUE0XHU3RUQ5XHU4QzAzXHU3NTI4XHU2NUI5XHU2Nzg0XHU5MDIwXHU0RTFBXHU1MkExIExvZ2ljXHUzMDAyXG4gICAgICovXG4gICAgbG9naWM6IDxSID0gdW5rbm93biwgRSA9IG5ldmVyPihcbiAgICAgIGJ1aWxkOiAoXG4gICAgICAgIGFwaTogaW1wb3J0KFwiLi9jb3JlL21vZHVsZS5qc1wiKS5Cb3VuZEFwaTx0eXBlb2Ygc2hhcGUsIFI+XG4gICAgICApID0+IE1vZHVsZUxvZ2ljPHR5cGVvZiBzaGFwZSwgUiwgRT5cbiAgICApOiBNb2R1bGVMb2dpYzx0eXBlb2Ygc2hhcGUsIFIsIEU+ID0+IHtcbiAgICAgIGNvbnN0IHBoYXNlUmVmOiB7IGN1cnJlbnQ6IFwic2V0dXBcIiB8IFwicnVuXCIgfSA9IHsgY3VycmVudDogXCJzZXR1cFwiIH1cbiAgICAgIGNvbnN0IHBoYXNlU2VydmljZTogTG9naWNEaWFnbm9zdGljcy5Mb2dpY1BoYXNlU2VydmljZSA9IHtcbiAgICAgICAgZ2V0IGN1cnJlbnQoKSB7XG4gICAgICAgICAgcmV0dXJuIHBoYXNlUmVmLmN1cnJlbnRcbiAgICAgICAgfSxcbiAgICAgIH1cbiAgICAgIGNvbnN0IGxvZ2ljRWZmZWN0ID0gRWZmZWN0LmdlbihmdW5jdGlvbiogKCkge1xuICAgICAgICBjb25zdCBydW50aW1lID0geWllbGQqIHRhZ1xuICAgICAgICBjb25zdCBhcGkgPSBCb3VuZEFwaVJ1bnRpbWUubWFrZTx0eXBlb2Ygc2hhcGUsIFI+KHNoYXBlLCBydW50aW1lLCB7XG4gICAgICAgICAgZ2V0UGhhc2U6ICgpID0+IHBoYXNlUmVmLmN1cnJlbnQsXG4gICAgICAgICAgcGhhc2VTZXJ2aWNlLFxuICAgICAgICAgIG1vZHVsZUlkOiBpZCxcbiAgICAgICAgfSlcblxuICAgICAgICBsZXQgYnVpbHQ6IHVua25vd25cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBidWlsdCA9IGJ1aWxkKGFwaSlcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgLy8gXHU1QzA2XHU1NDBDXHU2QjY1XHU2MjlCXHU1MUZBXHU3Njg0IExvZ2ljUGhhc2VFcnJvciBcdThGNkNcdTYzNjJcdTRFM0EgRWZmZWN0LmZhaWxcdUZGMENcdTkwN0ZcdTUxNEQgcnVuU3luYyBcdTg5QzZcdTRFM0FcdTIwMUNcdTVGMDJcdTZCNjVcdTY3MkFcdTUxQjMgRmliZXJcdTIwMURcbiAgICAgICAgICBpZiAoKGVyciBhcyBhbnkpPy5fdGFnID09PSBcIkxvZ2ljUGhhc2VFcnJvclwiKSB7XG4gICAgICAgICAgICByZXR1cm4geWllbGQqIEVmZmVjdC5mYWlsKGVyciBhcyBhbnkpXG4gICAgICAgICAgfVxuICAgICAgICAgIHRocm93IGVyclxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKChidWlsdCBhcyBhbnkpPy5fX2xvZ2ljUGxhbiA9PT0gdHJ1ZSkge1xuICAgICAgICAgIHJldHVybiB5aWVsZCogKGJ1aWx0IGFzIEVmZmVjdC5FZmZlY3Q8YW55LCBhbnksIGFueT4pXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBpc0xvZ2ljUGxhbiA9IChcbiAgICAgICAgICB2YWx1ZTogdW5rbm93blxuICAgICAgICApOiB2YWx1ZSBpcyBpbXBvcnQoXCIuL2NvcmUvbW9kdWxlLmpzXCIpLkxvZ2ljUGxhbjx0eXBlb2Ygc2hhcGUsIFIsIEU+ID0+XG4gICAgICAgICAgQm9vbGVhbihcbiAgICAgICAgICAgIHZhbHVlICYmXG4gICAgICAgICAgICB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgIFwic2V0dXBcIiBpbiAodmFsdWUgYXMgYW55KSAmJlxuICAgICAgICAgICAgXCJydW5cIiBpbiAodmFsdWUgYXMgYW55KVxuICAgICAgICAgIClcblxuICAgICAgICBjb25zdCBwbGFuID0gaXNMb2dpY1BsYW4oYnVpbHQpXG4gICAgICAgICAgPyBidWlsdFxuICAgICAgICAgIDogKHtcbiAgICAgICAgICAgIHNldHVwOiBFZmZlY3Qudm9pZCxcbiAgICAgICAgICAgIHJ1bjogYnVpbHQgYXMgRWZmZWN0LkVmZmVjdDxhbnksIGFueSwgYW55PixcbiAgICAgICAgICB9IHNhdGlzZmllcyBpbXBvcnQoXCIuL2NvcmUvbW9kdWxlLmpzXCIpLkxvZ2ljUGxhbjx0eXBlb2Ygc2hhcGUsIFIsIEU+KVxuXG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHBsYW4sIHsgX19waGFzZVJlZjogcGhhc2VSZWYgfSlcbiAgICAgIH0pXG5cbiAgICAgIDsobG9naWNFZmZlY3QgYXMgYW55KS5fX2xvZ2ljUGxhbiA9IHRydWVcbiAgICAgIDsobG9naWNFZmZlY3QgYXMgYW55KS5fX3BoYXNlUmVmID0gcGhhc2VSZWZcbiAgICAgIHJldHVybiBsb2dpY0VmZmVjdFxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBsaXZlXHVGRjFBXHU3RUQ5XHU1QjlBXHU1MjFEXHU1OUNCXHU3MkI2XHU2MDAxXHU0RTBFXHU0RTAwXHU3RUM0IExvZ2ljXHVGRjBDXHU2Nzg0XHU5MDIwXHU1RTI2IFNjb3BlIFx1NzY4NCBNb2R1bGVSdW50aW1lIExheWVyXHUzMDAyXG4gICAgICpcbiAgICAgKiBFbnYgXHU3RUE2XHU1QjlBXHVGRjFBXG4gICAgICogLSBSIFx1ODg2OFx1NzkzQSBMb2dpYyBcdThGRDBcdTg4NENcdTYyNDBcdTk3MDBcdTc2ODRcdTk4OURcdTU5MTZcdTczQUZcdTU4ODNcdUZGMDhTZXJ2aWNlIC8gXHU1RTczXHU1M0YwXHU3QjQ5XHVGRjA5XHVGRjFCXG4gICAgICogLSBNb2R1bGVSdW50aW1lIFx1NjcyQ1x1OEVBQlx1NTNFQVx1NEY5RFx1OEQ1NiBTY29wZS5TY29wZVx1RkYwQ1x1NzUzMSBMYXllci5zY29wZWQgXHU3QkExXHU3NDA2XHUzMDAyXG4gICAgICovXG4gICAgbGl2ZTogPFIgPSBuZXZlciwgRSA9IG5ldmVyPihcbiAgICAgIGluaXRpYWw6IFN0YXRlT2Y8dHlwZW9mIHNoYXBlPixcbiAgICAgIC4uLmxvZ2ljczogQXJyYXk8TW9kdWxlTG9naWM8dHlwZW9mIHNoYXBlLCBSLCBFPj5cbiAgICAgICk6IExheWVyLkxheWVyPFxuICAgICAgICBpbXBvcnQoXCIuL2NvcmUvbW9kdWxlLmpzXCIpLk1vZHVsZVJ1bnRpbWU8XG4gICAgICAgICAgU3RhdGVPZjx0eXBlb2Ygc2hhcGU+LFxuICAgICAgICAgIEFjdGlvbk9mPHR5cGVvZiBzaGFwZT5cbiAgICAgICAgPixcbiAgICAgICAgRSxcbiAgICAgICAgUlxuICAgICAgPiA9PlxuICAgICAgTGF5ZXIuc2NvcGVkKFxuICAgICAgICB0YWcsXG4gICAgICAgIE1vZHVsZVJ1bnRpbWVJbXBsLm1ha2U8U3RhdGVPZjx0eXBlb2Ygc2hhcGU+LCBBY3Rpb25PZjx0eXBlb2Ygc2hhcGU+LCBSPihcbiAgICAgICAgICBpbml0aWFsLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRhZyxcbiAgICAgICAgICAgIGxvZ2ljczogbG9naWNzIGFzIFJlYWRvbmx5QXJyYXk8RWZmZWN0LkVmZmVjdDxhbnksIGFueSwgYW55Pj4sXG4gICAgICAgICAgICBtb2R1bGVJZDogaWQsXG4gICAgICAgICAgICByZWR1Y2VycyxcbiAgICAgICAgICB9LFxuICAgICAgICApLFxuICAgICAgKSBhcyBMYXllci5MYXllcjxcbiAgICAgICAgaW1wb3J0KFwiLi9jb3JlL21vZHVsZS5qc1wiKS5Nb2R1bGVSdW50aW1lPFxuICAgICAgICAgIFN0YXRlT2Y8dHlwZW9mIHNoYXBlPixcbiAgICAgICAgICBBY3Rpb25PZjx0eXBlb2Ygc2hhcGU+XG4gICAgICAgID4sXG4gICAgICAgIEUsXG4gICAgICAgIFJcbiAgICAgID4sXG5cbiAgICAvKipcbiAgICAgKiBpbXBsZW1lbnRcdUZGMUFcdTU3RkFcdTRFOEUgTW9kdWxlIFx1NUI5QVx1NEU0OSArIFx1NTIxRFx1NTlDQlx1NzJCNlx1NjAwMSArIExvZ2ljIFx1OTZDNlx1NTQwOFx1RkYwQ1x1NzUxRlx1NjIxMCBNb2R1bGVJbXBsIFx1ODRERFx1NTZGRVx1MzAwMlxuICAgICAqXG4gICAgICogLSBSIFx1ODg2OFx1NzkzQSBMb2dpYyBcdTYyNDBcdTk3MDBcdTc2ODQgRW52IFx1N0M3Qlx1NTc4Qlx1RkYxQlxuICAgICAqIC0gXHU4RkQ0XHU1NkRFXHU3Njg0IE1vZHVsZUltcGwubGF5ZXIgXHU0RjFBXHU2NDNBXHU1RTI2IFIgXHU0RjVDXHU0RTNBXHU4RjkzXHU1MTY1XHU3M0FGXHU1ODgzXHVGRjFCXG4gICAgICogLSBcdTkwMUFcdThGQzcgd2l0aExheWVyL3dpdGhMYXllcnMgXHU1M0VGXHU0RUU1XHU5MDEwXHU2QjY1XHU1QzA2IFIgXHU2NTM2XHU2NTVCXHU0RTNBXHU2NkY0XHU1MTc3XHU0RjUzXHU3Njg0IEVudlx1RkYwOFx1NzUxQVx1ODFGMyBuZXZlclx1RkYwOVx1MzAwMlxuICAgICAqL1xuICAgIGltcGxlbWVudDogPFIgPSBuZXZlcj4oY29uZmlnOiB7XG4gICAgICBpbml0aWFsOiBTdGF0ZU9mPHR5cGVvZiBzaGFwZT5cbiAgICAgIGxvZ2ljcz86IEFycmF5PE1vZHVsZUxvZ2ljPHR5cGVvZiBzaGFwZSwgUiwgbmV2ZXI+PlxuICAgICAgaW1wb3J0cz86IFJlYWRvbmx5QXJyYXk8XG4gICAgICAgIExheWVyLkxheWVyPGFueSwgYW55LCBhbnk+IHwgTW9kdWxlSW1wbDxhbnksIEFueU1vZHVsZVNoYXBlLCBhbnk+XG4gICAgICA+XG4gICAgICAvKipcbiAgICAgICAqIHByb2Nlc3Nlc1x1RkYxQVx1NEUwRVx1OEJFNSBNb2R1bGUgXHU1QjlFXHU3M0IwXHU3RUQxXHU1QjlBXHU3Njg0XHU0RTAwXHU3RUM0XHU5NTdGXHU2NzFGXHU2RDQxXHU3QTBCXHVGRjA4XHU1NDJCIExpbmtcdUZGMDlcdTMwMDJcbiAgICAgICAqXG4gICAgICAgKiAtIFx1OEZEOVx1NEU5QiBFZmZlY3QgXHU0RjFBXHU1NzI4XHU4RkQwXHU4ODRDXHU2NUY2XHU1QkI5XHU1NjY4XHVGRjA4XHU0RjhCXHU1OTgyIFJ1bnRpbWUubWFrZVx1RkYwOVx1NEUyRFx1ODhBQlx1N0VERlx1NEUwMCBmb3JrXHVGRjFCXG4gICAgICAgKiAtIFx1N0M3Qlx1NTc4Qlx1NEUwQVx1NEY3Rlx1NzUyOFx1NUJCRFx1Njc3RVx1NzY4NCBFL1IgXHU0RUU1XHU0RkJGXHU3RUM0XHU1NDA4XHU1NDA0XHU3OUNEXHU4REU4XHU2QTIxXHU1NzU3XHU3RjE2XHU2MzkyXHU5MDNCXHU4RjkxXHVGRjFCXG4gICAgICAgKiAtIFx1NEUxQVx1NTJBMVx1NEVFM1x1NzgwMVx1OTAxQVx1NUUzOFx1OTAxQVx1OEZDNyBMaW5rLm1ha2UgXHU2Nzg0XHU5MDIwXHU4RkQ5XHU0RTlCXHU2RDQxXHU3QTBCXHUzMDAyXG4gICAgICAgKi9cbiAgICAgIHByb2Nlc3Nlcz86IFJlYWRvbmx5QXJyYXk8RWZmZWN0LkVmZmVjdDx2b2lkLCBhbnksIGFueT4+XG4gICAgICAvKipcbiAgICAgICAqIHN0YXRlVHJhbnNhY3Rpb25cdUZGMUFcdTZBMjFcdTU3NTdcdTdFQTcgU3RhdGVUcmFuc2FjdGlvbiBcdTkxNERcdTdGNkVcdTMwMDJcbiAgICAgICAqXG4gICAgICAgKiAtIGluc3RydW1lbnRhdGlvbiBcdTY3MkFcdTYzRDBcdTRGOUJcdTY1RjZcdUZGMENcdTkwMDBcdTU2REVcdTUyMzAgUnVudGltZSBcdTdFQTdcdTkxNERcdTdGNkVcdUZGMDhcdTU5ODJcdTY3MDlcdUZGMDlcdTYyMTYgTk9ERV9FTlYgXHU5RUQ4XHU4QkE0XHVGRjFCXG4gICAgICAgKiAtIGluc3RydW1lbnRhdGlvbiBcdTYzRDBcdTRGOUJcdTY1RjZcdUZGMENcdTRGMThcdTUxNDhcdTRFOEUgUnVudGltZSBcdTdFQTdcdTkxNERcdTdGNkVcdTRFMEVcdTlFRDhcdThCQTRcdTUwM0NcdTMwMDJcbiAgICAgICAqL1xuICAgICAgc3RhdGVUcmFuc2FjdGlvbj86IE1vZHVsZUltcGxlbWVudFN0YXRlVHJhbnNhY3Rpb25PcHRpb25zXG4gICAgfSk6IE1vZHVsZUltcGw8XG4gICAgICBJZCxcbiAgICAgIE1vZHVsZVNoYXBlPFNTY2hlbWEsIFNjaGVtYS5TY2hlbWE8QWN0aW9uc0Zyb21NYXA8QU1hcD4+LCBBTWFwPixcbiAgICAgIFJcbiAgICAgID4gPT4ge1xuICAgICAgY29uc3QgaW1wb3J0ZWRNb2R1bGVzID0gKGNvbmZpZy5pbXBvcnRzID8/IFtdKS5mbGF0TWFwKChpdGVtKSA9PiB7XG4gICAgICAgIGlmICgoaXRlbSBhcyBNb2R1bGVJbXBsPGFueSwgQW55TW9kdWxlU2hhcGUsIGFueT4pLl90YWcgPT09IFwiTW9kdWxlSW1wbFwiKSB7XG4gICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIChpdGVtIGFzIE1vZHVsZUltcGw8YW55LCBBbnlNb2R1bGVTaGFwZSwgYW55PilcbiAgICAgICAgICAgICAgLm1vZHVsZSBhcyB1bmtub3duIGFzIENvbnRleHQuVGFnPGFueSwgaW1wb3J0KFwiLi9jb3JlL21vZHVsZS5qc1wiKS5Nb2R1bGVSdW50aW1lPGFueSwgYW55Pj4sXG4gICAgICAgICAgXVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXVxuICAgICAgfSlcblxuICAgICAgY29uc3QgYmFzZUxheWVyID0gTGF5ZXIuc2NvcGVkKFxuICAgICAgICB0YWcsXG4gICAgICAgIE1vZHVsZVJ1bnRpbWVJbXBsLm1ha2U8U3RhdGVPZjx0eXBlb2Ygc2hhcGU+LCBBY3Rpb25PZjx0eXBlb2Ygc2hhcGU+LCBSPihcbiAgICAgICAgICBjb25maWcuaW5pdGlhbCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0YWcsXG4gICAgICAgICAgICBsb2dpY3M6IChjb25maWcubG9naWNzIHx8IFtdKSBhcyBSZWFkb25seUFycmF5PEVmZmVjdC5FZmZlY3Q8YW55LCBhbnksIGFueT4+LFxuICAgICAgICAgICAgbW9kdWxlSWQ6IGlkLFxuICAgICAgICAgICAgaW1wb3J0czogaW1wb3J0ZWRNb2R1bGVzLFxuICAgICAgICAgICAgcmVkdWNlcnMsXG4gICAgICAgICAgICBzdGF0ZVRyYW5zYWN0aW9uOiBjb25maWcuc3RhdGVUcmFuc2FjdGlvbixcbiAgICAgICAgICB9LFxuICAgICAgICApLFxuICAgICAgKSBhcyBMYXllci5MYXllcjxcbiAgICAgICAgaW1wb3J0KFwiLi9jb3JlL21vZHVsZS5qc1wiKS5Nb2R1bGVSdW50aW1lPFxuICAgICAgICAgIFN0YXRlT2Y8dHlwZW9mIHNoYXBlPixcbiAgICAgICAgICBBY3Rpb25PZjx0eXBlb2Ygc2hhcGU+XG4gICAgICAgID4sXG4gICAgICAgIG5ldmVyLFxuICAgICAgICBhbnlcbiAgICAgID5cblxuICAgICAgY29uc3QgcHJvY2Vzc2VzID0gY29uZmlnLnByb2Nlc3NlcyA/PyBbXVxuXG4gICAgICBjb25zdCBtYWtlSW1wbFdpdGhMYXllciA9IChcbiAgICAgICAgbGF5ZXI6IExheWVyLkxheWVyPFxuICAgICAgICAgIGltcG9ydChcIi4vY29yZS9tb2R1bGUuanNcIikuTW9kdWxlUnVudGltZTxcbiAgICAgICAgICAgIFN0YXRlT2Y8dHlwZW9mIHNoYXBlPixcbiAgICAgICAgICAgIEFjdGlvbk9mPHR5cGVvZiBzaGFwZT5cbiAgICAgICAgICA+LFxuICAgICAgICAgIG5ldmVyLFxuICAgICAgICAgIGFueVxuICAgICAgICA+LFxuICAgICAgKTogTW9kdWxlSW1wbDxcbiAgICAgICAgSWQsXG4gICAgICAgIE1vZHVsZVNoYXBlPFNTY2hlbWEsIFNjaGVtYS5TY2hlbWE8QWN0aW9uc0Zyb21NYXA8QU1hcD4+LCBBTWFwPixcbiAgICAgICAgYW55XG4gICAgICA+ID0+ICh7XG4gICAgICAgIF90YWc6IFwiTW9kdWxlSW1wbFwiLFxuICAgICAgICBtb2R1bGU6IG1vZHVsZUluc3RhbmNlIGFzIHVua25vd24gYXMgTW9kdWxlSW5zdGFuY2U8XG4gICAgICAgICAgSWQsXG4gICAgICAgICAgTW9kdWxlU2hhcGU8U1NjaGVtYSwgU2NoZW1hLlNjaGVtYTxBY3Rpb25zRnJvbU1hcDxBTWFwPj4sIEFNYXA+XG4gICAgICAgID4sXG4gICAgICAgIGxheWVyLFxuICAgICAgICBwcm9jZXNzZXMsXG4gICAgICAgIHN0YXRlVHJhbnNhY3Rpb246IGNvbmZpZy5zdGF0ZVRyYW5zYWN0aW9uLFxuICAgICAgICB3aXRoTGF5ZXI6IChcbiAgICAgICAgICBleHRyYTogTGF5ZXIuTGF5ZXI8YW55LCBuZXZlciwgYW55PlxuICAgICAgICApOiBNb2R1bGVJbXBsPFxuICAgICAgICAgIElkLFxuICAgICAgICAgIE1vZHVsZVNoYXBlPFNTY2hlbWEsIFNjaGVtYS5TY2hlbWE8QWN0aW9uc0Zyb21NYXA8QU1hcD4+LCBBTWFwPixcbiAgICAgICAgICBhbnlcbiAgICAgICAgPiA9PiB7XG4gICAgICAgICAgY29uc3QgcHJvdmlkZWQgPSAobGF5ZXIgYXMgTGF5ZXIuTGF5ZXI8XG4gICAgICAgICAgICBpbXBvcnQoXCIuL2NvcmUvbW9kdWxlLmpzXCIpLk1vZHVsZVJ1bnRpbWU8XG4gICAgICAgICAgICAgIFN0YXRlT2Y8dHlwZW9mIHNoYXBlPixcbiAgICAgICAgICAgICAgQWN0aW9uT2Y8dHlwZW9mIHNoYXBlPlxuICAgICAgICAgICAgPixcbiAgICAgICAgICAgIG5ldmVyLFxuICAgICAgICAgICAgYW55XG4gICAgICAgICAgPikucGlwZShcbiAgICAgICAgICAgIExheWVyLnByb3ZpZGUoXG4gICAgICAgICAgICAgIGV4dHJhIGFzIExheWVyLkxheWVyPGFueSwgbmV2ZXIsIGFueT5cbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG5cbiAgICAgICAgICBjb25zdCBtZXJnZWQgPSBMYXllci5tZXJnZUFsbChcbiAgICAgICAgICAgIHByb3ZpZGVkLFxuICAgICAgICAgICAgZXh0cmEgYXMgTGF5ZXIuTGF5ZXI8YW55LCBuZXZlciwgYW55PlxuICAgICAgICAgICkgYXMgTGF5ZXIuTGF5ZXI8XG4gICAgICAgICAgICBpbXBvcnQoXCIuL2NvcmUvbW9kdWxlLmpzXCIpLk1vZHVsZVJ1bnRpbWU8XG4gICAgICAgICAgICAgIFN0YXRlT2Y8dHlwZW9mIHNoYXBlPixcbiAgICAgICAgICAgICAgQWN0aW9uT2Y8dHlwZW9mIHNoYXBlPlxuICAgICAgICAgICAgPixcbiAgICAgICAgICAgIG5ldmVyLFxuICAgICAgICAgICAgYW55XG4gICAgICAgICAgPlxuXG4gICAgICAgICAgcmV0dXJuIG1ha2VJbXBsV2l0aExheWVyKG1lcmdlZClcbiAgICAgICAgfSxcbiAgICAgICAgd2l0aExheWVyczogKFxuICAgICAgICAgIC4uLmV4dHJhczogUmVhZG9ubHlBcnJheTxMYXllci5MYXllcjxhbnksIG5ldmVyLCBhbnk+PlxuICAgICAgICApOiBNb2R1bGVJbXBsPFxuICAgICAgICAgIElkLFxuICAgICAgICAgIE1vZHVsZVNoYXBlPFNTY2hlbWEsIFNjaGVtYS5TY2hlbWE8QWN0aW9uc0Zyb21NYXA8QU1hcD4+LCBBTWFwPixcbiAgICAgICAgICBhbnlcbiAgICAgICAgPiA9PlxuICAgICAgICAgIGV4dHJhcy5yZWR1Y2U8TW9kdWxlSW1wbDxcbiAgICAgICAgICAgIElkLFxuICAgICAgICAgICAgTW9kdWxlU2hhcGU8U1NjaGVtYSwgU2NoZW1hLlNjaGVtYTxBY3Rpb25zRnJvbU1hcDxBTWFwPj4sIEFNYXA+LFxuICAgICAgICAgICAgYW55XG4gICAgICAgICAgPj4oXG4gICAgICAgICAgICAoaW1wbEFjYywgZXh0cmEpID0+IGltcGxBY2Mud2l0aExheWVyKGV4dHJhKSxcbiAgICAgICAgICAgIG1ha2VJbXBsV2l0aExheWVyKFxuICAgICAgICAgICAgICBsYXllciBhcyBMYXllci5MYXllcjxcbiAgICAgICAgICAgICAgICBpbXBvcnQoXCIuL2NvcmUvbW9kdWxlLmpzXCIpLk1vZHVsZVJ1bnRpbWU8XG4gICAgICAgICAgICAgICAgICBTdGF0ZU9mPHR5cGVvZiBzaGFwZT4sXG4gICAgICAgICAgICAgICAgICBBY3Rpb25PZjx0eXBlb2Ygc2hhcGU+XG4gICAgICAgICAgICAgICAgPixcbiAgICAgICAgICAgICAgICBuZXZlcixcbiAgICAgICAgICAgICAgICBhbnlcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgKVxuICAgICAgICAgICksXG4gICAgICB9KVxuXG4gICAgICAvLyBcdTRFQ0UgYmFzZUxheWVyIFx1NUYwMFx1NTlDQlx1RkYwQ1x1NEY5RFx1NkIyMVx1NTNFMFx1NTJBMCBpbXBvcnRzXHVGRjA4TGF5ZXIgXHU2MjE2XHU1MTc2XHU0RUQ2IE1vZHVsZUltcGwgXHU3Njg0IGxheWVyXHVGRjA5XG4gICAgICBjb25zdCBpbml0aWFsSW1wbCA9IG1ha2VJbXBsV2l0aExheWVyKFxuICAgICAgICBiYXNlTGF5ZXIgYXMgTGF5ZXIuTGF5ZXI8XG4gICAgICAgICAgaW1wb3J0KFwiLi9jb3JlL21vZHVsZS5qc1wiKS5Nb2R1bGVSdW50aW1lPFxuICAgICAgICAgICAgU3RhdGVPZjx0eXBlb2Ygc2hhcGU+LFxuICAgICAgICAgICAgQWN0aW9uT2Y8dHlwZW9mIHNoYXBlPlxuICAgICAgICAgID4sXG4gICAgICAgICAgbmV2ZXIsXG4gICAgICAgICAgYW55XG4gICAgICAgID5cbiAgICAgIClcblxuICAgICAgY29uc3QgaW1wb3J0cyA9IGNvbmZpZy5pbXBvcnRzID8/IFtdXG5cbiAgICAgIGNvbnN0IGZpbmFsSW1wbCA9IGltcG9ydHMucmVkdWNlPE1vZHVsZUltcGw8XG4gICAgICAgIElkLFxuICAgICAgICBNb2R1bGVTaGFwZTxTU2NoZW1hLCBTY2hlbWEuU2NoZW1hPEFjdGlvbnNGcm9tTWFwPEFNYXA+PiwgQU1hcD4sXG4gICAgICAgIGFueVxuICAgICAgPj4oKGltcGxBY2MsIGl0ZW0pID0+IHtcbiAgICAgICAgY29uc3QgbGF5ZXIgPVxuICAgICAgICAgIChpdGVtIGFzIE1vZHVsZUltcGw8YW55LCBBbnlNb2R1bGVTaGFwZSwgYW55PikuX3RhZyA9PT0gXCJNb2R1bGVJbXBsXCJcbiAgICAgICAgICAgID8gKGl0ZW0gYXMgTW9kdWxlSW1wbDxhbnksIEFueU1vZHVsZVNoYXBlLCBhbnk+KS5sYXllclxuICAgICAgICAgICAgOiAoaXRlbSBhcyBMYXllci5MYXllcjxhbnksIGFueSwgYW55PilcblxuICAgICAgICByZXR1cm4gaW1wbEFjYy53aXRoTGF5ZXIobGF5ZXIgYXMgTGF5ZXIuTGF5ZXI8YW55LCBuZXZlciwgYW55PilcbiAgICAgIH0sIGluaXRpYWxJbXBsKVxuXG4gICAgICByZXR1cm4gZmluYWxJbXBsXG4gICAgfSxcbiAgfSlcblxuICByZXR1cm4gbW9kdWxlSW5zdGFuY2UgYXMgTW9kdWxlSW5zdGFuY2U8XG4gICAgSWQsXG4gICAgTW9kdWxlU2hhcGU8U1NjaGVtYSwgU2NoZW1hLlNjaGVtYTxBY3Rpb25zRnJvbU1hcDxBTWFwPj4sIEFNYXA+XG4gID5cbn1cbiIsICJpbXBvcnQge1xuICBFZmZlY3QsXG4gIFN0cmVhbSxcbiAgU3Vic2NyaXB0aW9uUmVmLFxuICBQdWJTdWIsXG4gIFNjb3BlLFxuICBDb250ZXh0LFxuICBSZWYsXG4gIEZpYmVyLFxuICBGaWJlclJlZixcbiAgRXhpdCxcbiAgQ2F1c2UsXG4gIE9wdGlvbixcbiAgUXVldWUsXG4gIERlZmVycmVkLFxufSBmcm9tIFwiZWZmZWN0XCJcbmltcG9ydCB0eXBlIHsgTG9naWNQbGFuLCBNb2R1bGVSdW50aW1lIGFzIFB1YmxpY01vZHVsZVJ1bnRpbWUgfSBmcm9tIFwiLi9jb3JlL21vZHVsZS5qc1wiXG5pbXBvcnQgKiBhcyBMaWZlY3ljbGUgZnJvbSBcIi4vTGlmZWN5Y2xlLmpzXCJcbmltcG9ydCAqIGFzIERlYnVnIGZyb20gXCIuL2NvcmUvRGVidWdTaW5rLmpzXCJcbmltcG9ydCAqIGFzIFN0YXRlVHJhbnNhY3Rpb24gZnJvbSBcIi4vY29yZS9TdGF0ZVRyYW5zYWN0aW9uLmpzXCJcbmltcG9ydCAqIGFzIFRhc2tSdW5uZXIgZnJvbSBcIi4vY29yZS9UYXNrUnVubmVyLmpzXCJcbmltcG9ydCB7XG4gIGdldERlZmF1bHRTdGF0ZVR4bkluc3RydW1lbnRhdGlvbixcbiAgaXNEZXZFbnYsXG4gIFN0YXRlVHJhbnNhY3Rpb25Db25maWdUYWcsXG59IGZyb20gXCIuL2NvcmUvZW52LmpzXCJcbmltcG9ydCB0eXBlIHsgU3RhdGVUcmFuc2FjdGlvbkluc3RydW1lbnRhdGlvbiB9IGZyb20gXCIuL2NvcmUvZW52LmpzXCJcbmltcG9ydCAqIGFzIFJlZHVjZXJEaWFnbm9zdGljcyBmcm9tIFwiLi9jb3JlL1JlZHVjZXJEaWFnbm9zdGljcy5qc1wiXG5pbXBvcnQgKiBhcyBMaWZlY3ljbGVEaWFnbm9zdGljcyBmcm9tIFwiLi9jb3JlL0xpZmVjeWNsZURpYWdub3N0aWNzLmpzXCJcbmltcG9ydCAqIGFzIExvZ2ljRGlhZ25vc3RpY3MgZnJvbSBcIi4vY29yZS9Mb2dpY0RpYWdub3N0aWNzLmpzXCJcbmltcG9ydCB7IGdsb2JhbExvZ2ljUGhhc2VSZWYgfSBmcm9tIFwiLi9Cb3VuZEFwaVJ1bnRpbWUuanNcIlxuaW1wb3J0ICogYXMgRWZmZWN0T3AgZnJvbSBcIi4uLy4uL2VmZmVjdG9wLmpzXCJcbmltcG9ydCAqIGFzIEVmZmVjdE9wQ29yZSBmcm9tIFwiLi9FZmZlY3RPcENvcmUuanNcIlxuaW1wb3J0IHR5cGUgeyBTdGF0ZVRyYWl0UHJvZ3JhbSB9IGZyb20gXCIuLi9zdGF0ZS10cmFpdC9tb2RlbC5qc1wiXG5pbXBvcnQgKiBhcyBTdGF0ZVRyYWl0Q29udmVyZ2UgZnJvbSBcIi4uL3N0YXRlLXRyYWl0L2NvbnZlcmdlLmpzXCJcbmltcG9ydCAqIGFzIFN0YXRlVHJhaXRWYWxpZGF0ZSBmcm9tIFwiLi4vc3RhdGUtdHJhaXQvdmFsaWRhdGUuanNcIlxuaW1wb3J0ICogYXMgU3RhdGVUcmFpdFNvdXJjZSBmcm9tIFwiLi4vc3RhdGUtdHJhaXQvc291cmNlLmpzXCJcbmltcG9ydCAqIGFzIFJvd0lkIGZyb20gXCIuLi9zdGF0ZS10cmFpdC9yb3dpZC5qc1wiXG5cbi8qKlxuICogXHU4RkRCXHU3QTBCXHU3RUE3XHU4RkQwXHU4ODRDXHU2NUY2XHU2Q0U4XHU1MThDXHU4ODY4XHVGRjA4ZGVidWctb25seSAvIG5vbi1hdXRob3JpdGF0aXZlXHVGRjA5XHVGRjFBXG4gKiAtIGtleVx1RkYxQU1vZHVsZSBUYWdcdUZGMDhNb2R1bGVJbnN0YW5jZSBcdTY3MkNcdThFQUJcdUZGMDlcdUZGMUJcbiAqIC0gdmFsdWVcdUZGMUFcdTVCRjlcdTVFOTRcdTc2ODQgTW9kdWxlUnVudGltZSBcdTVCOUVcdTRGOEJcdTMwMDJcbiAqXG4gKiBcdTdFQTZcdTY3NUZcdUZGMUFcbiAqIC0gXHU4RkQ5XHU2NjJGXHU0RTAwXHU0RTJBXHUyMDFDXHU1MzU1XHU2OUZEXHU4ODY4XHUyMDFEXHVGRjFBXHU1NDBDXHU0RTAwIFRhZyBcdTUzRUFcdTgwRkRcdTY2MjBcdTVDMDRcdTUyMzBcdTRFMDBcdTRFMkEgcnVudGltZVx1RkYwQ1x1NjVFMFx1NkNENVx1ODg2OFx1OEZCRVx1NTkxQVx1NUI5RVx1NEY4Qi9cdTU5MUEgcm9vdCBcdTZCNjNcdTc4NkVcdThCRURcdTRFNDlcdUZGMUJcbiAqIC0gXHU3OTgxXHU2QjYyXHU0RjVDXHU0RTNBXHU4OUUzXHU2NzkwXHU1MTVDXHU1RTk1XHVGRjA4c3RyaWN0IFx1OUVEOFx1OEJBNFx1NEUwQlx1N0YzQVx1NTkzMVx1NjNEMFx1NEY5Qlx1ODAwNVx1NUZDNVx1OTg3Qlx1NTkzMVx1OEQyNVx1RkYwOVx1RkYxQlxuICogLSBcdTRFQzVcdTUxNDFcdThCQjhcdTc1MjhcdTRFOEUgZGV2dG9vbHMvXHU1MTg1XHU5MEU4XHU4QzAzXHU4QkQ1XHU0RTBFXHU4RkM3XHU2RTIxXHU2NzFGXHU3Njg0XHU1MTg1XHU5MEU4XHU4MEZEXHU1MjlCXHVGRjA4XHU1RTc2XHU1NzI4XHU1M0VGXHU4ODRDXHU2NUY2XHU4RkMxXHU1NDExXHU2NjNFXHU1RjBGXHU1M0U1XHU2N0M0L0xpbmtcdUZGMDlcdTMwMDJcbiAqL1xuY29uc3QgcnVudGltZVJlZ2lzdHJ5ID0gbmV3IFdlYWtNYXA8XG4gIENvbnRleHQuVGFnPGFueSwgUHVibGljTW9kdWxlUnVudGltZTxhbnksIGFueT4+LFxuICBQdWJsaWNNb2R1bGVSdW50aW1lPGFueSwgYW55PlxuPigpXG5cbi8qKlxuICogXHU2MzA5IG1vZHVsZUlkICsgcnVudGltZUlkIFx1N0VGNFx1NUVBNlx1N0QyMlx1NUYxNVx1NzY4NFx1OEZEMFx1ODg0Q1x1NjVGNlx1NkNFOFx1NTE4Q1x1ODg2OFx1RkYxQVxuICogLSBcdTRFM0JcdTg5ODFcdTc1MjhcdTRFOEUgRGV2dG9vbHMgLyBcdTUxODVcdTkwRThcdThDMDNcdThCRDVcdTYzMDlcdTVCOUVcdTRGOEJcdTVCOUFcdTRGNEQgTW9kdWxlUnVudGltZVx1RkYxQlxuICogLSBrZXkgXHU1RjYyXHU1OTgyIGAke21vZHVsZUlkfTo6JHtydW50aW1lSWR9YFx1MzAwMlxuICovXG5jb25zdCBydW50aW1lQnlJbnN0YW5jZUtleSA9IG5ldyBNYXA8c3RyaW5nLCBQdWJsaWNNb2R1bGVSdW50aW1lPGFueSwgYW55Pj4oKVxuXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJSdW50aW1lID0gPFMsIEE+KFxuICB0YWc6IENvbnRleHQuVGFnPGFueSwgUHVibGljTW9kdWxlUnVudGltZTxTLCBBPj4sXG4gIHJ1bnRpbWU6IFB1YmxpY01vZHVsZVJ1bnRpbWU8UywgQT5cbik6IHZvaWQgPT4ge1xuICBydW50aW1lUmVnaXN0cnkuc2V0KFxuICAgIHRhZyBhcyBDb250ZXh0LlRhZzxhbnksIFB1YmxpY01vZHVsZVJ1bnRpbWU8YW55LCBhbnk+PixcbiAgICBydW50aW1lIGFzIFB1YmxpY01vZHVsZVJ1bnRpbWU8YW55LCBhbnk+XG4gIClcbn1cblxuZXhwb3J0IGNvbnN0IHVucmVnaXN0ZXJSdW50aW1lID0gKFxuICB0YWc6IENvbnRleHQuVGFnPGFueSwgUHVibGljTW9kdWxlUnVudGltZTxhbnksIGFueT4+XG4pOiB2b2lkID0+IHtcbiAgcnVudGltZVJlZ2lzdHJ5LmRlbGV0ZSh0YWcpXG59XG5cbmV4cG9ydCBjb25zdCBnZXRSZWdpc3RlcmVkUnVudGltZSA9IDxTLCBBPihcbiAgdGFnOiBDb250ZXh0LlRhZzxhbnksIFB1YmxpY01vZHVsZVJ1bnRpbWU8UywgQT4+XG4pOiBQdWJsaWNNb2R1bGVSdW50aW1lPFMsIEE+IHwgdW5kZWZpbmVkID0+XG4gIHJ1bnRpbWVSZWdpc3RyeS5nZXQoXG4gICAgdGFnIGFzIENvbnRleHQuVGFnPGFueSwgUHVibGljTW9kdWxlUnVudGltZTxhbnksIGFueT4+XG4gICkgYXMgUHVibGljTW9kdWxlUnVudGltZTxTLCBBPiB8IHVuZGVmaW5lZFxuXG5leHBvcnQgY29uc3QgZ2V0UnVudGltZUJ5TW9kdWxlQW5kSW5zdGFuY2UgPSA8UywgQT4oXG4gIG1vZHVsZUlkOiBzdHJpbmcsXG4gIGluc3RhbmNlSWQ6IHN0cmluZyxcbik6IFB1YmxpY01vZHVsZVJ1bnRpbWU8UywgQT4gfCB1bmRlZmluZWQgPT5cbiAgcnVudGltZUJ5SW5zdGFuY2VLZXkuZ2V0KFxuICAgIGAke21vZHVsZUlkfTo6JHtpbnN0YW5jZUlkfWAsXG4gICkgYXMgUHVibGljTW9kdWxlUnVudGltZTxTLCBBPiB8IHVuZGVmaW5lZFxuXG5leHBvcnQgaW50ZXJmYWNlIE1vZHVsZVJ1bnRpbWVPcHRpb25zPFMsIEEsIFIgPSBuZXZlcj4ge1xuICByZWFkb25seSB0YWc/OiBDb250ZXh0LlRhZzxhbnksIFB1YmxpY01vZHVsZVJ1bnRpbWU8UywgQT4+XG4gIC8qKlxuICAgKiBcdTVGNTNcdTUyNERcdTVCOUVcdTRGOEIgc2NvcGVcdUZGMDhpbXBvcnRzLXNjb3BlXHVGRjA5XHU0RTBCXHU1M0VGXHU4OUUzXHU2NzkwXHU3Njg0XHUyMDFDXHU1QjUwXHU2QTIxXHU1NzU3XHUyMDFEXHU2RTA1XHU1MzU1XHVGRjFBXG4gICAqIC0gXHU0RUM1XHU3NTI4XHU0RThFXHU2Nzg0XHU5MDIwXHU2NzAwXHU1QzBGXHU1MzE2XHU3Njg0IGltcG9ydHMgaW5qZWN0b3JcdUZGMDhNb2R1bGVUb2tlbiAtPiBNb2R1bGVSdW50aW1lXHVGRjA5XHVGRjFCXG4gICAqIC0gXHU3OTgxXHU2QjYyXHU2MjhBXHU1QjhDXHU2NTc0IENvbnRleHQgXHU2MzU1XHU4M0I3XHU4RkRCIE1vZHVsZVJ1bnRpbWVcdUZGMDhcdTkwN0ZcdTUxNEQgcm9vdC9iYXNlIHNlcnZpY2VzIFx1ODhBQlx1NjEwRlx1NTkxNlx1NUYxNVx1NzUyOFx1RkYwOVx1MzAwMlxuICAgKi9cbiAgcmVhZG9ubHkgaW1wb3J0cz86IFJlYWRvbmx5QXJyYXk8XG4gICAgQ29udGV4dC5UYWc8YW55LCBQdWJsaWNNb2R1bGVSdW50aW1lPGFueSwgYW55Pj5cbiAgPlxuICByZWFkb25seSBsb2dpY3M/OiBSZWFkb25seUFycmF5PFxuICAgIEVmZmVjdC5FZmZlY3Q8YW55LCBhbnksIFI+IHwgTG9naWNQbGFuPGFueSwgUiwgYW55PlxuICA+XG4gIHJlYWRvbmx5IG1vZHVsZUlkPzogc3RyaW5nXG4gIHJlYWRvbmx5IGNyZWF0ZVN0YXRlPzogRWZmZWN0LkVmZmVjdDxTdWJzY3JpcHRpb25SZWYuU3Vic2NyaXB0aW9uUmVmPFM+LCBuZXZlciwgU2NvcGUuU2NvcGU+XG4gIHJlYWRvbmx5IGNyZWF0ZUFjdGlvbkh1Yj86IEVmZmVjdC5FZmZlY3Q8UHViU3ViLlB1YlN1YjxBPiwgbmV2ZXIsIFNjb3BlLlNjb3BlPlxuICAvKipcbiAgICogUHJpbWFyeSBSZWR1Y2VyIFx1NjYyMFx1NUMwNFx1RkYxQWBfdGFnIC0+IChzdGF0ZSwgYWN0aW9uKSA9PiBuZXh0U3RhdGVgXHUzMDAyXG4gICAqXG4gICAqIC0gXHU4MkU1XHU2M0QwXHU0RjlCXHVGRjBDXHU1MjE5IGRpc3BhdGNoIFx1NEYxQVx1NTcyOFx1NTNEMVx1NUUwMyBBY3Rpb24gXHU0RTRCXHU1MjREXHU1MTQ4XHU1NDBDXHU2QjY1XHU1RTk0XHU3NTI4XHU1QkY5XHU1RTk0IHJlZHVjZXJcdUZGMUJcbiAgICogLSBcdTgyRTVcdTY3RDBcdTRFMkEgYF90YWdgIFx1NjcyQVx1NUI5QVx1NEU0OSByZWR1Y2VyXHVGRjBDXHU1MjE5XHU4ODRDXHU0RTNBXHU0RTBFXHU1RjUzXHU1MjREIHdhdGNoZXItb25seSBcdTZBMjFcdTVGMEZcdTRFMDBcdTgxRjRcdTMwMDJcbiAgICovXG4gIHJlYWRvbmx5IHJlZHVjZXJzPzogUmVhZG9ubHk8UmVjb3JkPHN0cmluZywgKHN0YXRlOiBTLCBhY3Rpb246IEEpID0+IFM+PlxuICAvKipcbiAgICogXHU2QTIxXHU1NzU3XHU3RUE3IFN0YXRlVHJhbnNhY3Rpb24gXHU5MTREXHU3RjZFXHVGRjFBXG4gICAqIC0gXHU4MkU1XHU2M0QwXHU0RjlCIGluc3RydW1lbnRhdGlvblx1RkYwQ1x1NTIxOVx1NEYxOFx1NTE0OFx1NEU4RSBSdW50aW1lIFx1N0VBN1x1OTE0RFx1N0Y2RVx1NEUwRSBOT0RFX0VOViBcdTlFRDhcdThCQTRcdUZGMUJcbiAgICogLSBcdTgyRTVcdTY3MkFcdTYzRDBcdTRGOUJcdUZGMENcdTUyMTlcdTkwMDBcdTU2REVcdTUyMzAgUnVudGltZSBcdTdFQTdcdTkxNERcdTdGNkVcdUZGMDhcdTU5ODJcdTY3MDlcdUZGMDlcdTYyMTYgZ2V0RGVmYXVsdFN0YXRlVHhuSW5zdHJ1bWVudGF0aW9uKClcdTMwMDJcbiAgICovXG4gIHJlYWRvbmx5IHN0YXRlVHJhbnNhY3Rpb24/OiB7XG4gICAgcmVhZG9ubHkgaW5zdHJ1bWVudGF0aW9uPzogU3RhdGVUcmFuc2FjdGlvbkluc3RydW1lbnRhdGlvblxuICAgIHJlYWRvbmx5IHRyYWl0Q29udmVyZ2VCdWRnZXRNcz86IG51bWJlclxuICAgIHJlYWRvbmx5IHRyYWl0Q29udmVyZ2VNb2RlPzogXCJmdWxsXCIgfCBcImRpcnR5XCJcbiAgfVxufVxuXG50eXBlIFBoYXNlUmVmID0geyBjdXJyZW50OiBcInNldHVwXCIgfCBcInJ1blwiIH1cblxuY29uc3QgY3JlYXRlUGhhc2VSZWYgPSAoKTogUGhhc2VSZWYgPT4gKHsgY3VycmVudDogXCJydW5cIiB9KVxuXG50eXBlIEltcG9ydHNTY29wZSA9IHtcbiAgcmVhZG9ubHkga2luZDogXCJpbXBvcnRzLXNjb3BlXCJcbiAgcmVhZG9ubHkgZ2V0OiAoXG4gICAgbW9kdWxlOiBDb250ZXh0LlRhZzxhbnksIFB1YmxpY01vZHVsZVJ1bnRpbWU8YW55LCBhbnk+PixcbiAgKSA9PiBQdWJsaWNNb2R1bGVSdW50aW1lPGFueSwgYW55PiB8IHVuZGVmaW5lZFxufVxuXG5jb25zdCBnZXRNaWRkbGV3YXJlU3RhY2sgPSAoKTogRWZmZWN0LkVmZmVjdDxcbiAgRWZmZWN0T3AuTWlkZGxld2FyZVN0YWNrLFxuICBuZXZlcixcbiAgbmV2ZXJcbj4gPT5cbiAgRWZmZWN0LnNlcnZpY2VPcHRpb24oRWZmZWN0T3BDb3JlLkVmZmVjdE9wTWlkZGxld2FyZVRhZykucGlwZShcbiAgICBFZmZlY3QubWFwKChtYXliZSkgPT5cbiAgICAgIE9wdGlvbi5pc1NvbWUobWF5YmUpID8gbWF5YmUudmFsdWUuc3RhY2sgOiBbXSxcbiAgICApLFxuICApXG5cbmV4cG9ydCBjb25zdCBtYWtlID0gPFMsIEEsIFIgPSBuZXZlcj4oXG4gIGluaXRpYWxTdGF0ZTogUyxcbiAgb3B0aW9uczogTW9kdWxlUnVudGltZU9wdGlvbnM8UywgQSwgUj4gPSB7fVxuKTogRWZmZWN0LkVmZmVjdDxQdWJsaWNNb2R1bGVSdW50aW1lPFMsIEE+LCBuZXZlciwgU2NvcGUuU2NvcGUgfCBSPiA9PiB7XG4gIGNvbnN0IHByb2dyYW0gPSBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG4gICAgY29uc3Qgc3RhdGVSZWYgPSBvcHRpb25zLmNyZWF0ZVN0YXRlXG4gICAgICA/IHlpZWxkKiBvcHRpb25zLmNyZWF0ZVN0YXRlXG4gICAgICA6IHlpZWxkKiBTdWJzY3JpcHRpb25SZWYubWFrZShpbml0aWFsU3RhdGUpXG4gICAgY29uc3QgYWN0aW9uSHViID0gb3B0aW9ucy5jcmVhdGVBY3Rpb25IdWJcbiAgICAgID8geWllbGQqIG9wdGlvbnMuY3JlYXRlQWN0aW9uSHViXG4gICAgICA6IHlpZWxkKiBQdWJTdWIudW5ib3VuZGVkPEE+KClcbiAgICBjb25zdCBsaWZlY3ljbGUgPSB5aWVsZCogTGlmZWN5Y2xlLm1ha2VMaWZlY3ljbGVNYW5hZ2VyXG5cbiAgICBjb25zdCBpZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnNsaWNlKDIpXG5cbiAgICAvLyBcdTg5RTNcdTY3OTAgU3RhdGVUcmFuc2FjdGlvbiBcdTg5QzJcdTZENEJcdTdFQTdcdTUyMkJcdUZGMUFcbiAgICAvLyAtIFx1NEYxOFx1NTE0OFx1NEY3Rlx1NzUyOCBNb2R1bGVSdW50aW1lT3B0aW9ucy5zdGF0ZVRyYW5zYWN0aW9uLmluc3RydW1lbnRhdGlvblx1RkYxQlxuICAgIC8vIC0gXHU1MTc2XHU2QjIxXHU1QzFEXHU4QkQ1XHU0RUNFIFJ1bnRpbWUgXHU3RUE3IFN0YXRlVHJhbnNhY3Rpb25Db25maWcgU2VydmljZSBcdThCRkJcdTUzRDZcdTlFRDhcdThCQTRcdTUwM0NcdUZGMUJcbiAgICAvLyAtIFx1NjcwMFx1NTQwRVx1OTAwMFx1NTZERVx1NTIzMFx1NTdGQVx1NEU4RSBOT0RFX0VOViBcdTc2ODRcdTlFRDhcdThCQTRcdTdCNTZcdTc1NjVcdTMwMDJcbiAgICBjb25zdCBydW50aW1lQ29uZmlnT3B0ID0geWllbGQqIEVmZmVjdC5zZXJ2aWNlT3B0aW9uKFN0YXRlVHJhbnNhY3Rpb25Db25maWdUYWcpXG4gICAgY29uc3QgcnVudGltZUluc3RydW1lbnRhdGlvbjogU3RhdGVUcmFuc2FjdGlvbkluc3RydW1lbnRhdGlvbiB8IHVuZGVmaW5lZCA9XG4gICAgICBPcHRpb24uaXNTb21lKHJ1bnRpbWVDb25maWdPcHQpXG4gICAgICAgID8gcnVudGltZUNvbmZpZ09wdC52YWx1ZS5pbnN0cnVtZW50YXRpb25cbiAgICAgICAgOiB1bmRlZmluZWRcbiAgICBjb25zdCBydW50aW1lVHJhaXRDb252ZXJnZUJ1ZGdldE1zOiBudW1iZXIgfCB1bmRlZmluZWQgPVxuICAgICAgT3B0aW9uLmlzU29tZShydW50aW1lQ29uZmlnT3B0KVxuICAgICAgICA/IHJ1bnRpbWVDb25maWdPcHQudmFsdWUudHJhaXRDb252ZXJnZUJ1ZGdldE1zXG4gICAgICAgIDogdW5kZWZpbmVkXG4gICAgY29uc3QgcnVudGltZVRyYWl0Q29udmVyZ2VNb2RlOiBcImZ1bGxcIiB8IFwiZGlydHlcIiB8IHVuZGVmaW5lZCA9XG4gICAgICBPcHRpb24uaXNTb21lKHJ1bnRpbWVDb25maWdPcHQpXG4gICAgICAgID8gcnVudGltZUNvbmZpZ09wdC52YWx1ZS50cmFpdENvbnZlcmdlTW9kZVxuICAgICAgICA6IHVuZGVmaW5lZFxuXG4gICAgY29uc3QgaW5zdHJ1bWVudGF0aW9uOiBTdGF0ZVRyYW5zYWN0aW9uSW5zdHJ1bWVudGF0aW9uID1cbiAgICAgIG9wdGlvbnMuc3RhdGVUcmFuc2FjdGlvbj8uaW5zdHJ1bWVudGF0aW9uID8/XG4gICAgICBydW50aW1lSW5zdHJ1bWVudGF0aW9uID8/XG4gICAgICBnZXREZWZhdWx0U3RhdGVUeG5JbnN0cnVtZW50YXRpb24oKVxuXG4gICAgY29uc3Qgbm9ybWFsaXplQnVkZ2V0TXMgPSAobXM6IHVua25vd24pOiBudW1iZXIgfCB1bmRlZmluZWQgPT5cbiAgICAgIHR5cGVvZiBtcyA9PT0gXCJudW1iZXJcIiAmJiBOdW1iZXIuaXNGaW5pdGUobXMpICYmIG1zID4gMCA/IG1zIDogdW5kZWZpbmVkXG5cbiAgICBjb25zdCB0cmFpdENvbnZlcmdlQnVkZ2V0TXM6IG51bWJlciA9XG4gICAgICBub3JtYWxpemVCdWRnZXRNcyhvcHRpb25zLnN0YXRlVHJhbnNhY3Rpb24/LnRyYWl0Q29udmVyZ2VCdWRnZXRNcykgPz9cbiAgICAgIG5vcm1hbGl6ZUJ1ZGdldE1zKHJ1bnRpbWVUcmFpdENvbnZlcmdlQnVkZ2V0TXMpID8/XG4gICAgICAyMDBcblxuICAgIGNvbnN0IG5vcm1hbGl6ZUNvbnZlcmdlTW9kZSA9IChtb2RlOiB1bmtub3duKTogXCJmdWxsXCIgfCBcImRpcnR5XCIgfCB1bmRlZmluZWQgPT5cbiAgICAgIG1vZGUgPT09IFwiZnVsbFwiIHx8IG1vZGUgPT09IFwiZGlydHlcIiA/IG1vZGUgOiB1bmRlZmluZWRcblxuICAgIGNvbnN0IHRyYWl0Q29udmVyZ2VNb2RlOiBcImZ1bGxcIiB8IFwiZGlydHlcIiA9XG4gICAgICBub3JtYWxpemVDb252ZXJnZU1vZGUob3B0aW9ucy5zdGF0ZVRyYW5zYWN0aW9uPy50cmFpdENvbnZlcmdlTW9kZSkgPz9cbiAgICAgIG5vcm1hbGl6ZUNvbnZlcmdlTW9kZShydW50aW1lVHJhaXRDb252ZXJnZU1vZGUpID8/XG4gICAgICBcImZ1bGxcIlxuXG4gICAgLy8gU3RhdGVUcmFuc2FjdGlvbiBcdTRFMEFcdTRFMEJcdTY1ODdcdUZGMUFcbiAgICAvLyAtIFx1NjMwOSBNb2R1bGVSdW50aW1lIFx1N0VGNFx1NUVBNlx1N0VGNFx1NjJBNFx1NTM1NVx1NkQzQlx1OERDM1x1NEU4Qlx1NTJBMVx1RkYxQlxuICAgIC8vIC0gXHU4MDVBXHU1NDA4XHU2NzJDXHU1QjlFXHU0RjhCXHU0RTBCXHU2MjQwXHU2NzA5XHU5MDNCXHU4RjkxXHU1MTY1XHU1M0UzXHVGRjA4ZGlzcGF0Y2ggLyBUcmFpdHMgLyBzb3VyY2UtcmVmcmVzaCBcdTdCNDlcdUZGMDlcdTc2ODRcdTcyQjZcdTYwMDFcdTUxOTlcdTUxNjVcdUZGMUJcbiAgICAvLyAtIFx1NTQwRVx1N0VFRFx1NjVCMFx1NTg5RVx1NzY4NFx1NTE2NVx1NTNFM1x1RkYwOFx1NTk4MiBzZXJ2aWNlIFx1NTZERVx1NTE5OSAvIGRldnRvb2xzIFx1NjRDRFx1NEY1Q1x1RkYwOVx1NEU1Rlx1NUZDNVx1OTg3Qlx1OTAxQVx1OEZDN1x1NTQwQ1x1NEUwMFx1NEUwQVx1NEUwQlx1NjU4N1x1NEUwRVx1OTYxRlx1NTIxN1x1NjNBNVx1NTE2NVx1MzAwMlxuICAgIGNvbnN0IHR4bkNvbnRleHQgPSBTdGF0ZVRyYW5zYWN0aW9uLm1ha2VDb250ZXh0PFM+KHtcbiAgICAgIG1vZHVsZUlkOiBvcHRpb25zLm1vZHVsZUlkLFxuICAgICAgcnVudGltZUlkOiBpZCxcbiAgICAgIGluc3RydW1lbnRhdGlvbixcbiAgICB9KVxuXG4gICAgLy8gU3RhdGVUcmFpdCBQcm9ncmFtXHVGRjA4XHU3NTMxIFN0YXRlVHJhaXQuaW5zdGFsbCBcdTZDRThcdTUxOENcdUZGMDlcdUZGMUFcbiAgICAvLyAtIFx1OEZEMFx1ODg0Q1x1NjVGNlx1NTcyOFx1NkJDRlx1NkIyMVx1NEU4Qlx1NTJBMVx1NjNEMFx1NEVBNFx1NTI0RFx1NUJGOVx1NTE3Nlx1NjI2N1x1ODg0Q1x1NkQzRVx1NzUxRlx1NjUzNlx1NjU1Qlx1RkYwODAvMSBjb21taXQgXHU4QkVEXHU0RTQ5XHU3Njg0XHU2ODM4XHU1RkMzXHVGRjA5XHUzMDAyXG4gICAgbGV0IHN0YXRlVHJhaXRQcm9ncmFtOiBTdGF0ZVRyYWl0UHJvZ3JhbTxhbnk+IHwgdW5kZWZpbmVkXG4gICAgbGV0IHN0YXRlVHJhaXRMaXN0Q29uZmlnczogUmVhZG9ubHlBcnJheTxSb3dJZC5MaXN0Q29uZmlnPiA9IFtdXG4gICAgY29uc3Qgcm93SWRTdG9yZSA9IG5ldyBSb3dJZC5Sb3dJZFN0b3JlKClcblxuICAgIC8qKlxuICAgICAqIFx1NEU4Qlx1NTJBMVx1NTM4Nlx1NTNGMlx1RkYxQVxuICAgICAqIC0gXHU2MzA5IE1vZHVsZVJ1bnRpbWUgXHU3RUY0XHU1RUE2XHU3RUY0XHU2MkE0XHU2NzAwXHU4RkQxXHU4MkU1XHU1RTcyIFN0YXRlVHJhbnNhY3Rpb24gXHU4QkIwXHU1RjU1XHVGRjFCXG4gICAgICogLSBcdTRFQzVcdTc1MjhcdTRFOEUgZGV2L3Rlc3QgXHU3M0FGXHU1ODgzXHU0RTBCXHU3Njg0IERldnRvb2xzIFx1ODBGRFx1NTI5Qlx1RkYwOFx1NTk4Mlx1NjVGNlx1OTVGNFx1NjVDNVx1ODg0Q1x1MzAwMVx1NEU4Qlx1NTJBMVx1Njk4Mlx1ODk4MVx1ODlDNlx1NTZGRVx1RkYwOVx1RkYxQlxuICAgICAqIC0gXHU1QkI5XHU5MUNGXHU2M0E3XHU1MjM2XHU1NzI4XHU2NzA5XHU5NjUwXHU0RTBBXHU3NTRDXHVGRjBDXHU5MDdGXHU1MTREXHU5NTdGXHU2NzFGXHU4RkQwXHU4ODRDXHU1NzNBXHU2NjZGXHU0RTBCXHU1MTg1XHU1QjU4XHU2NUUwXHU5NjUwXHU1ODlFXHU5NTdGXHUzMDAyXG4gICAgICovXG4gICAgY29uc3QgbWF4VHhuSGlzdG9yeSA9IDUwMFxuICAgIGNvbnN0IHR4bkhpc3Rvcnk6IEFycmF5PFN0YXRlVHJhbnNhY3Rpb24uU3RhdGVUcmFuc2FjdGlvbjxTPj4gPSBbXVxuICAgIGNvbnN0IHR4bkJ5SWQgPSBuZXcgTWFwPHN0cmluZywgU3RhdGVUcmFuc2FjdGlvbi5TdGF0ZVRyYW5zYWN0aW9uPFM+PigpXG5cbiAgICAvKipcbiAgICAgKiBcdTRFOEJcdTUyQTFcdTk2MUZcdTUyMTdcdUZGMUFcbiAgICAgKiAtIFx1NjMwOSBGSUZPIFx1OTg3QVx1NUU4Rlx1NEUzMlx1ODg0Q1x1NjI2N1x1ODg0Q1x1NkJDRlx1NEUyQVx1OTAzQlx1OEY5MVx1NTE2NVx1NTNFM1x1RkYwOGRpc3BhdGNoIC8gc291cmNlLXJlZnJlc2ggLyBcdTU0MEVcdTdFRURcdTYyNjlcdTVDNTVcdUZGMDlcdUZGMUJcbiAgICAgKiAtIFx1NTM1NVx1NUI5RVx1NEY4Qlx1NTE4NVx1NEZERFx1OEJDMVx1NEUwMFx1NkIyMVx1NTNFQVx1NTkwNFx1NzQwNlx1NEUwMFx1NEUyQVx1NEU4Qlx1NTJBMVx1RkYwQ1x1NEUwRFx1NTQwQ1x1NUI5RVx1NEY4Qlx1NEU0Qlx1OTVGNFx1NEVDRFx1NTNFRlx1NUU3Nlx1ODg0Q1x1MzAwMlxuICAgICAqL1xuICAgIGNvbnN0IHR4blF1ZXVlID0geWllbGQqIFF1ZXVlLnVuYm91bmRlZDxFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBhbnk+PigpXG5cbiAgICAvLyBcdTU0MEVcdTUzRjBcdTZEODhcdThEMzkgRmliZXJcdUZGMUFcdTRGOURcdTZCMjFcdTYyNjdcdTg4NENcdTk2MUZcdTUyMTdcdTRFMkRcdTc2ODRcdTRFOEJcdTUyQTEgRWZmZWN0XHUzMDAyXG4gICAgeWllbGQqIEVmZmVjdC5mb3JrU2NvcGVkKFxuICAgICAgRWZmZWN0LmZvcmV2ZXIoXG4gICAgICAgIEVmZmVjdC5nZW4oZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICBjb25zdCBlZmYgPSB5aWVsZCogUXVldWUudGFrZSh0eG5RdWV1ZSlcbiAgICAgICAgICB5aWVsZCogZWZmXG4gICAgICAgIH0pLFxuICAgICAgKSxcbiAgICApXG5cbiAgICAvKipcbiAgICAgKiBcdTVDMDZcdTdFRDlcdTVCOUFcdTRFOEJcdTUyQTEgRWZmZWN0IFx1NTE2NVx1OTYxRlx1RkYwQ1x1NUU3Nlx1NTcyOFx1NUY1M1x1NTI0RCBGaWJlciBcdTRFMkRcdTdCNDlcdTVGODVcdTUxNzZcdTVCOENcdTYyMTBcdUZGMUFcbiAgICAgKiAtIFx1Nzg2RVx1NEZERFx1NjI0MFx1NjcwOVx1OTAzQlx1OEY5MVx1NTE2NVx1NTNFM1x1OTBGRFx1OTAxQVx1OEZDN1x1NTQwQ1x1NEUwMFx1NEUyQVx1OTYxRlx1NTIxN1x1NEUzMlx1ODg0Q1x1NjI2N1x1ODg0Q1x1RkYxQlxuICAgICAqIC0gXHU4QzAzXHU3NTI4XHU2NUI5XHU0RUNEXHU0RUU1XHU1MzU1XHU2QjIxIEVmZmVjdCBcdTc2ODRcdTVGNjJcdTVGMEZcdTYxMUZcdTc3RTVcdThCRTVcdTUxNjVcdTUzRTNcdUZGMDhcdTRGRERcdTYzMDFcdTUzOUZcdTY3MDkgQVBJIFx1NUY2Mlx1NzJCNlx1RkYwOVx1MzAwMlxuICAgICAqL1xuICAgIGNvbnN0IGVucXVldWVUcmFuc2FjdGlvbiA9IDxBMiwgRTIsIFIyPihcbiAgICAgIGVmZjogRWZmZWN0LkVmZmVjdDxBMiwgRTIsIFIyPixcbiAgICApOiBFZmZlY3QuRWZmZWN0PEEyLCBFMiwgbmV2ZXI+ID0+XG4gICAgICBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGNvbnN0IGRvbmUgPSB5aWVsZCogRGVmZXJyZWQubWFrZTxFeGl0LkV4aXQ8QTIsIEUyPj4oKVxuXG4gICAgICAgIC8vIFx1NEVGQlx1NTJBMVx1NUZDNVx1OTg3Qlx1MjAxQ1x1NkMzOFx1NEUwRFx1NTkzMVx1OEQyNVx1MjAxRFx1RkYwQ1x1NTQyNlx1NTIxOVx1NEYxQVx1NTM2MVx1NkI3Qlx1OTYxRlx1NTIxN1x1NkQ4OFx1OEQzOSBGaWJlclx1MzAwMlxuICAgICAgICBjb25zdCB0YXNrOiBFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBhbnk+ID0gZWZmLnBpcGUoXG4gICAgICAgICAgRWZmZWN0LmV4aXQsXG4gICAgICAgICAgRWZmZWN0LmZsYXRNYXAoKGV4aXQpID0+IERlZmVycmVkLnN1Y2NlZWQoZG9uZSwgZXhpdCkpLFxuICAgICAgICAgIEVmZmVjdC5hc1ZvaWQsXG4gICAgICAgIClcblxuICAgICAgICB5aWVsZCogUXVldWUub2ZmZXIodHhuUXVldWUsIHRhc2spXG5cbiAgICAgICAgY29uc3QgZXhpdCA9IHlpZWxkKiBEZWZlcnJlZC5hd2FpdChkb25lKVxuICAgICAgICByZXR1cm4geWllbGQqIEV4aXQubWF0Y2goZXhpdCwge1xuICAgICAgICAgIG9uRmFpbHVyZTogKGNhdXNlKSA9PiBFZmZlY3QuZmFpbENhdXNlKGNhdXNlKSxcbiAgICAgICAgICBvblN1Y2Nlc3M6ICh2YWx1ZSkgPT4gRWZmZWN0LnN1Y2NlZWQodmFsdWUpLFxuICAgICAgICB9KVxuICAgICAgfSlcblxuICAgIGNvbnN0IG1ha2VMaW5rSWQgPSAoKTogc3RyaW5nID0+XG4gICAgICBgJHtEYXRlLm5vdygpLnRvU3RyaW5nKDM2KX0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyKX1gXG5cbiAgICAvKipcbiAgICAgKiBydW5PcGVyYXRpb25cdUZGMUFcbiAgICAgKiAtIFx1N0VERlx1NEUwMFx1NzY4NFx1OEZCOVx1NzU0Q1x1NjRDRFx1NEY1Q1x1NjI2N1x1ODg0Q1x1NTE2NVx1NTNFM1x1RkYwOFx1OTYzMlx1NTQ0Nlx1NTdGQVx1NUVBN1x1RkYwOVx1RkYxQlxuICAgICAqIC0gXHU4MUVBXHU1MkE4XHU4ODY1XHU5RjUwIG1ldGFcdUZGMDhtb2R1bGVJZC9ydW50aW1lSWQvdHhuSWQvbGlua0lkL3J1bnRpbWVMYWJlbC4uLlx1RkYwOVx1RkYxQlxuICAgICAqIC0gXHU3RURGXHU0RTAwXHU4RkRCXHU1MTY1IG1pZGRsZXdhcmUgc3RhY2tcdUZGMDhcdTdBN0Egc3RhY2sgXHU3NkY0XHU5MDFBXHVGRjA5XHUzMDAyXG4gICAgICovXG4gICAgY29uc3QgcnVuT3BlcmF0aW9uID0gPEEyLCBFMiwgUjI+KFxuICAgICAga2luZDogRWZmZWN0T3AuRWZmZWN0T3BbXCJraW5kXCJdLFxuICAgICAgbmFtZTogc3RyaW5nLFxuICAgICAgcGFyYW1zOiB7XG4gICAgICAgIHJlYWRvbmx5IHBheWxvYWQ/OiB1bmtub3duXG4gICAgICAgIHJlYWRvbmx5IG1ldGE/OiBFZmZlY3RPcC5FZmZlY3RPcFtcIm1ldGFcIl1cbiAgICAgIH0sXG4gICAgICBlZmY6IEVmZmVjdC5FZmZlY3Q8QTIsIEUyLCBSMj4sXG4gICAgKTogRWZmZWN0LkVmZmVjdDxBMiwgRTIsIFIyPiA9PlxuICAgICAgRWZmZWN0LmdlbihmdW5jdGlvbiogKCkge1xuICAgICAgICBjb25zdCBzdGFjayA9IHlpZWxkKiBnZXRNaWRkbGV3YXJlU3RhY2soKVxuXG4gICAgICAgIGNvbnN0IGN1cnJlbnRUeG5JZCA9IHR4bkNvbnRleHQuY3VycmVudD8udHhuSWRcbiAgICAgICAgY29uc3QgZXhpc3RpbmdMaW5rSWQgPSB5aWVsZCogRmliZXJSZWYuZ2V0KEVmZmVjdE9wQ29yZS5jdXJyZW50TGlua0lkKVxuICAgICAgICBjb25zdCBsaW5rSWQgPSBleGlzdGluZ0xpbmtJZCA/PyBtYWtlTGlua0lkKClcblxuICAgICAgICBjb25zdCBydW50aW1lTGFiZWwgPSB5aWVsZCogRmliZXJSZWYuZ2V0KERlYnVnLmN1cnJlbnRSdW50aW1lTGFiZWwpXG5cbiAgICAgICAgY29uc3QgYmFzZU1ldGE6IEVmZmVjdE9wLkVmZmVjdE9wW1wibWV0YVwiXSA9IHtcbiAgICAgICAgICAuLi4ocGFyYW1zLm1ldGEgPz8ge30pLFxuICAgICAgICAgIC8vIFJ1bnRpbWUgXHU4MUVBXHU1MkE4XHU4ODY1XHU5RjUwXG4gICAgICAgICAgbW9kdWxlSWQ6IChwYXJhbXMubWV0YSBhcyBhbnkpPy5tb2R1bGVJZCA/PyBvcHRpb25zLm1vZHVsZUlkLFxuICAgICAgICAgIHJ1bnRpbWVJZDogKHBhcmFtcy5tZXRhIGFzIGFueSk/LnJ1bnRpbWVJZCA/PyBpZCxcbiAgICAgICAgICBydW50aW1lTGFiZWw6IChwYXJhbXMubWV0YSBhcyBhbnkpPy5ydW50aW1lTGFiZWwgPz8gcnVudGltZUxhYmVsLFxuICAgICAgICAgIHR4bklkOiAocGFyYW1zLm1ldGEgYXMgYW55KT8udHhuSWQgPz8gY3VycmVudFR4bklkLFxuICAgICAgICAgIGxpbmtJZCxcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG9wID0gRWZmZWN0T3AubWFrZTxBMiwgRTIsIFIyPih7XG4gICAgICAgICAga2luZCxcbiAgICAgICAgICBuYW1lLFxuICAgICAgICAgIHBheWxvYWQ6IHBhcmFtcy5wYXlsb2FkLFxuICAgICAgICAgIGVmZmVjdDogZWZmLFxuICAgICAgICAgIG1ldGE6IGJhc2VNZXRhLFxuICAgICAgICB9KVxuXG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSBzdGFjay5sZW5ndGggPyBFZmZlY3RPcC5ydW4ob3AsIHN0YWNrKSA6IG9wLmVmZmVjdFxuXG4gICAgICAgIC8vIGxpbmtJZFx1RkYxQVx1OEZCOVx1NzU0Q1x1OEQ3N1x1NzBCOVx1NTIxQlx1NUVGQVx1RkYwQ1x1NUQ0Q1x1NTk1N1x1NTkwRFx1NzUyOFx1RkYwOFx1OERFOFx1NkEyMVx1NTc1N1x1NTE3MVx1NEVBQlx1NTQwQ1x1NEUwMCBGaWJlclJlZlx1RkYwOVx1MzAwMlxuICAgICAgICByZXR1cm4geWllbGQqIEVmZmVjdC5sb2NhbGx5KEVmZmVjdE9wQ29yZS5jdXJyZW50TGlua0lkLCBsaW5rSWQpKHByb2dyYW0pXG4gICAgICB9KVxuXG4gICAgeWllbGQqIHJ1bk9wZXJhdGlvbihcbiAgICAgIFwibGlmZWN5Y2xlXCIsXG4gICAgICBcIm1vZHVsZTppbml0XCIsXG4gICAgICB7IG1ldGE6IHsgbW9kdWxlSWQ6IG9wdGlvbnMubW9kdWxlSWQsIHJ1bnRpbWVJZDogaWQgfSB9LFxuICAgICAgRGVidWcucmVjb3JkKHtcbiAgICAgICAgdHlwZTogXCJtb2R1bGU6aW5pdFwiLFxuICAgICAgICBtb2R1bGVJZDogb3B0aW9ucy5tb2R1bGVJZCxcbiAgICAgICAgcnVudGltZUlkOiBpZCxcbiAgICAgIH0pLFxuICAgIClcblxuICAgIC8vIFx1NTIxRFx1NTlDQlx1NzJCNlx1NjAwMVx1NUZFQlx1NzE2N1x1RkYxQVxuICAgIC8vIC0gXHU5MDFBXHU4RkM3IHN0YXRlOnVwZGF0ZSBcdTRFOEJcdTRFRjZcdTVDMDYgTW9kdWxlIFx1NzY4NFx1NTIxRFx1NTlDQlx1NzJCNlx1NjAwMVx1NTE5OVx1NTE2NSBEZWJ1ZyBcdTZENDFcdUZGMENcbiAgICAvLyAtIFx1NEZCRlx1NEU4RSBEZXZUb29scyBcdTU3MjhcdTZDQTFcdTY3MDlcdTRFRkJcdTRGNTVcdTRFMUFcdTUyQTFcdTRFQTRcdTRFOTJcdTY1RjZcdTVDMzFcdTgwRkRcdTc3MEJcdTUyMzBcdTMwMENDdXJyZW50IFN0YXRlXHUzMDBEXHVGRjBDXG4gICAgLy8gLSBcdTU0MENcdTY1RjZcdTRFM0EgdGltZWxpbmUgXHU2M0QwXHU0RjlCXHU3QjJDIDAgXHU1RTI3XHU3MkI2XHU2MDAxXHVGRjBDXHU1NDBFXHU3RUVEXHU0RThCXHU0RUY2XHU1M0VGXHU0RUU1XHU1N0ZBXHU0RThFXHU1QjgzXHU1MDVBIHRpbWUtdHJhdmVsIFx1ODlDNlx1NTZGRVx1MzAwMlxuICAgIGNvbnN0IGluaXRpYWxTbmFwc2hvdCA9IHlpZWxkKiBTdWJzY3JpcHRpb25SZWYuZ2V0KHN0YXRlUmVmKVxuICAgIHlpZWxkKiBydW5PcGVyYXRpb24oXG4gICAgICBcInN0YXRlXCIsXG4gICAgICBcInN0YXRlOmluaXRcIixcbiAgICAgIHsgbWV0YTogeyBtb2R1bGVJZDogb3B0aW9ucy5tb2R1bGVJZCwgcnVudGltZUlkOiBpZCB9IH0sXG4gICAgICBEZWJ1Zy5yZWNvcmQoe1xuICAgICAgICB0eXBlOiBcInN0YXRlOnVwZGF0ZVwiLFxuICAgICAgICBtb2R1bGVJZDogb3B0aW9ucy5tb2R1bGVJZCxcbiAgICAgICAgc3RhdGU6IGluaXRpYWxTbmFwc2hvdCxcbiAgICAgICAgcnVudGltZUlkOiBpZCxcbiAgICAgIH0pLFxuICAgIClcblxuICAgIC8qKlxuICAgICAqIFx1OEJGQlx1NTNENlx1NUY1M1x1NTI0RFx1NzJCNlx1NjAwMVx1RkYxQVxuICAgICAqIC0gXHU4MkU1XHU1QjU4XHU1NzI4XHU2RDNCXHU4REMzXHU0RThCXHU1MkExXHVGRjBDXHU1MjE5XHU4RkQ0XHU1NkRFXHU0RThCXHU1MkExXHU4MzQ5XHU3QTNGXHVGRjFCXG4gICAgICogLSBcdTU0MjZcdTUyMTlcdTU2REVcdTkwMDBcdTUyMzBcdTVFOTVcdTVDNDIgU3Vic2NyaXB0aW9uUmVmIFx1NUZFQlx1NzE2N1x1MzAwMlxuICAgICAqL1xuICAgIGNvbnN0IHJlYWRTdGF0ZTogRWZmZWN0LkVmZmVjdDxTPiA9IEVmZmVjdC5nZW4oZnVuY3Rpb24qICgpIHtcbiAgICAgIGNvbnN0IGluVHhuID0geWllbGQqIEZpYmVyUmVmLmdldChUYXNrUnVubmVyLmluU3luY1RyYW5zYWN0aW9uRmliZXIpXG4gICAgICBjb25zdCBjdXJyZW50ID0gdHhuQ29udGV4dC5jdXJyZW50XG4gICAgICBpZiAoaW5UeG4gJiYgY3VycmVudCkgcmV0dXJuIGN1cnJlbnQuZHJhZnRcbiAgICAgIHJldHVybiB5aWVsZCogU3Vic2NyaXB0aW9uUmVmLmdldChzdGF0ZVJlZilcbiAgICB9KVxuXG4gICAgLyoqXG4gICAgICogc2V0U3RhdGVJbnRlcm5hbFx1RkYxQVxuICAgICAqIC0gXHU1NzI4XHU2RDNCXHU4REMzXHU0RThCXHU1MkExXHU1MTg1XHVGRjFBXHU0RUM1XHU2NkY0XHU2NUIwXHU4MzQ5XHU3QTNGXHU1RTc2XHU4QkIwXHU1RjU1IFBhdGNoXHVGRjA4XHU2NTc0XHU2OEY1IFN0YXRlIFx1NEUzQVx1N0M5Mlx1NUVBNlx1RkYwOVx1RkYwQ1x1NEUwRFx1NzZGNFx1NjNBNVx1NTE5OVx1NTE2NVx1NUU5NVx1NUM0MiBSZWZcdUZGMUJcbiAgICAgKiAtIFx1NTcyOFx1NjVFMFx1NEU4Qlx1NTJBMVx1NjVGNlx1RkYxQVx1NEZERFx1NjMwMVx1NjVFN1x1ODg0Q1x1NEUzQVx1RkYwQ1x1NzZGNFx1NjNBNVx1NTE5OVx1NTE2NSBTdWJzY3JpcHRpb25SZWYgXHU1RTc2XHU1M0QxXHU1MUZBXHU0RTAwXHU2QjIxIHN0YXRlOnVwZGF0ZSBEZWJ1ZyBcdTRFOEJcdTRFRjZcdTMwMDJcbiAgICAgKlxuICAgICAqIFx1OEJGNFx1NjYwRVx1RkYxQVxuICAgICAqIC0gUGF0Y2ggXHU3Njg0IHBhdGggXHU2NjgyXHU2NUY2XHU3RURGXHU0RTAwXHU0RTNBIFwiKlwiXHVGRjBDXHU1NDBFXHU3RUVEXHU1NzI4XHU2M0E1XHU1MTY1IFN0YXRlVHJhaXQgUGF0Y2ggXHU2QTIxXHU1NzhCXHU2NUY2XHU1MThEXHU3RUM2XHU1MzE2XHU0RTNBXHU1QjU3XHU2QkI1XHU3RUE3XHU4REVGXHU1Rjg0XHUzMDAyXG4gICAgICovXG4gICAgY29uc3Qgc2V0U3RhdGVJbnRlcm5hbCA9IChcbiAgICAgIG5leHQ6IFMsXG4gICAgICBwYXRjaDogU3RhdGVUcmFuc2FjdGlvbi5TdGF0ZVBhdGNoLFxuICAgICk6IEVmZmVjdC5FZmZlY3Q8dm9pZD4gPT5cbiAgICAgIEVmZmVjdC5nZW4oZnVuY3Rpb24qICgpIHtcbiAgICAgICAgY29uc3QgaW5UeG4gPSB5aWVsZCogRmliZXJSZWYuZ2V0KFRhc2tSdW5uZXIuaW5TeW5jVHJhbnNhY3Rpb25GaWJlcilcbiAgICAgICAgaWYgKGluVHhuICYmIHR4bkNvbnRleHQuY3VycmVudCkge1xuICAgICAgICAgIFN0YXRlVHJhbnNhY3Rpb24udXBkYXRlRHJhZnQodHhuQ29udGV4dCwgbmV4dCwgcGF0Y2gpXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdTk3NUVcdTRFOEJcdTUyQTEgZmliZXIgXHU3Njg0XHU1MTk5XHU1MTY1XHU1RkM1XHU5ODdCXHU1MTY1XHU5NjFGXHVGRjFBXHU5MDdGXHU1MTREXHU1RTc2XHU1M0QxXHU2NkY0XHU2NUIwXHU3RUQ1XHU4RkM3IHR4blF1ZXVlXHUzMDAyXG4gICAgICAgIHlpZWxkKiBlbnF1ZXVlVHJhbnNhY3Rpb24oXG4gICAgICAgICAgcnVuT3BlcmF0aW9uKFxuICAgICAgICAgICAgXCJzdGF0ZVwiLFxuICAgICAgICAgICAgXCJzdGF0ZTp1cGRhdGVcIixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgcGF5bG9hZDogbmV4dCxcbiAgICAgICAgICAgICAgbWV0YTogeyBtb2R1bGVJZDogb3B0aW9ucy5tb2R1bGVJZCwgcnVudGltZUlkOiBpZCB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJ1bldpdGhTdGF0ZVRyYW5zYWN0aW9uKFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAga2luZDogXCJzdGF0ZVwiLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwic2V0U3RhdGVcIixcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgKCkgPT5cbiAgICAgICAgICAgICAgICBFZmZlY3Quc3luYygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAvLyBcdTRFOEJcdTUyQTFcdTVGMDBcdTU5Q0JcdTY1RjZcdTc2ODQgYmFzZVN0YXRlIFx1NzUzMSBydW5XaXRoU3RhdGVUcmFuc2FjdGlvbiBcdTZDRThcdTUxNjVcdUZGMENcdThGRDlcdTkxQ0NcdTUzRUFcdTk3MDBcdTY2RjRcdTY1QjBcdTgzNDlcdTdBM0ZcdTMwMDJcbiAgICAgICAgICAgICAgICAgIFN0YXRlVHJhbnNhY3Rpb24udXBkYXRlRHJhZnQodHhuQ29udGV4dCwgbmV4dCwgcGF0Y2gpXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICApLFxuICAgICAgICAgICksXG4gICAgICAgIClcbiAgICAgIH0pXG5cbiAgICAvKipcbiAgICAgKiBydW5XaXRoU3RhdGVUcmFuc2FjdGlvblx1RkYxQVxuICAgICAqIC0gXHU0RTNBXHU0RTAwXHU2QjIxXHU5MDNCXHU4RjkxXHU1MTY1XHU1M0UzXHVGRjA4ZGlzcGF0Y2ggLyBzb3VyY2UtcmVmcmVzaCAvIFx1NTQwRVx1N0VFRFx1NjI2OVx1NUM1NVx1RkYwOVx1NUYwMFx1NTQyRlx1NEU4Qlx1NTJBMVx1RkYxQlxuICAgICAqIC0gXHU1NzI4IGJvZHkgXHU0RTJEXHU4MDVBXHU1NDA4XHU2MjQwXHU2NzA5XHU3MkI2XHU2MDAxXHU1MTk5XHU1MTY1XHVGRjBDXHU3RUQzXHU2NzVGXHU2NUY2XHU3RURGXHU0RTAwIGNvbW1pdCArIHN0YXRlOnVwZGF0ZSBEZWJ1ZyBcdTRFOEJcdTRFRjZcdUZGMUJcbiAgICAgKiAtIFx1NzUzMVx1OEMwM1x1NzUyOFx1NjVCOVx1NEZERFx1OEJDMSBib2R5IFx1NEUwRFx1OERFOFx1OEQ4QVx1OTU3RiBJTyBcdThGQjlcdTc1NENcdUZGMDhcdThCRTZcdTg5QzEgc3BlYyBcdTRFMkRcdTUxNzNcdTRFOEVcdTRFOEJcdTUyQTFcdTdBOTdcdTUzRTNcdTc2ODRcdTdFQTZcdTY3NUZcdUZGMDlcdTMwMDJcbiAgICAgKi9cbiAgICBjb25zdCBydW5XaXRoU3RhdGVUcmFuc2FjdGlvbiA9IDxFMj4oXG4gICAgICBvcmlnaW46IFN0YXRlVHJhbnNhY3Rpb24uU3RhdGVUeG5PcmlnaW4sXG4gICAgICBib2R5OiAoKSA9PiBFZmZlY3QuRWZmZWN0PHZvaWQsIEUyLCBhbnk+LFxuICAgICk6IEVmZmVjdC5FZmZlY3Q8dm9pZCwgRTIsIGFueT4gPT5cbiAgICAgIEVmZmVjdC5sb2NhbGx5KFRhc2tSdW5uZXIuaW5TeW5jVHJhbnNhY3Rpb25GaWJlciwgdHJ1ZSkoXG4gICAgICAgIEVmZmVjdC5nZW4oZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICBjb25zdCBiYXNlU3RhdGUgPSB5aWVsZCogU3Vic2NyaXB0aW9uUmVmLmdldChzdGF0ZVJlZilcblxuICAgICAgICAgIFN0YXRlVHJhbnNhY3Rpb24uYmVnaW5UcmFuc2FjdGlvbihcbiAgICAgICAgICAgIHR4bkNvbnRleHQsXG4gICAgICAgICAgICBvcmlnaW4sXG4gICAgICAgICAgICBiYXNlU3RhdGUsXG4gICAgICAgICAgKVxuICAgICAgICAgIDsodHhuQ29udGV4dC5jdXJyZW50IGFzIGFueSkuc3RhdGVUcmFpdFZhbGlkYXRlUmVxdWVzdHMgPSBbXVxuXG4gICAgICAgICAgY29uc3QgdHhuSWQgPSB0eG5Db250ZXh0LmN1cnJlbnQ/LnR4bklkXG5cbiAgICAgICAgICBjb25zdCBleGl0ID0geWllbGQqIEVmZmVjdC5leGl0KFxuICAgICAgICAgICAgRWZmZWN0LmxvY2FsbHkoRGVidWcuY3VycmVudFR4bklkLCB0eG5JZCkoXG4gICAgICAgICAgICAgIEVmZmVjdC5nZW4oZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgLy8gXHU0RThCXHU1MkExXHU3QTk3XHU1M0UzXHU1MTg1XHU3Njg0IFRyYWl0IFx1NkM0N1x1NjAzQlx1NEZFMVx1NjA2Rlx1RkYwOFx1NzUyOFx1NEU4RSBEZXZ0b29scy9cdThCQ0FcdTY1QURcdTVDNTVcdTc5M0FcdUZGMDlcdTMwMDJcbiAgICAgICAgICAgICAgbGV0IHRyYWl0U3VtbWFyeTogdW5rbm93biB8IHVuZGVmaW5lZFxuXG4gICAgICAgICAgICAgIC8vIFx1NTcyOFx1NEU4Qlx1NTJBMVx1N0E5N1x1NTNFM1x1NTE4NVx1NjI2N1x1ODg0Q1x1NTE3N1x1NEY1M1x1OTAzQlx1OEY5MVx1RkYwOHJlZHVjZXIgLyB3YXRjaGVyIHdyaXRlYmFjayAvIHRyYWl0cyBcdTdCNDlcdUZGMDlcdTMwMDJcbiAgICAgICAgICAgICAgeWllbGQqIGJvZHkoKVxuXG4gICAgICAgICAgICAgIC8vIFN0YXRlVHJhaXRcdUZGMUFcdTU3MjhcdTYzRDBcdTRFQTRcdTUyNERcdTYyNjdcdTg4NENcdTZEM0VcdTc1MUZcdTY1MzZcdTY1NUJcdUZGMDhjb21wdXRlZC9saW5rIFx1N0I0OVx1RkYwOVx1RkYwQ1x1Nzg2RVx1NEZERFx1NTM1NVx1N0E5N1x1NTNFMyAwLzEgY29tbWl0XHUzMDAyXG4gICAgICAgICAgICAgIGlmIChzdGF0ZVRyYWl0UHJvZ3JhbSAmJiB0eG5Db250ZXh0LmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb252ZXJnZUV4aXQgPSB5aWVsZCogRWZmZWN0LmV4aXQoXG4gICAgICAgICAgICAgICAgICBTdGF0ZVRyYWl0Q29udmVyZ2UuY29udmVyZ2VJblRyYW5zYWN0aW9uKFxuICAgICAgICAgICAgICAgICAgICBzdGF0ZVRyYWl0UHJvZ3JhbSBhcyBhbnksXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICBtb2R1bGVJZDogb3B0aW9ucy5tb2R1bGVJZCxcbiAgICAgICAgICAgICAgICAgICAgICBydW50aW1lSWQ6IGlkLFxuICAgICAgICAgICAgICAgICAgICAgIG5vdzogdHhuQ29udGV4dC5jb25maWcubm93LFxuICAgICAgICAgICAgICAgICAgICAgIGJ1ZGdldE1zOiB0cmFpdENvbnZlcmdlQnVkZ2V0TXMsXG4gICAgICAgICAgICAgICAgICAgICAgbW9kZTogdHJhaXRDb252ZXJnZU1vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgZGlydHlQYXRoczogKHR4bkNvbnRleHQuY3VycmVudCBhcyBhbnkpPy5kaXJ0eVBhdGhzIGFzXG4gICAgICAgICAgICAgICAgICAgICAgICB8IFJlYWRvbmx5U2V0PHN0cmluZz5cbiAgICAgICAgICAgICAgICAgICAgICAgIHwgdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgIGdldERyYWZ0OiAoKSA9PiB0eG5Db250ZXh0LmN1cnJlbnQhLmRyYWZ0IGFzIGFueSxcbiAgICAgICAgICAgICAgICAgICAgICBzZXREcmFmdDogKG5leHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRlVHJhbnNhY3Rpb24udXBkYXRlRHJhZnQodHhuQ29udGV4dCwgbmV4dCBhcyBhbnkpXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICByZWNvcmRQYXRjaDogKHBhdGNoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBTdGF0ZVRyYW5zYWN0aW9uLnJlY29yZFBhdGNoKHR4bkNvbnRleHQsIHBhdGNoKVxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0gYXMgU3RhdGVUcmFpdENvbnZlcmdlLkNvbnZlcmdlQ29udGV4dDxhbnk+LFxuICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICApXG5cbiAgICAgICAgICAgICAgICBpZiAoY29udmVyZ2VFeGl0Ll90YWcgPT09IFwiRmFpbHVyZVwiKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBlcnJvcnMgPSBbXG4gICAgICAgICAgICAgICAgICAgIC4uLkNhdXNlLmZhaWx1cmVzKGNvbnZlcmdlRXhpdC5jYXVzZSksXG4gICAgICAgICAgICAgICAgICAgIC4uLkNhdXNlLmRlZmVjdHMoY29udmVyZ2VFeGl0LmNhdXNlKSxcbiAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbmZpZ0Vycm9yID0gZXJyb3JzLmZpbmQoXG4gICAgICAgICAgICAgICAgICAgIChlcnIpOiBlcnIgaXMgU3RhdGVUcmFpdENvbnZlcmdlLlN0YXRlVHJhaXRDb25maWdFcnJvciA9PlxuICAgICAgICAgICAgICAgICAgICAgIGVyciBpbnN0YW5jZW9mIFN0YXRlVHJhaXRDb252ZXJnZS5TdGF0ZVRyYWl0Q29uZmlnRXJyb3IsXG4gICAgICAgICAgICAgICAgICApXG5cbiAgICAgICAgICAgICAgICAgIGlmIChjb25maWdFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWVsZHMgPSBjb25maWdFcnJvci5maWVsZHMgPz8gW11cbiAgICAgICAgICAgICAgICAgICAgeWllbGQqIERlYnVnLnJlY29yZCh7XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJkaWFnbm9zdGljXCIsXG4gICAgICAgICAgICAgICAgICAgICAgbW9kdWxlSWQ6IG9wdGlvbnMubW9kdWxlSWQsXG4gICAgICAgICAgICAgICAgICAgICAgcnVudGltZUlkOiBpZCxcbiAgICAgICAgICAgICAgICAgICAgICB0eG5JZCxcbiAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiBvcmlnaW4sXG4gICAgICAgICAgICAgICAgICAgICAgY29kZTogXCJzdGF0ZV90cmFpdDo6Y29uZmlnX2Vycm9yXCIsXG4gICAgICAgICAgICAgICAgICAgICAgc2V2ZXJpdHk6IFwiZXJyb3JcIixcbiAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjb25maWdFcnJvci5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgIGhpbnQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWdFcnJvci5jb2RlID09PSBcIkNZQ0xFX0RFVEVDVEVEXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPyBgY29tcHV0ZWQvbGluayBcdTU2RkVcdTVCNThcdTU3MjhcdTVGQUFcdTczQUZcdUZGMUEke2ZpZWxkcy5qb2luKFwiLCBcIil9YFxuICAgICAgICAgICAgICAgICAgICAgICAgICA6IGBcdTU0MENcdTRFMDBcdTVCNTdcdTZCQjVcdTVCNThcdTU3MjhcdTU5MUFcdTRFMkEgd3JpdGVyXHVGRjFBJHtmaWVsZHMuam9pbihcIiwgXCIpfWAsXG4gICAgICAgICAgICAgICAgICAgICAga2luZDogYHN0YXRlX3RyYWl0X2NvbmZpZ19lcnJvcjoke2NvbmZpZ0Vycm9yLmNvZGV9YCxcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgcmV0dXJuIHlpZWxkKiBFZmZlY3QuZmFpbENhdXNlKGNvbnZlcmdlRXhpdC5jYXVzZSlcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBvdXRjb21lID0gY29udmVyZ2VFeGl0LnZhbHVlXG5cbiAgICAgICAgICAgICAgICB0cmFpdFN1bW1hcnkgPSB7XG4gICAgICAgICAgICAgICAgICBjb252ZXJnZTogb3V0Y29tZS5zdW1tYXJ5XG4gICAgICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4ub3V0Y29tZS5zdW1tYXJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0Y29tZTogb3V0Y29tZS5fdGFnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVncmFkZWRSZWFzb246XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG91dGNvbWUuX3RhZyA9PT0gXCJEZWdyYWRlZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBvdXRjb21lLnJlYXNvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRjb21lOiBvdXRjb21lLl90YWcsXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAob3V0Y29tZS5fdGFnID09PSBcIkRlZ3JhZGVkXCIpIHtcbiAgICAgICAgICAgICAgICAgIHlpZWxkKiBEZWJ1Zy5yZWNvcmQoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImRpYWdub3N0aWNcIixcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlSWQ6IG9wdGlvbnMubW9kdWxlSWQsXG4gICAgICAgICAgICAgICAgICAgIHJ1bnRpbWVJZDogaWQsXG4gICAgICAgICAgICAgICAgICAgIGNvZGU6XG4gICAgICAgICAgICAgICAgICAgICAgb3V0Y29tZS5yZWFzb24gPT09IFwiYnVkZ2V0X2V4Y2VlZGVkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gXCJ0cmFpdDo6YnVkZ2V0X2V4Y2VlZGVkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogXCJ0cmFpdDo6cnVudGltZV9lcnJvclwiLFxuICAgICAgICAgICAgICAgICAgICBzZXZlcml0eTogXCJ3YXJuaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6XG4gICAgICAgICAgICAgICAgICAgICAgb3V0Y29tZS5yZWFzb24gPT09IFwiYnVkZ2V0X2V4Y2VlZGVkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gXCJUcmFpdCBjb252ZXJnZSBleGNlZWRlZCBidWRnZXQ7IGRlcml2ZWQgZmllbGRzIGFyZSBmcm96ZW4gZm9yIHRoaXMgb3BlcmF0aW9uIHdpbmRvdy5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgOiBcIlRyYWl0IGNvbnZlcmdlIGZhaWxlZCBhdCBydW50aW1lOyBkZXJpdmVkIGZpZWxkcyBhcmUgZnJvemVuIGZvciB0aGlzIG9wZXJhdGlvbiB3aW5kb3cuXCIsXG4gICAgICAgICAgICAgICAgICAgIGhpbnQ6XG4gICAgICAgICAgICAgICAgICAgICAgb3V0Y29tZS5yZWFzb24gPT09IFwiYnVkZ2V0X2V4Y2VlZGVkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gXCJcdTY4QzBcdTY3RTUgY29tcHV0ZWQvY2hlY2sgXHU2NjJGXHU1NDI2XHU1MzA1XHU1NDJCXHU5MUNEXHU1NzhCXHU4QkExXHU3Qjk3XHVGRjFCXHU1QzA2XHU1MTc2XHU0RTBCXHU2NTNFXHU1MjMwIHNvdXJjZS90YXNrIFx1NjIxNlx1NjJDNlx1NTIwNlx1NEUzQVx1NTNFRlx1N0YxM1x1NUI1OFx1NzY4NFx1NkQzRVx1NzUxRlx1MzAwMlwiXG4gICAgICAgICAgICAgICAgICAgICAgICA6IFwiXHU2OEMwXHU2N0U1IGNvbXB1dGVkL2xpbmsvY2hlY2sgXHU2NjJGXHU1NDI2XHU2NzA5XHU1RjAyXHU1RTM4XHU4RjkzXHU1MTY1XHU2MjE2XHU0RTBEXHU3RUFGXHU5MDNCXHU4RjkxXHVGRjFCXHU1RkM1XHU4OTgxXHU2NUY2XHU4ODY1XHU1MTQ1IGVxdWFscyBcdTYyMTYgZ3VhcmRcdTMwMDJcIixcbiAgICAgICAgICAgICAgICAgICAga2luZDogXCJ0cmFpdF9kZWdyYWRlZFwiLFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBUcmFpdExpZmVjeWNsZSBzY29wZWQgdmFsaWRhdGVcdUZGMUFcdTU3MjggY29udmVyZ2UgXHU0RTRCXHU1NDBFXHU3RURGXHU0RTAwIGZsdXNoXHVGRjA4XHU0RkREXHU4QkMxXHU2ODIxXHU5QThDXHU4QkZCXHU1M0Q2XHU1MjMwXHU2NzAwXHU2NUIwXHU2RDNFXHU3NTFGXHVGRjA5XHUzMDAyXG4gICAgICAgICAgICAgIGlmIChzdGF0ZVRyYWl0UHJvZ3JhbSAmJiB0eG5Db250ZXh0LmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwZW5kaW5nID0gKHR4bkNvbnRleHQuY3VycmVudCBhcyBhbnkpXG4gICAgICAgICAgICAgICAgICAuc3RhdGVUcmFpdFZhbGlkYXRlUmVxdWVzdHMgYXNcbiAgICAgICAgICAgICAgICAgIHwgUmVhZG9ubHlBcnJheTxTdGF0ZVRyYWl0VmFsaWRhdGUuU2NvcGVkVmFsaWRhdGVSZXF1ZXN0PlxuICAgICAgICAgICAgICAgICAgfCB1bmRlZmluZWRcblxuICAgICAgICAgICAgICAgIGlmIChwZW5kaW5nICYmIHBlbmRpbmcubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgeWllbGQqIFN0YXRlVHJhaXRWYWxpZGF0ZS52YWxpZGF0ZUluVHJhbnNhY3Rpb24oXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlVHJhaXRQcm9ncmFtIGFzIGFueSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZUlkOiBvcHRpb25zLm1vZHVsZUlkLFxuICAgICAgICAgICAgICAgICAgICAgIHJ1bnRpbWVJZDogaWQsXG4gICAgICAgICAgICAgICAgICAgICAgZ2V0RHJhZnQ6ICgpID0+IHR4bkNvbnRleHQuY3VycmVudCEuZHJhZnQgYXMgYW55LFxuICAgICAgICAgICAgICAgICAgICAgIHNldERyYWZ0OiAobmV4dCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgU3RhdGVUcmFuc2FjdGlvbi51cGRhdGVEcmFmdCh0eG5Db250ZXh0LCBuZXh0IGFzIGFueSlcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgIHJlY29yZFBhdGNoOiAocGF0Y2gpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRlVHJhbnNhY3Rpb24ucmVjb3JkUGF0Y2godHhuQ29udGV4dCwgcGF0Y2gpXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSBhcyBTdGF0ZVRyYWl0VmFsaWRhdGUuVmFsaWRhdGVDb250ZXh0PGFueT4sXG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmcsXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8gU291cmNlIGtleSBcdTUzRDhcdTdBN0FcdTU0MENcdTZCNjVcdTU2REVcdTY1MzZcdTRFM0EgaWRsZVx1RkYwOFx1OTA3Rlx1NTE0RCB0ZWFyaW5nIC8gXHU1RTdEXHU3MDc1XHU2NTcwXHU2MzZFXHVGRjA5XHUzMDAyXG4gICAgICAgICAgICAgIGlmIChzdGF0ZVRyYWl0UHJvZ3JhbSAmJiB0eG5Db250ZXh0LmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCogU3RhdGVUcmFpdFNvdXJjZS5zeW5jSWRsZUluVHJhbnNhY3Rpb24oXG4gICAgICAgICAgICAgICAgICBzdGF0ZVRyYWl0UHJvZ3JhbSBhcyBhbnksXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZUlkOiBvcHRpb25zLm1vZHVsZUlkLFxuICAgICAgICAgICAgICAgICAgICBydW50aW1lSWQ6IGlkLFxuICAgICAgICAgICAgICAgICAgICBnZXREcmFmdDogKCkgPT4gdHhuQ29udGV4dC5jdXJyZW50IS5kcmFmdCBhcyBhbnksXG4gICAgICAgICAgICAgICAgICAgIHNldERyYWZ0OiAobmV4dCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIFN0YXRlVHJhbnNhY3Rpb24udXBkYXRlRHJhZnQodHhuQ29udGV4dCwgbmV4dCBhcyBhbnkpXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHJlY29yZFBhdGNoOiAocGF0Y2gpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBTdGF0ZVRyYW5zYWN0aW9uLnJlY29yZFBhdGNoKHR4bkNvbnRleHQsIHBhdGNoKVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgfSBhcyBTdGF0ZVRyYWl0U291cmNlLlNvdXJjZVN5bmNDb250ZXh0PGFueT4sXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8gXHU2M0QwXHU0RUE0XHU0RThCXHU1MkExXHVGRjFBXHU1MzU1XHU2QjIxXHU1MTk5XHU1MTY1XHU1RTk1XHU1QzQyXHU3MkI2XHU2MDAxXHVGRjBDXHU1RTc2XHU1M0QxXHU1MUZBXHU0RTAwXHU2QjIxXHU4MDVBXHU1NDA4XHU1NDBFXHU3Njg0IHN0YXRlOnVwZGF0ZSBcdTRFOEJcdTRFRjZcdTMwMDJcbiAgICAgICAgICAgICAgeWllbGQqIHJ1bk9wZXJhdGlvbihcbiAgICAgICAgICAgICAgICBcInN0YXRlXCIsXG4gICAgICAgICAgICAgICAgXCJzdGF0ZTp1cGRhdGVcIixcbiAgICAgICAgICAgICAgICB7IG1ldGE6IHsgbW9kdWxlSWQ6IG9wdGlvbnMubW9kdWxlSWQsIHJ1bnRpbWVJZDogaWQgfSB9LFxuICAgICAgICAgICAgICAgIEVmZmVjdC5nZW4oZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcGxheUV2ZW50ID0gKHR4bkNvbnRleHQuY3VycmVudCBhcyBhbnkpXG4gICAgICAgICAgICAgICAgICAgID8ubGFzdFJlcGxheUV2ZW50IGFzIHVua25vd25cbiAgICAgICAgICAgICAgICAgIGNvbnN0IHR4biA9IHlpZWxkKiBTdGF0ZVRyYW5zYWN0aW9uLmNvbW1pdCh0eG5Db250ZXh0LCBzdGF0ZVJlZilcblxuICAgICAgICAgICAgICAgICAgaWYgKHR4bikge1xuICAgICAgICAgICAgICAgICAgICAvLyBcdThCQjBcdTVGNTVcdTRFOEJcdTUyQTFcdTUzODZcdTUzRjJcdUZGMUFcdTRFQzVcdTU3MjggZGV2L3Rlc3QgXHU1NzNBXHU2NjZGXHU3NTI4XHU0RThFXHU4QzAzXHU4QkQ1XHU0RTBFIERldnRvb2xzXHVGRjBDXHU0RTBEXHU1M0MyXHU0RTBFXHU0RTFBXHU1MkExXHU5MDNCXHU4RjkxXHUzMDAyXG4gICAgICAgICAgICAgICAgICAgIHR4bkhpc3RvcnkucHVzaCh0eG4pXG4gICAgICAgICAgICAgICAgICAgIHR4bkJ5SWQuc2V0KHR4bi50eG5JZCwgdHhuKVxuICAgICAgICAgICAgICAgICAgICBpZiAodHhuSGlzdG9yeS5sZW5ndGggPiBtYXhUeG5IaXN0b3J5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2xkZXN0ID0gdHhuSGlzdG9yeS5zaGlmdCgpXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKG9sZGVzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHhuQnlJZC5kZWxldGUob2xkZXN0LnR4bklkKVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRTdGF0ZSA9XG4gICAgICAgICAgICAgICAgICAgICAgdHhuLmZpbmFsU3RhdGVTbmFwc2hvdCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHR4bi5maW5hbFN0YXRlU25hcHNob3RcbiAgICAgICAgICAgICAgICAgICAgICAgIDogeWllbGQqIFN1YnNjcmlwdGlvblJlZi5nZXQoc3RhdGVSZWYpXG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUm93SUQgXHU4NjVBXHU2MkRGXHU4RUFCXHU0RUZEXHU1QzQyXHVGRjFBXHU1NzI4XHU2QkNGXHU2QjIxXHU1M0VGXHU4OUMyXHU1QkRGXHU2M0QwXHU0RUE0XHU1NDBFXHU1QkY5XHU5RjUwXHU2NjIwXHU1QzA0XHVGRjBDXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1Nzg2RVx1NEZERFx1NjU3MFx1N0VDNCBpbnNlcnQvcmVtb3ZlL3Jlb3JkZXIgXHU0RTBCXHU3Njg0IGluLWZsaWdodCBcdTk1RThcdTYzQTdcdTRFMEVcdTdGMTNcdTVCNThcdTU5MERcdTc1MjhcdTdBMzNcdTVCOUFcdTUzRUZcdTc1MjhcdTMwMDJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlVHJhaXRMaXN0Q29uZmlncy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcm93SWRTdG9yZS51cGRhdGVBbGwobmV4dFN0YXRlIGFzIGFueSwgc3RhdGVUcmFpdExpc3RDb25maWdzKVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgeWllbGQqIERlYnVnLnJlY29yZCh7XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdGF0ZTp1cGRhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgICBtb2R1bGVJZDogb3B0aW9ucy5tb2R1bGVJZCxcbiAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTogbmV4dFN0YXRlLFxuICAgICAgICAgICAgICAgICAgICAgIHJ1bnRpbWVJZDogaWQsXG4gICAgICAgICAgICAgICAgICAgICAgdHhuSWQ6IHR4bi50eG5JZCxcbiAgICAgICAgICAgICAgICAgICAgICBwYXRjaENvdW50OiB0eG4ucGF0Y2hlcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgb3JpZ2luS2luZDogdHhuLm9yaWdpbi5raW5kLFxuICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbk5hbWU6IHR4bi5vcmlnaW4ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICB0cmFpdFN1bW1hcnksXG4gICAgICAgICAgICAgICAgICAgICAgcmVwbGF5RXZlbnQ6IHJlcGxheUV2ZW50IGFzIGFueSxcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICksXG4gICAgICAgICAgKVxuXG4gICAgICAgICAgaWYgKGV4aXQuX3RhZyA9PT0gXCJGYWlsdXJlXCIpIHtcbiAgICAgICAgICAgIC8vIFx1NTkzMVx1OEQyNVx1NjVGNlx1NUZDNVx1OTg3Qlx1NkUwNVx1NzQwNlx1NEU4Qlx1NTJBMVx1NEUwQVx1NEUwQlx1NjU4N1x1RkYwQ1x1OTA3Rlx1NTE0RFx1NkNDNFx1NkYwRlx1NTIzMFx1NTQwRVx1N0VFRFx1NTE2NVx1NTNFM1x1MzAwMlxuICAgICAgICAgICAgU3RhdGVUcmFuc2FjdGlvbi5hYm9ydCh0eG5Db250ZXh0KVxuICAgICAgICAgICAgcmV0dXJuIHlpZWxkKiBFZmZlY3QuZmFpbENhdXNlKGV4aXQuY2F1c2UpXG4gICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICAgIClcblxuICAgIC8vIFByaW1hcnkgUmVkdWNlciBcdTY2MjBcdTVDMDRcdUZGMUFcdTUyMURcdTU5Q0JcdTUwM0NcdTY3NjVcdTgxRUEgb3B0aW9ucy5yZWR1Y2Vyc1x1RkYwQ1x1NUU3Nlx1NTE0MVx1OEJCOFx1NTcyOFx1OEZEMFx1ODg0Q1x1NjVGNlx1OTAxQVx1OEZDN1x1NTE4NVx1OTBFOFx1OTRBOVx1NUI1MFx1OEZGRFx1NTJBMFx1RkYwOFx1NzUyOFx1NEU4RSAkLnJlZHVjZXIgXHU4QkVEXHU2Q0Q1XHU3Q0Q2XHVGRjA5XHUzMDAyXG4gICAgY29uc3QgcmVkdWNlck1hcCA9IG5ldyBNYXA8c3RyaW5nLCAoc3RhdGU6IFMsIGFjdGlvbjogQSkgPT4gUz4oKVxuICAgIGlmIChvcHRpb25zLnJlZHVjZXJzKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIGZuXSBvZiBPYmplY3QuZW50cmllcyhvcHRpb25zLnJlZHVjZXJzKSkge1xuICAgICAgICByZWR1Y2VyTWFwLnNldChrZXksIGZuIGFzIChzdGF0ZTogUywgYWN0aW9uOiBBKSA9PiBTKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1OEJCMFx1NUY1NVx1NkJDRlx1NEUyQSBBY3Rpb24gVGFnIFx1NjYyRlx1NTQyNlx1NURGMlx1N0VDRlx1ODhBQlx1NkQzRVx1NTNEMVx1OEZDN1x1RkYwQ1x1NzUyOFx1NEU4RVx1OEJDQVx1NjVBRFx1MjAxQ1x1OEZERlx1NTIzMFx1NzY4NCByZWR1Y2VyIFx1NkNFOFx1NTE4Q1x1MjAxRFx1N0I0OVx1OTE0RFx1N0Y2RVx1OTUxOVx1OEJFRlx1MzAwMlxuICAgIGNvbnN0IGRpc3BhdGNoZWRUYWdzID0gbmV3IFNldDxzdHJpbmc+KClcblxuICAgIGNvbnN0IHJlZ2lzdGVyUmVkdWNlciA9ICh0YWc6IHN0cmluZywgZm46IChzdGF0ZTogUywgYWN0aW9uOiBBKSA9PiBTKTogdm9pZCA9PiB7XG4gICAgICBpZiAocmVkdWNlck1hcC5oYXModGFnKSkge1xuICAgICAgICAvLyBcdTkxQ0RcdTU5MERcdTZDRThcdTUxOENcdUZGMUFcdTYyOUJcdTUxRkFcdTVFMjZcdTY3MDlcdTk4OURcdTU5MTZcdTRFMEFcdTRFMEJcdTY1ODdcdTc2ODRcdTkxNERcdTdGNkVcdTk1MTlcdThCRUZcdUZGMENcdTU0MEVcdTdFRURcdTU3MjggY2F0Y2hBbGxDYXVzZSBcdTRFMkRcdTdFREZcdTRFMDBcdTg5RTNcdTY3OTBcdTVFNzZcdTUzRDFcdTUxRkFcdThCQ0FcdTY1QURcdTRFOEJcdTRFRjZcdTMwMDJcbiAgICAgICAgdGhyb3cgUmVkdWNlckRpYWdub3N0aWNzLm1ha2VSZWR1Y2VyRXJyb3IoXG4gICAgICAgICAgXCJSZWR1Y2VyRHVwbGljYXRlRXJyb3JcIixcbiAgICAgICAgICB0YWcsXG4gICAgICAgICAgb3B0aW9ucy5tb2R1bGVJZFxuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAoZGlzcGF0Y2hlZFRhZ3MuaGFzKHRhZykpIHtcbiAgICAgICAgLy8gXHU1NzI4XHU4QkU1IFRhZyBcdTVERjJcdTdFQ0ZcdTUzRDFcdTc1MUZcdThGQzcgZGlzcGF0Y2ggXHU0RTRCXHU1NDBFXHU2MjREXHU2Q0U4XHU1MThDIHJlZHVjZXJcdUZGMUFcdTg5QzZcdTRFM0FcdTUzNzFcdTk2NjlcdTkxNERcdTdGNkVcdUZGMENcdTU0MENcdTY4MzdcdTkwMUFcdThGQzdcdTgxRUFcdTVCOUFcdTRFNDlcdTk1MTlcdThCRUZcdTdDN0JcdTU3OEJcdTY2QjRcdTk3MzJcdTdFRDlcdThCQ0FcdTY1QURcdTkwM0JcdThGOTFcdTMwMDJcbiAgICAgICAgdGhyb3cgUmVkdWNlckRpYWdub3N0aWNzLm1ha2VSZWR1Y2VyRXJyb3IoXG4gICAgICAgICAgXCJSZWR1Y2VyTGF0ZVJlZ2lzdHJhdGlvbkVycm9yXCIsXG4gICAgICAgICAgdGFnLFxuICAgICAgICAgIG9wdGlvbnMubW9kdWxlSWRcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgcmVkdWNlck1hcC5zZXQodGFnLCBmbilcbiAgICB9XG5cbiAgICBjb25zdCBhcHBseVByaW1hcnlSZWR1Y2VyID0gKGFjdGlvbjogQSkgPT4ge1xuICAgICAgY29uc3QgdGFnID0gKGFjdGlvbiBhcyBhbnkpPy5fdGFnID8/IChhY3Rpb24gYXMgYW55KT8udHlwZVxuICAgICAgaWYgKHRhZyA9PSBudWxsIHx8IHJlZHVjZXJNYXAuc2l6ZSA9PT0gMCkge1xuICAgICAgICByZXR1cm4gRWZmZWN0LnZvaWRcbiAgICAgIH1cbiAgICAgIGNvbnN0IHRhZ0tleSA9IFN0cmluZyh0YWcpXG4gICAgICBkaXNwYXRjaGVkVGFncy5hZGQodGFnS2V5KVxuICAgICAgY29uc3QgcmVkdWNlciA9IHJlZHVjZXJNYXAuZ2V0KHRhZ0tleSlcbiAgICAgIGlmICghcmVkdWNlcikge1xuICAgICAgICByZXR1cm4gRWZmZWN0LnZvaWRcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlYWRTdGF0ZS5waXBlKFxuICAgICAgICBFZmZlY3QuZmxhdE1hcCgocHJldikgPT4ge1xuICAgICAgICAgIGNvbnN0IG5leHQgPSByZWR1Y2VyKHByZXYsIGFjdGlvbilcbiAgICAgICAgICAvLyByZWR1Y2VyIFx1N0VBN1x1NTE5OVx1NTE2NVx1NTcyOFx1NEU4Qlx1NTJBMVx1NTE4NVx1ODA1QVx1NTQwOFx1NEUzQVx1NEUwMFx1NkIyMVx1NjNEMFx1NEVBNFx1RkYxQlBhdGNoIHBhdGggXHU2NjgyXHU2NUY2XHU0RUU1IFwiKlwiIFx1ODg2OFx1NzkzQVx1MzAwMlxuICAgICAgICAgIHJldHVybiBzZXRTdGF0ZUludGVybmFsKG5leHQsIHtcbiAgICAgICAgICAgIHBhdGg6IFwiKlwiLFxuICAgICAgICAgICAgdG86IG5leHQsXG4gICAgICAgICAgICByZWFzb246IFwicmVkdWNlclwiLFxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcnVuRGlzcGF0Y2hcdUZGMUFcbiAgICAgKiAtIFx1NEVFNSB7IGtpbmQ6IFwiYWN0aW9uXCIgfSBcdTUxNjVcdTUzRTNcdTVGMDBcdTU0MkZcdTRFOEJcdTUyQTFcdUZGMUJcbiAgICAgKiAtIFx1NTcyOFx1NEU4Qlx1NTJBMVx1NTE4NVx1NjI2N1x1ODg0QyBQcmltYXJ5IFJlZHVjZXIgKyBEZWJ1ZyBhY3Rpb24gXHU0RThCXHU0RUY2ICsgQWN0aW9uIFx1NTNEMVx1NUUwM1x1RkYxQlxuICAgICAqIC0gXHU2M0QwXHU0RUE0XHU5MDNCXHU4RjkxXHU0RTBFIHN0YXRlOnVwZGF0ZSBEZWJ1ZyBcdTRFOEJcdTRFRjZcdTc1MzEgcnVuV2l0aFN0YXRlVHJhbnNhY3Rpb24gXHU3RURGXHU0RTAwXHU1OTA0XHU3NDA2XHUzMDAyXG4gICAgICovXG4gICAgY29uc3QgcnVuRGlzcGF0Y2ggPSAoYWN0aW9uOiBBKTogRWZmZWN0LkVmZmVjdDx2b2lkLCBuZXZlciwgYW55PiA9PlxuICAgICAgcnVuT3BlcmF0aW9uKFxuICAgICAgICBcImFjdGlvblwiLFxuICAgICAgICBcImFjdGlvbjpkaXNwYXRjaFwiLFxuICAgICAgICB7XG4gICAgICAgICAgcGF5bG9hZDogYWN0aW9uLFxuICAgICAgICAgIG1ldGE6IHsgbW9kdWxlSWQ6IG9wdGlvbnMubW9kdWxlSWQsIHJ1bnRpbWVJZDogaWQgfSxcbiAgICAgICAgfSxcbiAgICAgICAgcnVuV2l0aFN0YXRlVHJhbnNhY3Rpb24oXG4gICAgICAgICAge1xuICAgICAgICAgICAga2luZDogXCJhY3Rpb25cIixcbiAgICAgICAgICAgIG5hbWU6IFwiZGlzcGF0Y2hcIixcbiAgICAgICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICAgICAgX3RhZzogKGFjdGlvbiBhcyBhbnkpPy5fdGFnID8/IChhY3Rpb24gYXMgYW55KT8udHlwZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICAoKSA9PlxuICAgICAgICAgICAgRWZmZWN0LmdlbihmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAvLyBcdTUxNDhcdTVFOTRcdTc1MjggUHJpbWFyeSBSZWR1Y2VyXHVGRjA4XHU1M0VGXHU4MEZEXHU2NjJGIG5vLW9wXHVGRjA5XHUzMDAyXG4gICAgICAgICAgICAgIHlpZWxkKiBhcHBseVByaW1hcnlSZWR1Y2VyKGFjdGlvbilcblxuICAgICAgICAgICAgICAvLyBcdThCQjBcdTVGNTUgQWN0aW9uIFx1NkQzRVx1NTNEMVx1NEU4Qlx1NEVGNlx1RkYwOFx1NzUyOFx1NEU4RSBEZXZ0b29scy9cdThCQ0FcdTY1QURcdUZGMDlcdTMwMDJcbiAgICAgICAgICAgICAgeWllbGQqIERlYnVnLnJlY29yZCh7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJhY3Rpb246ZGlzcGF0Y2hcIixcbiAgICAgICAgICAgICAgICBtb2R1bGVJZDogb3B0aW9ucy5tb2R1bGVJZCxcbiAgICAgICAgICAgICAgICBhY3Rpb24sXG4gICAgICAgICAgICAgICAgcnVudGltZUlkOiBpZCxcbiAgICAgICAgICAgICAgICB0eG5JZDogdHhuQ29udGV4dC5jdXJyZW50Py50eG5JZCxcbiAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAvLyBcdTVDMDYgQWN0aW9uIFx1NTNEMVx1NUUwM1x1N0VEOVx1NjI0MFx1NjcwOSB3YXRjaGVyXHVGRjA4TG9naWMgLyBGbG93XHVGRjA5XHUzMDAyXG4gICAgICAgICAgICAgIHlpZWxkKiBQdWJTdWIucHVibGlzaChhY3Rpb25IdWIsIGFjdGlvbilcbiAgICAgICAgICAgIH0pLFxuICAgICAgICApLFxuICAgICAgKVxuXG4gICAgY29uc3QgcnVudGltZTogUHVibGljTW9kdWxlUnVudGltZTxTLCBBPiA9IHtcbiAgICAgIGlkLFxuICAgICAgLy8gXHU1QzA2IG1vZHVsZUlkIFx1NjZCNFx1OTczMlx1NTIzMCBSdW50aW1lIFx1NEUwQVx1RkYwQ1x1NEZCRlx1NEU4RSBSZWFjdCAvIERldnRvb2xzIFx1NTcyOFx1ODlDNlx1NTZGRVx1NUM0Mlx1NTE3M1x1ODA1NCBNb2R1bGUgXHU0RkUxXHU2MDZGXHUzMDAyXG4gICAgICBtb2R1bGVJZDogb3B0aW9ucy5tb2R1bGVJZCxcbiAgICAgIGdldFN0YXRlOiByZWFkU3RhdGUsXG4gICAgICBzZXRTdGF0ZTogKG5leHQpID0+XG4gICAgICAgIHNldFN0YXRlSW50ZXJuYWwobmV4dCwge1xuICAgICAgICAgIHBhdGg6IFwiKlwiLFxuICAgICAgICAgIHRvOiBuZXh0LFxuICAgICAgICAgIHJlYXNvbjogXCJzdGF0ZTpzZXRcIixcbiAgICAgICAgfSksXG4gICAgICBkaXNwYXRjaDogKGFjdGlvbikgPT5cbiAgICAgICAgLy8gXHU1QzA2XHU0RThCXHU1MkExXHU4QkY3XHU2QzQyXHU2MzkyXHU1MTY1XHU5NjFGXHU1MjE3XHVGRjBDXHU0RkREXHU4QkMxXHU1MzU1XHU1QjlFXHU0RjhCXHU1MTg1XHU2MzA5IEZJRk8gXHU0RTMyXHU4ODRDXHU2MjY3XHU4ODRDXHUzMDAyXG4gICAgICAgIGVucXVldWVUcmFuc2FjdGlvbihydW5EaXNwYXRjaChhY3Rpb24pKSxcbiAgICAgIGFjdGlvbnMkOiBTdHJlYW0uZnJvbVB1YlN1YihhY3Rpb25IdWIpLFxuICAgICAgY2hhbmdlczogPFY+KHNlbGVjdG9yOiAoczogUykgPT4gVikgPT5cbiAgICAgICAgU3RyZWFtLm1hcChzdGF0ZVJlZi5jaGFuZ2VzLCBzZWxlY3RvcikucGlwZShTdHJlYW0uY2hhbmdlcyksXG4gICAgICByZWY6IDxWID0gUz4oc2VsZWN0b3I/OiAoczogUykgPT4gVik6IFN1YnNjcmlwdGlvblJlZi5TdWJzY3JpcHRpb25SZWY8Vj4gPT4ge1xuICAgICAgICBpZiAoIXNlbGVjdG9yKSB7XG4gICAgICAgICAgcmV0dXJuIHN0YXRlUmVmIGFzIHVua25vd24gYXMgU3Vic2NyaXB0aW9uUmVmLlN1YnNjcmlwdGlvblJlZjxWPlxuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHU1M0VBXHU4QkZCXHU2RDNFXHU3NTFGXHU4OUM2XHU1NkZFXHVGRjFBXHU5MDFBXHU4RkM3IHNlbGVjdG9yIFx1NEVDRVx1NEUzQlx1NzJCNlx1NjAwMVx1NkQzRVx1NzUxRlx1NTAzQ1x1RkYwQ1x1NUU3Nlx1Nzk4MVx1NkI2Mlx1NTE5OVx1NTE2NVxuICAgICAgICBjb25zdCByZWFkb25seVJlZiA9IHtcbiAgICAgICAgICBnZXQ6IEVmZmVjdC5tYXAoU3Vic2NyaXB0aW9uUmVmLmdldChzdGF0ZVJlZiksIHNlbGVjdG9yKSxcbiAgICAgICAgICBtb2RpZnk6ICgpID0+IEVmZmVjdC5kaWVNZXNzYWdlKFwiQ2Fubm90IHdyaXRlIHRvIGEgZGVyaXZlZCByZWZcIiksXG4gICAgICAgIH0gYXMgdW5rbm93biBhcyBSZWYuUmVmPFY+XG5cbiAgICAgICAgY29uc3QgZGVyaXZlZCA9IHtcbiAgICAgICAgICAvLyBTdWJzY3JpcHRpb25SZWYgXHU1MTg1XHU5MEU4XHU1QjlFXHU3M0IwXHU0RjFBXHU4QkJGXHU5NUVFIHNlbGYucmVmIC8gc2VsZi5wdWJzdWIgLyBzZWxmLnNlbWFwaG9yZVxuICAgICAgICAgIHJlZjogcmVhZG9ubHlSZWYsXG4gICAgICAgICAgcHVic3ViOiB7XG4gICAgICAgICAgICBwdWJsaXNoOiAoKSA9PiBFZmZlY3Quc3VjY2VlZCh0cnVlKSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNlbWFwaG9yZToge1xuICAgICAgICAgICAgd2l0aFBlcm1pdHM6XG4gICAgICAgICAgICAgICgpID0+XG4gICAgICAgICAgICAgIDxBLCBFLCBSPihzZWxmOiBFZmZlY3QuRWZmZWN0PEEsIEUsIFI+KTogRWZmZWN0LkVmZmVjdDxBLCBFLCBSPiA9PlxuICAgICAgICAgICAgICAgIHNlbGYsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBnZXQ6IHJlYWRvbmx5UmVmLmdldCxcbiAgICAgICAgICBtb2RpZnk6IHJlYWRvbmx5UmVmLm1vZGlmeSxcbiAgICAgICAgICAvLyBcdTZEM0VcdTc1MUZcdTZENDFcdUZGMUFcdTVCRjlcdTUzOUZcdTU5Q0Igc3RhdGVSZWYuY2hhbmdlcyBcdTUwNUEgc2VsZWN0b3IgXHU2NjIwXHU1QzA0ICsgXHU1M0JCXHU5MUNEXG4gICAgICAgICAgY2hhbmdlczogU3RyZWFtLm1hcChzdGF0ZVJlZi5jaGFuZ2VzLCBzZWxlY3RvcikucGlwZShcbiAgICAgICAgICAgIFN0cmVhbS5jaGFuZ2VzXG4gICAgICAgICAgKSBhcyBTdHJlYW0uU3RyZWFtPFY+LFxuICAgICAgICB9IGFzIHVua25vd24gYXMgU3Vic2NyaXB0aW9uUmVmLlN1YnNjcmlwdGlvblJlZjxWPlxuXG4gICAgICAgIHJldHVybiBkZXJpdmVkXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHU2Nzg0XHU5MDIwXHU2NzAwXHU1QzBGXHU1MzE2XHU3Njg0IGltcG9ydHMtc2NvcGUgaW5qZWN0b3JcdUZGMUFcbiAgICAvLyAtIFx1NTNFQVx1NEZERFx1NUI1OCBNb2R1bGVUb2tlbiAtPiBNb2R1bGVSdW50aW1lIFx1NjYyMFx1NUMwNFx1RkYxQlxuICAgIC8vIC0gXHU0RTI1XHU3OTgxXHU2MjhBXHU1QjhDXHU2NTc0IENvbnRleHQgXHU2MzU1XHU4M0I3XHU4RkRCIHJ1bnRpbWVcdUZGMDhcdTkwN0ZcdTUxNEQgcm9vdC9iYXNlIHNlcnZpY2VzIFx1ODhBQlx1NjEwRlx1NTkxNlx1NUYxNVx1NzUyOFx1NUJGQ1x1ODFGNFx1NkNDNFx1NkYwRlx1RkYwOVx1MzAwMlxuICAgIGNvbnN0IGltcG9ydHNNYXAgPSBuZXcgTWFwPFxuICAgICAgQ29udGV4dC5UYWc8YW55LCBQdWJsaWNNb2R1bGVSdW50aW1lPGFueSwgYW55Pj4sXG4gICAgICBQdWJsaWNNb2R1bGVSdW50aW1lPGFueSwgYW55PlxuICAgID4oKVxuXG4gICAgZm9yIChjb25zdCBpbXBvcnRlZCBvZiBvcHRpb25zLmltcG9ydHMgPz8gW10pIHtcbiAgICAgIGNvbnN0IG1heWJlID0geWllbGQqIEVmZmVjdC5zZXJ2aWNlT3B0aW9uKGltcG9ydGVkKVxuICAgICAgaWYgKE9wdGlvbi5pc1NvbWUobWF5YmUpKSB7XG4gICAgICAgIGltcG9ydHNNYXAuc2V0KGltcG9ydGVkLCBtYXliZS52YWx1ZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBpbXBvcnRzU2NvcGU6IEltcG9ydHNTY29wZSA9IHtcbiAgICAgIGtpbmQ6IFwiaW1wb3J0cy1zY29wZVwiLFxuICAgICAgZ2V0OiAobW9kdWxlKSA9PiBpbXBvcnRzTWFwLmdldChtb2R1bGUpLFxuICAgIH1cblxuICAgIDsocnVudGltZSBhcyBhbnkpLl9faW1wb3J0c1Njb3BlID0gaW1wb3J0c1Njb3BlXG4gICAgeWllbGQqIEVmZmVjdC5hZGRGaW5hbGl6ZXIoKCkgPT5cbiAgICAgIEVmZmVjdC5zeW5jKCgpID0+IHtcbiAgICAgICAgaW1wb3J0c01hcC5jbGVhcigpXG4gICAgICAgIDsocnVudGltZSBhcyBhbnkpLl9faW1wb3J0c1Njb3BlID0gdW5kZWZpbmVkXG4gICAgICB9KSxcbiAgICApXG5cbiAgICBjb25zdCBpbnN0YW5jZUtleSA9XG4gICAgICBvcHRpb25zLm1vZHVsZUlkICE9IG51bGwgPyBgJHtvcHRpb25zLm1vZHVsZUlkfTo6JHtpZH1gIDogdW5kZWZpbmVkXG5cblxuICAgIGlmIChpbnN0YW5jZUtleSkge1xuICAgICAgcnVudGltZUJ5SW5zdGFuY2VLZXkuc2V0KFxuICAgICAgICBpbnN0YW5jZUtleSxcbiAgICAgICAgcnVudGltZSBhcyBQdWJsaWNNb2R1bGVSdW50aW1lPGFueSwgYW55PixcbiAgICAgIClcbiAgICB9XG5cbiAgICAvLyBcdTY2QjRcdTk3MzJcdTUxODVcdTkwRTggU3RhdGVUcmFuc2FjdGlvbiBcdTkxNERcdTdGNkVcdUZGMENcdTRGQkZcdTRFOEVcdTZENEJcdThCRDVcdTRFMEVcdThCQ0FcdTY1QURcdTU3MjhcdTRFMERcdTU0MENcdTkxNERcdTdGNkVcdTZFOTBcdTRFMEJcdTc2ODRcdTg5QzJcdTZENEJcdTdFQTdcdTUyMkJcdTUxQjNcdTdCNTZcdTMwMDJcbiAgICA7KHJ1bnRpbWUgYXMgYW55KS5fX3N0YXRlVHJhbnNhY3Rpb25JbnN0cnVtZW50YXRpb24gPSBpbnN0cnVtZW50YXRpb25cblxuICAgIC8vIFx1NUMwNlx1NTE4NVx1OTBFOFx1NkNFOFx1NTE4Q1x1NTFGRFx1NjU3MFx1NjZCNFx1OTczMlx1N0VEOSBCb3VuZEFwaVJ1bnRpbWVcdUZGMENcdTc1MjhcdTRFOEVcdTVCOUVcdTczQjAgJC5yZWR1Y2VyIFx1OEJFRFx1NkNENVx1N0NENlx1MzAwMlxuICAgIDsocnVudGltZSBhcyBhbnkpLl9fcmVnaXN0ZXJSZWR1Y2VyID0gcmVnaXN0ZXJSZWR1Y2VyXG5cbiAgICAvLyBTdGF0ZVRyYWl0IFByb2dyYW0gXHU2Q0U4XHU1MThDXHU1MTY1XHU1M0UzXHVGRjFBXHU3NTMxIFN0YXRlVHJhaXQuaW5zdGFsbCBcdThDMDNcdTc1MjhcdUZGMENcdTVDMDYgUHJvZ3JhbSBcdTRFMEJcdTUzRDFcdTUyMzAgUnVudGltZSBcdTUxODVcdTY4MzhcdTMwMDJcbiAgICA7KHJ1bnRpbWUgYXMgYW55KS5fX3JlZ2lzdGVyU3RhdGVUcmFpdFByb2dyYW0gPSAoXG4gICAgICBwcm9ncmFtOiBTdGF0ZVRyYWl0UHJvZ3JhbTxhbnk+LFxuICAgICk6IHZvaWQgPT4ge1xuICAgICAgc3RhdGVUcmFpdFByb2dyYW0gPSBwcm9ncmFtXG4gICAgICBzdGF0ZVRyYWl0TGlzdENvbmZpZ3MgPSBSb3dJZC5jb2xsZWN0TGlzdENvbmZpZ3MocHJvZ3JhbS5zcGVjIGFzIGFueSlcbiAgICB9XG5cbiAgICAvLyBSb3dJRCBTdG9yZVx1RkYxQVx1NEVDNVx1NEY5QiBTdGF0ZVRyYWl0L3NvdXJjZSBcdTRFMEUgVHJhaXRMaWZlY3ljbGUvRGV2dG9vbHMgXHU3QjQ5XHU1MTg1XHU5MEU4XHU4MEZEXHU1MjlCXHU0RjdGXHU3NTI4XHUzMDAyXG4gICAgOyhydW50aW1lIGFzIGFueSkuX19yb3dJZFN0b3JlID0gcm93SWRTdG9yZVxuXG4gICAgLy8gVHJhaXRMaWZlY3ljbGUgc2NvcGVkIHZhbGlkYXRlXHVGRjFBXHU1QzA2XHU4QkY3XHU2QzQyXHU2MzAyXHU1MjMwXHU1RjUzXHU1MjREXHU0RThCXHU1MkExXHVGRjBDXHU3QjQ5XHU1Rjg1XHU1NzI4IGNvbnZlcmdlIFx1NEU0Qlx1NTQwRVx1N0VERlx1NEUwMCBmbHVzaFx1MzAwMlxuICAgIDsocnVudGltZSBhcyBhbnkpLl9fZW5xdWV1ZVN0YXRlVHJhaXRWYWxpZGF0ZVJlcXVlc3QgPSAoXG4gICAgICByZXF1ZXN0OiBTdGF0ZVRyYWl0VmFsaWRhdGUuU2NvcGVkVmFsaWRhdGVSZXF1ZXN0LFxuICAgICk6IHZvaWQgPT4ge1xuICAgICAgaWYgKCF0eG5Db250ZXh0LmN1cnJlbnQpIHJldHVyblxuICAgICAgY29uc3QgY3VycmVudDogYW55ID0gdHhuQ29udGV4dC5jdXJyZW50XG4gICAgICBjb25zdCBsaXN0OiBBcnJheTxTdGF0ZVRyYWl0VmFsaWRhdGUuU2NvcGVkVmFsaWRhdGVSZXF1ZXN0PiA9XG4gICAgICAgIGN1cnJlbnQuc3RhdGVUcmFpdFZhbGlkYXRlUmVxdWVzdHMgPz8gW11cbiAgICAgIGxpc3QucHVzaChyZXF1ZXN0KVxuICAgICAgY3VycmVudC5zdGF0ZVRyYWl0VmFsaWRhdGVSZXF1ZXN0cyA9IGxpc3RcbiAgICB9XG5cbiAgICAvLyBcdTRFQzVcdTRGOUJcdTUxODVcdTkwRThcdTRGN0ZcdTc1MjhcdUZGMUFcdTU3MjhcdTVGNTNcdTUyNEQgUnVudGltZSBcdTc2ODQgU3RhdGVUcmFuc2FjdGlvbiBcdTRFMEFcdThCQjBcdTVGNTVcdTVCNTdcdTZCQjVcdTdFQTcgUGF0Y2hcdTMwMDJcbiAgICA7KHJ1bnRpbWUgYXMgYW55KS5fX3JlY29yZFN0YXRlUGF0Y2ggPSAoXG4gICAgICBwYXRjaDoge1xuICAgICAgICByZWFkb25seSBwYXRoOiBzdHJpbmdcbiAgICAgICAgcmVhZG9ubHkgZnJvbT86IHVua25vd25cbiAgICAgICAgcmVhZG9ubHkgdG8/OiB1bmtub3duXG4gICAgICAgIHJlYWRvbmx5IHJlYXNvbjogU3RhdGVUcmFuc2FjdGlvbi5QYXRjaFJlYXNvblxuICAgICAgICByZWFkb25seSB0cmFpdE5vZGVJZD86IHN0cmluZ1xuICAgICAgICByZWFkb25seSBzdGVwSWQ/OiBzdHJpbmdcbiAgICAgIH0sXG4gICAgKTogdm9pZCA9PiB7XG4gICAgICBTdGF0ZVRyYW5zYWN0aW9uLnJlY29yZFBhdGNoKHR4bkNvbnRleHQsIHBhdGNoKVxuICAgIH1cblxuICAgIC8vIFx1NEVDNVx1NEY5Qlx1NTE4NVx1OTBFOFx1NEY3Rlx1NzUyOFx1RkYxQVx1NUMwNiBSZXBsYXlMb2cgXHU0RThCXHU0RUY2XHU4QkIwXHU1RjU1XHU1MjMwXHU1RjUzXHU1MjREXHU0RThCXHU1MkExXHVGRjBDXHU0RUU1XHU0RkJGXHU1NzI4IHN0YXRlOnVwZGF0ZSBcdTRFMkRcdTUxNzNcdTgwNTQgcmVwbGF5RXZlbnRcdTMwMDJcbiAgICA7KHJ1bnRpbWUgYXMgYW55KS5fX3JlY29yZFJlcGxheUV2ZW50ID0gKGV2ZW50OiB1bmtub3duKTogdm9pZCA9PiB7XG4gICAgICBpZiAoIXR4bkNvbnRleHQuY3VycmVudCkgcmV0dXJuXG4gICAgICBjb25zdCBjdXJyZW50OiBhbnkgPSB0eG5Db250ZXh0LmN1cnJlbnRcbiAgICAgIGN1cnJlbnQubGFzdFJlcGxheUV2ZW50ID0ge1xuICAgICAgICAuLi4oZXZlbnQgYXMgYW55KSxcbiAgICAgICAgdHhuSWQ6IGN1cnJlbnQudHhuSWQsXG4gICAgICAgIHRyaWdnZXI6IGN1cnJlbnQub3JpZ2luLFxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1NEVDNVx1NEY5Qlx1NTE4NVx1OTBFOFx1NEY3Rlx1NzUyOFx1RkYxQVx1NEUzQSBCb3VuZEFwaSAvIFRyYWl0cyBcdTdCNDlcdTUxNjVcdTUzRTNcdTYzRDBcdTRGOUJcdTdFREZcdTRFMDBcdTc2ODRcdTRFOEJcdTUyQTFcdTYyNjdcdTg4NENcdTUyQTlcdTYyNEJcdUZGMENcbiAgICAvLyBcdTc4NkVcdTRGREQgc291cmNlLXJlZnJlc2ggXHU3QjQ5XHU5MDNCXHU4RjkxXHU1MTY1XHU1M0UzXHU0RTBFIGRpc3BhdGNoIFx1NTE3MVx1NEVBQlx1NTQwQ1x1NEUwMFx1OTYxRlx1NTIxN1x1NEUwRSBTdGF0ZVRyYW5zYWN0aW9uIFx1OEJFRFx1NEU0OVx1MzAwMlxuICAgIDsocnVudGltZSBhcyBhbnkpLl9fcnVuV2l0aFN0YXRlVHJhbnNhY3Rpb24gPSAoXG4gICAgICBvcmlnaW46IFN0YXRlVHJhbnNhY3Rpb24uU3RhdGVUeG5PcmlnaW4sXG4gICAgICBib2R5OiAoKSA9PiBFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBhbnk+LFxuICAgICk6IEVmZmVjdC5FZmZlY3Q8dm9pZD4gPT5cbiAgICAgIGVucXVldWVUcmFuc2FjdGlvbihcbiAgICAgICAgcnVuT3BlcmF0aW9uKFxuICAgICAgICAgIChvcmlnaW4ua2luZCBhcyBhbnkpIGFzIEVmZmVjdE9wLkVmZmVjdE9wW1wia2luZFwiXSxcbiAgICAgICAgICBvcmlnaW4ubmFtZSA/IGB0eG46JHtvcmlnaW4ubmFtZX1gIDogXCJ0eG5cIixcbiAgICAgICAgICB7IG1ldGE6IHsgbW9kdWxlSWQ6IG9wdGlvbnMubW9kdWxlSWQsIHJ1bnRpbWVJZDogaWQgfSB9LFxuICAgICAgICAgIHJ1bldpdGhTdGF0ZVRyYW5zYWN0aW9uKG9yaWdpbiwgYm9keSksXG4gICAgICAgICksXG4gICAgICApXG5cbiAgICAvLyBcdTRFQzVcdTRGOUIgRGV2dG9vbHMgLyBcdTZENEJcdThCRDVcdTRGN0ZcdTc1MjhcdUZGMUFcdTU3RkFcdTRFOEVcdTVERjJcdTY3MDkgU3RhdGVUcmFuc2FjdGlvbiBcdTVGRUJcdTcxNjdcdTU2REVcdTY1M0VcdTYzMDdcdTVCOUFcdTRFOEJcdTUyQTFcdTUyNEQvXHU1NDBFXHU3Njg0XHU3MkI2XHU2MDAxXHUzMDAyXG4gICAgOyhydW50aW1lIGFzIGFueSkuX19hcHBseVRyYW5zYWN0aW9uU25hcHNob3QgPSAoXG4gICAgICB0eG5JZDogc3RyaW5nLFxuICAgICAgbW9kZTogXCJiZWZvcmVcIiB8IFwiYWZ0ZXJcIixcbiAgICApOiBFZmZlY3QuRWZmZWN0PHZvaWQ+ID0+XG4gICAgICBlbnF1ZXVlVHJhbnNhY3Rpb24oXG4gICAgICAgIEVmZmVjdC5nZW4oZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAvLyBcdTc1MUZcdTRFQTdcdTczQUZcdTU4ODNcdTlFRDhcdThCQTRcdTRFMERcdTU0MkZcdTc1MjhcdTY1RjZcdTk1RjRcdTY1QzVcdTg4NENcdUZGMENcdTkwN0ZcdTUxNERcdThCRUZcdTc1MjhcdUZGMUJcbiAgICAgICAgICAvLyBEZXZ0b29scyBcdTVFOTRcdTU3MjggZGV2L3Rlc3QgXHU3M0FGXHU1ODgzXHU0RTBCXHU3RUQzXHU1NDA4IGluc3RydW1lbnRhdGlvbiA9IFwiZnVsbFwiIFx1NEY3Rlx1NzUyOFx1OEJFNVx1ODBGRFx1NTI5Qlx1MzAwMlxuICAgICAgICAgIGlmICghaXNEZXZFbnYoKSkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgdHhuID0gdHhuQnlJZC5nZXQodHhuSWQpXG4gICAgICAgICAgaWYgKCF0eG4pIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IHRhcmdldFN0YXRlID1cbiAgICAgICAgICAgIG1vZGUgPT09IFwiYmVmb3JlXCJcbiAgICAgICAgICAgICAgPyB0eG4uaW5pdGlhbFN0YXRlU25hcHNob3RcbiAgICAgICAgICAgICAgOiB0eG4uZmluYWxTdGF0ZVNuYXBzaG90XG5cbiAgICAgICAgICBpZiAodGFyZ2V0U3RhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gXHU1NzI4XHU2NzJBXHU5MUM3XHU5NkM2XHU1RkVCXHU3MTY3XHU3Njg0XHU5MTREXHU3RjZFXHU0RTBCXHU2NUUwXHU2Q0Q1XHU4RkRCXHU4ODRDXHU2NUY2XHU5NUY0XHU2NUM1XHU4ODRDXHUzMDAyXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBcdTRGN0ZcdTc1MjggU3RhdGVUcmFuc2FjdGlvbiBcdThCQjBcdTVGNTVcdTRFMDBcdTZCMjEgb3JpZ2luLmtpbmQgPSBcImRldnRvb2xzXCIgXHU3Njg0XHU1NkRFXHU2NTNFXHU2NENEXHU0RjVDXHVGRjBDXG4gICAgICAgICAgLy8gXHU0RUU1XHU1NzI4IERldnRvb2xzIFx1NEU4Qlx1NTJBMVx1ODlDNlx1NTZGRVx1NEUyRFx1NzU1OVx1NEUwQlx1NUI4Q1x1NjU3NFx1NzY4NCB0aW1lLXRyYXZlbCBcdThGNjhcdThGRjlcdTMwMDJcbiAgICAgICAgICB5aWVsZCogcnVuV2l0aFN0YXRlVHJhbnNhY3Rpb24oXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGtpbmQ6IFwiZGV2dG9vbHNcIixcbiAgICAgICAgICAgICAgbmFtZTogXCJ0aW1lLXRyYXZlbFwiLFxuICAgICAgICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgICAgICAgYmFzZVR4bklkOiB0eG5JZCxcbiAgICAgICAgICAgICAgICBtb2RlLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICgpID0+XG4gICAgICAgICAgICAgIEVmZmVjdC5zeW5jKCgpID0+IHtcbiAgICAgICAgICAgICAgICBTdGF0ZVRyYW5zYWN0aW9uLnVwZGF0ZURyYWZ0KFxuICAgICAgICAgICAgICAgICAgdHhuQ29udGV4dCxcbiAgICAgICAgICAgICAgICAgIHRhcmdldFN0YXRlIGFzIFMsXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IFwiKlwiLFxuICAgICAgICAgICAgICAgICAgICByZWFzb246IFwiZGV2dG9vbHNcIixcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICApXG4gICAgICAgIH0pLFxuICAgICAgKVxuXG4gICAgLy8gXHU2Q0U4XHU1MThDIFJ1bnRpbWVcdUZGMENcdTRGOUJcdThERThcdTZBMjFcdTU3NTdcdThCQkZcdTk1RUVcdUZGMDhMaW5rIFx1N0I0OVx1RkYwOVx1NEY3Rlx1NzUyOFxuICAgIGlmIChvcHRpb25zLnRhZykge1xuICAgICAgcmVnaXN0ZXJSdW50aW1lKG9wdGlvbnMudGFnIGFzIENvbnRleHQuVGFnPGFueSwgUHVibGljTW9kdWxlUnVudGltZTxTLCBBPj4sIHJ1bnRpbWUpXG4gICAgfVxuXG4gICAgeWllbGQqIEVmZmVjdC5hZGRGaW5hbGl6ZXIoKCkgPT5cbiAgICAgIGxpZmVjeWNsZS5ydW5EZXN0cm95LnBpcGUoXG4gICAgICAgIEVmZmVjdC5mbGF0TWFwKCgpID0+XG4gICAgICAgICAgcnVuT3BlcmF0aW9uKFxuICAgICAgICAgICAgXCJsaWZlY3ljbGVcIixcbiAgICAgICAgICAgIFwibW9kdWxlOmRlc3Ryb3lcIixcbiAgICAgICAgICAgIHsgbWV0YTogeyBtb2R1bGVJZDogb3B0aW9ucy5tb2R1bGVJZCwgcnVudGltZUlkOiBpZCB9IH0sXG4gICAgICAgICAgICBEZWJ1Zy5yZWNvcmQoe1xuICAgICAgICAgICAgICB0eXBlOiBcIm1vZHVsZTpkZXN0cm95XCIsXG4gICAgICAgICAgICAgIG1vZHVsZUlkOiBvcHRpb25zLm1vZHVsZUlkLFxuICAgICAgICAgICAgICBydW50aW1lSWQ6IGlkLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgKSxcbiAgICAgICAgKSxcbiAgICAgICAgRWZmZWN0LnRhcCgoKSA9PlxuICAgICAgICAgIEVmZmVjdC5zeW5jKCgpID0+IHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnRhZykge1xuICAgICAgICAgICAgICB1bnJlZ2lzdGVyUnVudGltZShcbiAgICAgICAgICAgICAgICBvcHRpb25zLnRhZyBhcyBDb250ZXh0LlRhZzxcbiAgICAgICAgICAgICAgICAgIGFueSxcbiAgICAgICAgICAgICAgICAgIFB1YmxpY01vZHVsZVJ1bnRpbWU8YW55LCBhbnk+XG4gICAgICAgICAgICAgICAgPixcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGluc3RhbmNlS2V5KSB7XG4gICAgICAgICAgICAgIHJ1bnRpbWVCeUluc3RhbmNlS2V5LmRlbGV0ZShpbnN0YW5jZUtleSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KSxcbiAgICAgICAgKSxcbiAgICAgICksXG4gICAgKVxuXG4gICAgaWYgKG9wdGlvbnMudGFnICYmIG9wdGlvbnMubG9naWNzPy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IG1vZHVsZUlkRm9yTG9ncyA9IG9wdGlvbnMubW9kdWxlSWQgPz8gXCJ1bmtub3duXCJcblxuICAgICAgY29uc3Qgd2l0aFJ1bnRpbWVBbmRMaWZlY3ljbGUgPSA8UjIsIEUyLCBBMj4oXG4gICAgICAgIGVmZjogRWZmZWN0LkVmZmVjdDxBMiwgRTIsIFIyPixcbiAgICAgICAgcGhhc2VSZWY/OiBQaGFzZVJlZlxuICAgICAgKSA9PiB7XG4gICAgICAgIGNvbnN0IHdpdGhTZXJ2aWNlcyA9IEVmZmVjdC5wcm92aWRlU2VydmljZShcbiAgICAgICAgICBFZmZlY3QucHJvdmlkZVNlcnZpY2UoXG4gICAgICAgICAgICBlZmYsXG4gICAgICAgICAgICBMaWZlY3ljbGUuTGlmZWN5Y2xlQ29udGV4dCxcbiAgICAgICAgICAgIGxpZmVjeWNsZVxuICAgICAgICAgICksXG4gICAgICAgICAgb3B0aW9ucy50YWcgYXMgQ29udGV4dC5UYWc8YW55LCBQdWJsaWNNb2R1bGVSdW50aW1lPFMsIEE+PixcbiAgICAgICAgICBydW50aW1lXG4gICAgICAgIClcblxuICAgICAgICAvLyBcdTRFM0EgTG9naWMgXHU1MTg1XHU5MEU4XHU3Njg0XHU2MjQwXHU2NzA5IEVmZmVjdCBcdTY1RTVcdTVGRDdcdTYyNTNcdTRFMEEgbW9kdWxlSWQgXHU3QjQ5XHU2Q0U4XHU4OUUzXHVGRjBDXHU0RkJGXHU0RThFXHU1NzI4IExvZ2dlciBcdTVDNDJcdTgxRUFcdTUyQThcdTUxNzNcdTgwNTRcdTUyMzBcdTUxNzdcdTRGNTMgTW9kdWxlXHUzMDAyXG4gICAgICAgIGNvbnN0IGFubm90YXRlZCA9IEVmZmVjdC5hbm5vdGF0ZUxvZ3Moe1xuICAgICAgICAgIFwibG9naXgubW9kdWxlSWRcIjogbW9kdWxlSWRGb3JMb2dzLFxuICAgICAgICB9KSh3aXRoU2VydmljZXMgYXMgRWZmZWN0LkVmZmVjdDxBMiwgRTIsIGFueT4pIGFzIEVmZmVjdC5FZmZlY3Q8QTIsIEUyLCBSMj5cblxuICAgICAgICBpZiAoIXBoYXNlUmVmKSB7XG4gICAgICAgICAgcmV0dXJuIGFubm90YXRlZFxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGhhc2VTZXJ2aWNlOiBMb2dpY0RpYWdub3N0aWNzLkxvZ2ljUGhhc2VTZXJ2aWNlID0ge1xuICAgICAgICAgIGdldCBjdXJyZW50KCkge1xuICAgICAgICAgICAgcmV0dXJuIHBoYXNlUmVmLmN1cnJlbnRcbiAgICAgICAgICB9LFxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIEVmZmVjdC5wcm92aWRlU2VydmljZShcbiAgICAgICAgICBhbm5vdGF0ZWQsXG4gICAgICAgICAgTG9naWNEaWFnbm9zdGljcy5Mb2dpY1BoYXNlU2VydmljZVRhZyxcbiAgICAgICAgICBwaGFzZVNlcnZpY2VcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBjb25zdCBoYW5kbGVMb2dpY0ZhaWx1cmUgPSAoY2F1c2U6IGFueSkgPT4ge1xuICAgICAgICBjb25zdCBwaGFzZUVycm9yTWFya2VyID0gW1xuICAgICAgICAgIC4uLkNhdXNlLmZhaWx1cmVzKGNhdXNlKSxcbiAgICAgICAgICAuLi5DYXVzZS5kZWZlY3RzKGNhdXNlKSxcbiAgICAgICAgXS5zb21lKChlcnIpID0+IChlcnIgYXMgYW55KT8uX3RhZyA9PT0gXCJMb2dpY1BoYXNlRXJyb3JcIilcblxuICAgICAgICBjb25zdCBiYXNlID0gbGlmZWN5Y2xlLm5vdGlmeUVycm9yKGNhdXNlLCB7XG4gICAgICAgICAgcGhhc2U6IFwibG9naWMuZm9ya1wiLFxuICAgICAgICAgIG1vZHVsZUlkOiBvcHRpb25zLm1vZHVsZUlkLFxuICAgICAgICB9KS5waXBlKFxuICAgICAgICAgIEVmZmVjdC5mbGF0TWFwKCgpID0+XG4gICAgICAgICAgICBydW5PcGVyYXRpb24oXG4gICAgICAgICAgICAgIFwibGlmZWN5Y2xlXCIsXG4gICAgICAgICAgICAgIFwibGlmZWN5Y2xlOmVycm9yXCIsXG4gICAgICAgICAgICAgIHsgcGF5bG9hZDogY2F1c2UsIG1ldGE6IHsgbW9kdWxlSWQ6IG9wdGlvbnMubW9kdWxlSWQsIHJ1bnRpbWVJZDogaWQgfSB9LFxuICAgICAgICAgICAgICBEZWJ1Zy5yZWNvcmQoe1xuICAgICAgICAgICAgICAgIHR5cGU6IFwibGlmZWN5Y2xlOmVycm9yXCIsXG4gICAgICAgICAgICAgICAgbW9kdWxlSWQ6IG9wdGlvbnMubW9kdWxlSWQsXG4gICAgICAgICAgICAgICAgY2F1c2UsXG4gICAgICAgICAgICAgICAgcnVudGltZUlkOiBpZCxcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSxcbiAgICAgICAgICBFZmZlY3QudGFwKCgpID0+XG4gICAgICAgICAgICBMaWZlY3ljbGVEaWFnbm9zdGljcy5lbWl0TWlzc2luZ09uRXJyb3JEaWFnbm9zdGljSWZOZWVkZWQoXG4gICAgICAgICAgICAgIGxpZmVjeWNsZSxcbiAgICAgICAgICAgICAgb3B0aW9ucy5tb2R1bGVJZFxuICAgICAgICAgICAgKVxuICAgICAgICAgICksXG4gICAgICAgICAgRWZmZWN0LnRhcCgoKSA9PlxuICAgICAgICAgICAgUmVkdWNlckRpYWdub3N0aWNzLmVtaXREaWFnbm9zdGljc0Zyb21DYXVzZShcbiAgICAgICAgICAgICAgY2F1c2UsXG4gICAgICAgICAgICAgIG9wdGlvbnMubW9kdWxlSWRcbiAgICAgICAgICAgIClcbiAgICAgICAgICApLFxuICAgICAgICAgIEVmZmVjdC50YXAoKCkgPT5cbiAgICAgICAgICAgIExvZ2ljRGlhZ25vc3RpY3MuZW1pdEVudlNlcnZpY2VOb3RGb3VuZERpYWdub3N0aWNJZk5lZWRlZChcbiAgICAgICAgICAgICAgY2F1c2UsXG4gICAgICAgICAgICAgIG9wdGlvbnMubW9kdWxlSWRcbiAgICAgICAgICAgIClcbiAgICAgICAgICApLFxuICAgICAgICAgIEVmZmVjdC50YXAoKCkgPT5cbiAgICAgICAgICAgIExvZ2ljRGlhZ25vc3RpY3MuZW1pdEludmFsaWRQaGFzZURpYWdub3N0aWNJZk5lZWRlZChcbiAgICAgICAgICAgICAgY2F1c2UsXG4gICAgICAgICAgICAgIG9wdGlvbnMubW9kdWxlSWRcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgIClcblxuICAgICAgICAvLyBcdTVCRjlcdTRFOEUgTG9naWNQaGFzZUVycm9yXHVGRjFBXHU1M0VBXHU1M0QxXHU4QkNBXHU2NUFEXHVGRjBDXHU0RTBEXHU4QkE5XHU2NTc0XHU0RTJBIE1vZHVsZVJ1bnRpbWUgXHU2Nzg0XHU5MDIwXHU1OTMxXHU4RDI1XHVGRjBDXG4gICAgICAgIC8vIFx1NEVFNVx1NTE0RCBydW5TeW5jIFx1OERFRlx1NUY4NFx1ODhBQiBBc3luY0ZpYmVyRXhjZXB0aW9uIFx1NjI1M1x1NjVBRFx1MzAwMlxuICAgICAgICBpZiAocGhhc2VFcnJvck1hcmtlcikge1xuICAgICAgICAgIHJldHVybiBiYXNlXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYmFzZS5waXBlKEVmZmVjdC5mbGF0TWFwKCgpID0+IEVmZmVjdC5mYWlsQ2F1c2UoY2F1c2UpKSlcbiAgICAgIH1cblxuICAgICAgY29uc3QgaXNMb2dpY1BsYW4gPSAodmFsdWU6IHVua25vd24pOiB2YWx1ZSBpcyBMb2dpY1BsYW48YW55LCBhbnksIGFueT4gPT5cbiAgICAgICAgQm9vbGVhbihcbiAgICAgICAgICB2YWx1ZSAmJlxuICAgICAgICAgIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgIFwicnVuXCIgaW4gKHZhbHVlIGFzIGFueSkgJiZcbiAgICAgICAgICBcInNldHVwXCIgaW4gKHZhbHVlIGFzIGFueSlcbiAgICAgICAgKVxuXG4gICAgICBjb25zdCByZXR1cm5zTG9naWNQbGFuID0gKHZhbHVlOiB1bmtub3duKTogYm9vbGVhbiA9PlxuICAgICAgICBCb29sZWFuKCh2YWx1ZSBhcyBhbnkpPy5fX2xvZ2ljUGxhbiA9PT0gdHJ1ZSlcblxuICAgICAgY29uc3QgZXh0cmFjdFBoYXNlUmVmID0gKHZhbHVlOiB1bmtub3duKTogUGhhc2VSZWYgfCB1bmRlZmluZWQgPT5cbiAgICAgICAgKHZhbHVlIGFzIGFueSk/Ll9fcGhhc2VSZWYgYXMgUGhhc2VSZWYgfCB1bmRlZmluZWRcblxuICAgICAgY29uc3Qgbm9ybWFsaXplVG9QbGFuID0gKFxuICAgICAgICB2YWx1ZTogdW5rbm93blxuICAgICAgKTogTG9naWNQbGFuPGFueSwgYW55LCBhbnk+ID0+XG4gICAgICAgIGlzTG9naWNQbGFuKHZhbHVlKVxuICAgICAgICAgID8gT2JqZWN0LmFzc2lnbih2YWx1ZSBhcyBMb2dpY1BsYW48YW55LCBhbnksIGFueT4sIHtcbiAgICAgICAgICAgIF9fcGhhc2VSZWY6IGV4dHJhY3RQaGFzZVJlZih2YWx1ZSkgPz8gY3JlYXRlUGhhc2VSZWYoKSxcbiAgICAgICAgICB9KVxuICAgICAgICAgIDogT2JqZWN0LmFzc2lnbihcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgc2V0dXA6IEVmZmVjdC52b2lkLFxuICAgICAgICAgICAgICBydW46IHZhbHVlIGFzIEVmZmVjdC5FZmZlY3Q8YW55LCBhbnksIGFueT4sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgeyBfX3BoYXNlUmVmOiBleHRyYWN0UGhhc2VSZWYodmFsdWUpID8/IGNyZWF0ZVBoYXNlUmVmKCkgfVxuICAgICAgICAgIClcblxuICAgICAgZm9yIChjb25zdCByYXdMb2dpYyBvZiBvcHRpb25zLmxvZ2ljcykge1xuICAgICAgICBpZiAoaXNMb2dpY1BsYW4ocmF3TG9naWMpKSB7XG4gICAgICAgICAgY29uc3QgcGhhc2VSZWYgPSBleHRyYWN0UGhhc2VSZWYocmF3TG9naWMpID8/IGNyZWF0ZVBoYXNlUmVmKClcbiAgICAgICAgICBjb25zdCBzZXR1cFBoYXNlID0gd2l0aFJ1bnRpbWVBbmRMaWZlY3ljbGUocmF3TG9naWMuc2V0dXAsIHBoYXNlUmVmKVxuICAgICAgICAgIGNvbnN0IHJ1blBoYXNlID0gd2l0aFJ1bnRpbWVBbmRMaWZlY3ljbGUocmF3TG9naWMucnVuLCBwaGFzZVJlZilcblxuICAgICAgICAgIHBoYXNlUmVmLmN1cnJlbnQgPSBcInNldHVwXCJcbiAgICAgICAgICBnbG9iYWxMb2dpY1BoYXNlUmVmLmN1cnJlbnQgPSBcInNldHVwXCJcbiAgICAgICAgICB5aWVsZCogc2V0dXBQaGFzZS5waXBlKEVmZmVjdC5jYXRjaEFsbENhdXNlKGhhbmRsZUxvZ2ljRmFpbHVyZSkpXG4gICAgICAgICAgcGhhc2VSZWYuY3VycmVudCA9IFwicnVuXCJcbiAgICAgICAgICBnbG9iYWxMb2dpY1BoYXNlUmVmLmN1cnJlbnQgPSBcInJ1blwiXG4gICAgICAgICAgeWllbGQqIEVmZmVjdC5mb3JrU2NvcGVkKFxuICAgICAgICAgICAgcnVuUGhhc2UucGlwZShFZmZlY3QuY2F0Y2hBbGxDYXVzZShoYW5kbGVMb2dpY0ZhaWx1cmUpKVxuICAgICAgICAgIClcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJldHVybnNMb2dpY1BsYW4ocmF3TG9naWMpKSB7XG4gICAgICAgICAgLy8gbG9naWMgXHU2NjJGXHU4RkQ0XHU1NkRFIExvZ2ljUGxhbiBcdTc2ODQgRWZmZWN0XHVGRjBDXHU5NzAwXHU4OTgxXHU4RkQwXHU4ODRDXHU0RTAwXHU2QjIxXHU0RUU1XHU4OUUzXHU2NzkwXHU1MUZBIHBsYW5cbiAgICAgICAgICBjb25zdCBwaGFzZVJlZiA9IGV4dHJhY3RQaGFzZVJlZihyYXdMb2dpYykgPz8gY3JlYXRlUGhhc2VSZWYoKVxuICAgICAgICAgIGNvbnN0IG1ha2VOb29wUGxhbiA9ICgpOiBMb2dpY1BsYW48YW55LCBhbnksIGFueT4gPT5cbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBzZXR1cDogRWZmZWN0LnZvaWQsXG4gICAgICAgICAgICAgICAgcnVuOiBFZmZlY3Qudm9pZCxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIF9fcGhhc2VSZWY6IHBoYXNlUmVmLFxuICAgICAgICAgICAgICAgIC8vIFx1NjgwN1x1OEJCMFx1NEUzQVx1MjAxQ1x1NEVDNVx1NzUyOFx1NEU4RSBwaGFzZSBcdThCQ0FcdTY1QURcdTc2ODRcdTUzNjBcdTRGNEQgcGxhblx1MjAxRFx1RkYwQ1x1NTQwRVx1N0VFRFx1NEUwRFx1NTE4RCBmb3JrIHJ1biBcdTZCQjVcdUZGMENcbiAgICAgICAgICAgICAgICAvLyBcdTRFRTVcdTkwN0ZcdTUxNERcdTU3MjggcnVuU3luYyBcdThERUZcdTVGODRcdTRFMEFcdTRFQTdcdTc1MUYgQXN5bmNGaWJlckV4Y2VwdGlvblx1MzAwMlxuICAgICAgICAgICAgICAgIF9fc2tpcFJ1bjogdHJ1ZSBhcyBjb25zdCxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKVxuXG4gICAgICAgICAgcGhhc2VSZWYuY3VycmVudCA9IFwic2V0dXBcIlxuICAgICAgICAgIGdsb2JhbExvZ2ljUGhhc2VSZWYuY3VycmVudCA9IFwic2V0dXBcIlxuICAgICAgICAgIGNvbnN0IHJlc29sdmVkUGxhbiA9IHlpZWxkKiB3aXRoUnVudGltZUFuZExpZmVjeWNsZShcbiAgICAgICAgICAgIHJhd0xvZ2ljIGFzIEVmZmVjdC5FZmZlY3Q8YW55LCBhbnksIGFueT4sXG4gICAgICAgICAgICBwaGFzZVJlZlxuICAgICAgICAgICkucGlwZShcbiAgICAgICAgICAgIEVmZmVjdC5tYXRjaENhdXNlRWZmZWN0KHtcbiAgICAgICAgICAgICAgb25TdWNjZXNzOiAodmFsdWUpID0+XG4gICAgICAgICAgICAgICAgRWZmZWN0LnN1Y2NlZWQobm9ybWFsaXplVG9QbGFuKHZhbHVlKSksXG4gICAgICAgICAgICAgIG9uRmFpbHVyZTogKGNhdXNlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNMb2dpY1BoYXNlRXJyb3IgPSBbXG4gICAgICAgICAgICAgICAgICAuLi5DYXVzZS5mYWlsdXJlcyhjYXVzZSksXG4gICAgICAgICAgICAgICAgICAuLi5DYXVzZS5kZWZlY3RzKGNhdXNlKSxcbiAgICAgICAgICAgICAgICBdLnNvbWUoKGVycikgPT4gKGVyciBhcyBhbnkpPy5fdGFnID09PSBcIkxvZ2ljUGhhc2VFcnJvclwiKVxuXG4gICAgICAgICAgICAgICAgaWYgKGlzTG9naWNQaGFzZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAvLyBcdTVCRjlcdTRFOEUgTG9naWNQaGFzZUVycm9yXHVGRjFBXHU0RUM1XHU4QkIwXHU1RjU1XHU4QkNBXHU2NUFEXHU1RTc2XHU3RUU3XHU3RUVEXHU2Nzg0XHU5MDIwXHU0RTAwXHU0RTJBIG5vb3AgcGxhblx1RkYwQ1xuICAgICAgICAgICAgICAgICAgLy8gXHU0RUU1XHU5MDdGXHU1MTREXHU4QkE5IE1vZHVsZVJ1bnRpbWUubWFrZSBcdTU3MjggcnVuU3luYyBcdThERUZcdTVGODRcdTRFMEFcdTU5MzFcdThEMjVcdTMwMDJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBMb2dpY0RpYWdub3N0aWNzLmVtaXRJbnZhbGlkUGhhc2VEaWFnbm9zdGljSWZOZWVkZWQoXG4gICAgICAgICAgICAgICAgICAgIGNhdXNlLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLm1vZHVsZUlkXG4gICAgICAgICAgICAgICAgICApLnBpcGUoXG4gICAgICAgICAgICAgICAgICAgIEVmZmVjdC56aXBSaWdodChoYW5kbGVMb2dpY0ZhaWx1cmUoY2F1c2UpKSxcbiAgICAgICAgICAgICAgICAgICAgRWZmZWN0LmFzKG1ha2VOb29wUGxhbigpKVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFx1NTE3Nlx1NEVENlx1OTUxOVx1OEJFRlx1RkYxQVx1NEVDRFx1NjMwOVx1Nzg2Q1x1OTUxOVx1OEJFRlx1NTkwNFx1NzQwNiBcdTIwMTRcdTIwMTQgXHU1MTQ4XHU1M0QxXHU4QkNBXHU2NUFEL1x1OTUxOVx1OEJFRlx1RkYwQ1x1NTE4RCBmYWlsQ2F1c2UgXHU4QkE5XHU0RTBBXHU1QzQyXHU2MTFGXHU3N0U1XHUzMDAyXG4gICAgICAgICAgICAgICAgcmV0dXJuIExvZ2ljRGlhZ25vc3RpY3MuZW1pdEVudlNlcnZpY2VOb3RGb3VuZERpYWdub3N0aWNJZk5lZWRlZChcbiAgICAgICAgICAgICAgICAgIGNhdXNlLFxuICAgICAgICAgICAgICAgICAgb3B0aW9ucy5tb2R1bGVJZFxuICAgICAgICAgICAgICAgICkucGlwZShcbiAgICAgICAgICAgICAgICAgIEVmZmVjdC56aXBSaWdodChoYW5kbGVMb2dpY0ZhaWx1cmUoY2F1c2UpKSxcbiAgICAgICAgICAgICAgICAgIEVmZmVjdC56aXBSaWdodChFZmZlY3QuZmFpbENhdXNlKGNhdXNlKSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIClcblxuICAgICAgICAgIGNvbnN0IHBsYW5QaGFzZVJlZiA9XG4gICAgICAgICAgICBleHRyYWN0UGhhc2VSZWYocmVzb2x2ZWRQbGFuKSA/P1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihyZXNvbHZlZFBsYW4sIHsgX19waGFzZVJlZjogcGhhc2VSZWYgfSkuX19waGFzZVJlZlxuICAgICAgICAgIGNvbnN0IHNldHVwUGhhc2UgPSB3aXRoUnVudGltZUFuZExpZmVjeWNsZShyZXNvbHZlZFBsYW4uc2V0dXAsIHBsYW5QaGFzZVJlZilcbiAgICAgICAgICBjb25zdCBydW5QaGFzZSA9IHdpdGhSdW50aW1lQW5kTGlmZWN5Y2xlKHJlc29sdmVkUGxhbi5ydW4sIHBsYW5QaGFzZVJlZilcblxuICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjYyRlx1NzUyOFx1NEU4RSBwaGFzZSBcdThCQ0FcdTY1QURcdTc2ODRcdTUzNjBcdTRGNEQgcGxhblx1RkYwQ1x1NEVDNVx1NjI2N1x1ODg0QyBzZXR1cCBcdTZCQjVcdUZGMDhcdTkwMUFcdTVFMzhcdTRFM0EgRWZmZWN0LnZvaWRcdUZGMDlcdUZGMENcbiAgICAgICAgICAvLyBcdTRFMERcdTUxOEQgZm9yayBydW4gXHU2QkI1XHVGRjBDXHU0RkREXHU4QkMxXHU2NTc0XHU0RTJBIE1vZHVsZVJ1bnRpbWUubWFrZSBcdTU3MjggcnVuU3luYyBcdTRFMEJcdTRGRERcdTYzMDFcdTU0MENcdTZCNjVcdTMwMDJcbiAgICAgICAgICBjb25zdCBza2lwUnVuID0gKHJlc29sdmVkUGxhbiBhcyBhbnkpLl9fc2tpcFJ1biA9PT0gdHJ1ZVxuXG4gICAgICAgICAgcGxhblBoYXNlUmVmLmN1cnJlbnQgPSBcInNldHVwXCJcbiAgICAgICAgICBnbG9iYWxMb2dpY1BoYXNlUmVmLmN1cnJlbnQgPSBcInNldHVwXCJcbiAgICAgICAgICB5aWVsZCogc2V0dXBQaGFzZS5waXBlKEVmZmVjdC5jYXRjaEFsbENhdXNlKGhhbmRsZUxvZ2ljRmFpbHVyZSkpXG5cbiAgICAgICAgICBpZiAoIXNraXBSdW4pIHtcbiAgICAgICAgICAgIHBsYW5QaGFzZVJlZi5jdXJyZW50ID0gXCJydW5cIlxuICAgICAgICAgICAgZ2xvYmFsTG9naWNQaGFzZVJlZi5jdXJyZW50ID0gXCJydW5cIlxuICAgICAgICAgICAgeWllbGQqIEVmZmVjdC5mb3JrU2NvcGVkKFxuICAgICAgICAgICAgICBydW5QaGFzZS5waXBlKEVmZmVjdC5jYXRjaEFsbENhdXNlKGhhbmRsZUxvZ2ljRmFpbHVyZSkpXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdTlFRDhcdThCQTRcdUZGMUFcdTUzNTVcdTk2MzZcdTZCQjUgTG9naWNcdUZGMENcdTYzMDlcdTY1RTdcdTY3MDlcdTg4NENcdTRFM0FcdTc2RjRcdTYzQTUgZm9ya1x1RkYxQlx1ODJFNVx1OTAzQlx1OEY5MVx1NUI4Q1x1NjIxMFx1NTQwRVx1OEZENFx1NTZERSBMb2dpY1BsYW5cdUZGMENcdTdFRTdcdTdFRURcdTYyNjdcdTg4NEMgc2V0dXAvcnVuXHUzMDAyXG4gICAgICAgIGNvbnN0IGJhc2VQaGFzZVJlZiA9IGV4dHJhY3RQaGFzZVJlZihyYXdMb2dpYylcbiAgICAgICAgY29uc3QgcnVuUGhhc2UgPSB3aXRoUnVudGltZUFuZExpZmVjeWNsZShcbiAgICAgICAgICByYXdMb2dpYyBhcyBFZmZlY3QuRWZmZWN0PGFueSwgYW55LCBhbnk+LFxuICAgICAgICAgIGJhc2VQaGFzZVJlZlxuICAgICAgICApLnBpcGUoRWZmZWN0LmNhdGNoQWxsQ2F1c2UoaGFuZGxlTG9naWNGYWlsdXJlKSlcblxuICAgICAgICBjb25zdCBydW5GaWJlciA9IHlpZWxkKiBFZmZlY3QuZm9ya1Njb3BlZChydW5QaGFzZSlcblxuICAgICAgICB5aWVsZCogRWZmZWN0LmZvcmtTY29wZWQoXG4gICAgICAgICAgRmliZXIuYXdhaXQocnVuRmliZXIpLnBpcGUoXG4gICAgICAgICAgICBFZmZlY3QuZmxhdE1hcCgoZXhpdCkgPT5cbiAgICAgICAgICAgICAgRXhpdC5tYXRjaChleGl0LCB7XG4gICAgICAgICAgICAgICAgb25GYWlsdXJlOiAoKSA9PiBFZmZlY3Qudm9pZCxcbiAgICAgICAgICAgICAgICBvblN1Y2Nlc3M6ICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgY29uc3QgZXhlY3V0ZVBsYW4gPSAoXG4gICAgICAgICAgICAgICAgICAgIHBsYW46IExvZ2ljUGxhbjxhbnksIGFueSwgYW55PlxuICAgICAgICAgICAgICAgICAgKTogRWZmZWN0LkVmZmVjdDx2b2lkLCB1bmtub3duLCBhbnk+ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGhhc2VSZWYgPSBleHRyYWN0UGhhc2VSZWYocGxhbikgPz8gY3JlYXRlUGhhc2VSZWYoKVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZXR1cFBoYXNlID0gd2l0aFJ1bnRpbWVBbmRMaWZlY3ljbGUoXG4gICAgICAgICAgICAgICAgICAgICAgcGxhbi5zZXR1cCxcbiAgICAgICAgICAgICAgICAgICAgICBwaGFzZVJlZlxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJ1blBsYW5QaGFzZSA9IHdpdGhSdW50aW1lQW5kTGlmZWN5Y2xlKFxuICAgICAgICAgICAgICAgICAgICAgIHBsYW4ucnVuLFxuICAgICAgICAgICAgICAgICAgICAgIHBoYXNlUmVmXG4gICAgICAgICAgICAgICAgICAgIClcblxuICAgICAgICAgICAgICAgICAgICBwaGFzZVJlZi5jdXJyZW50ID0gXCJzZXR1cFwiXG4gICAgICAgICAgICAgICAgICAgIGdsb2JhbExvZ2ljUGhhc2VSZWYuY3VycmVudCA9IFwic2V0dXBcIlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2V0dXBQaGFzZS5waXBlKFxuICAgICAgICAgICAgICAgICAgICAgIEVmZmVjdC5jYXRjaEFsbENhdXNlKGhhbmRsZUxvZ2ljRmFpbHVyZSksXG4gICAgICAgICAgICAgICAgICAgICAgRWZmZWN0LnRhcCgoKSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgRWZmZWN0LnN5bmMoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwaGFzZVJlZi5jdXJyZW50ID0gXCJydW5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxMb2dpY1BoYXNlUmVmLmN1cnJlbnQgPSBcInJ1blwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgRWZmZWN0LnppcFJpZ2h0KFxuICAgICAgICAgICAgICAgICAgICAgICAgRWZmZWN0LmZvcmtTY29wZWQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJ1blBsYW5QaGFzZS5waXBlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVmZmVjdC5jYXRjaEFsbENhdXNlKGhhbmRsZUxvZ2ljRmFpbHVyZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgRWZmZWN0LmFzVm9pZFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIGlmIChpc0xvZ2ljUGxhbih2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4ZWN1dGVQbGFuKHZhbHVlKVxuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICBpZiAocmV0dXJuc0xvZ2ljUGxhbih2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpdGhSdW50aW1lQW5kTGlmZWN5Y2xlKFxuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlIGFzIEVmZmVjdC5FZmZlY3Q8YW55LCBhbnksIGFueT4sXG4gICAgICAgICAgICAgICAgICAgICAgYmFzZVBoYXNlUmVmXG4gICAgICAgICAgICAgICAgICAgICkucGlwZShcbiAgICAgICAgICAgICAgICAgICAgICBFZmZlY3QubWFwKG5vcm1hbGl6ZVRvUGxhbiksXG4gICAgICAgICAgICAgICAgICAgICAgRWZmZWN0Lm1hdGNoQ2F1c2VFZmZlY3Qoe1xuICAgICAgICAgICAgICAgICAgICAgICAgb25GYWlsdXJlOiAoY2F1c2UpID0+IGhhbmRsZUxvZ2ljRmFpbHVyZShjYXVzZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBvblN1Y2Nlc3M6IChwbGFuKSA9PiBleGVjdXRlUGxhbihwbGFuKSxcbiAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIHJldHVybiBFZmZlY3Qudm9pZFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIC8vIFx1OEJBOVx1NURGMiBmb3JrIFx1NzY4NCBMb2dpYyBcdTgzQjdcdTVGOTdcdTRFMDBcdTZCMjFcdThDMDNcdTVFQTZcdTY3M0FcdTRGMUFcdUZGMENcdTc4NkVcdTRGRERcdTUyMURcdTU5Q0IgcmVkdWNlciBcdTdCNDlcdTU0MENcdTZCNjVcdTZDRThcdTUxOENcdTVCOENcdTYyMTBcdUZGMENcbiAgICAgIC8vIFx1OTA3Rlx1NTE0RFx1NEUwQVx1NUM0Mlx1RkYwOFx1NTk4MiBSb290IHByb2Nlc3Nlc1x1RkYwOVx1NTcyOFx1OTAzQlx1OEY5MVx1NjcyQVx1NUMzMVx1N0VFQVx1NjVGNlx1NjJBMlx1NTE0OFx1NkQzRVx1NTNEMSBBY3Rpb25cdTMwMDJcbiAgICAgIHlpZWxkKiBFZmZlY3QueWllbGROb3coKVxuICAgIH1cblxuICAgIHJldHVybiBydW50aW1lXG4gIH0pXG5cbiAgcmV0dXJuIHByb2dyYW0gYXMgRWZmZWN0LkVmZmVjdDxQdWJsaWNNb2R1bGVSdW50aW1lPFMsIEE+LCBuZXZlciwgU2NvcGUuU2NvcGUgfCBSPlxufVxuIiwgImltcG9ydCB7IENhdXNlLCBDb250ZXh0LCBFZmZlY3QsIFJlZiB9IGZyb20gXCJlZmZlY3RcIlxuXG5leHBvcnQgaW50ZXJmYWNlIEVycm9yQ29udGV4dCB7XG4gIHJlYWRvbmx5IHBoYXNlOiBzdHJpbmdcbiAgcmVhZG9ubHkgbW9kdWxlSWQ/OiBzdHJpbmdcbiAgcmVhZG9ubHkgW2tleTogc3RyaW5nXTogdW5rbm93blxufVxuXG5leHBvcnQgaW50ZXJmYWNlIExpZmVjeWNsZU1hbmFnZXIge1xuICByZWFkb25seSByZWdpc3RlckluaXQ6IChcbiAgICBlZmZlY3Q6IEVmZmVjdC5FZmZlY3Q8dm9pZCwgbmV2ZXIsIGFueT5cbiAgKSA9PiBFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBhbnk+XG4gIHJlYWRvbmx5IHJlZ2lzdGVyRGVzdHJveTogKFxuICAgIGVmZmVjdDogRWZmZWN0LkVmZmVjdDx2b2lkLCBuZXZlciwgYW55PlxuICApID0+IEVmZmVjdC5FZmZlY3Q8dm9pZCwgbmV2ZXIsIGFueT5cbiAgcmVhZG9ubHkgcmVnaXN0ZXJPbkVycm9yOiAoXG4gICAgaGFuZGxlcjogKFxuICAgICAgY2F1c2U6IENhdXNlLkNhdXNlPHVua25vd24+LFxuICAgICAgY29udGV4dDogRXJyb3JDb250ZXh0XG4gICAgKSA9PiBFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBhbnk+XG4gICkgPT4gRWZmZWN0LkVmZmVjdDx2b2lkLCBuZXZlciwgYW55PlxuICByZWFkb25seSBydW5EZXN0cm95OiBFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBhbnk+XG4gIHJlYWRvbmx5IG5vdGlmeUVycm9yOiAoXG4gICAgY2F1c2U6IENhdXNlLkNhdXNlPHVua25vd24+LFxuICAgIGNvbnRleHQ6IEVycm9yQ29udGV4dFxuICApID0+IEVmZmVjdC5FZmZlY3Q8dm9pZCwgbmV2ZXIsIGFueT5cbiAgLyoqXG4gICAqIFx1NjYyRlx1NTQyNlx1NURGMlx1NkNFOFx1NTE4Q1x1NEVGQlx1NjEwRiBvbkVycm9yIFx1NTkwNFx1NzQwNlx1NTY2OFx1MzAwMlxuICAgKiBcdTRFQzVcdTc1MjhcdTRFOEVcdThCQ0FcdTY1QURcdTc2RUVcdTc2ODRcdUZGMENcdTRFMERcdTVGNzFcdTU0Q0RcdTZCNjNcdTVFMzhcdTk1MTlcdThCRUZcdTRGMjBcdTY0QURcdThCRURcdTRFNDlcdTMwMDJcbiAgICovXG4gIHJlYWRvbmx5IGhhc09uRXJyb3JIYW5kbGVyczogRWZmZWN0LkVmZmVjdDxib29sZWFuLCBuZXZlciwgYW55PlxufVxuXG5leHBvcnQgY29uc3QgTGlmZWN5Y2xlQ29udGV4dCA9IENvbnRleHQuR2VuZXJpY1RhZzxMaWZlY3ljbGVNYW5hZ2VyPihcbiAgXCJAbG9naXgvTGlmZWN5Y2xlTWFuYWdlclwiXG4pXG5cbmNvbnN0IHNhZmVSdW4gPSAobGFiZWw6IHN0cmluZywgZWZmOiBFZmZlY3QuRWZmZWN0PHZvaWQsIGFueSwgYW55PikgPT5cbiAgZWZmLnBpcGUoXG4gICAgRWZmZWN0Lm1hdGNoQ2F1c2VFZmZlY3Qoe1xuICAgICAgb25TdWNjZXNzOiAoKSA9PiBFZmZlY3Qudm9pZCxcbiAgICAgIG9uRmFpbHVyZTogKGNhdXNlKSA9PlxuICAgICAgICBFZmZlY3QubG9nRXJyb3IoYFske2xhYmVsfV0gZmFpbGVkOiAke0NhdXNlLnByZXR0eShjYXVzZSl9YCksXG4gICAgfSlcbiAgKVxuXG5leHBvcnQgY29uc3QgbWFrZUxpZmVjeWNsZU1hbmFnZXI6IEVmZmVjdC5FZmZlY3Q8TGlmZWN5Y2xlTWFuYWdlcj4gPSBFZmZlY3QuZ2VuKFxuICBmdW5jdGlvbiogKCkge1xuICAgIGNvbnN0IGRlc3Ryb3lSZWYgPSB5aWVsZCogUmVmLm1ha2U8XG4gICAgICBSZWFkb25seUFycmF5PEVmZmVjdC5FZmZlY3Q8dm9pZCwgbmV2ZXIsIGFueT4+XG4gICAgPihbXSlcbiAgICBjb25zdCBlcnJvclJlZiA9IHlpZWxkKiBSZWYubWFrZTxcbiAgICAgIFJlYWRvbmx5QXJyYXk8XG4gICAgICAgIChcbiAgICAgICAgICBjYXVzZTogQ2F1c2UuQ2F1c2U8dW5rbm93bj4sXG4gICAgICAgICAgY29udGV4dDogRXJyb3JDb250ZXh0XG4gICAgICAgICkgPT4gRWZmZWN0LkVmZmVjdDx2b2lkLCBuZXZlciwgYW55PlxuICAgICAgPlxuICAgID4oW10pXG5cbiAgICBjb25zdCByZWdpc3RlckRlc3Ryb3kgPSAoZWZmZWN0OiBFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBhbnk+KSA9PlxuICAgICAgUmVmLnVwZGF0ZShkZXN0cm95UmVmLCAobGlzdCkgPT4gWy4uLmxpc3QsIGVmZmVjdF0pXG5cbiAgICBjb25zdCByZWdpc3Rlck9uRXJyb3IgPSAoXG4gICAgICBoYW5kbGVyOiAoXG4gICAgICAgIGNhdXNlOiBDYXVzZS5DYXVzZTx1bmtub3duPixcbiAgICAgICAgY29udGV4dDogRXJyb3JDb250ZXh0XG4gICAgICApID0+IEVmZmVjdC5FZmZlY3Q8dm9pZCwgbmV2ZXIsIGFueT5cbiAgICApID0+IFJlZi51cGRhdGUoZXJyb3JSZWYsIChsaXN0KSA9PiBbLi4ubGlzdCwgaGFuZGxlcl0pXG5cbiAgICBjb25zdCBydW5EZXN0cm95ID0gUmVmLmdldChkZXN0cm95UmVmKS5waXBlKFxuICAgICAgRWZmZWN0LmZsYXRNYXAoKGVmZmVjdHMpID0+XG4gICAgICAgIEVmZmVjdC5mb3JFYWNoKGVmZmVjdHMsIChlZmZlY3QpID0+XG4gICAgICAgICAgc2FmZVJ1bihcImxpZmVjeWNsZS5vbkRlc3Ryb3lcIiwgZWZmZWN0KSwgeyBkaXNjYXJkOiB0cnVlIH1cbiAgICAgICAgKVxuICAgICAgKVxuICAgIClcblxuICAgIGNvbnN0IG5vdGlmeUVycm9yID0gKGNhdXNlOiBDYXVzZS5DYXVzZTx1bmtub3duPiwgY29udGV4dDogRXJyb3JDb250ZXh0KSA9PlxuICAgICAgUmVmLmdldChlcnJvclJlZikucGlwZShcbiAgICAgICAgRWZmZWN0LmZsYXRNYXAoKGhhbmRsZXJzKSA9PlxuICAgICAgICAgIEVmZmVjdC5mb3JFYWNoKGhhbmRsZXJzLCAoaGFuZGxlcikgPT5cbiAgICAgICAgICAgIGhhbmRsZXIoY2F1c2UsIGNvbnRleHQpLnBpcGUoXG4gICAgICAgICAgICAgIEVmZmVjdC5jYXRjaEFsbENhdXNlKChpbm5lcikgPT5cbiAgICAgICAgICAgICAgICBFZmZlY3QubG9nRXJyb3IoXG4gICAgICAgICAgICAgICAgICBgW2xpZmVjeWNsZS5vbkVycm9yXSBmYWlsZWQ6ICR7Q2F1c2UucHJldHR5KGlubmVyKX1gXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApLCB7IGRpc2NhcmQ6IHRydWUgfVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxuXG4gICAgY29uc3QgcmVnaXN0ZXJJbml0ID0gKGVmZmVjdDogRWZmZWN0LkVmZmVjdDx2b2lkLCBuZXZlciwgYW55PikgPT5cbiAgICAgIGVmZmVjdC5waXBlKFxuICAgICAgICBFZmZlY3QubWF0Y2hDYXVzZUVmZmVjdCh7XG4gICAgICAgICAgb25TdWNjZXNzOiAoKSA9PiBFZmZlY3Qudm9pZCxcbiAgICAgICAgICBvbkZhaWx1cmU6IChjYXVzZSkgPT5cbiAgICAgICAgICAgIG5vdGlmeUVycm9yKGNhdXNlLCB7IHBoYXNlOiBcImxpZmVjeWNsZS5vbkluaXRcIiB9KS5waXBlKFxuICAgICAgICAgICAgICBFZmZlY3QuemlwUmlnaHQoXG4gICAgICAgICAgICAgICAgRWZmZWN0LmxvZ0Vycm9yKFxuICAgICAgICAgICAgICAgICAgYFtsaWZlY3ljbGUub25Jbml0XSBmYWlsZWQ6ICR7Q2F1c2UucHJldHR5KGNhdXNlKX1gXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApLFxuICAgICAgICB9KVxuICAgICAgKVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHJlZ2lzdGVySW5pdCxcbiAgICAgIHJlZ2lzdGVyRGVzdHJveSxcbiAgICAgIHJlZ2lzdGVyT25FcnJvcixcbiAgICAgIHJ1bkRlc3Ryb3ksXG4gICAgICBub3RpZnlFcnJvcixcbiAgICAgIGhhc09uRXJyb3JIYW5kbGVyczogUmVmLmdldChlcnJvclJlZikucGlwZShcbiAgICAgICAgRWZmZWN0Lm1hcCgoaGFuZGxlcnMpID0+IGhhbmRsZXJzLmxlbmd0aCA+IDApXG4gICAgICApLFxuICAgIH1cbiAgfVxuKVxuIiwgImltcG9ydCB7IENhdXNlLCBFZmZlY3QsIEZpYmVyUmVmLCBMYXllciwgTG9nZ2VyIH0gZnJvbSBcImVmZmVjdFwiXG5pbXBvcnQgdHlwZSAqIGFzIFJlcGxheUxvZyBmcm9tIFwiLi9SZXBsYXlMb2cuanNcIlxuXG5leHBvcnQgaW50ZXJmYWNlIFRyaWdnZXJSZWYge1xuICByZWFkb25seSBraW5kOiBzdHJpbmdcbiAgcmVhZG9ubHkgbmFtZT86IHN0cmluZ1xuICByZWFkb25seSBkZXRhaWxzPzogdW5rbm93blxufVxuXG4vKipcbiAqIFJlcGxheUV2ZW50UmVmXHVGRjFBXG4gKiAtIERlYnVnIFx1NEU4Qlx1NEVGNlx1NEZBN1x1NUYxNVx1NzUyOFx1NzY4NFx1MjAxQ1x1NTZERVx1NjUzRVx1NEU4Qlx1NEVGNlx1MjAxRFx1N0VEM1x1Njc4NFx1RkYxQlxuICogLSBcdTU3RkFcdTRFOEUgUmVwbGF5TG9nLkV2ZW50XHVGRjBDXHU1RTc2XHU4ODY1XHU5RjUwIHR4bi90cmlnZ2VyIFx1N0I0OVx1NTE3M1x1ODA1NFx1NUI1N1x1NkJCNVx1NEVFNVx1NEZCRlx1NEU4RVx1NTcyOCBEZXZ0b29scyBcdTRFMkRcdTUwNUFcdTgwNUFcdTU0MDhcdTRFMEVcdTg5RTNcdTkxQ0FcdTMwMDJcbiAqL1xuZXhwb3J0IHR5cGUgUmVwbGF5RXZlbnRSZWYgPSBSZXBsYXlMb2cuUmVwbGF5TG9nRXZlbnQgJiB7XG4gIHJlYWRvbmx5IHR4bklkPzogc3RyaW5nXG4gIHJlYWRvbmx5IHRyaWdnZXI/OiBUcmlnZ2VyUmVmXG59XG5cbmV4cG9ydCB0eXBlIEV2ZW50ID1cbiAgfCB7XG4gICAgICByZWFkb25seSB0eXBlOiBcIm1vZHVsZTppbml0XCJcbiAgICAgIHJlYWRvbmx5IG1vZHVsZUlkPzogc3RyaW5nXG4gICAgICByZWFkb25seSBydW50aW1lSWQ/OiBzdHJpbmdcbiAgICAgIHJlYWRvbmx5IHJ1bnRpbWVMYWJlbD86IHN0cmluZ1xuICAgICAgcmVhZG9ubHkgdGltZXN0YW1wPzogbnVtYmVyXG4gICAgfVxuICB8IHtcbiAgICAgIHJlYWRvbmx5IHR5cGU6IFwibW9kdWxlOmRlc3Ryb3lcIlxuICAgICAgcmVhZG9ubHkgbW9kdWxlSWQ/OiBzdHJpbmdcbiAgICAgIHJlYWRvbmx5IHJ1bnRpbWVJZD86IHN0cmluZ1xuICAgICAgcmVhZG9ubHkgcnVudGltZUxhYmVsPzogc3RyaW5nXG4gICAgICByZWFkb25seSB0aW1lc3RhbXA/OiBudW1iZXJcbiAgICB9XG4gIHwge1xuICAgICAgcmVhZG9ubHkgdHlwZTogXCJhY3Rpb246ZGlzcGF0Y2hcIlxuICAgICAgcmVhZG9ubHkgbW9kdWxlSWQ/OiBzdHJpbmdcbiAgICAgIHJlYWRvbmx5IGFjdGlvbjogdW5rbm93blxuICAgICAgcmVhZG9ubHkgcnVudGltZUlkPzogc3RyaW5nXG4gICAgICByZWFkb25seSB0eG5JZD86IHN0cmluZ1xuICAgICAgcmVhZG9ubHkgcnVudGltZUxhYmVsPzogc3RyaW5nXG4gICAgICByZWFkb25seSB0aW1lc3RhbXA/OiBudW1iZXJcbiAgICB9XG5cdCAgfCB7XG5cdCAgICAgIHJlYWRvbmx5IHR5cGU6IFwic3RhdGU6dXBkYXRlXCJcblx0ICAgICAgcmVhZG9ubHkgbW9kdWxlSWQ/OiBzdHJpbmdcblx0ICAgICAgcmVhZG9ubHkgc3RhdGU6IHVua25vd25cbiAgICAgIHJlYWRvbmx5IHJ1bnRpbWVJZD86IHN0cmluZ1xuICAgICAgcmVhZG9ubHkgdHhuSWQ/OiBzdHJpbmdcbiAgICAgIC8qKlxuICAgICAgICogXHU1M0VGXHU5MDA5XHVGRjFBXHU2NzJDXHU2QjIxXHU2M0QwXHU0RUE0XHU4MDVBXHU1NDA4XHU3Njg0IFBhdGNoIFx1NjU3MFx1OTFDRlx1RkYwOFx1Njc2NVx1ODFFQSBTdGF0ZVRyYW5zYWN0aW9uXHVGRjA5XHVGRjFCXG4gICAgICAgKiAtIFx1NEVDNVx1NTcyOFx1NEU4Qlx1NTJBMVx1OERFRlx1NUY4NFx1NEUwQlx1NzUzMSBSdW50aW1lIFx1NTg2Qlx1NTE0NVx1RkYxQlxuICAgICAgICogLSBEZXZ0b29scyBcdTUzRUZcdTc1MjhcdTRGNUNcdTRFOEJcdTUyQTFcdTY5ODJcdTg5ODFcdTRGRTFcdTYwNkZcdTc2ODRcdThGN0JcdTkxQ0ZcdTYzMDdcdTY4MDdcdTMwMDJcbiAgICAgICAqL1xuICAgICAgcmVhZG9ubHkgcGF0Y2hDb3VudD86IG51bWJlclxuICAgICAgLyoqXG4gICAgICAgKiBcdTUzRUZcdTkwMDlcdUZGMUFcdTg5RTZcdTUzRDFcdTY3MkNcdTZCMjFcdTcyQjZcdTYwMDFcdTYzRDBcdTRFQTRcdTc2ODRcdTRFOEJcdTUyQTFcdTY3NjVcdTZFOTBcdTc5Q0RcdTdDN0JcdUZGMDhvcmlnaW4ua2luZFx1RkYwOVx1RkYxQVxuICAgICAgICogLSBcdTRGOEJcdTU5ODIgXCJhY3Rpb25cIiAvIFwic291cmNlLXJlZnJlc2hcIiAvIFwic2VydmljZS1jYWxsYmFja1wiIC8gXCJkZXZ0b29sc1wiXHVGRjFCXG4gICAgICAgKiAtIFx1NEVDNVx1NTcyOFx1NTdGQVx1NEU4RSBTdGF0ZVRyYW5zYWN0aW9uIFx1NzY4NFx1OERFRlx1NUY4NFx1NEUwQlx1NzUzMSBSdW50aW1lIFx1NTg2Qlx1NTE0NVx1RkYxQlxuICAgICAgICogLSBEZXZ0b29scyBcdTUzRUZcdTYzNkVcdTZCNjRcdTUzM0FcdTUyMDZcdTRFMUFcdTUyQTFcdTRFOEJcdTUyQTFcdTRFMEUgRGV2dG9vbHMgdGltZS10cmF2ZWwgXHU2NENEXHU0RjVDXHUzMDAyXG4gICAgICAgKi9cbiAgICAgIHJlYWRvbmx5IG9yaWdpbktpbmQ/OiBzdHJpbmdcbiAgICAgIC8qKlxuICAgICAgICogXHU1M0VGXHU5MDA5XHVGRjFBXHU4OUU2XHU1M0QxXHU2NzJDXHU2QjIxXHU3MkI2XHU2MDAxXHU2M0QwXHU0RUE0XHU3Njg0XHU0RThCXHU1MkExXHU2NzY1XHU2RTkwXHU1NDBEXHU3OUYwXHVGRjA4b3JpZ2luLm5hbWVcdUZGMDlcdUZGMUFcbiAgICAgICAqIC0gXHU0RjhCXHU1OTgyIGFjdGlvbiBkaXNwYXRjaCAvIGZpZWxkUGF0aCAvIHRhc2s6c3VjY2Vzcy90YXNrOmZhaWx1cmUgXHU3QjQ5XHVGRjFCXG4gICAgICAgKiAtIFx1NEVDNVx1NTcyOFx1NTdGQVx1NEU4RSBTdGF0ZVRyYW5zYWN0aW9uIFx1NzY4NFx1OERFRlx1NUY4NFx1NEUwQlx1NzUzMSBSdW50aW1lIFx1NTg2Qlx1NTE0NVx1MzAwMlxuICAgICAgICovXG4gICAgICByZWFkb25seSBvcmlnaW5OYW1lPzogc3RyaW5nXG4gICAgICAvKipcbiAgICAgICAqIFx1OTg4NFx1NzU1OVx1RkYxQVRyYWl0IFx1NjUzNlx1NjU1Qlx1NjQ1OFx1ODk4MVx1RkYwOFx1NzUyOFx1NEU4RSBEZXZ0b29scyBcdTVDNTVcdTc5M0FcdTdBOTdcdTUzRTNcdTdFQTdcdTdFREZcdThCQTEvVG9wTiBcdTYyMTBcdTY3MkMvXHU5NjREXHU3RUE3XHU1MzlGXHU1NkUwXHU3QjQ5XHVGRjA5XHUzMDAyXG4gICAgICAgKiAtIFBoYXNlIDJcdUZGMUFcdTRFQzVcdTU2RkFcdTUzMTZcdTVCNTdcdTZCQjVcdTRGNERcdUZGMENcdTRFMERcdTk1MDFcdTZCN0JcdTdFRDNcdTY3ODRcdUZGMUJcbiAgICAgICAqIC0gXHU1NDBFXHU3RUVEIFBoYXNlIFx1NEYxQVx1NEUwRSBUcmFpdC9SZXBsYXkgXHU0RThCXHU0RUY2XHU2QTIxXHU1NzhCXHU1QkY5XHU5RjUwXHU0RTNBXHU1M0VGXHU4OUUzXHU5MUNBXHU3RUQzXHU2Nzg0XHUzMDAyXG4gICAgICAgKi9cbiAgICAgIHJlYWRvbmx5IHRyYWl0U3VtbWFyeT86IHVua25vd25cbiAgICAgIC8qKlxuXHQgICAgICAgKiBcdTk4ODRcdTc1NTlcdUZGMUFcdTY3MkNcdTZCMjFcdTRFOEJcdTUyQTFcdTUxNzNcdTgwNTRcdTc2ODRcdTU2REVcdTY1M0VcdTRFOEJcdTRFRjZcdUZGMDhSZXBsYXlMb2cgXHU0RkE3XHU3Njg0IHJlLWVtaXQgXHU0RThCXHU1QjlFXHU2RTkwXHVGRjA5XHUzMDAyXG5cdCAgICAgICAqIC0gUGhhc2UgMlx1RkYxQVx1NEVDNVx1NTZGQVx1NTMxNlx1NUI1N1x1NkJCNVx1NEY0RFx1RkYxQlxuXHQgICAgICAgKiAtIFx1NTQwRVx1N0VFRCBQaGFzZSBcdTRGMUFcdTRFMEUgUmVwbGF5TG9nLkV2ZW50IFx1N0VEM1x1Njc4NFx1NUJGOVx1OUY1MFx1MzAwMlxuXHQgICAgICAgKi9cblx0ICAgICAgcmVhZG9ubHkgcmVwbGF5RXZlbnQ/OiBSZXBsYXlFdmVudFJlZlxuXHQgICAgICByZWFkb25seSBydW50aW1lTGFiZWw/OiBzdHJpbmdcblx0ICAgICAgcmVhZG9ubHkgdGltZXN0YW1wPzogbnVtYmVyXG5cdCAgICB9XG4gIHwge1xuICAgICAgcmVhZG9ubHkgdHlwZTogXCJsaWZlY3ljbGU6ZXJyb3JcIlxuICAgICAgcmVhZG9ubHkgbW9kdWxlSWQ/OiBzdHJpbmdcbiAgICAgIHJlYWRvbmx5IGNhdXNlOiB1bmtub3duXG4gICAgICByZWFkb25seSBydW50aW1lSWQ/OiBzdHJpbmdcbiAgICAgIHJlYWRvbmx5IHJ1bnRpbWVMYWJlbD86IHN0cmluZ1xuICAgICAgcmVhZG9ubHkgdGltZXN0YW1wPzogbnVtYmVyXG4gICAgfVxuXHQgIHwge1xuXHQgICAgICByZWFkb25seSB0eXBlOiBcImRpYWdub3N0aWNcIlxuXHQgICAgICByZWFkb25seSBtb2R1bGVJZD86IHN0cmluZ1xuXHQgICAgICByZWFkb25seSBjb2RlOiBzdHJpbmdcblx0ICAgICAgcmVhZG9ubHkgc2V2ZXJpdHk6IFwiZXJyb3JcIiB8IFwid2FybmluZ1wiIHwgXCJpbmZvXCJcblx0ICAgICAgcmVhZG9ubHkgbWVzc2FnZTogc3RyaW5nXG5cdCAgICAgIHJlYWRvbmx5IGhpbnQ/OiBzdHJpbmdcblx0ICAgICAgcmVhZG9ubHkgYWN0aW9uVGFnPzogc3RyaW5nXG5cdCAgICAgIHJlYWRvbmx5IGtpbmQ/OiBzdHJpbmdcblx0ICAgICAgcmVhZG9ubHkgdHhuSWQ/OiBzdHJpbmdcblx0ICAgICAgcmVhZG9ubHkgdHJpZ2dlcj86IFRyaWdnZXJSZWZcblx0ICAgICAgcmVhZG9ubHkgcnVudGltZUlkPzogc3RyaW5nXG5cdCAgICAgIHJlYWRvbmx5IHJ1bnRpbWVMYWJlbD86IHN0cmluZ1xuXHQgICAgICByZWFkb25seSB0aW1lc3RhbXA/OiBudW1iZXJcblx0ICAgIH1cbiAgLyoqXG4gICAqIHRyYWNlOiogXHU0RThCXHU0RUY2XHVGRjFBXG4gICAqIC0gXHU0RjVDXHU0RTNBXHU4RkQwXHU4ODRDXHU2NUY2IHRyYWNlIC8gUGxheWdyb3VuZCAvIEFsaWdubWVudCBMYWIgXHU3Njg0XHU2MjY5XHU1QzU1XHU5NEE5XHU1QjUwXHVGRjFCXG4gICAqIC0gXHU1RjUzXHU1MjREXHU1M0VBXHU3RUE2XHU1QjlBIHR5cGUgXHU1MjREXHU3RjAwXHU0RTBFIG1vZHVsZUlkXHVGRjBDXHU1MTc3XHU0RjUzIHBheWxvYWQgXHU3RUQzXHU2Nzg0XHU3NTMxXHU0RTBBXHU1QzQyXHU3RUE2XHU1QjlBXHVGRjA4XHU0RjhCXHU1OTgyIGRhdGEgXHU1MTg1XHU2MzAyIHNwYW5JZC9hdHRyaWJ1dGVzIFx1N0I0OVx1RkYwOVx1MzAwMlxuICAgKi9cbiAgfCB7XG4gICAgICByZWFkb25seSB0eXBlOiBgdHJhY2U6JHtzdHJpbmd9YFxuICAgICAgcmVhZG9ubHkgbW9kdWxlSWQ/OiBzdHJpbmdcbiAgICAgIHJlYWRvbmx5IGRhdGE/OiB1bmtub3duXG4gICAgICByZWFkb25seSBydW50aW1lSWQ/OiBzdHJpbmdcbiAgICAgIHJlYWRvbmx5IHJ1bnRpbWVMYWJlbD86IHN0cmluZ1xuICAgICAgcmVhZG9ubHkgdGltZXN0YW1wPzogbnVtYmVyXG4gICAgfVxuXG5leHBvcnQgaW50ZXJmYWNlIFNpbmsge1xuICByZWFkb25seSByZWNvcmQ6IChldmVudDogRXZlbnQpID0+IEVmZmVjdC5FZmZlY3Q8dm9pZD5cbn1cbmV4cG9ydCBjb25zdCBjdXJyZW50RGVidWdTaW5rcyA9IEZpYmVyUmVmLnVuc2FmZU1ha2U8UmVhZG9ubHlBcnJheTxTaW5rPj4oW10pXG5leHBvcnQgY29uc3QgY3VycmVudFJ1bnRpbWVMYWJlbCA9IEZpYmVyUmVmLnVuc2FmZU1ha2U8c3RyaW5nIHwgdW5kZWZpbmVkPih1bmRlZmluZWQpXG5leHBvcnQgY29uc3QgY3VycmVudFR4bklkID0gRmliZXJSZWYudW5zYWZlTWFrZTxzdHJpbmcgfCB1bmRlZmluZWQ+KHVuZGVmaW5lZClcblxuZXhwb3J0IHR5cGUgUnVudGltZURlYnVnRXZlbnRLaW5kID1cbiAgfCBcImFjdGlvblwiXG4gIHwgXCJzdGF0ZVwiXG4gIHwgXCJzZXJ2aWNlXCJcbiAgfCBcInRyYWl0LWNvbXB1dGVkXCJcbiAgfCBcInRyYWl0LWxpbmtcIlxuICB8IFwidHJhaXQtc291cmNlXCJcbiAgfCBcImxpZmVjeWNsZVwiXG4gIHwgXCJyZWFjdC1yZW5kZXJcIlxuICB8IFwiZGV2dG9vbHNcIlxuICB8IFwiZGlhZ25vc3RpY1wiXG4gIHwgKHN0cmluZyAmIHt9KVxuXG5leHBvcnQgaW50ZXJmYWNlIFJ1bnRpbWVEZWJ1Z0V2ZW50UmVmIHtcbiAgcmVhZG9ubHkgZXZlbnRJZDogc3RyaW5nXG4gIHJlYWRvbmx5IG1vZHVsZUlkPzogc3RyaW5nXG4gIHJlYWRvbmx5IGluc3RhbmNlSWQ/OiBzdHJpbmdcbiAgcmVhZG9ubHkgcnVudGltZUlkPzogc3RyaW5nXG4gIHJlYWRvbmx5IHJ1bnRpbWVMYWJlbD86IHN0cmluZ1xuICByZWFkb25seSB0eG5JZD86IHN0cmluZ1xuICByZWFkb25seSByZXNvdXJjZUlkPzogc3RyaW5nXG4gIHJlYWRvbmx5IGtleUhhc2g/OiBzdHJpbmdcbiAgcmVhZG9ubHkgdHJpZ2dlcj86IFRyaWdnZXJSZWZcbiAgcmVhZG9ubHkgdGltZXN0YW1wOiBudW1iZXJcbiAgcmVhZG9ubHkga2luZDogUnVudGltZURlYnVnRXZlbnRLaW5kXG4gIHJlYWRvbmx5IGxhYmVsOiBzdHJpbmdcbiAgcmVhZG9ubHkgbWV0YT86IHVua25vd25cbn1cblxubGV0IG5leHRFdmVudElkID0gMFxuXG5jb25zdCBtYWtlRXZlbnRJZCA9ICgpOiBzdHJpbmcgPT4ge1xuICBuZXh0RXZlbnRJZCArPSAxXG4gIHJldHVybiBTdHJpbmcobmV4dEV2ZW50SWQpXG59XG5cbi8qKlxuICogXHU2QkNGXHU0RTJBIHJ1bnRpbWVJZCBcdTY3MDBcdThGRDFcdTRFMDBcdTZCMjFcdTVFMjYgdHhuSWQgXHU3Njg0IHN0YXRlOnVwZGF0ZSBcdTRFOEJcdTRFRjZcdUZGMUFcbiAqIC0gXHU3NTI4XHU0RThFXHU1NzI4IFJlYWN0IFx1NkUzMlx1NjdEM1x1NEU4Qlx1NEVGNlx1RkYwOHRyYWNlOnJlYWN0LXJlbmRlclx1RkYwOVx1N0YzQVx1NUMxMVx1NjYzRVx1NUYwRiB0eG5JZCBcdTY1RjZcdUZGMENcbiAqICAgXHU0RTNBXHU1MTc2XHU4ODY1XHU1MTY4XHU2MjQwXHU1QzVFXHU0RThCXHU1MkExIElEXHVGRjBDXHU1RTJFXHU1MkE5IERldnRvb2xzIFx1NUMwNlx1NkUzMlx1NjdEM1x1NEU4Qlx1NEVGNlx1NEUwRSBTdGF0ZVRyYW5zYWN0aW9uIFx1NUJGOVx1OUY1MFx1MzAwMlxuICovXG5jb25zdCBsYXN0VHhuSWRCeVJ1bnRpbWUgPSBuZXcgTWFwPHN0cmluZywgc3RyaW5nPigpXG5cbi8vIFx1NkQ0Rlx1ODlDOFx1NTY2OFx1NzNBRlx1NTg4M1x1NEUwQlx1RkYwQ1x1NEUzQVx1NEU4Nlx1NTFDRlx1NUMxMSBSZWFjdCBTdHJpY3RNb2RlIFx1N0I0OVx1NUJGQ1x1ODFGNFx1NzY4NFx1OTFDRFx1NTkwRFx1NjVFNVx1NUZEN1x1NTY2QVx1OTdGM1x1RkYwQ1xuLy8gXHU1QkY5IGxpZmVjeWNsZTplcnJvciBcdTRFMEUgZGlhZ25vc3RpYyBcdTRFOEJcdTRFRjZcdTUwNUFcdTRFMDBcdTZCMjFcdTdCODBcdTUzNTVcdTUzQkJcdTkxQ0RcdUZGMUFcdTU0MENcdTRFMDAgbW9kdWxlSWQrcGF5bG9hZCBcdTUzRUFcdTYyNTNcdTUzNzBcdTRFMDBcdTZCMjFcdTMwMDJcbmNvbnN0IGJyb3dzZXJMaWZlY3ljbGVTZWVuID0gbmV3IFNldDxzdHJpbmc+KClcbmNvbnN0IGJyb3dzZXJEaWFnbm9zdGljU2VlbiA9IG5ldyBTZXQ8c3RyaW5nPigpXG5cbmNvbnN0IGxpZmVjeWNsZUVycm9yTG9nID0gKGV2ZW50OiBFeHRyYWN0PEV2ZW50LCB7IHJlYWRvbmx5IHR5cGU6IFwibGlmZWN5Y2xlOmVycm9yXCIgfT4pID0+IHtcbiAgY29uc3QgbW9kdWxlSWQgPSBldmVudC5tb2R1bGVJZCA/PyBcInVua25vd25cIlxuICBjb25zdCBjYXVzZVByZXR0eSA9ICgoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBDYXVzZS5wcmV0dHkoZXZlbnQuY2F1c2UgYXMgQ2F1c2UuQ2F1c2U8dW5rbm93bj4sIHtcbiAgICAgICAgcmVuZGVyRXJyb3JDYXVzZTogdHJ1ZSxcbiAgICAgIH0pXG4gICAgfSBjYXRjaCB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZXZlbnQuY2F1c2UsIG51bGwsIDIpXG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgcmV0dXJuIFN0cmluZyhldmVudC5jYXVzZSlcbiAgICAgIH1cbiAgICB9XG4gIH0pKClcblxuICBjb25zdCBtZXNzYWdlID0gYFtMb2dpeF1bbW9kdWxlPSR7bW9kdWxlSWR9XSBsaWZlY3ljbGU6ZXJyb3JcXG4ke2NhdXNlUHJldHR5fWBcblxuICByZXR1cm4gRWZmZWN0LmxvZ0Vycm9yKG1lc3NhZ2UpLnBpcGUoXG4gICAgRWZmZWN0LmFubm90YXRlTG9ncyh7XG4gICAgICBcImxvZ2l4Lm1vZHVsZUlkXCI6IG1vZHVsZUlkLFxuICAgICAgXCJsb2dpeC5ldmVudFwiOiBcImxpZmVjeWNsZTplcnJvclwiLFxuICAgICAgXCJsb2dpeC5jYXVzZVwiOiBjYXVzZVByZXR0eSxcbiAgICB9KSxcbiAgKVxufVxuXG5jb25zdCBkaWFnbm9zdGljTG9nID0gKGV2ZW50OiBFeHRyYWN0PEV2ZW50LCB7IHJlYWRvbmx5IHR5cGU6IFwiZGlhZ25vc3RpY1wiIH0+KSA9PiB7XG4gIGNvbnN0IG1vZHVsZUlkID0gZXZlbnQubW9kdWxlSWQgPz8gXCJ1bmtub3duXCJcbiAgY29uc3QgaGVhZGVyID0gYFtMb2dpeF1bbW9kdWxlPSR7bW9kdWxlSWR9XSBkaWFnbm9zdGljKCR7ZXZlbnQuc2V2ZXJpdHl9KWBcbiAgY29uc3QgZGV0YWlsID0gYGNvZGU9JHtldmVudC5jb2RlfSBtZXNzYWdlPSR7ZXZlbnQubWVzc2FnZX0ke1xuICAgIGV2ZW50LmFjdGlvblRhZyA/IGAgYWN0aW9uPSR7ZXZlbnQuYWN0aW9uVGFnfWAgOiBcIlwiXG4gIH0ke2V2ZW50LmhpbnQgPyBgXFxuaGludDogJHtldmVudC5oaW50fWAgOiBcIlwifWBcbiAgY29uc3QgbXNnID0gYCR7aGVhZGVyfVxcbiR7ZGV0YWlsfWBcblxuICBjb25zdCBiYXNlID1cbiAgICBldmVudC5zZXZlcml0eSA9PT0gXCJ3YXJuaW5nXCJcbiAgICAgID8gRWZmZWN0LmxvZ1dhcm5pbmcobXNnKVxuICAgICAgOiBldmVudC5zZXZlcml0eSA9PT0gXCJpbmZvXCJcbiAgICAgICAgPyBFZmZlY3QubG9nSW5mbyhtc2cpXG4gICAgICAgIDogRWZmZWN0LmxvZ0Vycm9yKG1zZylcblxuICBjb25zdCBhbm5vdGF0aW9uczogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gPSB7XG4gICAgXCJsb2dpeC5tb2R1bGVJZFwiOiBtb2R1bGVJZCxcbiAgICBcImxvZ2l4LmV2ZW50XCI6IGBkaWFnbm9zdGljKCR7ZXZlbnQuc2V2ZXJpdHl9KWAsXG4gICAgXCJsb2dpeC5kaWFnbm9zdGljLmNvZGVcIjogZXZlbnQuY29kZSxcbiAgICBcImxvZ2l4LmRpYWdub3N0aWMubWVzc2FnZVwiOiBldmVudC5tZXNzYWdlLFxuICB9XG4gIGlmIChldmVudC5oaW50KSB7XG4gICAgYW5ub3RhdGlvbnNbXCJsb2dpeC5kaWFnbm9zdGljLmhpbnRcIl0gPSBldmVudC5oaW50XG4gIH1cbiAgaWYgKGV2ZW50LmFjdGlvblRhZykge1xuICAgIGFubm90YXRpb25zW1wibG9naXguZGlhZ25vc3RpYy5hY3Rpb25UYWdcIl0gPSBldmVudC5hY3Rpb25UYWdcbiAgfVxuXG4gIHJldHVybiBiYXNlLnBpcGUoRWZmZWN0LmFubm90YXRlTG9ncyhhbm5vdGF0aW9ucykpXG59XG5cbi8qKlxuICogXHU1N0ZBXHU0RThFIEZpYmVyUmVmLmN1cnJlbnREZWJ1Z1NpbmtzIFx1NzY4NFx1OUVEOFx1OEJBNCBMYXllciBcdTdFQzRcdTU0MDhcdUZGMUFcbiAqIC0gXHU0RjdGXHU3NTI4IExheWVyLmxvY2FsbHlTY29wZWQgXHU3ODZFXHU0RkREIERlYnVnIHNpbmtzIFx1NEY1Q1x1NEUzQSBGaWJlclJlZiBcdTcyQjZcdTYwMDFcdTZDRThcdTUxNjVcdUZGMENcbiAqIC0gXHU0RTBEXHU1MThEXHU1QzA2IEZpYmVyUmVmIFx1OEJFRlx1NzUyOFx1NEUzQSBDb250ZXh0LlRhZ1x1MzAwMlxuICovXG5leHBvcnQgY29uc3Qgbm9vcExheWVyID0gTGF5ZXIubG9jYWxseVNjb3BlZChjdXJyZW50RGVidWdTaW5rcywgW10pXG5cbi8qKlxuICogZXJyb3JPbmx5TGF5ZXJcdUZGMUFcbiAqIC0gXHU5RUQ4XHU4QkE0XHU3Njg0IERlYnVnU2luayBcdTVCOUVcdTczQjBcdUZGMENcdTRFQzVcdTUxNzNcdTVGQzMgbGlmZWN5Y2xlOmVycm9yIFx1NEU4Qlx1NEVGNlx1RkYxQlxuICogLSBcdTkwMDJcdTU0MDhcdTRGNUNcdTRFM0EgUnVudGltZSBcdTc2ODRcdTIwMUNcdTY3MDBcdTRGNEVcdTk2NTBcdTVFQTZcdTg5QzJcdTZENEJcdTIwMURcdTVDNDJcdUZGMENcdTRGRERcdThCQzFcdTgxRjRcdTU0N0RcdTk1MTlcdThCRUZcdTRFMERcdTRGMUFcdTYwODRcdTcxMzZcdTZEODhcdTU5MzFcdUZGMUJcbiAqIC0gXHU1MTc2XHU0RUQ2XHU0RThCXHU0RUY2XHVGRjA4bW9kdWxlOmluaXQvZGVzdHJveVx1MzAwMWFjdGlvbjpkaXNwYXRjaFx1MzAwMXN0YXRlOnVwZGF0ZVx1RkYwOVx1OUVEOFx1OEJBNFx1NEUwRFx1OEJCMFx1NUY1NVx1MzAwMlxuICovXG5jb25zdCBlcnJvck9ubHlTaW5rOiBTaW5rID0ge1xuICByZWNvcmQ6IChldmVudDogRXZlbnQpID0+XG4gICAgZXZlbnQudHlwZSA9PT0gXCJsaWZlY3ljbGU6ZXJyb3JcIlxuICAgICAgPyBsaWZlY3ljbGVFcnJvckxvZyhldmVudClcbiAgICAgIDogZXZlbnQudHlwZSA9PT0gXCJkaWFnbm9zdGljXCIgJiYgZXZlbnQuc2V2ZXJpdHkgIT09IFwiaW5mb1wiXG4gICAgICAgID8gZGlhZ25vc3RpY0xvZyhldmVudClcbiAgICAgICAgOiBFZmZlY3Qudm9pZCxcbn1cblxuZXhwb3J0IGNvbnN0IGVycm9yT25seUxheWVyID0gTGF5ZXIubG9jYWxseVNjb3BlZChjdXJyZW50RGVidWdTaW5rcywgW2Vycm9yT25seVNpbmtdKVxuXG4vKipcbiAqIGNvbnNvbGVMYXllclx1RkYxQVxuICogLSBcdTUxNjhcdTkxQ0ZcdThDMDNcdThCRDVcdTVDNDJcdUZGMENcdTVDMDZcdTYyNDBcdTY3MDkgRGVidWcgXHU0RThCXHU0RUY2XHU0RUU1IEVmZmVjdCBcdTY1RTVcdTVGRDdcdTVGNjJcdTVGMEZcdThGOTNcdTUxRkFcdUZGMDhsb2dmbXQgLyBzdHJ1Y3R1cmVkXHVGRjA5XHVGRjBDXG4gKiAtIFx1OTAwMlx1NTQwOFx1NEY1Q1x1NEUzQVx1OTAxQVx1NzUyOFx1NzNBRlx1NTg4M1x1RkYwOE5vZGUgLyBcdTZENEJcdThCRDVcdTczQUZcdTU4ODNcdUZGMDlcdTc2ODRcdTg5QzJcdTZENEJcdTVDNDJcdTMwMDJcbiAqL1xuY29uc3QgY29uc29sZVNpbms6IFNpbmsgPSB7XG4gIHJlY29yZDogKGV2ZW50OiBFdmVudCkgPT5cbiAgICBldmVudC50eXBlID09PSBcImxpZmVjeWNsZTplcnJvclwiXG4gICAgICA/IGxpZmVjeWNsZUVycm9yTG9nKGV2ZW50KVxuICAgICAgOiBldmVudC50eXBlID09PSBcImRpYWdub3N0aWNcIlxuICAgICAgICA/IGRpYWdub3N0aWNMb2coZXZlbnQpXG4gICAgICAgIDogRWZmZWN0LmxvZ0RlYnVnKHsgZGVidWdFdmVudDogZXZlbnQgfSksXG59XG5cbmV4cG9ydCBjb25zdCBjb25zb2xlTGF5ZXIgPSBMYXllci5sb2NhbGx5U2NvcGVkKGN1cnJlbnREZWJ1Z1NpbmtzLCBbY29uc29sZVNpbmtdKVxuXG5jb25zdCBpc0Jyb3dzZXIgPSB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIlxuXG4vLyBcdTZENEZcdTg5QzhcdTU2NjhcdTczQUZcdTU4ODNcdTRFMEJcdTdFREZcdTRFMDBcdTc2ODQgQ29uc29sZSBcdTZFMzJcdTY3RDNcdTkwM0JcdThGOTFcdUZGMENcdTc1MjhcdTRFOEUgRGVidWdTaW5rIFx1N0YzQVx1NzcwMVx1NUI5RVx1NzNCMFx1NEUwRSBicm93c2VyQ29uc29sZUxheWVyXHUzMDAyXG5jb25zdCByZW5kZXJCcm93c2VyQ29uc29sZUV2ZW50ID0gKGV2ZW50OiBFdmVudCk6IEVmZmVjdC5FZmZlY3Q8dm9pZD4gPT4ge1xuICAvLyB0cmFjZToqIFx1NEU4Qlx1NEVGNlx1RkYxQVx1NTcyOFx1NkQ0Rlx1ODlDOFx1NTY2OFx1NEUyRFx1NEVFNVx1NzJFQ1x1N0FDQlx1NTIwNlx1N0VDNFx1NUM1NVx1NzkzQVx1RkYwQ1x1NEZCRlx1NEU4RSBQbGF5Z3JvdW5kIC8gRGV2VG9vbHMgXHU4OUMyXHU2RDRCXHUzMDAyXG4gIGlmICh0eXBlb2YgKGV2ZW50IGFzIGFueSkudHlwZSA9PT0gXCJzdHJpbmdcIiAmJiAoZXZlbnQgYXMgYW55KS50eXBlLnN0YXJ0c1dpdGgoXCJ0cmFjZTpcIikpIHtcbiAgICBjb25zdCBtb2R1bGVJZCA9IChldmVudCBhcyBhbnkpLm1vZHVsZUlkID8/IFwidW5rbm93blwiXG4gICAgY29uc3QgdHlwZSA9IChldmVudCBhcyBhbnkpLnR5cGVcblxuICAgIHJldHVybiBFZmZlY3Quc3luYygoKSA9PiB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZS5ncm91cENvbGxhcHNlZChcbiAgICAgICAgXCIlY1tMb2dpeF0lYyB0cmFjZSAlY1wiICsgbW9kdWxlSWQgKyBcIiVjIFwiICsgU3RyaW5nKHR5cGUpLFxuICAgICAgICBcImNvbG9yOiM2YjcyODA7Zm9udC13ZWlnaHQ6Ym9sZFwiLCAvLyB0YWdcbiAgICAgICAgXCJjb2xvcjojM2I4MmY2XCIsIC8vIGxhYmVsXG4gICAgICAgIFwiY29sb3I6IzljYTNhZlwiLCAvLyBtb2R1bGUgaWRcbiAgICAgICAgXCJjb2xvcjojNmI3MjgwXCIsIC8vIHR5cGVcbiAgICAgIClcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICBjb25zb2xlLmxvZyhldmVudClcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICBjb25zb2xlLmdyb3VwRW5kKClcbiAgICB9KVxuICB9XG5cbiAgaWYgKGV2ZW50LnR5cGUgPT09IFwibGlmZWN5Y2xlOmVycm9yXCIpIHtcbiAgICBjb25zdCBtb2R1bGVJZCA9IGV2ZW50Lm1vZHVsZUlkID8/IFwidW5rbm93blwiXG4gICAgY29uc3QgY2F1c2VQcmV0dHkgPSAoKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIENhdXNlLnByZXR0eShldmVudC5jYXVzZSBhcyBDYXVzZS5DYXVzZTx1bmtub3duPiwgeyByZW5kZXJFcnJvckNhdXNlOiB0cnVlIH0pXG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZXZlbnQuY2F1c2UsIG51bGwsIDIpXG4gICAgICAgIH0gY2F0Y2gge1xuICAgICAgICByZXR1cm4gU3RyaW5nKGV2ZW50LmNhdXNlKVxuICAgICAgfVxuICAgIH1cbiAgfSkoKVxuXG4gICAgY29uc3Qga2V5ID0gYCR7bW9kdWxlSWR9fCR7Y2F1c2VQcmV0dHl9YFxuICAgIGlmIChicm93c2VyTGlmZWN5Y2xlU2Vlbi5oYXMoa2V5KSkge1xuICAgICAgcmV0dXJuIEVmZmVjdC52b2lkXG4gICAgfVxuICAgIGJyb3dzZXJMaWZlY3ljbGVTZWVuLmFkZChrZXkpXG5cbiAgICByZXR1cm4gRWZmZWN0LnN5bmMoKCkgPT4ge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgIGNvbnNvbGUuZ3JvdXBDb2xsYXBzZWQoXG4gICAgICAgIFwiJWNbTG9naXhdJWMgbGlmZWN5Y2xlOmVycm9yICVjXCIgKyBtb2R1bGVJZCxcbiAgICAgICAgXCJjb2xvcjojZWY0NDQ0O2ZvbnQtd2VpZ2h0OmJvbGRcIiwgLy8gdGFnXG4gICAgICAgIFwiY29sb3I6I2VmNDQ0NFwiLCAvLyBsYWJlbFxuICAgICAgICBcImNvbG9yOiM5Y2EzYWZcIiwgLy8gbW9kdWxlIGlkXG4gICAgICApXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZS5lcnJvcihjYXVzZVByZXR0eSlcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICBjb25zb2xlLmdyb3VwRW5kKClcbiAgICB9KVxuICB9XG5cbiAgaWYgKGV2ZW50LnR5cGUgPT09IFwiZGlhZ25vc3RpY1wiKSB7XG4gICAgY29uc3QgbW9kdWxlSWQgPSBldmVudC5tb2R1bGVJZCA/PyBcInVua25vd25cIlxuICAgIGNvbnN0IGRldGFpbCA9IGBjb2RlPSR7ZXZlbnQuY29kZX0gbWVzc2FnZT0ke2V2ZW50Lm1lc3NhZ2V9JHtcbiAgICAgIGV2ZW50LmFjdGlvblRhZyA/IGAgYWN0aW9uPSR7ZXZlbnQuYWN0aW9uVGFnfWAgOiBcIlwiXG4gICAgfSR7ZXZlbnQuaGludCA/IGBcXG5oaW50OiAke2V2ZW50LmhpbnR9YCA6IFwiXCJ9YFxuXG4gICAgY29uc3QgY29sb3IgPVxuICAgICAgZXZlbnQuc2V2ZXJpdHkgPT09IFwid2FybmluZ1wiXG4gICAgICAgID8gXCJjb2xvcjojZDk3NzA2XCJcbiAgICAgICAgOiBldmVudC5zZXZlcml0eSA9PT0gXCJpbmZvXCJcbiAgICAgICAgICA/IFwiY29sb3I6IzNiODJmNlwiXG4gICAgICAgICAgOiBcImNvbG9yOiNlZjQ0NDRcIlxuXG4gICAgY29uc3QgbGFiZWwgPVxuICAgICAgZXZlbnQuc2V2ZXJpdHkgPT09IFwid2FybmluZ1wiXG4gICAgICAgID8gXCJkaWFnbm9zdGljKHdhcm5pbmcpXCJcbiAgICAgICAgOiBldmVudC5zZXZlcml0eSA9PT0gXCJpbmZvXCJcbiAgICAgICAgICA/IFwiZGlhZ25vc3RpYyhpbmZvKVwiXG4gICAgICAgICAgOiBcImRpYWdub3N0aWMoZXJyb3IpXCJcblxuICAgIGNvbnN0IGtleSA9IGAke21vZHVsZUlkfXwke2V2ZW50LmNvZGV9fCR7ZXZlbnQubWVzc2FnZX1gXG4gICAgaWYgKGJyb3dzZXJEaWFnbm9zdGljU2Vlbi5oYXMoa2V5KSkge1xuICAgICAgcmV0dXJuIEVmZmVjdC52b2lkXG4gICAgfVxuICAgIGJyb3dzZXJEaWFnbm9zdGljU2Vlbi5hZGQoa2V5KVxuXG4gICAgcmV0dXJuIEVmZmVjdC5zeW5jKCgpID0+IHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICBjb25zb2xlLmdyb3VwQ29sbGFwc2VkKFxuICAgICAgICBcIiVjW0xvZ2l4XSVjIFwiICsgbGFiZWwgKyBcIiVjIG1vZHVsZT1cIiArIG1vZHVsZUlkLFxuICAgICAgICBcImNvbG9yOiM2YjcyODA7Zm9udC13ZWlnaHQ6Ym9sZFwiLFxuICAgICAgICBjb2xvcixcbiAgICAgICAgXCJjb2xvcjojOWNhM2FmXCIsXG4gICAgICApXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZS5sb2coZGV0YWlsKVxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgIGNvbnNvbGUuZ3JvdXBFbmQoKVxuICAgIH0pXG4gIH1cblxuICAvLyBcdTUxNzZcdTRFRDZcdTRFOEJcdTRFRjZcdUZGMUFcdTlFRDhcdThCQTRcdTRFMERcdTU3MjhcdTZENEZcdTg5QzhcdTU2NjhcdTYzQTdcdTUyMzZcdTUzRjBcdThGOTNcdTUxRkFcdUZGMENcdTRFRTVcdTUxNERcdTU3MjhcdTRFMUFcdTUyQTFcdTVGMDBcdTUzRDFcdTU3M0FcdTY2NkZcdTRFMkRcdThGQzdcdTRFOEVcdTU0MzVcdTk1RjlcdUZGMUJcbiAgLy8gXHU1OTgyXHU5NzAwXHU2N0U1XHU3NzBCXHU1MTg1XHU5MEU4XHU4QzAzXHU4QkQ1XHU0RThCXHU0RUY2XHVGRjBDXHU1M0VGXHU5MDFBXHU4RkM3XHU4MUVBXHU1QjlBXHU0RTQ5IERlYnVnIFNpbmsgXHU2MjE2XHU1NzI4IE5vZGUgXHU3M0FGXHU1ODgzXHU0RTBCXHU0RjdGXHU3NTI4IGNvbnNvbGVMYXllclx1MzAwMlxuICByZXR1cm4gRWZmZWN0LnZvaWRcbn1cblxuLyoqXG4gKiBcdTZENEZcdTg5QzhcdTU2NjggQ29uc29sZSBcdThDMDNcdThCRDVcdTVDNDJcdUZGMUFcbiAqIC0gXHU1NzI4XHU2RDRGXHU4OUM4XHU1NjY4XHU3M0FGXHU1ODgzXHU0RTBCXHU0RjdGXHU3NTI4IGNvbnNvbGUuZ3JvdXBDb2xsYXBzZWQgKyBcdTVGNjlcdTgyNzIgbGFiZWwgXHU2QTIxXHU2MkRGIHByZXR0eSBsb2dnZXIgXHU3Njg0XHU1MjA2XHU3RUM0XHU2NTQ4XHU2NzlDXHVGRjFCXG4gKiAtIFx1NTcyOFx1OTc1RVx1NkQ0Rlx1ODlDOFx1NTY2OFx1NzNBRlx1NTg4M1x1NEUwQlx1NTZERVx1OTAwMFx1NTIzMCBjb25zb2xlTGF5ZXIgXHU3Njg0IEVmZmVjdCBcdTY1RTVcdTVGRDdcdTVCOUVcdTczQjBcdTMwMDJcbiAqL1xuY29uc3QgYnJvd3NlckNvbnNvbGVTaW5rOiBTaW5rID0ge1xuICByZWNvcmQ6IChldmVudDogRXZlbnQpID0+IHtcbiAgICBpZiAoIWlzQnJvd3Nlcikge1xuICAgICAgLy8gXHU5NzVFXHU2RDRGXHU4OUM4XHU1NjY4XHU3M0FGXHU1ODgzXHVGRjFBXHU5MDAwXHU1NkRFXHU1MjMwIEVmZmVjdC5sb2cqIFx1NzY4NCBjb25zb2xlTGF5ZXIgXHU4ODRDXHU0RTNBXG4gICAgICByZXR1cm4gZXZlbnQudHlwZSA9PT0gXCJsaWZlY3ljbGU6ZXJyb3JcIlxuICAgICAgICA/IGxpZmVjeWNsZUVycm9yTG9nKGV2ZW50KVxuICAgICAgICA6IGV2ZW50LnR5cGUgPT09IFwiZGlhZ25vc3RpY1wiXG4gICAgICAgICAgPyBkaWFnbm9zdGljTG9nKGV2ZW50KVxuICAgICAgICAgIDogRWZmZWN0LmxvZ0RlYnVnKHsgZGVidWdFdmVudDogZXZlbnQgfSlcbiAgICB9XG5cbiAgICByZXR1cm4gcmVuZGVyQnJvd3NlckNvbnNvbGVFdmVudChldmVudClcbiAgfSxcbn1cblxuZXhwb3J0IGNvbnN0IGJyb3dzZXJDb25zb2xlTGF5ZXIgPSBMYXllci5sb2NhbGx5U2NvcGVkKGN1cnJlbnREZWJ1Z1NpbmtzLCBbYnJvd3NlckNvbnNvbGVTaW5rXSlcblxuLyoqXG4gKiBcdTZENEZcdTg5QzhcdTU2NjhcdTUzQ0JcdTU5N0RcdTc2ODQgTG9nZ2VyIFx1NUM0Mlx1RkYxQVx1NEY3Rlx1NzUyOCBFZmZlY3QgXHU1Qjk4XHU2NUI5XHU3Njg0IHByZXR0eSBsb2dnZXJcdUZGMDhicm93c2VyIFx1NkEyMVx1NUYwRlx1RkYwOVx1NjZGRlx1NjM2Mlx1OUVEOFx1OEJBNCBsb2dnZXJcdTMwMDJcbiAqIC0gXHU0RTBEXHU1MThEXHU2MjRCXHU1MTk5IGNvbnNvbGUgXHU2ODM3XHU1RjBGXHVGRjBDXHU3NkY0XHU2M0E1XHU1OTBEXHU3NTI4IEVmZmVjdCBcdTc2ODRcdTVGNjlcdTgyNzIvXHU1MjA2XHU3RUM0XHU2ODNDXHU1RjBGXHVGRjFCXG4gKiAtIFx1NTcyOFx1NjcwRFx1NTJBMVx1N0FFRlx1NzNBRlx1NTg4M1x1NEUwQlx1NEU1Rlx1ODBGRFx1NUI4OVx1NTE2OFx1OTAwMFx1NTMxNlx1NEUzQVx1OUVEOFx1OEJBNCBsb2dnZXJcdTMwMDJcbiAqL1xuZXhwb3J0IGNvbnN0IGJyb3dzZXJQcmV0dHlMb2dnZXJMYXllciA9IExvZ2dlci5yZXBsYWNlKFxuICBMb2dnZXIuZGVmYXVsdExvZ2dlcixcbiAgTG9nZ2VyLnByZXR0eUxvZ2dlcih7IG1vZGU6IFwiYnJvd3NlclwiLCBjb2xvcnM6IHRydWUgfSlcbilcblxuLyoqXG4gKiBkZWZhdWx0TGF5ZXJcdUZGMUFcbiAqIC0gXHU1MTZDXHU1MTcxXHU5RUQ4XHU4QkE0XHU1QzQyXHVGRjBDXHU1RjUzXHU1MjREXHU3QjQ5XHU1NDBDXHU0RThFIGVycm9yT25seUxheWVyXHVGRjFCXG4gKiAtIFx1NEVDNVx1OEJCMFx1NUY1NSBsaWZlY3ljbGU6ZXJyb3JcdUZGMENcdTkwN0ZcdTUxNERcdTU3MjhcdTlFRDhcdThCQTRcdTYwQzVcdTUxQjVcdTRFMEJcdTVCRjkgYWN0aW9uL3N0YXRlIFx1NjI1M1x1NTM3MFx1NTkyN1x1OTFDRlx1NjVFNVx1NUZEN1x1MzAwMlxuICovXG5leHBvcnQgY29uc3QgZGVmYXVsdExheWVyID0gZXJyb3JPbmx5TGF5ZXJcblxuZXhwb3J0IGNvbnN0IHJlY29yZCA9IChldmVudDogRXZlbnQpID0+XG4gIEVmZmVjdC5nZW4oZnVuY3Rpb24qICgpIHtcbiAgICBjb25zdCBzaW5rcyA9IHlpZWxkKiBGaWJlclJlZi5nZXQoY3VycmVudERlYnVnU2lua3MpXG4gICAgY29uc3QgcnVudGltZUxhYmVsID0geWllbGQqIEZpYmVyUmVmLmdldChjdXJyZW50UnVudGltZUxhYmVsKVxuICAgIGNvbnN0IHR4bklkID0geWllbGQqIEZpYmVyUmVmLmdldChjdXJyZW50VHhuSWQpXG5cbiAgICAvLyBcdTRFM0EgRGVidWcuRXZlbnQgXHU4ODY1XHU1MTY4XHU1N0ZBXHU3ODQwXHU1QjU3XHU2QkI1XHVGRjFBXG4gICAgLy8gLSB0aW1lc3RhbXBcdUZGMUFcdTc1MjhcdTRFOEUgRGV2dG9vbHMvVGltZWxpbmUvT3ZlcnZpZXcgXHU1MDVBXHU2NUY2XHU5NUY0XHU4MDVBXHU1NDA4XHVGRjBDXHU5MDdGXHU1MTREIFVJIFx1NEZBN1x1NzUyOCBEYXRlLm5vdygpXHUyMDFDXHU5OTk2XHU2QjIxXHU4OUMyXHU1QkRGXHU2NUY2XHU5NUY0XHUyMDFEXHU1QkZDXHU4MUY0XHU1OTMxXHU3NzFGXHVGRjFCXG4gICAgLy8gLSBydW50aW1lTGFiZWxcdUZGMUFcdTY3NjVcdTgxRUEgRmliZXJSZWZcdUZGMENcdTRGQkZcdTRFOEVcdTYzMDkgcnVudGltZSBcdTdFRjRcdTVFQTZcdTUyMDZcdTdFQzRcdUZGMDhcdTRFQzVcdTU3MjhcdTRFOEJcdTRFRjZcdTY3MkFcdTY2M0VcdTVGMEZcdTYzRDBcdTRGOUJcdTY1RjZcdTZDRThcdTUxNjVcdUZGMDlcdTMwMDJcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpXG4gICAgY29uc3QgZW5yaWNoZWQgPSBldmVudCBhcyBFdmVudFxuICAgIGlmIChlbnJpY2hlZC50aW1lc3RhbXAgPT09IHVuZGVmaW5lZCkge1xuICAgICAgOyhlbnJpY2hlZCBhcyBhbnkpLnRpbWVzdGFtcCA9IG5vd1xuICAgIH1cblx0aWYgKHJ1bnRpbWVMYWJlbCAmJiBlbnJpY2hlZC5ydW50aW1lTGFiZWwgPT09IHVuZGVmaW5lZCkge1xuXHQgIDsoZW5yaWNoZWQgYXMgYW55KS5ydW50aW1lTGFiZWwgPSBydW50aW1lTGFiZWxcblx0fVxuXHRpZiAodHhuSWQgJiYgZW5yaWNoZWQudHlwZSA9PT0gXCJkaWFnbm9zdGljXCIgJiYgKGVucmljaGVkIGFzIGFueSkudHhuSWQgPT09IHVuZGVmaW5lZCkge1xuXHQgIDsoZW5yaWNoZWQgYXMgYW55KS50eG5JZCA9IHR4bklkXG5cdH1cblxuICAgIGlmIChzaW5rcy5sZW5ndGggPiAwKSB7XG4gICAgICB5aWVsZCogRWZmZWN0LmZvckVhY2goXG4gICAgICAgIHNpbmtzLFxuICAgICAgICAoc2luaykgPT4gc2luay5yZWNvcmQoZW5yaWNoZWQpLFxuICAgICAgICB7XG4gICAgICAgICAgZGlzY2FyZDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmIChpc0Jyb3dzZXIpIHtcbiAgICAgIHlpZWxkKiByZW5kZXJCcm93c2VyQ29uc29sZUV2ZW50KGVucmljaGVkKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmIChlbnJpY2hlZC50eXBlID09PSBcImxpZmVjeWNsZTplcnJvclwiKSB7XG4gICAgICB5aWVsZCogbGlmZWN5Y2xlRXJyb3JMb2coZW5yaWNoZWQpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKGVucmljaGVkLnR5cGUgPT09IFwiZGlhZ25vc3RpY1wiKSB7XG4gICAgICB5aWVsZCogZGlhZ25vc3RpY0xvZyhlbnJpY2hlZClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICB5aWVsZCogRWZmZWN0LnZvaWRcbiAgfSlcblxuLyoqXG4gKiBcdTVDMDZcdTUxODVcdTkwRTggRGVidWcuRXZlbnQgXHU1RjUyXHU0RTAwXHU1MzE2XHU0RTNBIFJ1bnRpbWVEZWJ1Z0V2ZW50UmVmXHVGRjFBXG4gKiAtIFx1NEZCRlx1NEU4RSBEZXZ0b29scyAvIFJ1bnRpbWUgXHU3RURGXHU0RTAwXHU2RDg4XHU4RDM5IERlYnVnIFx1NEU4Qlx1NEVGNlx1RkYxQlxuICogLSBcdTRFMERcdTY1MzlcdTUzRDhcdTUzOUZcdTY3MDkgRGVidWdTaW5rIFx1ODg0Q1x1NEUzQVx1RkYwQ1x1NEVDNVx1NjNEMFx1NEY5Qlx1N0VEM1x1Njc4NFx1NTMxNlx1ODlDNlx1NTZGRVx1MzAwMlxuICovXG5leHBvcnQgY29uc3QgdG9SdW50aW1lRGVidWdFdmVudFJlZiA9IChcbiAgZXZlbnQ6IEV2ZW50XG4pOiBSdW50aW1lRGVidWdFdmVudFJlZiB8IHVuZGVmaW5lZCA9PiB7XG4gIGNvbnN0IGV2ZW50SWQgPSBtYWtlRXZlbnRJZCgpXG4gIGNvbnN0IHRpbWVzdGFtcCA9XG4gICAgdHlwZW9mIGV2ZW50LnRpbWVzdGFtcCA9PT0gXCJudW1iZXJcIiAmJiBOdW1iZXIuaXNGaW5pdGUoZXZlbnQudGltZXN0YW1wKVxuICAgICAgPyBldmVudC50aW1lc3RhbXBcbiAgICAgIDogRGF0ZS5ub3coKVxuXG4gIGNvbnN0IGJhc2UgPSB7XG4gICAgZXZlbnRJZCxcbiAgICBtb2R1bGVJZDogKGV2ZW50IGFzIGFueSkubW9kdWxlSWQsXG4gICAgcnVudGltZUlkOiAoZXZlbnQgYXMgYW55KS5ydW50aW1lSWQsXG4gICAgcnVudGltZUxhYmVsOiAoZXZlbnQgYXMgYW55KS5ydW50aW1lTGFiZWwsXG4gICAgdHhuSWQ6IChldmVudCBhcyBhbnkpLnR4bklkLFxuICAgIHRpbWVzdGFtcFxuICB9IGFzIGNvbnN0XG5cblx0ICBzd2l0Y2ggKGV2ZW50LnR5cGUpIHtcblx0ICAgIGNhc2UgXCJtb2R1bGU6aW5pdFwiOlxuXHQgICAgICByZXR1cm4ge1xuXHQgICAgICAgIC4uLmJhc2UsXG5cdCAgICAgICAga2luZDogXCJsaWZlY3ljbGVcIixcblx0ICAgICAgICBsYWJlbDogXCJtb2R1bGU6aW5pdFwiXG5cdCAgICAgIH1cblx0ICAgIGNhc2UgXCJtb2R1bGU6ZGVzdHJveVwiOlxuXHQgICAgICByZXR1cm4ge1xuXHQgICAgICAgIC4uLmJhc2UsXG5cdCAgICAgICAga2luZDogXCJsaWZlY3ljbGVcIixcblx0ICAgICAgICBsYWJlbDogXCJtb2R1bGU6ZGVzdHJveVwiXG5cdCAgICAgIH1cblx0ICAgIGNhc2UgXCJhY3Rpb246ZGlzcGF0Y2hcIjoge1xuXHQgICAgICBjb25zdCBhY3Rpb246IGFueSA9IGV2ZW50LmFjdGlvblxuXHQgICAgICBjb25zdCB0YWcgPSBhY3Rpb24/Ll90YWcgPz8gYWN0aW9uPy50eXBlID8/IFwiYWN0aW9uOmRpc3BhdGNoXCJcblx0ICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAuLi5iYXNlLFxuXHQgICAgICAgIHRyaWdnZXI6IHsga2luZDogXCJhY3Rpb25cIiwgbmFtZTogU3RyaW5nKHRhZykgfSxcblx0ICAgICAgICBraW5kOiBcImFjdGlvblwiLFxuXHQgICAgICAgIGxhYmVsOiBTdHJpbmcodGFnKSxcblx0ICAgICAgICBtZXRhOiB7IGFjdGlvbiB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGNhc2UgXCJzdGF0ZTp1cGRhdGVcIjoge1xuXHQgICAgICBjb25zdCBlID0gZXZlbnQgYXMgRXh0cmFjdDxFdmVudCwgeyByZWFkb25seSB0eXBlOiBcInN0YXRlOnVwZGF0ZVwiIH0+XG5cdCAgICAgIGNvbnN0IHRyaWdnZXI6IFRyaWdnZXJSZWYgfCB1bmRlZmluZWQgPVxuXHQgICAgICAgIGUub3JpZ2luS2luZCA/IHsga2luZDogZS5vcmlnaW5LaW5kLCBuYW1lOiBlLm9yaWdpbk5hbWUgfSA6IHVuZGVmaW5lZFxuXG5cdCAgICAgIGNvbnN0IHJlcGxheSA9IGUucmVwbGF5RXZlbnQgYXMgYW55XG5cdCAgICAgIGNvbnN0IHJlcGxheVJlc291cmNlSWQgPVxuXHQgICAgICAgIHJlcGxheSAmJlxuXHQgICAgICAgIHR5cGVvZiByZXBsYXkgPT09IFwib2JqZWN0XCIgJiZcblx0ICAgICAgICAocmVwbGF5IGFzIGFueSkuX3RhZyA9PT0gXCJSZXNvdXJjZVNuYXBzaG90XCIgJiZcblx0ICAgICAgICB0eXBlb2YgKHJlcGxheSBhcyBhbnkpLnJlc291cmNlSWQgPT09IFwic3RyaW5nXCJcblx0ICAgICAgICAgID8gKChyZXBsYXkgYXMgYW55KS5yZXNvdXJjZUlkIGFzIHN0cmluZylcblx0ICAgICAgICAgIDogdW5kZWZpbmVkXG5cdCAgICAgIGNvbnN0IHJlcGxheUtleUhhc2ggPVxuXHQgICAgICAgIHJlcGxheSAmJlxuXHQgICAgICAgIHR5cGVvZiByZXBsYXkgPT09IFwib2JqZWN0XCIgJiZcblx0ICAgICAgICB0eXBlb2YgKHJlcGxheSBhcyBhbnkpLmtleUhhc2ggPT09IFwic3RyaW5nXCJcblx0ICAgICAgICAgID8gKChyZXBsYXkgYXMgYW55KS5rZXlIYXNoIGFzIHN0cmluZylcblx0ICAgICAgICAgIDogdW5kZWZpbmVkXG5cblx0ICAgICAgY29uc3QgcmVmOiBSdW50aW1lRGVidWdFdmVudFJlZiA9IHtcblx0ICAgICAgICAuLi5iYXNlLFxuXHQgICAgICAgIHRyaWdnZXIsXG5cdCAgICAgICAgcmVzb3VyY2VJZDogcmVwbGF5UmVzb3VyY2VJZCxcblx0ICAgICAgICBrZXlIYXNoOiByZXBsYXlLZXlIYXNoLFxuXHQgICAgICAgIGtpbmQ6IFwic3RhdGVcIixcblx0ICAgICAgICBsYWJlbDogXCJzdGF0ZTp1cGRhdGVcIixcblx0ICAgICAgICBtZXRhOiB7XG5cdCAgICAgICAgICBzdGF0ZTogZS5zdGF0ZSxcblx0ICAgICAgICAgIHBhdGNoQ291bnQ6IGUucGF0Y2hDb3VudCxcblx0ICAgICAgICAgIG9yaWdpbktpbmQ6IGUub3JpZ2luS2luZCxcblx0ICAgICAgICAgIG9yaWdpbk5hbWU6IGUub3JpZ2luTmFtZSxcblx0ICAgICAgICAgIHRyYWl0U3VtbWFyeTogZS50cmFpdFN1bW1hcnksXG5cdCAgICAgICAgICByZXBsYXlFdmVudDogZS5yZXBsYXlFdmVudCxcblx0ICAgICAgICB9LFxuXHQgICAgICB9XG5cbiAgICAgIC8vIFx1OEJCMFx1NUY1NVx1NjcwMFx1OEZEMVx1NEUwMFx1NkIyMVx1NUUyNiB0eG5JZCBcdTc2ODQgc3RhdGU6dXBkYXRlIFx1MjE5MiBydW50aW1lSWQgXHU2NjIwXHU1QzA0XHVGRjBDXG4gICAgICAvLyBcdTRGQkZcdTRFOEVcdTU0MEVcdTdFRUQgdHJhY2U6cmVhY3QtcmVuZGVyIFx1NEU4Qlx1NEVGNlx1NjMwOSBydW50aW1lSWQgXHU2M0E4XHU2NUFEXHU2MjQwXHU1QzVFXHU0RThCXHU1MkExXHUzMDAyXG4gICAgICBpZiAocmVmLnJ1bnRpbWVJZCAmJiByZWYudHhuSWQpIHtcbiAgICAgICAgbGFzdFR4bklkQnlSdW50aW1lLnNldChyZWYucnVudGltZUlkLCByZWYudHhuSWQpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZWZcbiAgICB9XG4gICAgY2FzZSBcImxpZmVjeWNsZTplcnJvclwiOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uYmFzZSxcbiAgICAgICAga2luZDogXCJsaWZlY3ljbGVcIixcbiAgICAgICAgbGFiZWw6IFwibGlmZWN5Y2xlOmVycm9yXCIsXG4gICAgICAgIG1ldGE6IHsgY2F1c2U6IGV2ZW50LmNhdXNlIH1cbiAgICAgIH1cblx0ICAgIGNhc2UgXCJkaWFnbm9zdGljXCI6XG5cdCAgICAgIHJldHVybiB7XG5cdCAgICAgICAgLi4uYmFzZSxcblx0ICAgICAgICB0cmlnZ2VyOiAoZXZlbnQgYXMgYW55KS50cmlnZ2VyLFxuXHQgICAgICAgIGtpbmQ6IFwiZGlhZ25vc3RpY1wiLFxuXHQgICAgICAgIGxhYmVsOiBldmVudC5jb2RlLFxuXHQgICAgICAgIG1ldGE6IHtcblx0ICAgICAgICAgIGNvZGU6IGV2ZW50LmNvZGUsXG5cdCAgICAgICAgICBzZXZlcml0eTogZXZlbnQuc2V2ZXJpdHksXG4gICAgICAgICAgbWVzc2FnZTogZXZlbnQubWVzc2FnZSxcbiAgICAgICAgICBoaW50OiBldmVudC5oaW50LFxuICAgICAgICAgIGFjdGlvblRhZzogZXZlbnQuYWN0aW9uVGFnLFxuICAgICAgICAgIGtpbmQ6IGV2ZW50LmtpbmRcbiAgICAgICAgfVxuICAgICAgfVxuICAgIGRlZmF1bHQ6IHtcbiAgLy8gdHJhY2U6KiBcdTRFOEJcdTRFRjZcdUZGMUFcbiAgICAgIC8vIC0gdHJhY2U6cmVhY3QtcmVuZGVyXHVGRjFBXHU3RUM0XHU0RUY2XHU3RUE3XHU2RTMyXHU2N0QzIGNvbW1pdFx1RkYwOFx1NzUyOFx1NEU4RSBEZXZ0b29scyBcdTc2ODRcdTZFMzJcdTY3RDNcdTVCQzZcdTVFQTZcdThCQzRcdTRGMzBcdUZGMDlcbiAgICAgIC8vIC0gdHJhY2U6cmVhY3Qtc2VsZWN0b3JcdUZGMUFzZWxlY3RvciBcdTdFQTdcdThCQ0FcdTY1QURcdTRFOEJcdTRFRjZcdUZGMDhcdTRFMERcdTVFOTRcdThCQTFcdTUxNjUgcmVuZGVyQ291bnRcdUZGMDlcbiAgICAgIC8vIC0gdHJhY2U6ZWZmZWN0b3BcdUZGMUFFZmZlY3RPcCBcdTg5QzZcdTU2RkVcdUZGMDhzZXJ2aWNlL3RyYWl0IFx1N0I0OVx1RkYwOVxuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgZXZlbnQudHlwZSA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICAoZXZlbnQudHlwZSA9PT0gXCJ0cmFjZTpyZWFjdC1yZW5kZXJcIiB8fCBldmVudC50eXBlID09PSBcInRyYWNlOnJlYWN0LXNlbGVjdG9yXCIpXG4gICAgICApIHtcbiAgICAgICAgY29uc3QgZGF0YTogYW55ID0gKGV2ZW50IGFzIGFueSkuZGF0YVxuICAgICAgICBpZiAoZGF0YSAmJiB0eXBlb2YgZGF0YSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgIGNvbnN0IG1vZHVsZUlkID1cbiAgICAgICAgICAgIChkYXRhLm1ldGEgJiYgKGRhdGEubWV0YSBhcyBhbnkpLm1vZHVsZUlkKSA/PyBiYXNlLm1vZHVsZUlkXG5cbiAgICAgICAgICAvLyBcdTRGMThcdTUxNDhcdTRGN0ZcdTc1MjggRGVidWcgXHU0RThCXHU0RUY2XHU2MjE2IG1ldGEgXHU0RTJEXHU3Njg0IHR4bklkXHVGRjFCXHU4MkU1XHU0RTNBXHU3QTdBXHVGRjBDXHU1MjE5XHU1NkRFXHU5MDAwXHU1MjMwXHU4QkU1IHJ1bnRpbWVJZCBcdTY3MDBcdThGRDFcdTRFMDBcdTZCMjEgc3RhdGU6dXBkYXRlIFx1NzY4NCB0eG5JZFx1MzAwMlxuICAgICAgICAgIGxldCB0eG5JZCA9XG4gICAgICAgICAgICAoZGF0YS5tZXRhICYmIChkYXRhLm1ldGEgYXMgYW55KS50eG5JZCkgPz8gYmFzZS50eG5JZFxuICAgICAgICAgIGlmICghdHhuSWQgJiYgYmFzZS5ydW50aW1lSWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGxhc3QgPSBsYXN0VHhuSWRCeVJ1bnRpbWUuZ2V0KGJhc2UucnVudGltZUlkKVxuICAgICAgICAgICAgaWYgKGxhc3QpIHtcbiAgICAgICAgICAgICAgdHhuSWQgPSBsYXN0XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgbWV0YSA9IHtcbiAgICAgICAgICAgIGNvbXBvbmVudExhYmVsOiBkYXRhLmNvbXBvbmVudExhYmVsLFxuICAgICAgICAgICAgc2VsZWN0b3JLZXk6IGRhdGEuc2VsZWN0b3JLZXksXG4gICAgICAgICAgICBmaWVsZFBhdGhzOiBkYXRhLmZpZWxkUGF0aHMsXG4gICAgICAgICAgICBzdHJpY3RNb2RlUGhhc2U6IGRhdGEuc3RyaWN0TW9kZVBoYXNlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgbGFiZWwgPVxuICAgICAgICAgICAgdHlwZW9mIGRhdGEuY29tcG9uZW50TGFiZWwgPT09IFwic3RyaW5nXCIgJiYgZGF0YS5jb21wb25lbnRMYWJlbC5sZW5ndGggPiAwXG4gICAgICAgICAgICAgID8gZGF0YS5jb21wb25lbnRMYWJlbFxuICAgICAgICAgICAgICA6IGV2ZW50LnR5cGUgPT09IFwidHJhY2U6cmVhY3Qtc2VsZWN0b3JcIlxuICAgICAgICAgICAgICAgID8gXCJyZWFjdC1zZWxlY3RvclwiXG4gICAgICAgICAgICAgICAgOiBcInJlYWN0LXJlbmRlclwiXG5cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uYmFzZSxcbiAgICAgICAgICAgIG1vZHVsZUlkLFxuICAgICAgICAgICAgdHhuSWQsXG4gICAgICAgICAgICBraW5kOiBldmVudC50eXBlID09PSBcInRyYWNlOnJlYWN0LXNlbGVjdG9yXCIgPyBcInJlYWN0LXNlbGVjdG9yXCIgOiBcInJlYWN0LXJlbmRlclwiLFxuICAgICAgICAgICAgbGFiZWwsXG4gICAgICAgICAgICBtZXRhXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cblx0ICAgICAgaWYgKHR5cGVvZiBldmVudC50eXBlID09PSBcInN0cmluZ1wiICYmIGV2ZW50LnR5cGUgPT09IFwidHJhY2U6ZWZmZWN0b3BcIikge1xuXHQgICAgICAgIGNvbnN0IGRhdGE6IGFueSA9IChldmVudCBhcyBhbnkpLmRhdGFcblx0ICAgICAgICBpZiAoZGF0YSAmJiB0eXBlb2YgZGF0YSA9PT0gXCJvYmplY3RcIikge1xuXHQgICAgICAgICAgY29uc3Qgb3BLaW5kID0gKGRhdGEua2luZCA/PyBcInNlcnZpY2VcIikgYXMgUnVudGltZURlYnVnRXZlbnRLaW5kXG5cdCAgICAgICAgICBjb25zdCBsYWJlbCA9IHR5cGVvZiBkYXRhLm5hbWUgPT09IFwic3RyaW5nXCIgPyBkYXRhLm5hbWUgOiBcImVmZmVjdG9wXCJcblx0ICAgICAgICAgIGNvbnN0IG9wTWV0YTogYW55ID0gZGF0YS5tZXRhXG5cdCAgICAgICAgICBjb25zdCByZXNvdXJjZUlkID1cblx0ICAgICAgICAgICAgb3BNZXRhICYmIHR5cGVvZiBvcE1ldGEgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG9wTWV0YS5yZXNvdXJjZUlkID09PSBcInN0cmluZ1wiXG5cdCAgICAgICAgICAgICAgPyAob3BNZXRhLnJlc291cmNlSWQgYXMgc3RyaW5nKVxuXHQgICAgICAgICAgICAgIDogdW5kZWZpbmVkXG5cdCAgICAgICAgICBjb25zdCBrZXlIYXNoID1cblx0ICAgICAgICAgICAgb3BNZXRhICYmIHR5cGVvZiBvcE1ldGEgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG9wTWV0YS5rZXlIYXNoID09PSBcInN0cmluZ1wiXG5cdCAgICAgICAgICAgICAgPyAob3BNZXRhLmtleUhhc2ggYXMgc3RyaW5nKVxuXHQgICAgICAgICAgICAgIDogdW5kZWZpbmVkXG5cdCAgICAgICAgICBjb25zdCBtZXRhID0ge1xuXHQgICAgICAgICAgICBpZDogZGF0YS5pZCxcblx0ICAgICAgICAgICAga2luZDogZGF0YS5raW5kLFxuXHQgICAgICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXG5cdCAgICAgICAgICAgIHBheWxvYWQ6IGRhdGEucGF5bG9hZCxcblx0ICAgICAgICAgICAgbWV0YTogb3BNZXRhXG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICAvLyBcdTRGMThcdTUxNDhcdTRGN0ZcdTc1MjggRWZmZWN0T3AubWV0YSBcdTRFMkRcdTc2ODQgbW9kdWxlSWRcdUZGMDhcdTgyRTVcdTVCNThcdTU3MjhcdUZGMDlcdUZGMENcdTU0MjZcdTUyMTlcdTU2REVcdTkwMDBcdTUyMzAgRGVidWcgXHU0RThCXHU0RUY2XHU0RTBBXHU3Njg0IG1vZHVsZUlkXHUzMDAyXG5cdCAgICAgICAgICBjb25zdCBtb2R1bGVJZCA9XG5cdCAgICAgICAgICAgIChvcE1ldGEgJiYgKG9wTWV0YSBhcyBhbnkpLm1vZHVsZUlkKSA/PyBiYXNlLm1vZHVsZUlkXG5cdCAgICAgICAgICBjb25zdCB0eG5JZCA9XG5cdCAgICAgICAgICAgIChvcE1ldGEgJiYgKG9wTWV0YSBhcyBhbnkpLnR4bklkKSA/PyBiYXNlLnR4bklkXG5cblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIC4uLmJhc2UsXG5cdCAgICAgICAgICAgIG1vZHVsZUlkLFxuXHQgICAgICAgICAgICB0eG5JZCxcblx0ICAgICAgICAgICAgcmVzb3VyY2VJZCxcblx0ICAgICAgICAgICAga2V5SGFzaCxcblx0ICAgICAgICAgICAga2luZDogb3BLaW5kLFxuXHQgICAgICAgICAgICBsYWJlbCxcblx0ICAgICAgICAgICAgbWV0YVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXG4gICAgICAvLyBcdTUxNzZcdTRFRDYgdHJhY2U6KiBcdTYyMTZcdTY3MkFcdTc3RTVcdTdDN0JcdTU3OEJcdUZGMUFcdTdFREZcdTRFMDBcdTg5QzZcdTRFM0EgdHJhY2UgXHU3QzdCXHU0RThCXHU0RUY2XHVGRjBDXHU0RUNEXHU0RkREXHU3NTU5XHU1MzlGXHU1OUNCIHBheWxvYWRcdTMwMDJcbiAgICAgIGlmICh0eXBlb2YgZXZlbnQudHlwZSA9PT0gXCJzdHJpbmdcIiAmJiBldmVudC50eXBlLnN0YXJ0c1dpdGgoXCJ0cmFjZTpcIikpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5iYXNlLFxuICAgICAgICAgIGtpbmQ6IFwiZGV2dG9vbHNcIixcbiAgICAgICAgICBsYWJlbDogZXZlbnQudHlwZSxcbiAgICAgICAgICBtZXRhOiB7XG4gICAgICAgICAgICBkYXRhOiAoZXZlbnQgYXMgYW55KS5kYXRhXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBFZmZlY3QsIFN1YnNjcmlwdGlvblJlZiB9IGZyb20gXCJlZmZlY3RcIlxuXG4vKipcbiAqIFBhdGNoUmVhc29uXHVGRjFBXG4gKiAtIFx1NjY4Mlx1NjVGNlx1NEVFNVx1NUI1N1x1N0IyNlx1NEUzMlx1ODA1NFx1NTQwOFx1NUY2Mlx1NUYwRlx1ODg2OFx1OEZCRVx1NTM5Rlx1NTZFMFx1NTIwNlx1N0M3Qlx1RkYxQlxuICogLSBcdTU0MEVcdTdFRURcdTUzRUZcdTY4MzlcdTYzNkUgc3BlYy9kYXRhLW1vZGVsLm1kIFx1NEUyRFx1NzY4NCBQYXRjaFJlYXNvbiBcdTY3OUFcdTRFM0VcdThGREJcdTRFMDBcdTZCNjVcdTY1MzZcdTdEMjdcdTMwMDJcbiAqL1xuZXhwb3J0IHR5cGUgUGF0Y2hSZWFzb24gPVxuICB8IFwicmVkdWNlclwiXG4gIHwgXCJ0cmFpdC1jb21wdXRlZFwiXG4gIHwgXCJ0cmFpdC1saW5rXCJcbiAgfCBcInNvdXJjZS1yZWZyZXNoXCJcbiAgfCBcImRldnRvb2xzXCJcbiAgfCAoc3RyaW5nICYge30pXG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RhdGVQYXRjaCB7XG4gIHJlYWRvbmx5IHBhdGg6IHN0cmluZ1xuICByZWFkb25seSBmcm9tPzogdW5rbm93blxuICByZWFkb25seSB0bz86IHVua25vd25cbiAgcmVhZG9ubHkgcmVhc29uOiBQYXRjaFJlYXNvblxuICByZWFkb25seSB0cmFpdE5vZGVJZD86IHN0cmluZ1xuICByZWFkb25seSBzdGVwSWQ/OiBzdHJpbmdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdGF0ZVR4bk9yaWdpbiB7XG4gIHJlYWRvbmx5IGtpbmQ6IHN0cmluZ1xuICByZWFkb25seSBuYW1lPzogc3RyaW5nXG4gIHJlYWRvbmx5IGRldGFpbHM/OiB1bmtub3duXG59XG5cbmV4cG9ydCB0eXBlIFN0YXRlVHhuSW5zdHJ1bWVudGF0aW9uTGV2ZWwgPSBcImZ1bGxcIiB8IFwibGlnaHRcIlxuXG5leHBvcnQgaW50ZXJmYWNlIFN0YXRlVHhuQ29uZmlnIHtcbiAgcmVhZG9ubHkgbW9kdWxlSWQ/OiBzdHJpbmdcbiAgcmVhZG9ubHkgaW5zdGFuY2VJZD86IHN0cmluZ1xuICByZWFkb25seSBydW50aW1lSWQ/OiBzdHJpbmdcbiAgcmVhZG9ubHkgaW5zdHJ1bWVudGF0aW9uPzogU3RhdGVUeG5JbnN0cnVtZW50YXRpb25MZXZlbFxuICAvKipcbiAgICogXHU2NjJGXHU1NDI2XHU4QkIwXHU1RjU1IGluaXRpYWwvZmluYWwgXHU3MkI2XHU2MDAxXHU1RkVCXHU3MTY3XHVGRjFBXG4gICAqIC0gZnVsbCBcdTZBMjFcdTVGMEZcdTRFMEJcdTlFRDhcdThCQTRcdTVGMDBcdTU0MkZcdUZGMUJcbiAgICogLSBsaWdodCBcdTZBMjFcdTVGMEZcdTRFMEJcdTlFRDhcdThCQTRcdTUxNzNcdTk1RURcdTMwMDJcbiAgICovXG4gIHJlYWRvbmx5IGNhcHR1cmVTbmFwc2hvdHM/OiBib29sZWFuXG4gIC8qKlxuICAgKiBcdTY1RjZcdTk1RjRcdTgzQjdcdTUzRDZcdTUxRkRcdTY1NzBcdUZGMENcdTRGQkZcdTRFOEVcdTU3MjhcdTZENEJcdThCRDVcdTRFMkRcdTZDRThcdTUxNjVcdTUwNDdcdTY1RjZcdTk0OUZcdTMwMDJcbiAgICovXG4gIHJlYWRvbmx5IG5vdz86ICgpID0+IG51bWJlclxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0YXRlVHJhbnNhY3Rpb248Uz4ge1xuICByZWFkb25seSB0eG5JZDogc3RyaW5nXG4gIHJlYWRvbmx5IG9yaWdpbjogU3RhdGVUeG5PcmlnaW5cbiAgcmVhZG9ubHkgc3RhcnRlZEF0OiBudW1iZXJcbiAgcmVhZG9ubHkgZW5kZWRBdDogbnVtYmVyXG4gIHJlYWRvbmx5IGR1cmF0aW9uTXM6IG51bWJlclxuICByZWFkb25seSBpbml0aWFsU3RhdGVTbmFwc2hvdD86IFNcbiAgcmVhZG9ubHkgZmluYWxTdGF0ZVNuYXBzaG90PzogU1xuICByZWFkb25seSBwYXRjaGVzOiBSZWFkb25seUFycmF5PFN0YXRlUGF0Y2g+XG4gIHJlYWRvbmx5IG1vZHVsZUlkPzogc3RyaW5nXG4gIHJlYWRvbmx5IGluc3RhbmNlSWQ/OiBzdHJpbmdcbiAgcmVhZG9ubHkgcnVudGltZUlkPzogc3RyaW5nXG59XG5cbi8qKlxuICogU3RhdGVUeG5Db250ZXh0XHVGRjFBXG4gKiAtIFx1NjI3Rlx1OEY3RFx1NTM1NVx1NEUyQSBNb2R1bGVSdW50aW1lIFx1NTE4NVx1NzY4NFx1NEU4Qlx1NTJBMVx1NzJCNlx1NjAwMVx1RkYxQlxuICogLSBjdXJyZW50IFx1NEUzQVx1NUY1M1x1NTI0RFx1NkQzQlx1OERDM1x1NEU4Qlx1NTJBMVx1RkYwOFx1ODJFNVx1NjVFMFx1NTIxOVx1NEUzQSB1bmRlZmluZWRcdUZGMDlcdTMwMDJcbiAqXG4gKiBcdThCRjRcdTY2MEVcdUZGMUFcbiAqIC0gXHU1RjUzXHU1MjREXHU1QjlFXHU3M0IwXHU1M0VBXHU3RUY0XHU2MkE0XHUzMDBDXHU1MzU1XHU2RDNCXHU4REMzXHU0RThCXHU1MkExXHUzMDBEXHU4QkVEXHU0RTQ5XHVGRjBDXHU5NjFGXHU1MjE3L1x1NjM5Mlx1OTYxRlx1N0I1Nlx1NzU2NVx1NTcyOFx1NTQwRVx1N0VFRCBVUzEgXHU0RUZCXHU1MkExXHU0RTJEXHU4ODY1XHU1MTQ1XHVGRjFCXG4gKiAtIFx1NEUzQVx1OTA3Rlx1NTE0RFx1OEZDN1x1NjVFOVx1ODAyNlx1NTQwOFx1RkYwQ0NvbnRleHQgXHU1M0VBXHU2M0QwXHU0RjlCXHU2NzAwXHU1QzBGIGJlZ2luL3VwZGF0ZS9yZWNvcmQvY29tbWl0IFx1ODBGRFx1NTI5Qlx1RkYwQ1xuICogICBcdTUxNzdcdTRGNTNcdTUxNjVcdTUzRTNcdUZGMDhkaXNwYXRjaC9zb3VyY2UtcmVmcmVzaC9kZXZ0b29scyBcdTY0Q0RcdTRGNUNcdUZGMDlcdTc1MzFcdTRFMEFcdTVDNDJcdTYzQTdcdTUyMzZcdTMwMDJcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTdGF0ZVR4blJ1bnRpbWVDb25maWcge1xuICByZWFkb25seSBtb2R1bGVJZD86IHN0cmluZ1xuICByZWFkb25seSBpbnN0YW5jZUlkPzogc3RyaW5nXG4gIHJlYWRvbmx5IHJ1bnRpbWVJZD86IHN0cmluZ1xuICByZWFkb25seSBpbnN0cnVtZW50YXRpb246IFN0YXRlVHhuSW5zdHJ1bWVudGF0aW9uTGV2ZWxcbiAgcmVhZG9ubHkgY2FwdHVyZVNuYXBzaG90czogYm9vbGVhblxuICByZWFkb25seSBub3c6ICgpID0+IG51bWJlclxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0YXRlVHhuQ29udGV4dDxTPiB7XG4gIHJlYWRvbmx5IGNvbmZpZzogU3RhdGVUeG5SdW50aW1lQ29uZmlnXG4gIGN1cnJlbnQ/OiBTdGF0ZVR4blN0YXRlPFM+XG59XG5cbmludGVyZmFjZSBTdGF0ZVR4blN0YXRlPFM+IHtcbiAgcmVhZG9ubHkgdHhuSWQ6IHN0cmluZ1xuICByZWFkb25seSBvcmlnaW46IFN0YXRlVHhuT3JpZ2luXG4gIHJlYWRvbmx5IHN0YXJ0ZWRBdDogbnVtYmVyXG4gIHJlYWRvbmx5IGJhc2VTdGF0ZTogU1xuICBkcmFmdDogU1xuICByZWFkb25seSBpbml0aWFsU3RhdGVTbmFwc2hvdD86IFNcbiAgcmVhZG9ubHkgcGF0Y2hlczogQXJyYXk8U3RhdGVQYXRjaD5cbiAgLyoqXG4gICAqIGRpcnR5UGF0aHNcdUZGMUFcbiAgICogLSBcdTRFOEJcdTUyQTFcdTdBOTdcdTUzRTNcdTUxODVcdTYyNDBcdTY3MDlcdTIwMUNcdTVERjJcdTc3RTVcdTUzRDFcdTc1MUZcdTUxOTlcdTUxNjVcdTIwMURcdTc2ODRcdThERUZcdTVGODRcdTk2QzZcdTU0MDhcdUZGMUJcbiAgICogLSBcdTRFMEUgaW5zdHJ1bWVudGF0aW9uIFx1NjVFMFx1NTE3M1x1RkYxQWxpZ2h0IFx1NkEyMVx1NUYwRlx1NEUwQlx1NEUwRFx1NEZERFx1NzU1OVx1NUI4Q1x1NjU3NCBwYXRjaGVzXHVGRjBDXHU0RjQ2XHU0RUNEXHU0RkREXHU3NTU5IGRpcnR5UGF0aHNcdUZGMENcbiAgICogICBcdTRFRTVcdTY1MkZcdTYzMDEgU3RhdGVUcmFpdCBcdTc2ODRcdTU4OUVcdTkxQ0ZcdThDMDNcdTVFQTZcdUZGMDhkaXJ0eS1zZXRcdUZGMDlcdTdCNDlcdTRGNEVcdTVGMDBcdTk1MDBcdThCRURcdTRFNDlcdTMwMDJcbiAgICovXG4gIHJlYWRvbmx5IGRpcnR5UGF0aHM6IFNldDxzdHJpbmc+XG59XG5cbmNvbnN0IGRlZmF1bHROb3cgPSAoKSA9PiBEYXRlLm5vdygpXG5cbmV4cG9ydCBjb25zdCBtYWtlQ29udGV4dCA9IDxTPihcbiAgY29uZmlnOiBTdGF0ZVR4bkNvbmZpZ1xuKTogU3RhdGVUeG5Db250ZXh0PFM+ID0+IHtcbiAgY29uc3QgaW5zdHJ1bWVudGF0aW9uOiBTdGF0ZVR4bkluc3RydW1lbnRhdGlvbkxldmVsID1cbiAgICBjb25maWcuaW5zdHJ1bWVudGF0aW9uID8/IFwiZnVsbFwiXG5cbiAgY29uc3QgY2FwdHVyZVNuYXBzaG90cyA9XG4gICAgY29uZmlnLmNhcHR1cmVTbmFwc2hvdHMgPz9cbiAgICAoaW5zdHJ1bWVudGF0aW9uID09PSBcImZ1bGxcIilcblxuICByZXR1cm4ge1xuICAgIGNvbmZpZzoge1xuICAgICAgaW5zdHJ1bWVudGF0aW9uLFxuICAgICAgY2FwdHVyZVNuYXBzaG90cyxcbiAgICAgIG5vdzogY29uZmlnLm5vdyA/PyBkZWZhdWx0Tm93LFxuICAgICAgbW9kdWxlSWQ6IGNvbmZpZy5tb2R1bGVJZCxcbiAgICAgIGluc3RhbmNlSWQ6IGNvbmZpZy5pbnN0YW5jZUlkLFxuICAgICAgcnVudGltZUlkOiBjb25maWcucnVudGltZUlkLFxuICAgIH0sXG4gICAgY3VycmVudDogdW5kZWZpbmVkXG4gIH1cbn1cblxuLyoqXG4gKiBcdTVGMDBcdTU0MkZcdTRFMDBcdTZCMjFcdTY1QjBcdTc2ODRcdTRFOEJcdTUyQTFcdUZGMUFcbiAqIC0gXHU5RUQ4XHU4QkE0XHU4ODRDXHU0RTNBXHVGRjFBXHU3NkY0XHU2M0E1XHU4OTg2XHU3NkQ2XHU1RjUzXHU1MjREXHU0RThCXHU1MkExXHVGRjA4XHU5NjFGXHU1MjE3L1x1NUQ0Q1x1NTk1N1x1NTQwRVx1N0VFRFx1NTcyOCBVUzEgXHU0RTJEXHU3RUM2XHU1MzE2XHVGRjA5XHVGRjFCXG4gKiAtIGluaXRpYWxTdGF0ZSBcdTc1MzFcdThDMDNcdTc1MjhcdTY1QjlcdTYzRDBcdTRGOUJcdUZGMUFcdTkwMUFcdTVFMzhcdTRFM0FcdTVGNTNcdTUyNEQgU3Vic2NyaXB0aW9uUmVmIFx1NUZFQlx1NzE2N1x1MzAwMlxuICovXG5leHBvcnQgY29uc3QgYmVnaW5UcmFuc2FjdGlvbiA9IDxTPihcbiAgY3R4OiBTdGF0ZVR4bkNvbnRleHQ8Uz4sXG4gIG9yaWdpbjogU3RhdGVUeG5PcmlnaW4sXG4gIGluaXRpYWxTdGF0ZTogU1xuKTogdm9pZCA9PiB7XG4gIGNvbnN0IHsgY29uZmlnIH0gPSBjdHhcbiAgY29uc3Qgbm93ID0gY29uZmlnLm5vd1xuICBjb25zdCBzdGFydGVkQXQgPSBub3coKVxuXG4gIGNvbnN0IHR4bklkID0gYCR7c3RhcnRlZEF0LnRvU3RyaW5nKDM2KX0tJHtNYXRoLnJhbmRvbSgpXG4gICAgLnRvU3RyaW5nKDM2KVxuICAgIC5zbGljZSgyKX1gXG5cbiAgY29uc3QgaW5pdGlhbFNuYXBzaG90ID0gY29uZmlnLmNhcHR1cmVTbmFwc2hvdHNcbiAgICA/IGluaXRpYWxTdGF0ZVxuICAgIDogdW5kZWZpbmVkXG5cbiAgY3R4LmN1cnJlbnQgPSB7XG4gICAgdHhuSWQsXG4gICAgb3JpZ2luLFxuICAgIHN0YXJ0ZWRBdCxcbiAgICBiYXNlU3RhdGU6IGluaXRpYWxTdGF0ZSxcbiAgICBkcmFmdDogaW5pdGlhbFN0YXRlLFxuICAgIGluaXRpYWxTdGF0ZVNuYXBzaG90OiBpbml0aWFsU25hcHNob3QsXG4gICAgcGF0Y2hlczogW10sXG4gICAgZGlydHlQYXRoczogbmV3IFNldCgpXG4gIH1cbn1cblxuY29uc3QgcmVjb3JkRGlydHlQYXRoID0gPFM+KHN0YXRlOiBTdGF0ZVR4blN0YXRlPFM+LCBwYXRoOiBzdHJpbmcgfCB1bmRlZmluZWQpOiB2b2lkID0+IHtcbiAgaWYgKCFwYXRoKSByZXR1cm5cbiAgc3RhdGUuZGlydHlQYXRocy5hZGQocGF0aClcbn1cblxuLyoqXG4gKiBcdTY2RjRcdTY1QjBcdTgzNDlcdTdBM0ZcdTcyQjZcdTYwMDFcdUZGMUFcbiAqIC0gbmV4dCBcdTRFM0FcdTY3MDBcdTY1QjBcdTgzNDlcdTdBM0ZcdUZGMUJcbiAqIC0gXHU4MkU1XHU2M0QwXHU0RjlCIHBhdGNoIFx1NEUxNFx1NTkwNFx1NEU4RSBmdWxsIFx1NkEyMVx1NUYwRlx1RkYwQ1x1NTIxOVx1OEZGRFx1NTJBMFx1NTIzMFx1NUY1M1x1NTI0RFx1NEU4Qlx1NTJBMVx1NzY4NCBQYXRjaCBcdTUyMTdcdTg4NjhcdTRFMkRcdTMwMDJcbiAqL1xuZXhwb3J0IGNvbnN0IHVwZGF0ZURyYWZ0ID0gPFM+KFxuICBjdHg6IFN0YXRlVHhuQ29udGV4dDxTPixcbiAgbmV4dDogUyxcbiAgcGF0Y2g/OiBTdGF0ZVBhdGNoXG4pOiB2b2lkID0+IHtcbiAgY29uc3Qgc3RhdGUgPSBjdHguY3VycmVudFxuICBpZiAoIXN0YXRlKSB7XG4gICAgLy8gXHU1RjUzXHU1MjREXHU2NUUwXHU0RThCXHU1MkExXHVGRjFBXHU3NkY0XHU2M0E1XHU1RkZEXHU3NTY1IFBhdGNoIFx1NEZFMVx1NjA2Rlx1RkYwQ1x1NEVBNFx1NzUzMVx1NEUwQVx1NUM0Mlx1NTFCM1x1NUI5QVx1NjYyRlx1NTQyNlx1NUYwMFx1NTQyRlx1OTY5MFx1NUYwRlx1NEU4Qlx1NTJBMVx1MzAwMlxuICAgIHJldHVyblxuICB9XG5cbiAgaWYgKHBhdGNoKSB7XG4gICAgcmVjb3JkRGlydHlQYXRoKHN0YXRlLCBwYXRjaC5wYXRoKVxuICB9XG4gIGlmIChwYXRjaCAmJiBjdHguY29uZmlnLmluc3RydW1lbnRhdGlvbiA9PT0gXCJmdWxsXCIpIHtcbiAgICBzdGF0ZS5wYXRjaGVzLnB1c2gocGF0Y2gpXG4gIH1cblxuICBzdGF0ZS5kcmFmdCA9IG5leHRcbn1cblxuLyoqXG4gKiByZWNvcmRQYXRjaFx1RkYxQVxuICogLSBcdTU3MjggZnVsbCBcdTZBMjFcdTVGMEZcdTRFMEJcdThGRkRcdTUyQTAgUGF0Y2hcdUZGMUJcbiAqIC0gbGlnaHQgXHU2QTIxXHU1RjBGXHU0RTBCXHU5RUQ4XHU5RUQ4XHU1RkZEXHU3NTY1XHVGRjBDXHU5MDdGXHU1MTREXHU0RUE3XHU3NTFGXHU5ODlEXHU1OTE2XHU1RjAwXHU5NTAwXHUzMDAyXG4gKi9cbmV4cG9ydCBjb25zdCByZWNvcmRQYXRjaCA9IDxTPihcbiAgY3R4OiBTdGF0ZVR4bkNvbnRleHQ8Uz4sXG4gIHBhdGNoOiBTdGF0ZVBhdGNoXG4pOiB2b2lkID0+IHtcbiAgY29uc3Qgc3RhdGUgPSBjdHguY3VycmVudFxuICBpZiAoIXN0YXRlKSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgcmVjb3JkRGlydHlQYXRoKHN0YXRlLCBwYXRjaC5wYXRoKVxuICBpZiAoY3R4LmNvbmZpZy5pbnN0cnVtZW50YXRpb24gPT09IFwiZnVsbFwiKSB7XG4gICAgc3RhdGUucGF0Y2hlcy5wdXNoKHBhdGNoKVxuICB9XG59XG5cbi8qKlxuICogXHU2M0QwXHU0RUE0XHU0RThCXHU1MkExXHVGRjFBXG4gKiAtIFx1NUMwNlx1NjcwMFx1N0VDOFx1ODM0OVx1N0EzRlx1NTE5OVx1NTE2NSBTdWJzY3JpcHRpb25SZWZcdUZGMENcdTRFQzVcdTUxOTlcdTUxNjVcdTRFMDBcdTZCMjFcdUZGMUJcbiAqIC0gXHU4RkQ0XHU1NkRFXHU4MDVBXHU1NDA4XHU1NDBFXHU3Njg0IFN0YXRlVHJhbnNhY3Rpb24gXHU3RUQzXHU2Nzg0XHVGRjBDXHU4MkU1XHU1RjUzXHU1MjREXHU2NUUwXHU0RThCXHU1MkExXHU1MjE5XHU4RkQ0XHU1NkRFIHVuZGVmaW5lZFx1MzAwMlxuICpcbiAqIFx1OEJGNFx1NjYwRVx1RkYxQVxuICogLSBEZWJ1ZyAvIERldnRvb2xzIFx1NEU4Qlx1NEVGNlx1NzY4NFx1NTNEMVx1NTFGQVx1NzUzMVx1OEMwM1x1NzUyOFx1NjVCOVx1NjgzOVx1NjM2RVx1OEZENFx1NTZERVx1NzY4NCB0cmFuc2FjdGlvbiBcdTgxRUFcdTg4NENcdTUxQjNcdTVCOUFcdUZGMUJcbiAqIC0gXHU4RkQ5XHU5MUNDXHU0RTBEXHU3NkY0XHU2M0E1XHU0RjlEXHU4RDU2IERlYnVnU2lua1x1RkYwQ1x1OTA3Rlx1NTE0RCBjb3JlIFx1NUM0Mlx1NEVBN1x1NzUxRlx1NzNBRlx1NzJCNlx1NEY5RFx1OEQ1Nlx1MzAwMlxuICovXG5leHBvcnQgY29uc3QgY29tbWl0ID0gPFM+KFxuICBjdHg6IFN0YXRlVHhuQ29udGV4dDxTPixcbiAgc3RhdGVSZWY6IFN1YnNjcmlwdGlvblJlZi5TdWJzY3JpcHRpb25SZWY8Uz5cbik6IEVmZmVjdC5FZmZlY3Q8U3RhdGVUcmFuc2FjdGlvbjxTPiB8IHVuZGVmaW5lZD4gPT5cbiAgRWZmZWN0LmdlbihmdW5jdGlvbiogKCkge1xuICAgIGNvbnN0IHN0YXRlID0gY3R4LmN1cnJlbnRcbiAgICBpZiAoIXN0YXRlKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuXG4gICAgY29uc3QgeyBjb25maWcgfSA9IGN0eFxuICAgIGNvbnN0IG5vdyA9IGNvbmZpZy5ub3dcblxuICAgIGNvbnN0IGZpbmFsU3RhdGUgPSBzdGF0ZS5kcmFmdFxuXG4gICAgLy8gMCBjb21taXRcdUZGMUFcdTY1RTBcdTUzRDhcdTUzMTZcdTY1RjZcdTRFMERcdTUxOTlcdTUxNjVcdTVFOTVcdTVDNDIgU3Vic2NyaXB0aW9uUmVmXHVGRjBDXHU0RTVGXHU0RTBEXHU0RUE3XHU3NTFGIHN0YXRlOnVwZGF0ZSBcdTRFOEJcdTRFRjZcdTMwMDJcbiAgICBpZiAoT2JqZWN0LmlzKGZpbmFsU3RhdGUsIHN0YXRlLmJhc2VTdGF0ZSkpIHtcbiAgICAgIGN0eC5jdXJyZW50ID0gdW5kZWZpbmVkXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuXG4gICAgLy8gXHU1MzU1XHU2QjIxXHU1MTk5XHU1MTY1XHU1RTk1XHU1QzQyIFN1YnNjcmlwdGlvblJlZlx1RkYwQ1x1Nzg2RVx1NEZERFx1NUJGOVx1NTkxNlx1NTNFQVx1NjcwOVx1NEUwMFx1NkIyMVx1NzJCNlx1NjAwMVx1NjNEMFx1NEVBNFx1NEUwRVx1OEJBMlx1OTYwNVx1OTAxQVx1NzdFNVx1MzAwMlxuICAgIHlpZWxkKiBTdWJzY3JpcHRpb25SZWYuc2V0KHN0YXRlUmVmLCBmaW5hbFN0YXRlKVxuXG4gICAgY29uc3QgZW5kZWRBdCA9IG5vdygpXG4gICAgY29uc3QgZHVyYXRpb25NcyA9IE1hdGgubWF4KDAsIGVuZGVkQXQgLSBzdGF0ZS5zdGFydGVkQXQpXG5cbiAgICBjb25zdCB0cmFuc2FjdGlvbjogU3RhdGVUcmFuc2FjdGlvbjxTPiA9IHtcbiAgICAgIHR4bklkOiBzdGF0ZS50eG5JZCxcbiAgICAgIG9yaWdpbjogc3RhdGUub3JpZ2luLFxuICAgICAgc3RhcnRlZEF0OiBzdGF0ZS5zdGFydGVkQXQsXG4gICAgICBlbmRlZEF0LFxuICAgICAgZHVyYXRpb25NcyxcbiAgICAgIGluaXRpYWxTdGF0ZVNuYXBzaG90OiBzdGF0ZS5pbml0aWFsU3RhdGVTbmFwc2hvdCxcbiAgICAgIGZpbmFsU3RhdGVTbmFwc2hvdDogY29uZmlnLmNhcHR1cmVTbmFwc2hvdHNcbiAgICAgICAgPyBmaW5hbFN0YXRlXG4gICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgcGF0Y2hlczogc3RhdGUucGF0Y2hlcyxcbiAgICAgIG1vZHVsZUlkOiBjb25maWcubW9kdWxlSWQsXG4gICAgICBpbnN0YW5jZUlkOiBjb25maWcuaW5zdGFuY2VJZCxcbiAgICAgIHJ1bnRpbWVJZDogY29uZmlnLnJ1bnRpbWVJZFxuICAgIH1cblxuICAgIC8vIFx1NkUwNVx1NzQwNlx1NUY1M1x1NTI0RFx1NEU4Qlx1NTJBMVxuICAgIGN0eC5jdXJyZW50ID0gdW5kZWZpbmVkXG5cbiAgICByZXR1cm4gdHJhbnNhY3Rpb25cbiAgfSlcblxuLyoqXG4gKiBhYm9ydFx1RkYxQVxuICogLSBcdTdFQzhcdTZCNjJcdTVGNTNcdTUyNERcdTRFOEJcdTUyQTFcdTVFNzZcdTZFMDVcdTc0MDZcdTRFMEFcdTRFMEJcdTY1ODdcdUZGMUJcbiAqIC0gXHU0RTBEXHU1MDVBXHU0RUZCXHU0RjU1IHN0YXRlUmVmIFx1NTE5OVx1NTE2NVx1RkYxQlxuICogLSBcdTc1MzFcdTRFMEFcdTVDNDJcdTUxQjNcdTVCOUFcdTY2MkZcdTU0MjZcdThCQjBcdTVGNTVcdThCQ0FcdTY1QUQvXHU4OUMyXHU2RDRCXHU0RThCXHU0RUY2XHUzMDAyXG4gKi9cbmV4cG9ydCBjb25zdCBhYm9ydCA9IDxTPihjdHg6IFN0YXRlVHhuQ29udGV4dDxTPik6IHZvaWQgPT4ge1xuICBjdHguY3VycmVudCA9IHVuZGVmaW5lZFxufVxuIiwgImltcG9ydCB7IENhdXNlLCBFZmZlY3QsIEZpYmVyLCBGaWJlclJlZiwgUmVmLCBTdHJlYW0gfSBmcm9tIFwiZWZmZWN0XCJcbmltcG9ydCAqIGFzIERlYnVnIGZyb20gXCIuL0RlYnVnU2luay5qc1wiXG5pbXBvcnQgeyBpc0RldkVudiB9IGZyb20gXCIuL2Vudi5qc1wiXG5pbXBvcnQgdHlwZSAqIGFzIExvZ2ljIGZyb20gXCIuL0xvZ2ljTWlkZGxld2FyZS5qc1wiXG5pbXBvcnQgdHlwZSB7IEFueU1vZHVsZVNoYXBlIH0gZnJvbSBcIi4vbW9kdWxlLmpzXCJcbmltcG9ydCB0eXBlIHsgU3RhdGVUeG5PcmlnaW4gfSBmcm9tIFwiLi9TdGF0ZVRyYW5zYWN0aW9uLmpzXCJcblxuLyoqXG4gKiBcdTc1MjhcdTRFOEVcdTk2MzJcdTZCNjJcdTU3MjhcdTMwMENcdTU0MENcdTZCNjVcdTRFOEJcdTUyQTFcdTYyNjdcdTg4NEMgZmliZXJcdTMwMERcdTUxODVcdThDMDNcdTc1MjggcnVuKlRhc2tcdUZGMDhcdTRGMUFcdTVCRkNcdTgxRjRcdTRFOEJcdTUyQTFcdTk2MUZcdTUyMTdcdTdCNDlcdTVGODVcdTgxRUFcdThFQUJcdTgwMENcdTZCN0JcdTk1MDFcdUZGMDlcdTMwMDJcbiAqXG4gKiAtIE1vZHVsZVJ1bnRpbWUgXHU1NzI4XHU2MjY3XHU4ODRDXHU2QkNGXHU0RTJBXHU0RThCXHU1MkExXHVGRjA4ZGlzcGF0Y2gvc291cmNlLXJlZnJlc2gvZGV2dG9vbHMvLi4uXHVGRjA5XHU2NUY2XHVGRjBDXHU0RjFBIGxvY2FsbHkgXHU2ODA3XHU4QkIwXHU0RTNBIHRydWVcdTMwMDJcbiAqIC0gcnVuKlRhc2sgXHU1NzI4XHU1NDJGXHU1MkE4XHU2NUY2XHU2OEMwXHU2N0U1XHU4QkU1XHU2ODA3XHU4QkIwXHVGRjFBXHU4MkU1XHU0RTNBIHRydWVcdUZGMENcdTUyMTlcdTRFQzVcdTU3MjggZGV2L3Rlc3QgXHU0RTBCXHU1M0QxXHU1MUZBIGRpYWdub3N0aWMgXHU1RTc2XHU3NkY0XHU2M0E1IG5vLW9wXHUzMDAyXG4gKi9cbmV4cG9ydCBjb25zdCBpblN5bmNUcmFuc2FjdGlvbkZpYmVyID0gRmliZXJSZWYudW5zYWZlTWFrZShmYWxzZSlcblxuZXhwb3J0IHR5cGUgVGFza1J1bm5lck1vZGUgPVxuICB8IFwidGFza1wiIC8vIHNlcXVlbnRpYWxcbiAgfCBcInBhcmFsbGVsXCJcbiAgfCBcImxhdGVzdFwiXG4gIHwgXCJleGhhdXN0XCJcblxuZXhwb3J0IHR5cGUgVGFza1N0YXR1cyA9XG4gIHwgXCJpZGxlXCJcbiAgfCBcInBlbmRpbmdcIlxuICB8IFwicnVubmluZ1wiXG4gIHwgXCJzdWNjZXNzXCJcbiAgfCBcImZhaWx1cmVcIlxuICB8IFwiaW50ZXJydXB0ZWRcIlxuXG5leHBvcnQgaW50ZXJmYWNlIFRhc2tFeGVjdXRpb24ge1xuICByZWFkb25seSB0YXNrSWQ6IG51bWJlclxuICByZWFkb25seSBzdGF0dXM6IFRhc2tTdGF0dXNcbiAgcmVhZG9ubHkgYWNjZXB0ZWRBdDogbnVtYmVyXG4gIHJlYWRvbmx5IHN0YXJ0ZWRBdD86IG51bWJlclxuICByZWFkb25seSBlbmRlZEF0PzogbnVtYmVyXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGFza1J1bm5lck9yaWdpbnMge1xuICByZWFkb25seSBwZW5kaW5nPzogU3RhdGVUeG5PcmlnaW5cbiAgcmVhZG9ubHkgc3VjY2Vzcz86IFN0YXRlVHhuT3JpZ2luXG4gIHJlYWRvbmx5IGZhaWx1cmU/OiBTdGF0ZVR4bk9yaWdpblxufVxuXG50eXBlIFRhc2tIYW5kbGVyPFBheWxvYWQsIFNoIGV4dGVuZHMgQW55TW9kdWxlU2hhcGUsIFI+ID1cbiAgfCBMb2dpYy5PZjxTaCwgUiwgdm9pZCwgbmV2ZXI+XG4gIHwgKChwYXlsb2FkOiBQYXlsb2FkKSA9PiBMb2dpYy5PZjxTaCwgUiwgdm9pZCwgbmV2ZXI+KVxuXG50eXBlIFRhc2tFZmZlY3Q8UGF5bG9hZCwgU2ggZXh0ZW5kcyBBbnlNb2R1bGVTaGFwZSwgUiwgQSwgRT4gPVxuICB8IExvZ2ljLk9mPFNoLCBSLCBBLCBFPlxuICB8ICgocGF5bG9hZDogUGF5bG9hZCkgPT4gTG9naWMuT2Y8U2gsIFIsIEEsIEU+KVxuXG5leHBvcnQgaW50ZXJmYWNlIFRhc2tSdW5uZXJDb25maWc8XG4gIFBheWxvYWQsXG4gIFNoIGV4dGVuZHMgQW55TW9kdWxlU2hhcGUsXG4gIFIsXG4gIEEgPSB2b2lkLFxuICBFID0gbmV2ZXIsXG4+IHtcbiAgLyoqXG4gICAqIFx1NTNFRlx1OTAwOVx1RkYxQVx1ODlFNlx1NTNEMVx1NkU5MFx1NTQwRFx1NzlGMFx1RkYwOFx1NEY4Qlx1NTk4MiBhY3Rpb25UYWcgLyBmaWVsZFBhdGhcdUZGMDlcdUZGMENcdTc1MjhcdTRFOEVcdTlFRDhcdThCQTQgcGVuZGluZyBvcmlnaW4ubmFtZVx1MzAwMlxuICAgKiAtIEJvdW5kQXBpUnVudGltZSBcdTU3Mjggb25BY3Rpb24oXCJ4eHhcIikgLyB0cmFpdHMuc291cmNlLnJlZnJlc2goXCJmaWVsZFwiKSBcdTdCNDlcdTU3M0FcdTY2NkZcdTUzRUZcdTU4NkJcdTUxNDVcdUZGMUJcbiAgICogLSBcdTUxNzZcdTRFRDZcdTU3M0FcdTY2NkZcdTRFMERcdTVGM0FcdTZDNDJcdTMwMDJcbiAgICovXG4gIHJlYWRvbmx5IHRyaWdnZXJOYW1lPzogc3RyaW5nXG5cbiAgLyoqXG4gICAqIHBlbmRpbmdcdUZGMUFcdTU0MENcdTZCNjVcdTcyQjZcdTYwMDFcdTUxOTlcdTUxNjVcdUZGMDhsb2FkaW5nPXRydWUgLyBcdTZFMDVcdTc0MDZcdTk1MTlcdThCRUZcdTdCNDlcdUZGMDlcdUZGMENcdTU5Q0JcdTdFQzhcdTRGNUNcdTRFM0FcdTcyRUNcdTdBQ0JcdTRFOEJcdTUyQTFcdTUxNjVcdTUzRTNcdTMwMDJcbiAgICogLSBcdTRFQzVcdTVCRjlcdTIwMUNcdTg4QUJcdTYzQTVcdTUzRDdcdTVFNzZcdTVCOUVcdTk2NDVcdTU0MkZcdTUyQThcdTc2ODQgdGFza1x1MjAxRFx1NjI2N1x1ODg0Q1x1RkYwOHJ1bkV4aGF1c3RUYXNrIFx1NUZGRFx1NzU2NVx1NzY4NFx1ODlFNlx1NTNEMVx1NEUwRFx1NjI2N1x1ODg0Q1x1RkYwOVx1MzAwMlxuICAgKi9cbiAgcmVhZG9ubHkgcGVuZGluZz86IFRhc2tIYW5kbGVyPFBheWxvYWQsIFNoLCBSPlxuXG4gIC8qKlxuICAgKiBlZmZlY3RcdUZGMUFcdTc3MUZcdTVCOUUgSU8gLyBcdTVGMDJcdTZCNjVcdTRFRkJcdTUyQTFcdUZGMDhcdTVGQzVcdTk4N0JcdThGRDBcdTg4NENcdTU3MjhcdTRFOEJcdTUyQTFcdTdBOTdcdTUzRTNcdTRFNEJcdTU5MTZcdUZGMDlcdTMwMDJcbiAgICovXG4gIHJlYWRvbmx5IGVmZmVjdDogVGFza0VmZmVjdDxQYXlsb2FkLCBTaCwgUiwgQSwgRT5cblxuICAvKipcbiAgICogc3VjY2Vzc1x1RkYxQVx1NjIxMFx1NTI5Rlx1NTE5OVx1NTZERVx1RkYwOFx1NzJFQ1x1N0FDQlx1NEU4Qlx1NTJBMVx1NTE2NVx1NTNFM1x1RkYwOVx1MzAwMlxuICAgKi9cbiAgcmVhZG9ubHkgc3VjY2Vzcz86IChyZXN1bHQ6IEEsIHBheWxvYWQ6IFBheWxvYWQpID0+IExvZ2ljLk9mPFNoLCBSLCB2b2lkLCBuZXZlcj5cblxuICAvKipcbiAgICogZmFpbHVyZVx1RkYxQVx1NTkzMVx1OEQyNVx1NTE5OVx1NTZERVx1RkYwOFx1NzJFQ1x1N0FDQlx1NEU4Qlx1NTJBMVx1NTE2NVx1NTNFM1x1RkYwOVx1MzAwMlxuICAgKlxuICAgKiBcdThCRjRcdTY2MEVcdUZGMUFcdTRGMjBcdTUxNjUgQ2F1c2UgXHU0RUU1XHU0RkREXHU3NTU5IGRlZmVjdC9pbnRlcnJ1cHQgXHU3QjQ5XHU4QkVEXHU0RTQ5XHVGRjFCXHU0RTJEXHU2NUFEXHVGRjA4aW50ZXJydXB0XHVGRjA5XHU5RUQ4XHU4QkE0XHU0RTBEXHU4OUU2XHU1M0QxIGZhaWx1cmUgXHU1MTk5XHU1NkRFXHUzMDAyXG4gICAqL1xuICByZWFkb25seSBmYWlsdXJlPzogKGNhdXNlOiBDYXVzZS5DYXVzZTxFPiwgcGF5bG9hZDogUGF5bG9hZCkgPT4gTG9naWMuT2Y8U2gsIFIsIHZvaWQsIG5ldmVyPlxuXG4gIC8qKlxuICAgKiBvcmlnaW5cdUZGMUFcdTUzRUZcdTkwMDlcdTg5ODZcdTUxOTlcdTRFMDlcdTdCMTRcdTRFOEJcdTUyQTFcdTc2ODQgb3JpZ2luXHUzMDAyXG4gICAqIC0gXHU5RUQ4XHU4QkE0XHVGRjFBcGVuZGluZy5raW5kPVwidGFzazpwZW5kaW5nXCJcdUZGMUJzdWNjZXNzL2ZhaWx1cmUua2luZD1cInNlcnZpY2UtY2FsbGJhY2tcIlx1MzAwMlxuICAgKi9cbiAgcmVhZG9ubHkgb3JpZ2luPzogVGFza1J1bm5lck9yaWdpbnNcblxuICAvKipcbiAgICogcHJpb3JpdHlcdUZGMUFcdTk4ODRcdTc1NTlcdTVCNTdcdTZCQjVcdUZGMENcdTRFQzVcdTc1MjhcdTRFOEVcdTY3MkFcdTY3NjVcdThDMDNcdThCRDUvXHU2MzkyXHU1RThGXHVGRjBDXHU0RTBEXHU2NTM5XHU1M0Q4XHU0RThCXHU1MkExXHU4RkI5XHU3NTRDXHU0RTBFXHU1RTc2XHU1M0QxXHU4QkVEXHU0RTQ5XHUzMDAyXG4gICAqL1xuICByZWFkb25seSBwcmlvcml0eT86IG51bWJlclxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRhc2tSdW5uZXJSdW50aW1lIHtcbiAgcmVhZG9ubHkgbW9kdWxlSWQ/OiBzdHJpbmdcbiAgcmVhZG9ubHkgcnVuV2l0aFN0YXRlVHJhbnNhY3Rpb246IChcbiAgICBvcmlnaW46IFN0YXRlVHhuT3JpZ2luLFxuICAgIGJvZHk6ICgpID0+IEVmZmVjdC5FZmZlY3Q8dm9pZCwgbmV2ZXIsIGFueT4sXG4gICkgPT4gRWZmZWN0LkVmZmVjdDx2b2lkLCBuZXZlciwgYW55PlxufVxuXG5jb25zdCByZXNvbHZlID0gPFBheWxvYWQsIFNoIGV4dGVuZHMgQW55TW9kdWxlU2hhcGUsIFIsIEEsIEU+KFxuICBlZmY6IFRhc2tFZmZlY3Q8UGF5bG9hZCwgU2gsIFIsIEEsIEU+IHwgVGFza0hhbmRsZXI8UGF5bG9hZCwgU2gsIFI+LFxuICBwYXlsb2FkOiBQYXlsb2FkLFxuKTogYW55ID0+ICh0eXBlb2YgZWZmID09PSBcImZ1bmN0aW9uXCIgPyAoZWZmIGFzIGFueSkocGF5bG9hZCkgOiBlZmYpXG5cbmNvbnN0IGRlZmF1bHRPcmlnaW5zID0gKFxuICB0cmlnZ2VyTmFtZTogc3RyaW5nIHwgdW5kZWZpbmVkLFxuKTogUmVxdWlyZWQ8VGFza1J1bm5lck9yaWdpbnM+ID0+ICh7XG4gIHBlbmRpbmc6IHtcbiAgICBraW5kOiBcInRhc2s6cGVuZGluZ1wiLFxuICAgIG5hbWU6IHRyaWdnZXJOYW1lLFxuICB9LFxuICBzdWNjZXNzOiB7XG4gICAga2luZDogXCJzZXJ2aWNlLWNhbGxiYWNrXCIsXG4gICAgbmFtZTogXCJ0YXNrOnN1Y2Nlc3NcIixcbiAgfSxcbiAgZmFpbHVyZToge1xuICAgIGtpbmQ6IFwic2VydmljZS1jYWxsYmFja1wiLFxuICAgIG5hbWU6IFwidGFzazpmYWlsdXJlXCIsXG4gIH0sXG59KVxuXG5jb25zdCBlbWl0SW52YWxpZFVzYWdlRGlhZ25vc3RpYyA9IChcbiAgbW9kdWxlSWQ6IHN0cmluZyB8IHVuZGVmaW5lZCxcbik6IEVmZmVjdC5FZmZlY3Q8dm9pZD4gPT5cbiAgRGVidWcucmVjb3JkKHtcbiAgICB0eXBlOiBcImRpYWdub3N0aWNcIixcbiAgICBtb2R1bGVJZCxcbiAgICBjb2RlOiBcImxvZ2ljOjppbnZhbGlkX3VzYWdlXCIsXG4gICAgc2V2ZXJpdHk6IFwiZXJyb3JcIixcbiAgICBtZXNzYWdlOlxuICAgICAgXCJydW4qVGFzayBpcyBub3QgYWxsb3dlZCBpbnNpZGUgYSBzeW5jaHJvbm91cyBTdGF0ZVRyYW5zYWN0aW9uIGJvZHkgKGl0IG1heSBkZWFkbG9jayB0aGUgdHhuUXVldWUpLlwiLFxuICAgIGhpbnQ6XG4gICAgICBcIlx1OEJGN1x1NUMwNiBydW4qVGFzayBcdTY1M0VcdTUyMzAgJC5vbkFjdGlvbi8kLm9uU3RhdGUvJC5vbiBcdTdCNDkgd2F0Y2hlciBcdTc2ODQgcnVuIFx1NkJCNVx1RkYxQlwiICtcbiAgICAgIFwiXHU0RTBEXHU4OTgxXHU1NzI4IHJlZHVjZXIgLyB0cmFpdC5ydW4gLyBcdTUzNTVcdTdCMTRcdTRFOEJcdTUyQTFcdTc2ODRcdTU0MENcdTZCNjUgYm9keSBcdTUxODVcdTc2RjRcdTYzQTVcdThDMDNcdTc1MjhcdTMwMDJcdTgyRTVcdTk3MDBcdTg5ODFcdTk1N0ZcdTk0RkVcdThERUZcdUZGMENcdThCRjdcdTc1MjhcdTU5MUFcdTUxNjVcdTUzRTNcdUZGMDhwZW5kaW5nXHUyMTkySU9cdTIxOTJ3cml0ZWJhY2tcdUZGMDlcdTZBMjFcdTVGMEZcdTMwMDJcIixcbiAgICBraW5kOiBcInJ1bl90YXNrX2luX3RyYW5zYWN0aW9uXCIsXG4gIH0pXG5cbmNvbnN0IHNob3VsZE5vb3BEdWVUb1N5bmNUeG4gPSAoXG4gIHJ1bnRpbWU6IFRhc2tSdW5uZXJSdW50aW1lLFxuKTogRWZmZWN0LkVmZmVjdDxib29sZWFuPiA9PlxuICBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG4gICAgY29uc3QgaW5UeG4gPSB5aWVsZCogRmliZXJSZWYuZ2V0KGluU3luY1RyYW5zYWN0aW9uRmliZXIpXG4gICAgaWYgKCFpblR4bikge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIC8vIFx1NjVFMFx1OEJCQVx1NzNBRlx1NTg4M1x1NTk4Mlx1NEY1NVx1RkYwQ1x1OTBGRFx1NUZDNVx1OTg3QiBuby1vcFx1RkYwOFx1NTQyNlx1NTIxOVx1NTNFRlx1ODBGRFx1NkI3Qlx1OTUwMVx1RkYwOVx1RkYxQmRpYWdub3N0aWMgXHU0RUM1XHU1NzI4IGRldi90ZXN0IFx1NEUwQlx1NTNEMVx1NTFGQVx1MzAwMlxuICAgIGlmIChpc0RldkVudigpKSB7XG4gICAgICB5aWVsZCogZW1pdEludmFsaWRVc2FnZURpYWdub3N0aWMocnVudGltZS5tb2R1bGVJZClcbiAgICB9XG4gICAgcmV0dXJuIHRydWVcbiAgfSlcblxuY29uc3QgcnVuVGFza0xpZmVjeWNsZSA9IDxQYXlsb2FkLCBTaCBleHRlbmRzIEFueU1vZHVsZVNoYXBlLCBSLCBBLCBFPihcbiAgcGF5bG9hZDogUGF5bG9hZCxcbiAgcnVudGltZTogVGFza1J1bm5lclJ1bnRpbWUsXG4gIGNvbmZpZzogVGFza1J1bm5lckNvbmZpZzxQYXlsb2FkLCBTaCwgUiwgQSwgRT4sXG4gIGdldENhbldyaXRlQmFjaz86IEVmZmVjdC5FZmZlY3Q8Ym9vbGVhbj4sXG4pOiBFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBMb2dpYy5FbnY8U2gsIFI+PiA9PlxuICBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG4gICAgY29uc3Qgbm9vcCA9IHlpZWxkKiBzaG91bGROb29wRHVlVG9TeW5jVHhuKHJ1bnRpbWUpXG4gICAgaWYgKG5vb3ApIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IGRlZmF1bHRzID0gZGVmYXVsdE9yaWdpbnMoY29uZmlnLnRyaWdnZXJOYW1lKVxuICAgIGNvbnN0IG9yaWdpbnM6IFJlcXVpcmVkPFRhc2tSdW5uZXJPcmlnaW5zPiA9IHtcbiAgICAgIHBlbmRpbmc6IGNvbmZpZy5vcmlnaW4/LnBlbmRpbmcgPz8gZGVmYXVsdHMucGVuZGluZyxcbiAgICAgIHN1Y2Nlc3M6IGNvbmZpZy5vcmlnaW4/LnN1Y2Nlc3MgPz8gZGVmYXVsdHMuc3VjY2VzcyxcbiAgICAgIGZhaWx1cmU6IGNvbmZpZy5vcmlnaW4/LmZhaWx1cmUgPz8gZGVmYXVsdHMuZmFpbHVyZSxcbiAgICB9XG5cbiAgICAvLyAxKSBwZW5kaW5nXHVGRjFBXHU0RjVDXHU0RTNBXHU3MkVDXHU3QUNCXHU0RThCXHU1MkExXHU1MTY1XHU1M0UzXHVGRjBDXHU0RTE0XHU0RTAwXHU2NUU2XHU1RjAwXHU1OUNCXHU1QzMxXHU0RTBEXHU1RTk0XHU4OEFCIHJ1bkxhdGVzdCBcdTc2ODQgaW50ZXJydXB0IFx1NjI1M1x1NjVBRFxuICAgIGNvbnN0IHBlbmRpbmcgPSBjb25maWcucGVuZGluZ1xuICAgIGlmIChwZW5kaW5nKSB7XG4gICAgICB5aWVsZCogRWZmZWN0LnVuaW50ZXJydXB0aWJsZShcbiAgICAgICAgcnVudGltZS5ydW5XaXRoU3RhdGVUcmFuc2FjdGlvbihvcmlnaW5zLnBlbmRpbmcsICgpID0+XG4gICAgICAgICAgRWZmZWN0LmFzVm9pZChyZXNvbHZlKHBlbmRpbmcsIHBheWxvYWQpKSxcbiAgICAgICAgKSxcbiAgICAgIClcbiAgICB9XG5cbiAgICAvLyAyKSBJT1x1RkYxQVx1NTcyOFx1NEU4Qlx1NTJBMVx1N0E5N1x1NTNFM1x1NEU0Qlx1NTkxNlx1OEZEMFx1ODg0Q1xuICAgIGNvbnN0IGlvID0gcmVzb2x2ZShjb25maWcuZWZmZWN0LCBwYXlsb2FkKSBhcyBFZmZlY3QuRWZmZWN0PEEsIEUsIExvZ2ljLkVudjxTaCwgUj4+XG4gICAgY29uc3QgZXhpdCA9IHlpZWxkKiBFZmZlY3QuZXhpdChpbylcblxuICAgIC8vIDMpIFx1NTE5OVx1NTZERVx1RkYxQVx1OTcwMFx1ODk4MVx1OTAxQVx1OEZDNyBndWFyZCBcdTc4NkVcdThCQTRcdTRFQ0RcdTRFM0FcdTVGNTNcdTUyNEQgdGFza1x1RkYwOHJ1bkxhdGVzdFRhc2tcdUZGMDlcbiAgICBpZiAoZ2V0Q2FuV3JpdGVCYWNrKSB7XG4gICAgICBjb25zdCBvayA9IHlpZWxkKiBnZXRDYW5Xcml0ZUJhY2tcbiAgICAgIGlmICghb2spIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGV4aXQuX3RhZyA9PT0gXCJTdWNjZXNzXCIpIHtcbiAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBjb25maWcuc3VjY2Vzc1xuICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgeWllbGQqIHJ1bnRpbWUucnVuV2l0aFN0YXRlVHJhbnNhY3Rpb24ob3JpZ2lucy5zdWNjZXNzLCAoKSA9PlxuICAgICAgICAgIEVmZmVjdC5hc1ZvaWQoc3VjY2VzcyhleGl0LnZhbHVlLCBwYXlsb2FkKSksXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIEZhaWx1cmVcdUZGMUFcdTRFMkRcdTY1QURcdTRFMERcdTg5RTZcdTUzRDEgZmFpbHVyZSBcdTUxOTlcdTU2REVcdUZGMDhcdTRGOEJcdTU5ODIgcnVuTGF0ZXN0VGFzayBcdTc2ODRcdTUzRDZcdTZEODhcdTMwMDFTY29wZSBcdTdFRDNcdTY3NUZcdUZGMDlcdTMwMDJcbiAgICBjb25zdCBjYXVzZSA9IGV4aXQuY2F1c2UgYXMgQ2F1c2UuQ2F1c2U8RT5cbiAgICBpZiAoQ2F1c2UuaXNJbnRlcnJ1cHRlZChjYXVzZSkpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IGZhaWx1cmUgPSBjb25maWcuZmFpbHVyZVxuICAgIGlmIChmYWlsdXJlKSB7XG4gICAgICB5aWVsZCogcnVudGltZS5ydW5XaXRoU3RhdGVUcmFuc2FjdGlvbihvcmlnaW5zLmZhaWx1cmUsICgpID0+XG4gICAgICAgIEVmZmVjdC5hc1ZvaWQoZmFpbHVyZShjYXVzZSwgcGF5bG9hZCkpLFxuICAgICAgKVxuICAgIH1cbiAgfSkucGlwZShcbiAgICAvLyB3YXRjaGVyIFx1NEUwRFx1NUU5NFx1NTZFMFx1NTM1NVx1NkIyMSB0YXNrIFx1NTFGQVx1OTUxOVx1ODAwQ1x1NjU3NFx1NEY1M1x1NUQyOVx1NkU4M1x1RkYxQVx1NTQxRVx1NjM4OVx1OTUxOVx1OEJFRlx1NUU3Nlx1OEJCMFx1NUY1NVx1NjVFNVx1NUZEN1xuICAgIEVmZmVjdC5jYXRjaEFsbENhdXNlKChjYXVzZSkgPT4gRWZmZWN0LmxvZ0Vycm9yKFwiVGFza1J1bm5lciBlcnJvclwiLCBjYXVzZSkpLFxuICApIGFzIEVmZmVjdC5FZmZlY3Q8dm9pZCwgbmV2ZXIsIExvZ2ljLkVudjxTaCwgUj4+XG5cbi8qKlxuICogbWFrZVRhc2tSdW5uZXJcdUZGMUFcbiAqIC0gXHU1OTBEXHU3NTI4IEZsb3dSdW50aW1lIFx1NzY4NFx1NUU3Nlx1NTNEMVx1OEJFRFx1NEU0OVx1RkYwOHNlcXVlbnRpYWwvcGFyYWxsZWwvbGF0ZXN0L2V4aGF1c3RcdUZGMDlcdUZGMUJcbiAqIC0gXHU1QzA2XHU1MzU1XHU2QjIxXHU4OUU2XHU1M0QxXHU2MkM2XHU1MjA2XHU0RTNBXHVGRjFBcGVuZGluZyhcdTcyRUNcdTdBQ0JcdTRFOEJcdTUyQTEpIFx1MjE5MiBJTyBcdTIxOTIgc3VjY2Vzcy9mYWlsdXJlKFx1NzJFQ1x1N0FDQlx1NEU4Qlx1NTJBMSlcdTMwMDJcbiAqL1xuZXhwb3J0IGNvbnN0IG1ha2VUYXNrUnVubmVyID0gPFxuICBQYXlsb2FkLFxuICBTaCBleHRlbmRzIEFueU1vZHVsZVNoYXBlLFxuICBSLFxuICBBID0gdm9pZCxcbiAgRSA9IG5ldmVyLFxuPihcbiAgc3RyZWFtOiBTdHJlYW0uU3RyZWFtPFBheWxvYWQ+LFxuICBtb2RlOiBUYXNrUnVubmVyTW9kZSxcbiAgcnVudGltZTogVGFza1J1bm5lclJ1bnRpbWUsXG4gIGNvbmZpZzogVGFza1J1bm5lckNvbmZpZzxQYXlsb2FkLCBTaCwgUiwgQSwgRT4sXG4pOiBFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBMb2dpYy5FbnY8U2gsIFI+PiA9PiB7XG4gIGlmIChtb2RlID09PSBcImxhdGVzdFwiKSB7XG4gICAgcmV0dXJuIEVmZmVjdC5nZW4oZnVuY3Rpb24qICgpIHtcbiAgICAgIGNvbnN0IHRhc2tJZFJlZiA9IHlpZWxkKiBSZWYubWFrZSgwKVxuICAgICAgY29uc3QgY3VycmVudEZpYmVyUmVmID0geWllbGQqIFJlZi5tYWtlPEZpYmVyLlJ1bnRpbWVGaWJlcjx2b2lkLCBuZXZlcj4gfCB1bmRlZmluZWQ+KFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICApXG5cbiAgICAgIGNvbnN0IHN0YXJ0ID0gKHBheWxvYWQ6IFBheWxvYWQpID0+XG4gICAgICAgIEVmZmVjdC5nZW4oZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICBjb25zdCB0YXNrSWQgPSB5aWVsZCogUmVmLnVwZGF0ZUFuZEdldCh0YXNrSWRSZWYsIChuKSA9PiBuICsgMSlcblxuICAgICAgICAgIGNvbnN0IHByZXYgPSB5aWVsZCogUmVmLmdldChjdXJyZW50RmliZXJSZWYpXG4gICAgICAgICAgaWYgKHByZXYpIHtcbiAgICAgICAgICAgIC8vIFx1NEUwRFx1N0I0OVx1NUY4NVx1NjVFNyBmaWJlciBcdTc3MUZcdTZCNjNcdTdFRDNcdTY3NUZcdUZGMENcdTkwN0ZcdTUxNERcdTk2M0JcdTU4NUVcdTY1QjBcdTg5RTZcdTUzRDFcdUZGMUJcdTUxOTlcdTU2REVcdTk2MzZcdTZCQjVcdTk3NjAgdGFza0lkIGd1YXJkIFx1NTE1Q1x1NUU5NVx1MzAwMlxuICAgICAgICAgICAgeWllbGQqIEZpYmVyLmludGVycnVwdEZvcmsocHJldilcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBjYW5Xcml0ZUJhY2sgPSBSZWYuZ2V0KHRhc2tJZFJlZikucGlwZShcbiAgICAgICAgICAgIEVmZmVjdC5tYXAoKGN1cnJlbnQpID0+IGN1cnJlbnQgPT09IHRhc2tJZCksXG4gICAgICAgICAgKVxuXG4gICAgICAgICAgY29uc3QgZmliZXIgPSB5aWVsZCogRWZmZWN0LmZvcmsoXG4gICAgICAgICAgICBydW5UYXNrTGlmZWN5Y2xlPFBheWxvYWQsIFNoLCBSLCBBLCBFPihcbiAgICAgICAgICAgICAgcGF5bG9hZCxcbiAgICAgICAgICAgICAgcnVudGltZSxcbiAgICAgICAgICAgICAgY29uZmlnLFxuICAgICAgICAgICAgICBjYW5Xcml0ZUJhY2ssXG4gICAgICAgICAgICApLFxuICAgICAgICAgIClcblxuICAgICAgICAgIHlpZWxkKiBSZWYuc2V0KGN1cnJlbnRGaWJlclJlZiwgZmliZXIpXG4gICAgICAgIH0pXG5cbiAgICAgIHJldHVybiB5aWVsZCogU3RyZWFtLnJ1bkZvckVhY2goc3RyZWFtLCBzdGFydClcbiAgICB9KVxuICB9XG5cbiAgaWYgKG1vZGUgPT09IFwiZXhoYXVzdFwiKSB7XG4gICAgcmV0dXJuIEVmZmVjdC5nZW4oZnVuY3Rpb24qICgpIHtcbiAgICAgIGNvbnN0IGJ1c3lSZWYgPSB5aWVsZCogUmVmLm1ha2UoZmFsc2UpXG5cbiAgICAgIGNvbnN0IG1hcHBlciA9IChwYXlsb2FkOiBQYXlsb2FkKSA9PlxuICAgICAgICBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgY29uc3QgYWNxdWlyZWQgPSB5aWVsZCogUmVmLm1vZGlmeShidXN5UmVmLCAoYnVzeSkgPT5cbiAgICAgICAgICAgIGJ1c3kgPyAoW2ZhbHNlLCBidXN5XSBhcyBjb25zdCkgOiAoW3RydWUsIHRydWVdIGFzIGNvbnN0KSxcbiAgICAgICAgICApXG4gICAgICAgICAgaWYgKCFhY3F1aXJlZCkge1xuICAgICAgICAgICAgLy8gXHU1RkZEXHU3NTY1XHU4OUU2XHU1M0QxXHVGRjFBXHU0RTBEXHU0RUE3XHU3NTFGIHBlbmRpbmcgXHU0RThCXHU1MkExXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHlpZWxkKiBydW5UYXNrTGlmZWN5Y2xlPFBheWxvYWQsIFNoLCBSLCBBLCBFPihcbiAgICAgICAgICAgICAgcGF5bG9hZCxcbiAgICAgICAgICAgICAgcnVudGltZSxcbiAgICAgICAgICAgICAgY29uZmlnLFxuICAgICAgICAgICAgKVxuICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB5aWVsZCogUmVmLnNldChidXN5UmVmLCBmYWxzZSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgIHJldHVybiB5aWVsZCogU3RyZWFtLnJ1bkRyYWluKFxuICAgICAgICBzdHJlYW0ucGlwZShTdHJlYW0ubWFwRWZmZWN0KG1hcHBlciwgeyBjb25jdXJyZW5jeTogXCJ1bmJvdW5kZWRcIiB9KSksXG4gICAgICApXG4gICAgfSlcbiAgfVxuXG4gIGlmIChtb2RlID09PSBcInBhcmFsbGVsXCIpIHtcbiAgICByZXR1cm4gU3RyZWFtLnJ1bkRyYWluKFxuICAgICAgc3RyZWFtLnBpcGUoXG4gICAgICAgIFN0cmVhbS5tYXBFZmZlY3QoXG4gICAgICAgICAgKHBheWxvYWQpID0+XG4gICAgICAgICAgICBydW5UYXNrTGlmZWN5Y2xlPFBheWxvYWQsIFNoLCBSLCBBLCBFPihcbiAgICAgICAgICAgICAgcGF5bG9hZCxcbiAgICAgICAgICAgICAgcnVudGltZSxcbiAgICAgICAgICAgICAgY29uZmlnLFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICB7IGNvbmN1cnJlbmN5OiBcInVuYm91bmRlZFwiIH0sXG4gICAgICAgICksXG4gICAgICApLFxuICAgICkgYXMgRWZmZWN0LkVmZmVjdDx2b2lkLCBuZXZlciwgTG9naWMuRW52PFNoLCBSPj5cbiAgfVxuXG4gIC8vIG1vZGUgPT09IFwidGFza1wiXHVGRjA4c2VxdWVudGlhbFx1RkYwOVxuICByZXR1cm4gU3RyZWFtLnJ1bkZvckVhY2goc3RyZWFtLCAocGF5bG9hZCkgPT5cbiAgICBydW5UYXNrTGlmZWN5Y2xlPFBheWxvYWQsIFNoLCBSLCBBLCBFPihwYXlsb2FkLCBydW50aW1lLCBjb25maWcpLFxuICApIGFzIEVmZmVjdC5FZmZlY3Q8dm9pZCwgbmV2ZXIsIExvZ2ljLkVudjxTaCwgUj4+XG59XG4iLCAiaW1wb3J0IHsgQ29udGV4dCwgTGF5ZXIgfSBmcm9tIFwiZWZmZWN0XCJcblxuLy8gXHU3RURGXHU0RTAwXHU3Njg0XHU4RkQwXHU4ODRDXHU2NUY2XHU3M0FGXHU1ODgzXHU2OEMwXHU2RDRCXHVGRjBDXHU5MDdGXHU1MTREIGJ1bmRsZXIgXHU1NzI4XHU2Nzg0XHU1RUZBXHU2NzFGXHU1MTg1XHU4MDU0IE5PREVfRU5WXHUzMDAyXG5leHBvcnQgY29uc3QgZ2V0Tm9kZUVudiA9ICgpOiBzdHJpbmcgfCB1bmRlZmluZWQgPT4ge1xuICB0cnkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3QgZW52ID0gKGdsb2JhbFRoaXMgYXMgYW55KT8ucHJvY2Vzcz8uZW52XG4gICAgcmV0dXJuIHR5cGVvZiBlbnY/Lk5PREVfRU5WID09PSBcInN0cmluZ1wiID8gZW52Lk5PREVfRU5WIDogdW5kZWZpbmVkXG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgaXNEZXZFbnYgPSAoKTogYm9vbGVhbiA9PiBnZXROb2RlRW52KCkgIT09IFwicHJvZHVjdGlvblwiXG5cbmV4cG9ydCB0eXBlIFN0YXRlVHJhbnNhY3Rpb25JbnN0cnVtZW50YXRpb24gPSBcImZ1bGxcIiB8IFwibGlnaHRcIlxuXG4vKipcbiAqIGdldERlZmF1bHRTdGF0ZVR4bkluc3RydW1lbnRhdGlvblx1RkYxQVxuICogLSBcdTVGNTNcdTUyNERcdTdCODBcdTUzNTVcdTYzMDkgTk9ERV9FTlYgXHU5MDA5XHU2MkU5XHU5RUQ4XHU4QkE0XHU4OUMyXHU2RDRCXHU1RjNBXHU1RUE2XHVGRjFBXG4gKiAgIC0gZGV2IC8gdGVzdFx1RkYxQWZ1bGxcdUZGMDhcdTRGRERcdTc1NTkgUGF0Y2ggXHU0RTBFXHU1RkVCXHU3MTY3XHVGRjBDXHU0RkJGXHU0RThFXHU4QzAzXHU4QkQ1XHVGRjA5XHVGRjFCXG4gKiAgIC0gcHJvZHVjdGlvblx1RkYxQWxpZ2h0XHVGRjA4XHU0RUM1XHU0RkREXHU3NTU5XHU2NzAwXHU1QzBGXHU4QkVEXHU0RTQ5XHVGRjBDXHU0RkJGXHU0RThFXHU1MUNGXHU1QzExXHU1RjAwXHU5NTAwXHVGRjA5XHUzMDAyXG4gKiAtIFx1NTQwRVx1N0VFRFx1NTNFRlx1NTcyOCBSdW50aW1lLm1ha2UgLyBNb2R1bGUubWFrZSBcdTRFMEFcdTYzRDBcdTRGOUJcdTY2RjRcdTdFQzZcdTdDOTJcdTVFQTZcdTc2ODRcdTg5ODZcdTUxOTlcdTUxNjVcdTUzRTNcdTMwMDJcbiAqL1xuZXhwb3J0IGNvbnN0IGdldERlZmF1bHRTdGF0ZVR4bkluc3RydW1lbnRhdGlvbiA9XG4gICgpOiBTdGF0ZVRyYW5zYWN0aW9uSW5zdHJ1bWVudGF0aW9uID0+XG4gICAgaXNEZXZFbnYoKSA/IFwiZnVsbFwiIDogXCJsaWdodFwiXG5cbi8qKlxuICogUnVudGltZSBcdTdFQTcgU3RhdGVUcmFuc2FjdGlvbiBcdTkxNERcdTdGNkUgU2VydmljZVx1RkYxQVxuICogLSBcdTc1MzEgTG9naXguUnVudGltZS5tYWtlIC8gQXBwUnVudGltZS5tYWtlQXBwIFx1NTcyOCBBcHAgXHU3RUE3IExheWVyIFx1NEUyRFx1NjNEMFx1NEY5Qlx1RkYxQlxuICogLSBNb2R1bGVSdW50aW1lLm1ha2UgXHU1M0VGXHU0RUU1XHU0RUNFIEVudiBcdTRFMkRcdThCRkJcdTUzRDYgcnVudGltZSBcdTdFQTdcdTlFRDhcdThCQTRcdTg5QzJcdTZENEJcdTdCNTZcdTc1NjVcdTMwMDJcbiAqXG4gKiBcdThCRjRcdTY2MEVcdUZGMUFcbiAqIC0gaW5zdHJ1bWVudGF0aW9uIFx1NEVDNVx1NEY1Q1x1NEUzQSBSdW50aW1lIFx1N0VBN1x1OUVEOFx1OEJBNFx1NTAzQ1x1RkYxQlxuICogLSBNb2R1bGVJbXBsIC8gTW9kdWxlUnVudGltZU9wdGlvbnMgXHU0RTJEXHU2NjNFXHU1RjBGXHU1OEYwXHU2NjBFXHU3Njg0IGluc3RydW1lbnRhdGlvbiBcdTUxNzdcdTY3MDlcdTY2RjRcdTlBRDhcdTRGMThcdTUxNDhcdTdFQTdcdTMwMDJcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTdGF0ZVRyYW5zYWN0aW9uUnVudGltZUNvbmZpZyB7XG4gIHJlYWRvbmx5IGluc3RydW1lbnRhdGlvbj86IFN0YXRlVHJhbnNhY3Rpb25JbnN0cnVtZW50YXRpb25cbiAgLyoqXG4gICAqIFN0YXRlVHJhaXQgXHU2RDNFXHU3NTFGXHU2NTM2XHU2NTVCXHVGRjA4Y29udmVyZ2VcdUZGMDlcdTk4ODRcdTdCOTdcdUZGMDhtc1x1RkYwOVx1RkYxQVxuICAgKiAtIFx1OEQ4NVx1OEZDN1x1OTg4NFx1N0I5N1x1NUMwNlx1ODlFNlx1NTNEMVx1OEY2Rlx1OTY0RFx1N0VBN1x1RkYwOFx1NTFCQlx1N0VEM1x1NkQzRVx1NzUxRlx1NUI1N1x1NkJCNVx1RkYwQ1x1NEZERFx1NEY0RiBiYXNlIFx1NTE5OVx1NTE2NVx1NEUwRSAwLzEgY29tbWl0IFx1OEJFRFx1NEU0OVx1RkYwOVx1MzAwMlxuICAgKiAtIFx1OUVEOFx1OEJBNFx1NEUzQSAyMDBtc1x1RkYwOFx1NEUwRSAwMDcgc3BlYyBcdTc2ODRcdTlFRDhcdThCQTRcdTk2MDhcdTUwM0NcdTRGRERcdTYzMDFcdTRFMDBcdTgxRjRcdUZGMDlcdTMwMDJcbiAgICovXG4gIHJlYWRvbmx5IHRyYWl0Q29udmVyZ2VCdWRnZXRNcz86IG51bWJlclxuICAvKipcbiAgICogU3RhdGVUcmFpdCBjb252ZXJnZSBcdThDMDNcdTVFQTZcdTdCNTZcdTc1NjVcdUZGMUFcbiAgICogLSBmdWxsXHVGRjFBXHU1MTY4XHU5MUNGIHRvcG8gXHU2MjY3XHU4ODRDXHVGRjA4XHU1RjUzXHU1MjREXHU5RUQ4XHU4QkE0XHVGRjBDXHU2NzAwXHU3QTMzXHU1OUE1XHVGRjA5XHVGRjFCXG4gICAqIC0gZGlydHlcdUZGMUFcdTU3RkFcdTRFOEVcdTRFOEJcdTUyQTFcdTdBOTdcdTUzRTNcdTUxODUgZGlydHlQYXRocyArIGRlcHMgXHU1MDVBXHU2NzAwXHU1QzBGXHU4OUU2XHU1M0QxXHVGRjA4XHU4OTgxXHU2QzQyIGRlcHMgXHU1MUM2XHU3ODZFXHVGRjA5XHUzMDAyXG4gICAqL1xuICByZWFkb25seSB0cmFpdENvbnZlcmdlTW9kZT86IFwiZnVsbFwiIHwgXCJkaXJ0eVwiXG59XG5cbmNsYXNzIFN0YXRlVHJhbnNhY3Rpb25Db25maWdUYWdJbXBsIGV4dGVuZHMgQ29udGV4dC5UYWcoXG4gIFwiQGxvZ2l4L2NvcmUvU3RhdGVUcmFuc2FjdGlvblJ1bnRpbWVDb25maWdcIixcbik8U3RhdGVUcmFuc2FjdGlvbkNvbmZpZ1RhZ0ltcGwsIFN0YXRlVHJhbnNhY3Rpb25SdW50aW1lQ29uZmlnPigpIHt9XG5cbmV4cG9ydCBjb25zdCBTdGF0ZVRyYW5zYWN0aW9uQ29uZmlnVGFnID0gU3RhdGVUcmFuc2FjdGlvbkNvbmZpZ1RhZ0ltcGxcblxuZXhwb3J0IHR5cGUgUmVwbGF5TW9kZSA9IFwibGl2ZVwiIHwgXCJyZXBsYXlcIlxuXG5leHBvcnQgaW50ZXJmYWNlIFJlcGxheU1vZGVDb25maWcge1xuICByZWFkb25seSBtb2RlOiBSZXBsYXlNb2RlXG59XG5cbmNsYXNzIFJlcGxheU1vZGVDb25maWdUYWdJbXBsIGV4dGVuZHMgQ29udGV4dC5UYWcoXG4gIFwiQGxvZ2l4L2NvcmUvUmVwbGF5TW9kZUNvbmZpZ1wiLFxuKTxSZXBsYXlNb2RlQ29uZmlnVGFnSW1wbCwgUmVwbGF5TW9kZUNvbmZpZz4oKSB7fVxuXG5leHBvcnQgY29uc3QgUmVwbGF5TW9kZUNvbmZpZ1RhZyA9IFJlcGxheU1vZGVDb25maWdUYWdJbXBsXG5cbmV4cG9ydCBjb25zdCByZXBsYXlNb2RlTGF5ZXIgPSAoXG4gIG1vZGU6IFJlcGxheU1vZGUsXG4pOiBMYXllci5MYXllcjxSZXBsYXlNb2RlQ29uZmlnVGFnSW1wbCwgbmV2ZXIsIG5ldmVyPiA9PlxuICBMYXllci5zdWNjZWVkKFJlcGxheU1vZGVDb25maWdUYWcsIHsgbW9kZSB9KVxuIiwgImltcG9ydCB7IENhdXNlLCBDaHVuaywgRWZmZWN0IH0gZnJvbSBcImVmZmVjdFwiXG5pbXBvcnQgKiBhcyBEZWJ1ZyBmcm9tIFwiLi9EZWJ1Z1NpbmsuanNcIlxuXG4vKipcbiAqIFJlZHVjZXIgXHU3NkY4XHU1MTczXHU3Njg0XHU4QkNBXHU2NUFEXHU5NTE5XHU4QkVGXHU3QzdCXHU1NzhCXHVGRjFBXG4gKiAtIFJlZHVjZXJEdXBsaWNhdGVFcnJvclx1RkYxQVx1NTQwQ1x1NEUwMFx1NEUyQSB0YWcgXHU2Q0U4XHU1MThDXHU0RTg2XHU1OTFBXHU0RTJBIHByaW1hcnkgcmVkdWNlclx1RkYxQlxuICogLSBSZWR1Y2VyTGF0ZVJlZ2lzdHJhdGlvbkVycm9yXHVGRjFBXHU1NzI4XHU4QkU1IHRhZyBcdTVERjJcdTdFQ0ZcdTUzRDFcdTc1MUZcdThGQzcgZGlzcGF0Y2ggXHU0RTRCXHU1NDBFXHU2MjREXHU2Q0U4XHU1MThDIHJlZHVjZXJcdTMwMDJcbiAqXG4gKiBcdThGRDlcdTRFOUJcdTk1MTlcdThCRUZcdTUzRUFcdTU3MjggUnVudGltZSBcdTUxODVcdTkwRThcdTRGN0ZcdTc1MjhcdUZGMENcdTc1MjhcdTRFOEVcdTU3MjggY2F0Y2ggXHU5NjM2XHU2QkI1XHU3RURGXHU0RTAwXHU4RjZDXHU2MzYyXHU0RTNBIERlYnVnIFx1OEJDQVx1NjVBRFx1NEU4Qlx1NEVGNlx1MzAwMlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFJlZHVjZXJEaWFnbm9zdGljRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIHJlYWRvbmx5IF90YWc6IFwiUmVkdWNlckR1cGxpY2F0ZUVycm9yXCIgfCBcIlJlZHVjZXJMYXRlUmVnaXN0cmF0aW9uRXJyb3JcIlxuICByZWFkb25seSB0YWc6IHN0cmluZ1xuICByZWFkb25seSBtb2R1bGVJZD86IHN0cmluZ1xufVxuXG5leHBvcnQgY29uc3QgbWFrZVJlZHVjZXJFcnJvciA9IChcbiAgX3RhZzogUmVkdWNlckRpYWdub3N0aWNFcnJvcltcIl90YWdcIl0sXG4gIHRhZzogc3RyaW5nLFxuICBtb2R1bGVJZD86IHN0cmluZ1xuKTogUmVkdWNlckRpYWdub3N0aWNFcnJvciA9PlxuICBPYmplY3QuYXNzaWduKFxuICAgIG5ldyBFcnJvcihcbiAgICAgIF90YWcgPT09IFwiUmVkdWNlckR1cGxpY2F0ZUVycm9yXCJcbiAgICAgICAgPyBgW01vZHVsZVJ1bnRpbWVdIER1cGxpY2F0ZSBwcmltYXJ5IHJlZHVjZXIgZm9yIHRhZyBcIiR7dGFnfVwiLiBFYWNoIGFjdGlvbiB0YWcgbXVzdCBoYXZlIGF0IG1vc3Qgb25lIHByaW1hcnkgcmVkdWNlci5gXG4gICAgICAgIDogYFtNb2R1bGVSdW50aW1lXSBMYXRlIHByaW1hcnkgcmVkdWNlciByZWdpc3RyYXRpb24gZm9yIHRhZyBcIiR7dGFnfVwiLiBSZWR1Y2VycyBtdXN0IGJlIHJlZ2lzdGVyZWQgYmVmb3JlIHRoZSBmaXJzdCBkaXNwYXRjaCBvZiB0aGlzIHRhZy5gXG4gICAgKSxcbiAgICB7XG4gICAgICBfdGFnLFxuICAgICAgdGFnLFxuICAgICAgbW9kdWxlSWQsXG4gICAgfVxuICApIGFzIFJlZHVjZXJEaWFnbm9zdGljRXJyb3JcblxuLyoqXG4gKiBcdTRFQ0UgTG9naWMgZm9yayBcdTc2ODQgQ2F1c2UgXHU0RTJEXHU2M0QwXHU1M0Q2IFJlZHVjZXIgXHU4QkNBXHU2NUFEXHU5NTE5XHU4QkVGXHVGRjBDXHU1RTc2XHU0RUU1IERlYnVnIFx1NEU4Qlx1NEVGNlx1NUY2Mlx1NUYwRlx1NTNEMVx1NTFGQVx1MzAwMlxuICpcbiAqIFx1NkNFOFx1NjEwRlx1RkYxQVxuICogLSBcdTRFQzVcdTU3MjhcdTVCNThcdTU3MjggUmVkdWNlckRpYWdub3N0aWNFcnJvciBcdTY1RjZcdTUzRDFcdTUxRkEgZGlhZ25vc3RpYyBcdTRFOEJcdTRFRjZcdUZGMUJcbiAqIC0gbW9kdWxlSWQgXHU0RjE4XHU1MTQ4XHU1M0Q2XHU5NTE5XHU4QkVGXHU1QkY5XHU4QzYxXHU4MUVBXHU4RUFCXHU3Njg0IG1vZHVsZUlkXHVGRjBDXHU1MTc2XHU2QjIxXHU0RjdGXHU3NTI4XHU4QzAzXHU3NTI4XHU2NUI5XHU2M0QwXHU0RjlCXHU3Njg0XHU0RTBBXHU0RTBCXHU2NTg3IG1vZHVsZUlkXHUzMDAyXG4gKi9cbmV4cG9ydCBjb25zdCBlbWl0RGlhZ25vc3RpY3NGcm9tQ2F1c2UgPSAoXG4gIGNhdXNlOiBDYXVzZS5DYXVzZTx1bmtub3duPixcbiAgbW9kdWxlSWRGcm9tQ29udGV4dD86IHN0cmluZ1xuKTogRWZmZWN0LkVmZmVjdDx2b2lkLCBuZXZlciwgYW55PiA9PlxuICBFZmZlY3Quc3luYygoKSA9PiB7XG4gICAgY29uc3QgZGVmZWN0cyA9IENodW5rLnRvUmVhZG9ubHlBcnJheShDYXVzZS5kZWZlY3RzKGNhdXNlKSlcblxuICAgIGxldCBkdXBsaWNhdGU6IFJlZHVjZXJEaWFnbm9zdGljRXJyb3IgfCB1bmRlZmluZWRcbiAgICBsZXQgbGF0ZTogUmVkdWNlckRpYWdub3N0aWNFcnJvciB8IHVuZGVmaW5lZFxuXG4gICAgZm9yIChjb25zdCBkZWZlY3Qgb2YgZGVmZWN0cykge1xuICAgICAgaWYgKCFkZWZlY3QgfHwgdHlwZW9mIGRlZmVjdCAhPT0gXCJvYmplY3RcIikgY29udGludWVcbiAgICAgIGNvbnN0IGVycm9yID0gZGVmZWN0IGFzIGFueVxuICAgICAgaWYgKGVycm9yLl90YWcgPT09IFwiUmVkdWNlckR1cGxpY2F0ZUVycm9yXCIpIHtcbiAgICAgICAgZHVwbGljYXRlID0gZXJyb3IgYXMgUmVkdWNlckRpYWdub3N0aWNFcnJvclxuICAgICAgfSBlbHNlIGlmIChlcnJvci5fdGFnID09PSBcIlJlZHVjZXJMYXRlUmVnaXN0cmF0aW9uRXJyb3JcIikge1xuICAgICAgICBsYXRlID0gZXJyb3IgYXMgUmVkdWNlckRpYWdub3N0aWNFcnJvclxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGVmZmVjdHM6IEFycmF5PEVmZmVjdC5FZmZlY3Q8dm9pZD4+ID0gW11cblxuICAgIGlmIChkdXBsaWNhdGUpIHtcbiAgICAgIGVmZmVjdHMucHVzaChcbiAgICAgICAgRGVidWcucmVjb3JkKHtcbiAgICAgICAgICB0eXBlOiBcImRpYWdub3N0aWNcIixcbiAgICAgICAgICBtb2R1bGVJZDogZHVwbGljYXRlLm1vZHVsZUlkID8/IG1vZHVsZUlkRnJvbUNvbnRleHQsXG4gICAgICAgICAgY29kZTogXCJyZWR1Y2VyOjpkdXBsaWNhdGVcIixcbiAgICAgICAgICBzZXZlcml0eTogXCJlcnJvclwiLFxuICAgICAgICAgIG1lc3NhZ2U6IGBQcmltYXJ5IHJlZHVjZXIgZm9yIHRhZyBcIiR7ZHVwbGljYXRlLnRhZ31cIiBpcyBhbHJlYWR5IHJlZ2lzdGVyZWQgYW5kIGNhbm5vdCBiZSByZWRlZmluZWQuYCxcbiAgICAgICAgICBoaW50OlxuICAgICAgICAgICAgXCJcdTc4NkVcdTRGRERcdTZCQ0ZcdTRFMkEgQWN0aW9uIFRhZyBcdTRFQzVcdTVCOUFcdTRFNDlcdTRFMDBcdTRFMkEgcHJpbWFyeSByZWR1Y2VyXHUzMDAyXHU4MkU1XHU1NDBDXHU2NUY2XHU1NzI4IE1vZHVsZS5yZWR1Y2VycyBcdTRFMEUgJC5yZWR1Y2VyIFx1NEUyRFx1NUI5QVx1NEU0OVx1RkYwQ1x1OEJGN1x1NEZERFx1NzU1OSBNb2R1bGUucmVkdWNlcnMgXHU3MjQ4XHU2NzJDXHU2MjE2XHU1NDA4XHU1RTc2XHU0RTNBXHU1MzU1XHU0RTAwXHU1QjlBXHU0RTQ5XHUzMDAyXCIsXG4gICAgICAgICAgYWN0aW9uVGFnOiBkdXBsaWNhdGUudGFnLFxuICAgICAgICB9KVxuICAgICAgKVxuICAgIH1cblxuICAgIGlmIChsYXRlKSB7XG4gICAgICBlZmZlY3RzLnB1c2goXG4gICAgICAgIERlYnVnLnJlY29yZCh7XG4gICAgICAgICAgdHlwZTogXCJkaWFnbm9zdGljXCIsXG4gICAgICAgICAgbW9kdWxlSWQ6IGxhdGUubW9kdWxlSWQgPz8gbW9kdWxlSWRGcm9tQ29udGV4dCxcbiAgICAgICAgICBjb2RlOiBcInJlZHVjZXI6OmxhdGVfcmVnaXN0cmF0aW9uXCIsXG4gICAgICAgICAgc2V2ZXJpdHk6IFwiZXJyb3JcIixcbiAgICAgICAgICBtZXNzYWdlOiBgUHJpbWFyeSByZWR1Y2VyIGZvciB0YWcgXCIke2xhdGUudGFnfVwiIHdhcyByZWdpc3RlcmVkIGFmdGVyIGFjdGlvbnMgd2l0aCB0aGlzIHRhZyBoYWQgYWxyZWFkeSBiZWVuIGRpc3BhdGNoZWQuYCxcbiAgICAgICAgICBoaW50OlxuICAgICAgICAgICAgXCJcdThCRjdcdTVDMDZcdThCRTUgcmVkdWNlciBcdTYzRDBcdTUyNERcdTUyMzAgTW9kdWxlLm1ha2UoeyByZWR1Y2VycyB9KVx1RkYwQ1x1NjIxNlx1Nzg2RVx1NEZERFx1NTcyOFx1OTk5Nlx1NkIyMSBkaXNwYXRjaCBcdTRFNEJcdTUyNERcdTYyNjdcdTg4NEMgJC5yZWR1Y2VyKFxcXCJ0YWdcXFwiLCAuLi4pXHUzMDAyXCIsXG4gICAgICAgICAgYWN0aW9uVGFnOiBsYXRlLnRhZyxcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAoZWZmZWN0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBFZmZlY3Qudm9pZFxuICAgIH1cblxuICAgIGxldCBjb21iaW5lZDogRWZmZWN0LkVmZmVjdDx2b2lkPiA9IEVmZmVjdC52b2lkXG4gICAgZm9yIChjb25zdCBlZmYgb2YgZWZmZWN0cykge1xuICAgICAgY29tYmluZWQgPSBjb21iaW5lZC5waXBlKEVmZmVjdC56aXBSaWdodChlZmYpKVxuICAgIH1cbiAgICByZXR1cm4gY29tYmluZWRcbiAgfSkucGlwZShFZmZlY3QuZmxhdHRlbilcbiIsICJpbXBvcnQgeyBFZmZlY3QgfSBmcm9tIFwiZWZmZWN0XCJcbmltcG9ydCAqIGFzIERlYnVnIGZyb20gXCIuL0RlYnVnU2luay5qc1wiXG5pbXBvcnQgdHlwZSB7IExpZmVjeWNsZU1hbmFnZXIgfSBmcm9tIFwiLi9MaWZlY3ljbGUuanNcIlxuXG4vKipcbiAqIFx1NUY1MyBNb2R1bGUgXHU1NzI4IExvZ2ljIFx1NjI2N1x1ODg0Q1x1NjcxRlx1OTVGNFx1NTNEMVx1NzUxRiBsaWZlY3ljbGUgXHU5NTE5XHU4QkVGXHUzMDAxXHU0RTE0XHU2NzJBXHU2Q0U4XHU1MThDXHU0RUZCXHU0RjU1IG9uRXJyb3IgXHU1OTA0XHU3NDA2XHU1NjY4XHU2NUY2XHVGRjBDXG4gKiBcdTUzRDFcdTUxRkFcdTRFMDBcdTY3NjEgd2FybmluZyBcdTdFQTdcdTUyMkJcdTc2ODRcdThCQ0FcdTY1QURcdTRFOEJcdTRFRjZcdUZGMENcdTYzRDBcdTkxOTJcdTc1MjhcdTYyMzdcdTU3MjggTG9naWMgXHU1RjAwXHU1OTM0XHU4ODY1XHU1MTQ1ICQubGlmZWN5Y2xlLm9uRXJyb3JcdTMwMDJcbiAqL1xuZXhwb3J0IGNvbnN0IGVtaXRNaXNzaW5nT25FcnJvckRpYWdub3N0aWNJZk5lZWRlZCA9IChcbiAgbGlmZWN5Y2xlOiBMaWZlY3ljbGVNYW5hZ2VyLFxuICBtb2R1bGVJZD86IHN0cmluZ1xuKTogRWZmZWN0LkVmZmVjdDx2b2lkLCBuZXZlciwgYW55PiA9PlxuICBsaWZlY3ljbGUuaGFzT25FcnJvckhhbmRsZXJzLnBpcGUoXG4gICAgRWZmZWN0LmZsYXRNYXAoKGhhcykgPT5cbiAgICAgIGhhcyB8fCAhbW9kdWxlSWRcbiAgICAgICAgPyBFZmZlY3Qudm9pZFxuICAgICAgICA6IERlYnVnLnJlY29yZCh7XG4gICAgICAgICAgICB0eXBlOiBcImRpYWdub3N0aWNcIixcbiAgICAgICAgICAgIG1vZHVsZUlkLFxuICAgICAgICAgICAgY29kZTogXCJsaWZlY3ljbGU6Om1pc3Npbmdfb25fZXJyb3JcIixcbiAgICAgICAgICAgIHNldmVyaXR5OiBcIndhcm5pbmdcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBNb2R1bGUgXCIke21vZHVsZUlkfVwiIHJlY2VpdmVkIGEgbGlmZWN5Y2xlIGVycm9yIGJ1dCBoYXMgbm8gJC5saWZlY3ljbGUub25FcnJvciBoYW5kbGVyIHJlZ2lzdGVyZWQuYCxcbiAgICAgICAgICAgIGhpbnQ6XG4gICAgICAgICAgICAgIFwiXHU1RUZBXHU4QkFFXHU1NzI4XHU4QkU1IE1vZHVsZSBcdTc2ODQgTG9naWMgXHU1RjAwXHU1OTM0XHU2REZCXHU1MkEwICQubGlmZWN5Y2xlLm9uRXJyb3IoKGNhdXNlLCBjb250ZXh0KSA9PiAuLi4pIFx1NEVFNVx1N0VERlx1NEUwMFx1NTE1Q1x1NUU5NVx1OTAzQlx1OEY5MVx1OTUxOVx1OEJFRlx1MzAwMlwiLFxuICAgICAgICAgIH0pXG4gICAgKVxuICApXG4iLCAiaW1wb3J0IHsgQ2F1c2UsIENvbnRleHQsIEVmZmVjdCB9IGZyb20gXCJlZmZlY3RcIlxuaW1wb3J0ICogYXMgRGVidWcgZnJvbSBcIi4vRGVidWdTaW5rLmpzXCJcbmltcG9ydCB7IGlzRGV2RW52IH0gZnJvbSBcIi4vZW52LmpzXCJcblxuY29uc3QgcGhhc2VEaWFnbm9zdGljc0VuYWJsZWQgPSAoKTogYm9vbGVhbiA9PiBpc0RldkVudigpXG5cbi8qKlxuICogTG9naWMgXHU3NkY4XHU1MTczXHU4QkNBXHU2NUFEXHVGRjFBXG4gKiAtIFx1NUY1M1x1NTI0RFx1ODA1QVx1NzEyNlx1NEU4RSBFbnYgU2VydmljZSBcdTdGM0FcdTU5MzFcdTVCRkNcdTgxRjRcdTc2ODRcdTUyMURcdTU5Q0JcdTUzMTZcdTU2NkFcdTk3RjNcdUZGMDhTZXJ2aWNlIG5vdCBmb3VuZFx1RkYwOVx1MzAwMlxuICpcbiAqIFx1OEJCRVx1OEJBMVx1NjEwRlx1NTZGRVx1RkYxQVxuICogLSBcdTU3MjhcdTYzQThcdTgzNTBcdTc1MjhcdTZDRDVcdTRFMEJcdUZGMENSdW50aW1lIC8gUmVhY3QgXHU1QzQyXHU0RjFBXHU2QjYzXHU3ODZFXHU2M0QwXHU0RjlCIEVudlx1RkYxQlxuICogLSBcdTRGNDZcdTU3MjhcdTY3RDBcdTRFOUJcdTUyMURcdTU5Q0JcdTUzMTZcdTY1RjZcdTVFOEZcdTRFMEJcdUZGMENMb2dpYyBcdTUzRUZcdTgwRkRcdTU3MjggRW52IFx1OTRGQVx1NkVFMVx1NTI0RFx1NUMzMVx1NUMxRFx1OEJENVx1OEJGQlx1NTNENiBTZXJ2aWNlXHVGRjFCXG4gKiAtIFx1OEZEOVx1N0M3Qlx1OTUxOVx1OEJFRlx1OTAxQVx1NUUzOFx1NTNFQVx1NTFGQVx1NzNCMFx1NEUwMFx1NkIyMVx1RkYwQ1x1NEUwRFx1NjUzOVx1NTNEOFx1NjcwMFx1N0VDOFx1OEJFRFx1NEU0OVx1RkYwQ1x1NTM3NFx1NEYxQVx1NkM2MVx1NjdEM1x1NjVFNVx1NUZEN1x1MzAwMlxuICpcbiAqIFx1NTZFMFx1NkI2NFx1OEZEOVx1OTFDQ1x1NTcyOCBEZWJ1ZyBcdTRGQTdcdTUzRDFcdTUxRkFcdTRFMDBcdTY3NjEgd2FybmluZyBcdTdFQTcgZGlhZ25vc3RpY1x1RkYwQ1x1ODlFM1x1OTFDQVx1NTNFRlx1ODBGRFx1NTM5Rlx1NTZFMFx1NEUwRVx1NjM5Mlx1NjdFNVx1OERFRlx1NUY4NFx1RkYwQ1xuICogXHU3NzFGXHU2QjYzXHU3Njg0XHU5NTE5XHU4QkVGXHU4QkVEXHU0RTQ5XHU0RUNEXHU3NTMxIGxpZmVjeWNsZS5vbkVycm9yIC8gQXBwUnVudGltZS5vbkVycm9yIFx1NTkwNFx1NzQwNlx1MzAwMlxuICovXG5cbmNvbnN0IFNFUlZJQ0VfTk9UX0ZPVU5EX1BSRUZJWCA9IFwiU2VydmljZSBub3QgZm91bmQ6XCJcblxuLyoqXG4gKiBcdTgyRTUgQ2F1c2UgXHU0RTJEXHU1MzA1XHU1NDJCIGBTZXJ2aWNlIG5vdCBmb3VuZDogLi4uYCBcdTk1MTlcdThCRUZcdUZGMENcdTUyMTlcdTUzRDFcdTUxRkFcdTRFMDBcdTY3NjEgd2FybmluZyBcdTdFQTcgZGlhZ25vc3RpY1x1RkYxQVxuICogLSBjb2RlOiBsb2dpYzo6ZW52X3NlcnZpY2Vfbm90X2ZvdW5kXG4gKiAtIG1lc3NhZ2U6IFx1NTM5Rlx1NTlDQlx1OTUxOVx1OEJFRiBtZXNzYWdlXHVGRjFCXG4gKiAtIGhpbnQ6IFx1OEJGNFx1NjYwRVx1OEZEOVx1NjYyRlx1NURGMlx1NzdFNVx1NzY4NFx1NTIxRFx1NTlDQlx1NTMxNlx1NjVGNlx1NUU4Rlx1NTY2QVx1OTdGM1x1RkYwQ1x1NUU3Nlx1N0VEOVx1NTFGQVx1NjM5Mlx1NjdFNVx1NUVGQVx1OEJBRVx1MzAwMlxuICovXG5leHBvcnQgY29uc3QgZW1pdEVudlNlcnZpY2VOb3RGb3VuZERpYWdub3N0aWNJZk5lZWRlZCA9IChcbiAgY2F1c2U6IENhdXNlLkNhdXNlPHVua25vd24+LFxuICBtb2R1bGVJZD86IHN0cmluZ1xuKTogRWZmZWN0LkVmZmVjdDx2b2lkPiA9PlxuICBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG4gICAgbGV0IHByZXR0eTogc3RyaW5nXG4gICAgdHJ5IHtcbiAgICAgIHByZXR0eSA9IENhdXNlLnByZXR0eShjYXVzZSwgeyByZW5kZXJFcnJvckNhdXNlOiB0cnVlIH0pXG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoIXByZXR0eS5pbmNsdWRlcyhTRVJWSUNFX05PVF9GT1VORF9QUkVGSVgpKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyAxKSBFbnYgU2VydmljZSBcdTdGM0FcdTU5MzFcdTY3MkNcdThFQUJcdTc2ODQgd2FybmluZyBcdThCQ0FcdTY1QURcbiAgICB5aWVsZCogRGVidWcucmVjb3JkKHtcbiAgICAgIHR5cGU6IFwiZGlhZ25vc3RpY1wiLFxuICAgICAgbW9kdWxlSWQsXG4gICAgICBjb2RlOiBcImxvZ2ljOjplbnZfc2VydmljZV9ub3RfZm91bmRcIixcbiAgICAgIHNldmVyaXR5OiBcIndhcm5pbmdcIixcbiAgICAgIG1lc3NhZ2U6IHByZXR0eSxcbiAgICAgIGhpbnQ6XG4gICAgICAgIFwiTG9naWMgXHU1NzI4XHU1MjFEXHU1OUNCXHU1MzE2XHU5NjM2XHU2QkI1XHU1QzFEXHU4QkQ1XHU4QkJGXHU5NUVFXHU1QzFBXHU2NzJBXHU2M0QwXHU0RjlCXHU3Njg0IEVudiBTZXJ2aWNlXHVGRjBDXHU5MDFBXHU1RTM4XHU2NjJGIFJ1bnRpbWUgLyBSZWFjdCBcdTk2QzZcdTYyMTBcdTRFMkRcdTc2ODRcdTVERjJcdTc3RTVcdTUyMURcdTU5Q0JcdTUzMTZcdTU2NkFcdTk3RjNcdTMwMDJcIiArXG4gICAgICAgIFwiXHU4MkU1XHU1M0VBXHU1NzI4XHU1RTk0XHU3NTI4XHU1NDJGXHU1MkE4XHU2NUU5XHU2NzFGXHU1MUZBXHU3M0IwXHU0RTAwXHU2QjIxXHU0RTE0XHU1NDBFXHU3RUVEXHU3MkI2XHU2MDAxXHU0RTBFIEVudiBcdTU3NDdcdTZCNjNcdTVFMzhcdUZGMENcdTUzRUZcdTY2ODJcdTg5QzZcdTRFM0FcdTY1RTBcdTVCQjNcdUZGMUJcIiArXG4gICAgICAgIFwiXHU4MkU1XHU2MzAxXHU3RUVEXHU1MUZBXHU3M0IwXHU2MjE2XHU0RjM0XHU5NjhGXHU0RTFBXHU1MkExXHU1RjAyXHU1RTM4XHVGRjBDXHU4QkY3XHU2OEMwXHU2N0U1IFJ1bnRpbWUubWFrZSAvIFJ1bnRpbWVQcm92aWRlci5sYXllciBcdTY2MkZcdTU0MjZcdTZCNjNcdTc4NkVcdTYzRDBcdTRGOUJcdTRFODZcdTVCRjlcdTVFOTQgU2VydmljZVx1MzAwMlwiLFxuICAgIH0pXG5cbiAgICAvLyAyKSBcdTU3MjhcdTY3RDBcdTRFOUJcdTU3M0FcdTY2NkZcdTRFMEJcdUZGMDhcdTRGOEJcdTU5ODIgTG9naWMgc2V0dXAgXHU2QkI1XHU4RkM3XHU2NUU5XHU4QkJGXHU5NUVFIEVudlx1RkYwOVx1RkYwQ1x1NjIxMVx1NEVFQ1x1NEU1Rlx1NUUwQ1x1NjcxQlx1OTAxQVx1OEZDN1xuICAgIC8vICAgIGxvZ2ljOjppbnZhbGlkX3BoYXNlIFx1NjNEMFx1OTE5Mlx1MjAxQ1x1OEJGN1x1NUMwNiBFbnYgXHU4QkJGXHU5NUVFXHU3OUZCXHU1MkE4XHU1MjMwIHJ1biBcdTZCQjVcdTIwMURcdTMwMDJcbiAgICAvL1xuICAgIC8vIFx1NzUzMVx1NEU4RVx1NUY1M1x1NTI0RFx1NUI5RVx1NzNCMFx1NjVFMFx1NkNENVx1NTcyOFx1NkI2NFx1NTkwNFx1NTNFRlx1OTc2MFx1NTIyNFx1NjVBRFx1OEMwM1x1NzUyOFx1NTNEMVx1NzUxRlx1NzY4NCBwaGFzZVx1RkYwQ1x1OEZEOVx1OTFDQ1x1NTNFQVx1NjYyRlx1NjNEMFx1NEY5Qlx1NEUwMFx1NEUyQVx1ODg2NVx1NTE0NVx1NjAyN1x1NzY4NFxuICAgIC8vIFx1OEJDQVx1NjVBRFx1NEZFMVx1NTNGN1x1RkYwQ1x1NzcxRlx1NkI2M1x1NzY4NCBwaGFzZSBcdTVCODhcdTUzNkJcdTRFQ0RcdTc1MzEgTG9naWNQaGFzZUVycm9yICsgZW1pdEludmFsaWRQaGFzZURpYWdub3N0aWNJZk5lZWRlZCBcdTYyN0ZcdTYyQzVcdTMwMDJcbiAgICB5aWVsZCogRGVidWcucmVjb3JkKHtcbiAgICAgIHR5cGU6IFwiZGlhZ25vc3RpY1wiLFxuICAgICAgbW9kdWxlSWQsXG4gICAgICBjb2RlOiBcImxvZ2ljOjppbnZhbGlkX3BoYXNlXCIsXG4gICAgICBzZXZlcml0eTogXCJlcnJvclwiLFxuICAgICAgbWVzc2FnZTogXCIkLnVzZSBpcyBub3QgYWxsb3dlZCBiZWZvcmUgRW52IGlzIGZ1bGx5IHJlYWR5LlwiLFxuICAgICAgaGludDpcbiAgICAgICAgXCJzZXR1cCBcdTZCQjVcdTYyMTYgRW52IFx1NjcyQVx1NUI4Q1x1NTE2OFx1NUMzMVx1N0VFQVx1NjVGNlx1OEJGN1x1OTA3Rlx1NTE0RFx1NzZGNFx1NjNBNVx1OEJGQlx1NTNENiBTZXJ2aWNlXHVGRjFCXCIgK1xuICAgICAgICBcIlx1NUVGQVx1OEJBRVx1NUMwNlx1NUJGOSBFbnYgXHU3Njg0XHU4QkJGXHU5NUVFXHU3OUZCXHU1MkE4XHU1MjMwIExvZ2ljIFx1NzY4NCBydW4gXHU2QkI1XHVGRjBDXHU2MjE2XHU5MDFBXHU4RkM3ICQubGlmZWN5Y2xlLm9uSW5pdCBcdTUzMDVcdTg4QzVcdTUyMURcdTU5Q0JcdTUzMTZcdTZENDFcdTdBMEJcdTMwMDJcIixcbiAgICAgIGtpbmQ6IFwiZW52X3NlcnZpY2Vfbm90X3JlYWR5XCIsXG4gICAgfSlcbiAgfSlcblxuZXhwb3J0IGludGVyZmFjZSBMb2dpY1BoYXNlRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIHJlYWRvbmx5IF90YWc6IFwiTG9naWNQaGFzZUVycm9yXCJcbiAgcmVhZG9ubHkga2luZDogc3RyaW5nXG4gIHJlYWRvbmx5IGFwaT86IHN0cmluZ1xuICByZWFkb25seSBwaGFzZTogXCJzZXR1cFwiIHwgXCJydW5cIlxuICByZWFkb25seSBtb2R1bGVJZD86IHN0cmluZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIExvZ2ljUGhhc2VTZXJ2aWNlIHtcbiAgcmVhZG9ubHkgY3VycmVudDogXCJzZXR1cFwiIHwgXCJydW5cIlxufVxuXG5leHBvcnQgY29uc3QgTG9naWNQaGFzZVNlcnZpY2VUYWcgPSBDb250ZXh0LkdlbmVyaWNUYWc8TG9naWNQaGFzZVNlcnZpY2U+KFxuICBcIkBsb2dpeC9Mb2dpY1BoYXNlU2VydmljZVwiXG4pXG5cbmV4cG9ydCBjb25zdCBtYWtlTG9naWNQaGFzZUVycm9yID0gKFxuICBraW5kOiBzdHJpbmcsXG4gIGFwaTogc3RyaW5nLFxuICBwaGFzZTogXCJzZXR1cFwiIHwgXCJydW5cIixcbiAgbW9kdWxlSWQ/OiBzdHJpbmdcbik6IExvZ2ljUGhhc2VFcnJvciA9PlxuICBPYmplY3QuYXNzaWduKFxuICAgIG5ldyBFcnJvcihcbiAgICAgIGBbTG9naWNQaGFzZUVycm9yXSAke2FwaX0gaXMgbm90IGFsbG93ZWQgaW4gJHtwaGFzZX0gcGhhc2UgKGtpbmQ9JHtraW5kfSkuYFxuICAgICksXG4gICAge1xuICAgICAgX3RhZzogXCJMb2dpY1BoYXNlRXJyb3JcIixcbiAgICAgIGtpbmQsXG4gICAgICBhcGksXG4gICAgICBwaGFzZSxcbiAgICAgIG1vZHVsZUlkLFxuICAgIH1cbiAgKSBhcyBMb2dpY1BoYXNlRXJyb3JcblxuLyoqXG4gKiBcdTRFQ0UgQ2F1c2UgXHU0RTJEXHU2M0QwXHU1M0Q2IExvZ2ljUGhhc2VFcnJvclx1RkYwQ1x1NUU3Nlx1NEVFNSBkaWFnbm9zdGljIFx1NUY2Mlx1NUYwRlx1NTNEMVx1NTFGQVx1RkYxQVxuICogLSBjb2RlOiBsb2dpYzo6aW52YWxpZF9waGFzZVxuICogLSBraW5kOiBcdTUxNzdcdTRGNTNcdThGRERcdTg5QzRcdTdDN0JcdTU3OEJcdUZGMDhcdTU5ODIgdXNlX2luX3NldHVwXHVGRjA5XG4gKi9cbmV4cG9ydCBjb25zdCBlbWl0SW52YWxpZFBoYXNlRGlhZ25vc3RpY0lmTmVlZGVkID0gKFxuICBjYXVzZTogQ2F1c2UuQ2F1c2U8dW5rbm93bj4sXG4gIG1vZHVsZUlkPzogc3RyaW5nXG4pOiBFZmZlY3QuRWZmZWN0PHZvaWQ+ID0+XG4gIEVmZmVjdC5nZW4oZnVuY3Rpb24qICgpIHtcbiAgICBpZiAoIXBoYXNlRGlhZ25vc3RpY3NFbmFibGVkKCkpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IGFsbEVycm9ycyA9IFtcbiAgICAgIC4uLkNhdXNlLmZhaWx1cmVzKGNhdXNlKSxcbiAgICAgIC4uLkNhdXNlLmRlZmVjdHMoY2F1c2UpLFxuICAgIF1cblxuICAgIGZvciAoY29uc3QgZXJyIG9mIGFsbEVycm9ycykge1xuICAgICAgY29uc3QgbG9naWNFcnIgPSBlcnIgYXMgYW55XG4gICAgICBpZiAobG9naWNFcnIgJiYgbG9naWNFcnIuX3RhZyA9PT0gXCJMb2dpY1BoYXNlRXJyb3JcIikge1xuICAgICAgICBjb25zdCBwaGFzZUVyciA9IGxvZ2ljRXJyIGFzIExvZ2ljUGhhc2VFcnJvclxuICAgICAgICBjb25zdCBoaW50ID1cbiAgICAgICAgICBwaGFzZUVyci5raW5kID09PSBcInVzZV9pbl9zZXR1cFwiIHx8XG4gICAgICAgICAgcGhhc2VFcnIua2luZCA9PT0gXCJsaWZlY3ljbGVfaW5fc2V0dXBcIlxuICAgICAgICAgICAgPyBcInNldHVwIFx1NkJCNVx1Nzk4MVx1NkI2Mlx1OEJGQlx1NTNENiBFbnYvU2VydmljZSBcdTYyMTZcdTYyNjdcdTg4NENcdTk1N0ZcdTc1MUZcdTU0N0RcdTU0NjhcdTY3MUZcdTkwM0JcdThGOTFcdUZGMENcdThCRjdcdTVDMDZcdTc2RjhcdTUxNzNcdThDMDNcdTc1MjhcdTc5RkJcdTUyQThcdTUyMzAgcnVuIFx1NkJCNVx1MzAwMlwiXG4gICAgICAgICAgICA6IFwiXHU4QzAzXHU2NTc0XHU5MDNCXHU4RjkxXHU1MjMwIHJ1biBcdTZCQjVcdUZGMENzZXR1cCBcdTRFQzVcdTUwNUFcdTZDRThcdTUxOENcdTdDN0JcdTY0Q0RcdTRGNUNcdTMwMDJcIlxuXG4gICAgICAgIHlpZWxkKiBEZWJ1Zy5yZWNvcmQoe1xuICAgICAgICAgIHR5cGU6IFwiZGlhZ25vc3RpY1wiLFxuICAgICAgICAgIG1vZHVsZUlkOiBwaGFzZUVyci5tb2R1bGVJZCA/PyBtb2R1bGVJZCxcbiAgICAgICAgICBjb2RlOiBcImxvZ2ljOjppbnZhbGlkX3BoYXNlXCIsXG4gICAgICAgICAgc2V2ZXJpdHk6IFwiZXJyb3JcIixcbiAgICAgICAgICBtZXNzYWdlOiBgJHtwaGFzZUVyci5hcGkgPz8gcGhhc2VFcnIua2luZH0gaXMgbm90IGFsbG93ZWQgaW4gJHtwaGFzZUVyci5waGFzZX0gcGhhc2UuYCxcbiAgICAgICAgICBoaW50LFxuICAgICAgICAgIGtpbmQ6IHBoYXNlRXJyLmtpbmQsXG4gICAgICAgIH0pXG5cbiAgICAgICAgLy8gXHU1NDdEXHU0RTJEXHU5OTk2XHU0RTJBIExvZ2ljUGhhc2VFcnJvciBcdTUzNzNcdTUzRUZcdThGRDRcdTU2REVcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgfVxuICB9KVxuIiwgImltcG9ydCB7IENvbnRleHQsIEVmZmVjdCwgRmliZXJSZWYsIE9wdGlvbiwgU2NoZW1hLCBTdHJlYW0sIFN1YnNjcmlwdGlvblJlZiB9IGZyb20gXCJlZmZlY3RcIlxuaW1wb3J0IHsgY3JlYXRlIH0gZnJvbSBcIm11dGF0aXZlXCJcbmltcG9ydCB0eXBlICogYXMgTG9naXggZnJvbSBcIi4vY29yZS9tb2R1bGUuanNcIlxuaW1wb3J0ICogYXMgTG9naWMgZnJvbSBcIi4vY29yZS9Mb2dpY01pZGRsZXdhcmUuanNcIlxuaW1wb3J0ICogYXMgVGFza1J1bm5lciBmcm9tIFwiLi9jb3JlL1Rhc2tSdW5uZXIuanNcIlxuaW1wb3J0ICogYXMgRmxvd1J1bnRpbWUgZnJvbSBcIi4vRmxvd1J1bnRpbWUuanNcIlxuaW1wb3J0ICogYXMgTWF0Y2hCdWlsZGVyIGZyb20gXCIuL2NvcmUvTWF0Y2hCdWlsZGVyLmpzXCJcbmltcG9ydCAqIGFzIFBsYXRmb3JtIGZyb20gXCIuL2NvcmUvUGxhdGZvcm0uanNcIlxuaW1wb3J0ICogYXMgTGlmZWN5Y2xlIGZyb20gXCIuL0xpZmVjeWNsZS5qc1wiXG5pbXBvcnQgKiBhcyBMb2dpY0RpYWdub3N0aWNzIGZyb20gXCIuL2NvcmUvTG9naWNEaWFnbm9zdGljcy5qc1wiXG5pbXBvcnQgeyBpc0RldkVudiB9IGZyb20gXCIuL2NvcmUvZW52LmpzXCJcbmltcG9ydCB0eXBlIHtcbiAgQW55TW9kdWxlU2hhcGUsXG4gIE1vZHVsZVJ1bnRpbWUsXG4gIFN0YXRlT2YsXG4gIEFjdGlvbk9mLFxufSBmcm9tIFwiLi9jb3JlL21vZHVsZS5qc1wiXG5pbXBvcnQgdHlwZSB7IFNjb3BlZFZhbGlkYXRlUmVxdWVzdCB9IGZyb20gXCIuLi9zdGF0ZS10cmFpdC92YWxpZGF0ZS5qc1wiXG5cbmV4cG9ydCBjb25zdCBnbG9iYWxMb2dpY1BoYXNlUmVmOiB7IGN1cnJlbnQ6IFwic2V0dXBcIiB8IFwicnVuXCIgfSA9IHtcbiAgY3VycmVudDogXCJydW5cIixcbn1cblxuLy8gXHU2NzJDXHU1NzMwXHU2Nzg0XHU5MDIwIEludGVudEJ1aWxkZXIgXHU1REU1XHU1MzgyXHVGRjBDXHU3QjQ5XHU0RUY3XHU0RThFXHU1MzlGIGludGVybmFsL2RzbC9Mb2dpY0J1aWxkZXIubWFrZUludGVudEJ1aWxkZXJGYWN0b3J5XG5jb25zdCBMb2dpY0J1aWxkZXJGYWN0b3J5ID0gPFNoIGV4dGVuZHMgQW55TW9kdWxlU2hhcGUsIFIgPSBuZXZlcj4oXG4gIHJ1bnRpbWU6IE1vZHVsZVJ1bnRpbWU8U3RhdGVPZjxTaD4sIEFjdGlvbk9mPFNoPj5cbikgPT4ge1xuICBjb25zdCBmbG93QXBpID0gRmxvd1J1bnRpbWUubWFrZTxTaCwgUj4ocnVudGltZSlcblxuICByZXR1cm4gPFQ+KFxuICAgIHN0cmVhbTogU3RyZWFtLlN0cmVhbTxUPixcbiAgICB0cmlnZ2VyTmFtZT86IHN0cmluZyxcbiAgKTogTG9naWMuSW50ZW50QnVpbGRlcjxULCBTaCwgUj4gPT4ge1xuICAgIGNvbnN0IHJ1bldpdGhTdGF0ZVRyYW5zYWN0aW9uOiBUYXNrUnVubmVyLlRhc2tSdW5uZXJSdW50aW1lW1wicnVuV2l0aFN0YXRlVHJhbnNhY3Rpb25cIl0gPSAoXG4gICAgICBvcmlnaW4sXG4gICAgICBib2R5LFxuICAgICkgPT4ge1xuICAgICAgY29uc3QgYW55UnVudGltZSA9IHJ1bnRpbWUgYXMgYW55XG4gICAgICBjb25zdCBmbjpcbiAgICAgICAgfCAoKFxuICAgICAgICAgIG86IHtcbiAgICAgICAgICAgIHJlYWRvbmx5IGtpbmQ6IHN0cmluZ1xuICAgICAgICAgICAgcmVhZG9ubHkgbmFtZT86IHN0cmluZ1xuICAgICAgICAgICAgcmVhZG9ubHkgZGV0YWlscz86IHVua25vd25cbiAgICAgICAgICB9LFxuICAgICAgICAgIGI6ICgpID0+IEVmZmVjdC5FZmZlY3Q8dm9pZCwgbmV2ZXIsIGFueT4sXG4gICAgICAgICkgPT4gRWZmZWN0LkVmZmVjdDx2b2lkLCBuZXZlciwgYW55PilcbiAgICAgICAgfCB1bmRlZmluZWQgPSBhbnlSdW50aW1lICYmIGFueVJ1bnRpbWUuX19ydW5XaXRoU3RhdGVUcmFuc2FjdGlvblxuICAgICAgcmV0dXJuIGZuID8gZm4ob3JpZ2luLCBib2R5KSA6IGJvZHkoKVxuICAgIH1cblxuICAgIGNvbnN0IHRhc2tSdW5uZXJSdW50aW1lOiBUYXNrUnVubmVyLlRhc2tSdW5uZXJSdW50aW1lID0ge1xuICAgICAgbW9kdWxlSWQ6IChydW50aW1lIGFzIGFueSk/Lm1vZHVsZUlkLFxuICAgICAgcnVuV2l0aFN0YXRlVHJhbnNhY3Rpb24sXG4gICAgfVxuXG4gICAgY29uc3QgYnVpbGRlciA9IHtcbiAgICAgIGRlYm91bmNlOiAobXM6IG51bWJlcikgPT5cbiAgICAgICAgTG9naWNCdWlsZGVyRmFjdG9yeTxTaCwgUj4ocnVudGltZSkoXG4gICAgICAgICAgZmxvd0FwaS5kZWJvdW5jZTxUPihtcykoc3RyZWFtKSxcbiAgICAgICAgICB0cmlnZ2VyTmFtZSxcbiAgICAgICAgKSxcbiAgICAgIHRocm90dGxlOiAobXM6IG51bWJlcikgPT5cbiAgICAgICAgTG9naWNCdWlsZGVyRmFjdG9yeTxTaCwgUj4ocnVudGltZSkoXG4gICAgICAgICAgZmxvd0FwaS50aHJvdHRsZTxUPihtcykoc3RyZWFtKSxcbiAgICAgICAgICB0cmlnZ2VyTmFtZSxcbiAgICAgICAgKSxcbiAgICAgIGZpbHRlcjogKHByZWRpY2F0ZTogKHZhbHVlOiBUKSA9PiBib29sZWFuKSA9PlxuICAgICAgICBMb2dpY0J1aWxkZXJGYWN0b3J5PFNoLCBSPihydW50aW1lKShcbiAgICAgICAgICBmbG93QXBpLmZpbHRlcihwcmVkaWNhdGUpKHN0cmVhbSksXG4gICAgICAgICAgdHJpZ2dlck5hbWUsXG4gICAgICAgICksXG4gICAgICBtYXA6IDxVPihmOiAodmFsdWU6IFQpID0+IFUpID0+XG4gICAgICAgIExvZ2ljQnVpbGRlckZhY3Rvcnk8U2gsIFI+KHJ1bnRpbWUpKFxuICAgICAgICAgIHN0cmVhbS5waXBlKFN0cmVhbS5tYXAoZikpLFxuICAgICAgICAgIHRyaWdnZXJOYW1lLFxuICAgICAgICApLFxuICAgICAgcnVuPEEgPSB2b2lkLCBFID0gbmV2ZXIsIFIyID0gdW5rbm93bj4oXG4gICAgICAgIGVmZjpcbiAgICAgICAgICB8IExvZ2ljLk9mPFNoLCBSICYgUjIsIEEsIEU+XG4gICAgICAgICAgfCAoKHA6IFQpID0+IExvZ2ljLk9mPFNoLCBSICYgUjIsIEEsIEU+KSxcbiAgICAgICAgb3B0aW9ucz86IExvZ2ljLk9wZXJhdGlvbk9wdGlvbnMsXG4gICAgICApOiBMb2dpYy5PZjxTaCwgUiAmIFIyLCB2b2lkLCBFPiB7XG4gICAgICAgIHJldHVybiBmbG93QXBpLnJ1bjxULCBBLCBFLCBSMj4oZWZmLCBvcHRpb25zKShzdHJlYW0pXG4gICAgICB9LFxuICAgICAgcnVuTGF0ZXN0PEEgPSB2b2lkLCBFID0gbmV2ZXIsIFIyID0gdW5rbm93bj4oXG4gICAgICAgIGVmZjpcbiAgICAgICAgICB8IExvZ2ljLk9mPFNoLCBSICYgUjIsIEEsIEU+XG4gICAgICAgICAgfCAoKHA6IFQpID0+IExvZ2ljLk9mPFNoLCBSICYgUjIsIEEsIEU+KSxcbiAgICAgICAgb3B0aW9ucz86IExvZ2ljLk9wZXJhdGlvbk9wdGlvbnMsXG4gICAgICApOiBMb2dpYy5PZjxTaCwgUiAmIFIyLCB2b2lkLCBFPiB7XG4gICAgICAgIHJldHVybiBmbG93QXBpLnJ1bkxhdGVzdDxULCBBLCBFLCBSMj4oZWZmLCBvcHRpb25zKShzdHJlYW0pXG4gICAgICB9LFxuICAgICAgcnVuRXhoYXVzdDxBID0gdm9pZCwgRSA9IG5ldmVyLCBSMiA9IHVua25vd24+KFxuICAgICAgICBlZmY6XG4gICAgICAgICAgfCBMb2dpYy5PZjxTaCwgUiAmIFIyLCBBLCBFPlxuICAgICAgICAgIHwgKChwOiBUKSA9PiBMb2dpYy5PZjxTaCwgUiAmIFIyLCBBLCBFPiksXG4gICAgICAgIG9wdGlvbnM/OiBMb2dpYy5PcGVyYXRpb25PcHRpb25zLFxuICAgICAgKTogTG9naWMuT2Y8U2gsIFIgJiBSMiwgdm9pZCwgRT4ge1xuICAgICAgICByZXR1cm4gZmxvd0FwaS5ydW5FeGhhdXN0PFQsIEEsIEUsIFIyPihlZmYsIG9wdGlvbnMpKHN0cmVhbSlcbiAgICAgIH0sXG4gICAgICBydW5QYXJhbGxlbDxBID0gdm9pZCwgRSA9IG5ldmVyLCBSMiA9IHVua25vd24+KFxuICAgICAgICBlZmY6XG4gICAgICAgICAgfCBMb2dpYy5PZjxTaCwgUiAmIFIyLCBBLCBFPlxuICAgICAgICAgIHwgKChwOiBUKSA9PiBMb2dpYy5PZjxTaCwgUiAmIFIyLCBBLCBFPiksXG4gICAgICAgIG9wdGlvbnM/OiBMb2dpYy5PcGVyYXRpb25PcHRpb25zLFxuICAgICAgKTogTG9naWMuT2Y8U2gsIFIgJiBSMiwgdm9pZCwgRT4ge1xuICAgICAgICByZXR1cm4gZmxvd0FwaS5ydW5QYXJhbGxlbDxULCBBLCBFLCBSMj4oZWZmLCBvcHRpb25zKShzdHJlYW0pXG4gICAgICB9LFxuICAgICAgcnVuRm9yazogPEEgPSB2b2lkLCBFID0gbmV2ZXIsIFIyID0gdW5rbm93bj4oXG4gICAgICAgIGVmZjpcbiAgICAgICAgICB8IExvZ2ljLk9mPFNoLCBSICYgUjIsIEEsIEU+XG4gICAgICAgICAgfCAoKHA6IFQpID0+IExvZ2ljLk9mPFNoLCBSICYgUjIsIEEsIEU+KVxuICAgICAgKTogTG9naWMuT2Y8U2gsIFIgJiBSMiwgdm9pZCwgRT4gPT5cbiAgICAgICAgRWZmZWN0LmZvcmtTY29wZWQoZmxvd0FwaS5ydW48VCwgQSwgRSwgUjI+KGVmZikoc3RyZWFtKSkucGlwZShcbiAgICAgICAgICBFZmZlY3QuYXNWb2lkLFxuICAgICAgICApIGFzIExvZ2ljLk9mPFNoLCBSICYgUjIsIHZvaWQsIEU+LFxuICAgICAgcnVuUGFyYWxsZWxGb3JrOiA8QSA9IHZvaWQsIEUgPSBuZXZlciwgUjIgPSB1bmtub3duPihcbiAgICAgICAgZWZmOlxuICAgICAgICAgIHwgTG9naWMuT2Y8U2gsIFIgJiBSMiwgQSwgRT5cbiAgICAgICAgICB8ICgocDogVCkgPT4gTG9naWMuT2Y8U2gsIFIgJiBSMiwgQSwgRT4pXG4gICAgICApOiBMb2dpYy5PZjxTaCwgUiAmIFIyLCB2b2lkLCBFPiA9PlxuICAgICAgICBFZmZlY3QuZm9ya1Njb3BlZChcbiAgICAgICAgICBmbG93QXBpLnJ1blBhcmFsbGVsPFQsIEEsIEUsIFIyPihlZmYpKHN0cmVhbSksXG4gICAgICAgICkucGlwZShcbiAgICAgICAgICBFZmZlY3QuYXNWb2lkLFxuICAgICAgICApIGFzIExvZ2ljLk9mPFNoLCBSICYgUjIsIHZvaWQsIEU+LFxuICAgICAgcnVuVGFzazogPEEgPSB2b2lkLCBFID0gbmV2ZXIsIFIyID0gdW5rbm93bj4oXG4gICAgICAgIGNvbmZpZzogVGFza1J1bm5lci5UYXNrUnVubmVyQ29uZmlnPFQsIFNoLCBSICYgUjIsIEEsIEU+LFxuICAgICAgKTogTG9naWMuT2Y8U2gsIFIgJiBSMiwgdm9pZCwgbmV2ZXI+ID0+XG4gICAgICAgIFRhc2tSdW5uZXIubWFrZVRhc2tSdW5uZXI8VCwgU2gsIFIgJiBSMiwgQSwgRT4oXG4gICAgICAgICAgc3RyZWFtLFxuICAgICAgICAgIFwidGFza1wiLFxuICAgICAgICAgIHRhc2tSdW5uZXJSdW50aW1lLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIC4uLmNvbmZpZyxcbiAgICAgICAgICAgIHRyaWdnZXJOYW1lOiBjb25maWcudHJpZ2dlck5hbWUgPz8gdHJpZ2dlck5hbWUsXG4gICAgICAgICAgfSxcbiAgICAgICAgKSBhcyBMb2dpYy5PZjxTaCwgUiAmIFIyLCB2b2lkLCBuZXZlcj4sXG4gICAgICBydW5QYXJhbGxlbFRhc2s6IDxBID0gdm9pZCwgRSA9IG5ldmVyLCBSMiA9IHVua25vd24+KFxuICAgICAgICBjb25maWc6IFRhc2tSdW5uZXIuVGFza1J1bm5lckNvbmZpZzxULCBTaCwgUiAmIFIyLCBBLCBFPixcbiAgICAgICk6IExvZ2ljLk9mPFNoLCBSICYgUjIsIHZvaWQsIG5ldmVyPiA9PlxuICAgICAgICBUYXNrUnVubmVyLm1ha2VUYXNrUnVubmVyPFQsIFNoLCBSICYgUjIsIEEsIEU+KFxuICAgICAgICAgIHN0cmVhbSxcbiAgICAgICAgICBcInBhcmFsbGVsXCIsXG4gICAgICAgICAgdGFza1J1bm5lclJ1bnRpbWUsXG4gICAgICAgICAge1xuICAgICAgICAgICAgLi4uY29uZmlnLFxuICAgICAgICAgICAgdHJpZ2dlck5hbWU6IGNvbmZpZy50cmlnZ2VyTmFtZSA/PyB0cmlnZ2VyTmFtZSxcbiAgICAgICAgICB9LFxuICAgICAgICApIGFzIExvZ2ljLk9mPFNoLCBSICYgUjIsIHZvaWQsIG5ldmVyPixcbiAgICAgIHJ1bkxhdGVzdFRhc2s6IDxBID0gdm9pZCwgRSA9IG5ldmVyLCBSMiA9IHVua25vd24+KFxuICAgICAgICBjb25maWc6IFRhc2tSdW5uZXIuVGFza1J1bm5lckNvbmZpZzxULCBTaCwgUiAmIFIyLCBBLCBFPixcbiAgICAgICk6IExvZ2ljLk9mPFNoLCBSICYgUjIsIHZvaWQsIG5ldmVyPiA9PlxuICAgICAgICBUYXNrUnVubmVyLm1ha2VUYXNrUnVubmVyPFQsIFNoLCBSICYgUjIsIEEsIEU+KFxuICAgICAgICAgIHN0cmVhbSxcbiAgICAgICAgICBcImxhdGVzdFwiLFxuICAgICAgICAgIHRhc2tSdW5uZXJSdW50aW1lLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIC4uLmNvbmZpZyxcbiAgICAgICAgICAgIHRyaWdnZXJOYW1lOiBjb25maWcudHJpZ2dlck5hbWUgPz8gdHJpZ2dlck5hbWUsXG4gICAgICAgICAgfSxcbiAgICAgICAgKSBhcyBMb2dpYy5PZjxTaCwgUiAmIFIyLCB2b2lkLCBuZXZlcj4sXG4gICAgICBydW5FeGhhdXN0VGFzazogPEEgPSB2b2lkLCBFID0gbmV2ZXIsIFIyID0gdW5rbm93bj4oXG4gICAgICAgIGNvbmZpZzogVGFza1J1bm5lci5UYXNrUnVubmVyQ29uZmlnPFQsIFNoLCBSICYgUjIsIEEsIEU+LFxuICAgICAgKTogTG9naWMuT2Y8U2gsIFIgJiBSMiwgdm9pZCwgbmV2ZXI+ID0+XG4gICAgICAgIFRhc2tSdW5uZXIubWFrZVRhc2tSdW5uZXI8VCwgU2gsIFIgJiBSMiwgQSwgRT4oXG4gICAgICAgICAgc3RyZWFtLFxuICAgICAgICAgIFwiZXhoYXVzdFwiLFxuICAgICAgICAgIHRhc2tSdW5uZXJSdW50aW1lLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIC4uLmNvbmZpZyxcbiAgICAgICAgICAgIHRyaWdnZXJOYW1lOiBjb25maWcudHJpZ2dlck5hbWUgPz8gdHJpZ2dlck5hbWUsXG4gICAgICAgICAgfSxcbiAgICAgICAgKSBhcyBMb2dpYy5PZjxTaCwgUiAmIFIyLCB2b2lkLCBuZXZlcj4sXG4gICAgICB0b1N0cmVhbTogKCkgPT4gc3RyZWFtLFxuICAgICAgdXBkYXRlOiAoXG4gICAgICAgIHJlZHVjZXI6IChcbiAgICAgICAgICBwcmV2OiBTdGF0ZU9mPFNoPixcbiAgICAgICAgICBwYXlsb2FkOiBUXG4gICAgICAgICkgPT5cbiAgICAgICAgICB8IFN0YXRlT2Y8U2g+XG4gICAgICAgICAgfCBFZmZlY3QuRWZmZWN0PFN0YXRlT2Y8U2g+LCBhbnksIGFueT5cbiAgICAgICk6IExvZ2ljLk9mPFNoLCBSLCB2b2lkLCBuZXZlcj4gPT5cbiAgICAgICAgU3RyZWFtLnJ1bkZvckVhY2goc3RyZWFtLCAocGF5bG9hZCkgPT5cbiAgICAgICAgICB0YXNrUnVubmVyUnVudGltZS5ydW5XaXRoU3RhdGVUcmFuc2FjdGlvbihcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAga2luZDogXCJ3YXRjaGVyOnVwZGF0ZVwiLFxuICAgICAgICAgICAgICBuYW1lOiB0cmlnZ2VyTmFtZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAoKSA9PlxuICAgICAgICAgICAgICBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJldiA9ICh5aWVsZCogcnVudGltZS5nZXRTdGF0ZSkgYXMgU3RhdGVPZjxTaD5cbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0ID0gcmVkdWNlcihwcmV2LCBwYXlsb2FkKVxuICAgICAgICAgICAgICAgIGlmIChFZmZlY3QuaXNFZmZlY3QobmV4dCkpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXQgPSB5aWVsZCogRWZmZWN0LmV4aXQoXG4gICAgICAgICAgICAgICAgICAgIG5leHQgYXMgRWZmZWN0LkVmZmVjdDxTdGF0ZU9mPFNoPiwgYW55LCBhbnk+LFxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgaWYgKGV4aXQuX3RhZyA9PT0gXCJGYWlsdXJlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dFcnJvcihcIkZsb3cgZXJyb3JcIiwgZXhpdC5jYXVzZSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB5aWVsZCogcnVudGltZS5zZXRTdGF0ZShleGl0LnZhbHVlIGFzIFN0YXRlT2Y8U2g+KVxuICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHlpZWxkKiBydW50aW1lLnNldFN0YXRlKG5leHQgYXMgU3RhdGVPZjxTaD4pXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgIClcbiAgICAgICAgKS5waXBlKFxuICAgICAgICAgIEVmZmVjdC5jYXRjaEFsbENhdXNlKChjYXVzZSkgPT5cbiAgICAgICAgICAgIEVmZmVjdC5sb2dFcnJvcihcIkZsb3cgZXJyb3JcIiwgY2F1c2UpXG4gICAgICAgICAgKVxuICAgICAgICApIGFzIExvZ2ljLk9mPFNoLCBSLCB2b2lkLCBuZXZlcj4sXG4gICAgICBtdXRhdGU6IChcbiAgICAgICAgcmVkdWNlcjogKGRyYWZ0OiBMb2dpYy5EcmFmdDxTdGF0ZU9mPFNoPj4sIHBheWxvYWQ6IFQpID0+IHZvaWRcbiAgICAgICk6IExvZ2ljLk9mPFNoLCBSLCB2b2lkLCBuZXZlcj4gPT5cbiAgICAgICAgU3RyZWFtLnJ1bkZvckVhY2goc3RyZWFtLCAocGF5bG9hZCkgPT5cbiAgICAgICAgICB0YXNrUnVubmVyUnVudGltZS5ydW5XaXRoU3RhdGVUcmFuc2FjdGlvbihcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAga2luZDogXCJ3YXRjaGVyOm11dGF0ZVwiLFxuICAgICAgICAgICAgICBuYW1lOiB0cmlnZ2VyTmFtZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAoKSA9PlxuICAgICAgICAgICAgICBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJldiA9ICh5aWVsZCogcnVudGltZS5nZXRTdGF0ZSkgYXMgU3RhdGVPZjxTaD5cbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0ID0gY3JlYXRlKHByZXYgYXMgU3RhdGVPZjxTaD4sIChkcmFmdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmVkdWNlcihkcmFmdCBhcyBMb2dpYy5EcmFmdDxTdGF0ZU9mPFNoPj4sIHBheWxvYWQpXG4gICAgICAgICAgICAgICAgfSkgYXMgU3RhdGVPZjxTaD5cbiAgICAgICAgICAgICAgICB5aWVsZCogcnVudGltZS5zZXRTdGF0ZShuZXh0KVxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICApXG4gICAgICAgICkucGlwZShcbiAgICAgICAgICBFZmZlY3QuY2F0Y2hBbGxDYXVzZSgoY2F1c2UpID0+XG4gICAgICAgICAgICBFZmZlY3QubG9nRXJyb3IoXCJGbG93IGVycm9yXCIsIGNhdXNlKVxuICAgICAgICAgIClcbiAgICAgICAgKSBhcyBMb2dpYy5PZjxTaCwgUiwgdm9pZCwgbmV2ZXI+LFxuICAgIH0gYXMgT21pdDxMb2dpYy5JbnRlbnRCdWlsZGVyPFQsIFNoLCBSPiwgXCJwaXBlXCIgfCBcImFuZFRoZW5cIj5cblxuICAgIGNvbnN0IGFuZFRoZW46IExvZ2ljLkludGVudEJ1aWxkZXI8VCwgU2gsIFI+W1wiYW5kVGhlblwiXSA9IChcbiAgICAgIGhhbmRsZXJPckVmZjogYW55LFxuICAgICk6IGFueSA9PiB7XG4gICAgICBpZiAodHlwZW9mIGhhbmRsZXJPckVmZiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGlmIChoYW5kbGVyT3JFZmYubGVuZ3RoID49IDIpIHtcbiAgICAgICAgICByZXR1cm4gKGJ1aWxkZXIgYXMgYW55KS51cGRhdGUoaGFuZGxlck9yRWZmKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoYnVpbGRlciBhcyBhbnkpLnJ1bihoYW5kbGVyT3JFZmYpXG4gICAgICB9XG4gICAgICByZXR1cm4gKGJ1aWxkZXIgYXMgYW55KS5ydW4oaGFuZGxlck9yRWZmKVxuICAgIH1cblxuICAgIGNvbnN0IHBpcGU6IExvZ2ljLkludGVudEJ1aWxkZXI8VCwgU2gsIFI+W1wicGlwZVwiXSA9IGZ1bmN0aW9uICh0aGlzOiB1bmtub3duKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLXJlc3QtcGFyYW1zXG4gICAgICBjb25zdCBmbnMgPSBhcmd1bWVudHMgYXMgdW5rbm93biBhcyBSZWFkb25seUFycmF5PFxuICAgICAgICAoc2VsZjogTG9naWMuSW50ZW50QnVpbGRlcjxULCBTaCwgUj4pID0+IExvZ2ljLkludGVudEJ1aWxkZXI8VCwgU2gsIFI+XG4gICAgICA+XG4gICAgICBsZXQgYWNjOiBMb2dpYy5JbnRlbnRCdWlsZGVyPFQsIFNoLCBSPiA9IGJ1aWxkZXIgYXMgTG9naWMuSW50ZW50QnVpbGRlcjxcbiAgICAgICAgVCxcbiAgICAgICAgU2gsXG4gICAgICAgIFJcbiAgICAgID5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZm5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGFjYyA9IGZuc1tpXShhY2MpXG4gICAgICB9XG4gICAgICByZXR1cm4gYWNjXG4gICAgfVxuXG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oYnVpbGRlciwgeyBwaXBlLCBhbmRUaGVuIH0pIGFzIExvZ2ljLkludGVudEJ1aWxkZXI8XG4gICAgICBULFxuICAgICAgU2gsXG4gICAgICBSXG4gICAgPlxuICB9XG59XG5pbXBvcnQgdHlwZSB7IEJvdW5kQXBpIH0gZnJvbSBcIi4vY29yZS9tb2R1bGUuanNcIlxuaW1wb3J0IHR5cGUgeyBTdGF0ZVRyYWl0UHJvZ3JhbSB9IGZyb20gXCIuLi9zdGF0ZS10cmFpdC9tb2RlbC5qc1wiXG5pbXBvcnQgdHlwZSB7IFJvd0lkU3RvcmUgfSBmcm9tIFwiLi4vc3RhdGUtdHJhaXQvcm93aWQuanNcIlxuXG4vKipcbiAqIEJvdW5kQXBpIFx1NUI5RVx1NzNCMFx1RkYxQVx1NEUzQVx1NjdEMFx1NEUwMFx1N0M3QiBTdG9yZSBTaGFwZSArIFJ1bnRpbWUgXHU1MjFCXHU1RUZBXHU5ODg0XHU3RUQxXHU1QjlBXHU3Njg0IGAkYFx1MzAwMlxuICpcbiAqIFx1OEJGNFx1NjYwRVx1RkYxQVx1N0M3Qlx1NTc4Qlx1NEUwRVx1NTE2NVx1NTNFM1x1N0I3RVx1NTQwRFx1NTcyOCBhcGkvQm91bmRBcGkudHMgXHU0RTJEXHU1OEYwXHU2NjBFXHVGRjBDXHU4RkQ5XHU5MUNDXHU1M0VBXHU2MjdGXHU4RjdEXHU1MTc3XHU0RjUzXHU1QjlFXHU3M0IwXHUzMDAyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYWtlPFNoIGV4dGVuZHMgTG9naXguQW55TW9kdWxlU2hhcGUsIFIgPSBuZXZlcj4oXG4gIHNoYXBlOiBTaCxcbiAgcnVudGltZTogTG9naXguTW9kdWxlUnVudGltZTxMb2dpeC5TdGF0ZU9mPFNoPiwgTG9naXguQWN0aW9uT2Y8U2g+PixcbiAgb3B0aW9ucz86IHtcbiAgICByZWFkb25seSBnZXRQaGFzZT86ICgpID0+IFwic2V0dXBcIiB8IFwicnVuXCJcbiAgICByZWFkb25seSBwaGFzZVNlcnZpY2U/OiBMb2dpY0RpYWdub3N0aWNzLkxvZ2ljUGhhc2VTZXJ2aWNlXG4gICAgcmVhZG9ubHkgbW9kdWxlSWQ/OiBzdHJpbmdcbiAgfVxuICApOiBCb3VuZEFwaTxTaCwgUj4ge1xuICBjb25zdCBnZXRQaGFzZSA9IG9wdGlvbnM/LmdldFBoYXNlID8/ICgoKSA9PiBnbG9iYWxMb2dpY1BoYXNlUmVmLmN1cnJlbnQpXG4gIGNvbnN0IGd1YXJkUnVuT25seSA9IChraW5kOiBzdHJpbmcsIGFwaTogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgcGhhc2VTZXJ2aWNlID0gb3B0aW9ucz8ucGhhc2VTZXJ2aWNlXG4gICAgY29uc3QgcGhhc2UgPVxuICAgICAgcGhhc2VTZXJ2aWNlPy5jdXJyZW50ID8/XG4gICAgICAoZ2xvYmFsTG9naWNQaGFzZVJlZi5jdXJyZW50ID09PSBcInNldHVwXCJcbiAgICAgICAgPyBcInNldHVwXCJcbiAgICAgICAgOiBnZXRQaGFzZSgpKVxuICAgIGlmIChwaGFzZSA9PT0gXCJzZXR1cFwiKSB7XG4gICAgICB0aHJvdyBMb2dpY0RpYWdub3N0aWNzLm1ha2VMb2dpY1BoYXNlRXJyb3IoXG4gICAgICAgIGtpbmQsXG4gICAgICAgIGFwaSxcbiAgICAgICAgXCJzZXR1cFwiLFxuICAgICAgICBvcHRpb25zPy5tb2R1bGVJZFxuICAgICAgKVxuICAgIH1cbiAgfVxuICBjb25zdCBmbG93QXBpID0gRmxvd1J1bnRpbWUubWFrZTxTaCwgUj4ocnVudGltZSlcblxuICBjb25zdCBtYWtlSW50ZW50QnVpbGRlciA9IChydW50aW1lXzogTG9naXguTW9kdWxlUnVudGltZTxhbnksIGFueT4pID0+XG4gICAgTG9naWNCdWlsZGVyRmFjdG9yeTxTaCwgUj4ocnVudGltZV8pXG4gIGNvbnN0IHdpdGhMaWZlY3ljbGUgPSA8QT4oXG4gICAgYXZhaWxhYmxlOiAoXG4gICAgICBtYW5hZ2VyOiBMaWZlY3ljbGUuTGlmZWN5Y2xlTWFuYWdlclxuICAgICkgPT4gRWZmZWN0LkVmZmVjdDxBLCBuZXZlciwgYW55PixcbiAgICBtaXNzaW5nOiAoKSA9PiBFZmZlY3QuRWZmZWN0PEEsIG5ldmVyLCBhbnk+XG4gICkgPT5cbiAgICBFZmZlY3Quc2VydmljZU9wdGlvbihMaWZlY3ljbGUuTGlmZWN5Y2xlQ29udGV4dCkucGlwZShcbiAgICAgIEVmZmVjdC5mbGF0TWFwKChtYXliZSkgPT5cbiAgICAgICAgT3B0aW9uLm1hdGNoKG1heWJlLCB7XG4gICAgICAgICAgb25Tb21lOiBhdmFpbGFibGUsXG4gICAgICAgICAgb25Ob25lOiBtaXNzaW5nLFxuICAgICAgICB9KVxuICAgICAgKVxuICAgIClcbiAgY29uc3Qgd2l0aFBsYXRmb3JtID0gKFxuICAgIGludm9rZTogKHBsYXRmb3JtOiBQbGF0Zm9ybS5TZXJ2aWNlKSA9PiBFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBhbnk+XG4gICkgPT5cbiAgICBFZmZlY3Quc2VydmljZU9wdGlvbihQbGF0Zm9ybS5UYWcpLnBpcGUoXG4gICAgICBFZmZlY3QuZmxhdE1hcCgobWF5YmUpID0+XG4gICAgICAgIE9wdGlvbi5tYXRjaChtYXliZSwge1xuICAgICAgICAgIG9uU29tZTogaW52b2tlLFxuICAgICAgICAgIG9uTm9uZTogKCkgPT4gRWZmZWN0LnZvaWQsXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgKVxuICBjb25zdCBjcmVhdGVJbnRlbnRCdWlsZGVyID0gPFQ+KFxuICAgIHN0cmVhbTogU3RyZWFtLlN0cmVhbTxUPixcbiAgICB0cmlnZ2VyTmFtZT86IHN0cmluZyxcbiAgKSA9PiBtYWtlSW50ZW50QnVpbGRlcihydW50aW1lKShzdHJlYW0sIHRyaWdnZXJOYW1lKVxuXG4gIC8qKlxuICAgKiBzdHJpY3RcdUZGMUFcdTUzRUFcdTRFQ0VcdTIwMUNcdTVGNTNcdTUyNEQgRWZmZWN0IEVudlx1MjAxRFx1ODlFM1x1Njc5MFx1NjdEMFx1NEUyQSBNb2R1bGUgXHU3Njg0IFJ1bnRpbWVcdTMwMDJcbiAgICpcbiAgICogXHU4QkY0XHU2NjBFXHVGRjFBXG4gICAqIC0gXHU1OTFBIHJvb3QgLyBcdTU5MUFcdTVCOUVcdTRGOEJcdTU3M0FcdTY2NkZcdTRFMEJcdUZGMENcdTRFRkJcdTRGNTVcdThGREJcdTdBMEJcdTdFQTcgcmVnaXN0cnkgXHU5MEZEXHU2NUUwXHU2Q0Q1XHU4ODY4XHU4RkJFXHU2QjYzXHU3ODZFXHU4QkVEXHU0RTQ5XHVGRjFCXG4gICAqIC0gXHU3RjNBXHU1OTMxXHU2M0QwXHU0RjlCXHU4MDA1XHU1QzVFXHU0RThFXHU4OEM1XHU5MTREXHU5NTE5XHU4QkVGXHVGRjFBXHU1RkM1XHU5ODdCXHU3QTMzXHU1QjlBXHU1OTMxXHU4RDI1XHVGRjBDXHU1RTc2XHU3RUQ5XHU1MUZBXHU1M0VGXHU0RkVFXHU1OTBEXHU3Njg0XHU2M0QwXHU3OTNBXHVGRjA4ZGV2L3Rlc3QgXHU0RTBCXHU2NkY0XHU4QkU2XHU3RUM2XHVGRjA5XHUzMDAyXG4gICAqL1xuICBjb25zdCByZXNvbHZlTW9kdWxlUnVudGltZSA9IChcbiAgICB0YWc6IENvbnRleHQuVGFnPGFueSwgTG9naXguTW9kdWxlUnVudGltZTxhbnksIGFueT4+XG4gICk6IEVmZmVjdC5FZmZlY3Q8TG9naXguTW9kdWxlUnVudGltZTxhbnksIGFueT4sIG5ldmVyLCBhbnk+ID0+XG4gICAgRWZmZWN0LmdlbihmdW5jdGlvbiogKCkge1xuICAgICAgY29uc3QgcmVxdWVzdGVkTW9kdWxlSWQgPVxuICAgICAgICB0eXBlb2YgKHRhZyBhcyBhbnkpPy5pZCA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgID8gKCh0YWcgYXMgYW55KS5pZCBhcyBzdHJpbmcpXG4gICAgICAgICAgOiB1bmRlZmluZWRcbiAgICAgIGNvbnN0IGZyb21Nb2R1bGVJZCA9XG4gICAgICAgIHR5cGVvZiBvcHRpb25zPy5tb2R1bGVJZCA9PT0gXCJzdHJpbmdcIiA/IG9wdGlvbnMubW9kdWxlSWQgOiB1bmRlZmluZWRcblxuICAgICAgLy8gMSkgXHU0RjE4XHU1MTQ4XHU1QzFEXHU4QkQ1XHU0RUNFXHU1RjUzXHU1MjREIENvbnRleHQgXHU0RTJEXHU4QkZCXHU1M0Q2XG4gICAgICBjb25zdCBmcm9tRW52ID0geWllbGQqIEVmZmVjdC5zZXJ2aWNlT3B0aW9uKHRhZylcbiAgICAgIGlmIChPcHRpb24uaXNTb21lKGZyb21FbnYpKSB7XG4gICAgICAgIHJldHVybiBmcm9tRW52LnZhbHVlXG4gICAgICB9XG5cbiAgICAgIC8vIDIpIFx1NjVFMFx1NkNENVx1NjI3RVx1NTIzMFx1NjVGNlx1NzZGNFx1NjNBNSBkaWUgXHUyMDE0XHUyMDE0IFx1OEZEOVx1NjYyRlx1OTE0RFx1N0Y2RVx1OTUxOVx1OEJFRlx1RkYwQ1x1NjNEMFx1NzkzQVx1OEMwM1x1NzUyOFx1NjVCOVx1NEZFRVx1NkI2M1x1ODhDNVx1OTE0RFx1NjVCOVx1NUYwRlxuICAgICAgY29uc3QgdG9rZW5JZCA9IHJlcXVlc3RlZE1vZHVsZUlkID8/IFwiPHVua25vd24gbW9kdWxlIGlkPlwiXG4gICAgICBjb25zdCBmaXg6IHN0cmluZ1tdID0gaXNEZXZFbnYoKVxuICAgICAgICA/IFtcbiAgICAgICAgICAgIFwiLSBQcm92aWRlIHRoZSBjaGlsZCBpbXBsZW1lbnRhdGlvbiBpbiB0aGUgc2FtZSBzY29wZSAoaW1wb3J0cykuXCIsXG4gICAgICAgICAgICBgICBFeGFtcGxlOiAke2Zyb21Nb2R1bGVJZCA/PyBcIlBhcmVudE1vZHVsZVwifS5pbXBsZW1lbnQoeyBpbXBvcnRzOiBbJHtyZXF1ZXN0ZWRNb2R1bGVJZCA/PyBcIkNoaWxkTW9kdWxlXCJ9LmltcGxdLCAuLi4gfSlgLFxuICAgICAgICAgICAgXCItIElmIHlvdSBpbnRlbnRpb25hbGx5IHdhbnQgYSByb290IHNpbmdsZXRvbiwgcHJvdmlkZSBpdCBhdCBhcHAgcm9vdCAoUnVudGltZS5tYWtlKC4uLix7IGxheWVyIH0pIC8gcm9vdCBpbXBvcnRzKSxcIixcbiAgICAgICAgICAgIFwiICBhbmQgdXNlIFJvb3QucmVzb2x2ZShNb2R1bGVUYWcpIChpbnN0ZWFkIG9mICQudXNlKSBhdCB0aGUgY2FsbHNpdGUuXCIsXG4gICAgICAgICAgXVxuICAgICAgICA6IFtdXG5cbiAgICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcihcbiAgICAgICAgaXNEZXZFbnYoKVxuICAgICAgICAgID8gW1xuICAgICAgICAgICAgICBcIltNaXNzaW5nTW9kdWxlUnVudGltZUVycm9yXSBDYW5ub3QgcmVzb2x2ZSBNb2R1bGVSdW50aW1lIGZvciBNb2R1bGVUYWcuXCIsXG4gICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgIGB0b2tlbklkOiAke3Rva2VuSWR9YCxcbiAgICAgICAgICAgICAgXCJlbnRyeXBvaW50OiBsb2dpYy4kLnVzZVwiLFxuICAgICAgICAgICAgICBcIm1vZGU6IHN0cmljdFwiLFxuICAgICAgICAgICAgICBgZnJvbTogJHtmcm9tTW9kdWxlSWQgPz8gXCI8dW5rbm93biBtb2R1bGUgaWQ+XCJ9YCxcbiAgICAgICAgICAgICAgYHN0YXJ0U2NvcGU6IG1vZHVsZUlkPSR7ZnJvbU1vZHVsZUlkID8/IFwiPHVua25vd24+XCJ9LCBydW50aW1lSWQ9JHtTdHJpbmcoKHJ1bnRpbWUgYXMgYW55KT8uaWQgPz8gXCI8dW5rbm93bj5cIil9YCxcbiAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgICAgXCJmaXg6XCIsXG4gICAgICAgICAgICAgIC4uLmZpeCxcbiAgICAgICAgICAgIF0uam9pbihcIlxcblwiKVxuICAgICAgICAgIDogXCJbTWlzc2luZ01vZHVsZVJ1bnRpbWVFcnJvcl0gbW9kdWxlIHJ1bnRpbWUgbm90IGZvdW5kXCIsXG4gICAgICApXG5cbiAgICAgIDsoZXJyIGFzIGFueSkudG9rZW5JZCA9IHRva2VuSWRcbiAgICAgIDsoZXJyIGFzIGFueSkuZW50cnlwb2ludCA9IFwibG9naWMuJC51c2VcIlxuICAgICAgOyhlcnIgYXMgYW55KS5tb2RlID0gXCJzdHJpY3RcIlxuICAgICAgOyhlcnIgYXMgYW55KS5mcm9tID0gZnJvbU1vZHVsZUlkXG4gICAgICA7KGVyciBhcyBhbnkpLnN0YXJ0U2NvcGUgPSB7XG4gICAgICAgIG1vZHVsZUlkOiBmcm9tTW9kdWxlSWQsXG4gICAgICAgIHJ1bnRpbWVJZDogU3RyaW5nKChydW50aW1lIGFzIGFueSk/LmlkID8/IFwiPHVua25vd24+XCIpLFxuICAgICAgfVxuICAgICAgOyhlcnIgYXMgYW55KS5maXggPSBmaXhcblxuICAgICAgZXJyLm5hbWUgPSBcIk1pc3NpbmdNb2R1bGVSdW50aW1lRXJyb3JcIlxuICAgICAgcmV0dXJuIHlpZWxkKiBFZmZlY3QuZGllKGVycilcbiAgICB9KVxuXG4gIGNvbnN0IHN0YXRlQXBpOiBCb3VuZEFwaTxTaCwgUj5bXCJzdGF0ZVwiXSA9IHtcbiAgICByZWFkOiBydW50aW1lLmdldFN0YXRlLFxuICAgIHVwZGF0ZTogKGYpID0+XG4gICAgICBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGNvbnN0IGluVHhuID0geWllbGQqIEZpYmVyUmVmLmdldChUYXNrUnVubmVyLmluU3luY1RyYW5zYWN0aW9uRmliZXIpXG4gICAgICAgIGlmIChpblR4bikge1xuICAgICAgICAgIGNvbnN0IHByZXYgPSB5aWVsZCogcnVudGltZS5nZXRTdGF0ZVxuICAgICAgICAgIHJldHVybiB5aWVsZCogcnVudGltZS5zZXRTdGF0ZShmKHByZXYpKVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYW55UnVudGltZSA9IHJ1bnRpbWUgYXMgYW55XG4gICAgICAgIGNvbnN0IHJ1bldpdGhUeG46XG4gICAgICAgICAgfCAoKFxuICAgICAgICAgICAgICBvcmlnaW46IHsgcmVhZG9ubHkga2luZDogc3RyaW5nOyByZWFkb25seSBuYW1lPzogc3RyaW5nOyByZWFkb25seSBkZXRhaWxzPzogdW5rbm93biB9LFxuICAgICAgICAgICAgICBib2R5OiAoKSA9PiBFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBhbnk+LFxuICAgICAgICAgICAgKSA9PiBFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBhbnk+KVxuICAgICAgICAgIHwgdW5kZWZpbmVkID0gYW55UnVudGltZSAmJiBhbnlSdW50aW1lLl9fcnVuV2l0aFN0YXRlVHJhbnNhY3Rpb25cblxuICAgICAgICBjb25zdCBib2R5ID0gKCkgPT5cbiAgICAgICAgICBFZmZlY3QuZmxhdE1hcChydW50aW1lLmdldFN0YXRlLCAocHJldikgPT4gcnVudGltZS5zZXRTdGF0ZShmKHByZXYpKSlcblxuICAgICAgICByZXR1cm4geWllbGQqIChydW5XaXRoVHhuXG4gICAgICAgICAgPyBydW5XaXRoVHhuKHsga2luZDogXCJzdGF0ZVwiLCBuYW1lOiBcInVwZGF0ZVwiIH0sIGJvZHkpXG4gICAgICAgICAgOiBib2R5KCkpXG4gICAgICB9KSxcbiAgICBtdXRhdGU6IChmKSA9PlxuICAgICAgRWZmZWN0LmdlbihmdW5jdGlvbiogKCkge1xuICAgICAgICBjb25zdCBpblR4biA9IHlpZWxkKiBGaWJlclJlZi5nZXQoVGFza1J1bm5lci5pblN5bmNUcmFuc2FjdGlvbkZpYmVyKVxuICAgICAgICBpZiAoaW5UeG4pIHtcbiAgICAgICAgICBjb25zdCBwcmV2ID0geWllbGQqIHJ1bnRpbWUuZ2V0U3RhdGVcbiAgICAgICAgICBjb25zdCBuZXh0ID0gY3JlYXRlKHByZXYgYXMgTG9naXguU3RhdGVPZjxTaD4sIChkcmFmdCkgPT4ge1xuICAgICAgICAgICAgZihkcmFmdCBhcyBMb2dpYy5EcmFmdDxMb2dpeC5TdGF0ZU9mPFNoPj4pXG4gICAgICAgICAgfSkgYXMgTG9naXguU3RhdGVPZjxTaD5cbiAgICAgICAgICByZXR1cm4geWllbGQqIHJ1bnRpbWUuc2V0U3RhdGUobmV4dClcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGFueVJ1bnRpbWUgPSBydW50aW1lIGFzIGFueVxuICAgICAgICBjb25zdCBydW5XaXRoVHhuOlxuICAgICAgICAgIHwgKChcbiAgICAgICAgICAgICAgb3JpZ2luOiB7IHJlYWRvbmx5IGtpbmQ6IHN0cmluZzsgcmVhZG9ubHkgbmFtZT86IHN0cmluZzsgcmVhZG9ubHkgZGV0YWlscz86IHVua25vd24gfSxcbiAgICAgICAgICAgICAgYm9keTogKCkgPT4gRWZmZWN0LkVmZmVjdDx2b2lkLCBuZXZlciwgYW55PixcbiAgICAgICAgICAgICkgPT4gRWZmZWN0LkVmZmVjdDx2b2lkLCBuZXZlciwgYW55PilcbiAgICAgICAgICB8IHVuZGVmaW5lZCA9IGFueVJ1bnRpbWUgJiYgYW55UnVudGltZS5fX3J1bldpdGhTdGF0ZVRyYW5zYWN0aW9uXG5cbiAgICAgICAgY29uc3QgYm9keSA9ICgpID0+XG4gICAgICAgICAgRWZmZWN0LmZsYXRNYXAocnVudGltZS5nZXRTdGF0ZSwgKHByZXYpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5leHQgPSBjcmVhdGUocHJldiBhcyBMb2dpeC5TdGF0ZU9mPFNoPiwgKGRyYWZ0KSA9PiB7XG4gICAgICAgICAgICAgIGYoZHJhZnQgYXMgTG9naWMuRHJhZnQ8TG9naXguU3RhdGVPZjxTaD4+KVxuICAgICAgICAgICAgfSkgYXMgTG9naXguU3RhdGVPZjxTaD5cbiAgICAgICAgICAgIHJldHVybiBydW50aW1lLnNldFN0YXRlKG5leHQpXG4gICAgICAgICAgfSlcblxuICAgICAgICByZXR1cm4geWllbGQqIChydW5XaXRoVHhuXG4gICAgICAgICAgPyBydW5XaXRoVHhuKHsga2luZDogXCJzdGF0ZVwiLCBuYW1lOiBcIm11dGF0ZVwiIH0sIGJvZHkpXG4gICAgICAgICAgOiBib2R5KCkpXG4gICAgICB9KSxcbiAgICByZWY6IHJ1bnRpbWUucmVmLFxuICB9XG5cbiAgY29uc3QgYWN0aW9uc0FwaSA9IG5ldyBQcm94eSh7fSBhcyBCb3VuZEFwaTxTaCwgUj5bXCJhY3Rpb25zXCJdLCB7XG4gICAgZ2V0OiAoX3RhcmdldCwgcHJvcCkgPT4ge1xuICAgICAgaWYgKHByb3AgPT09IFwiZGlzcGF0Y2hcIikge1xuICAgICAgICByZXR1cm4gKGE6IExvZ2l4LkFjdGlvbk9mPFNoPikgPT4gcnVudGltZS5kaXNwYXRjaChhKVxuICAgICAgfVxuICAgICAgaWYgKHByb3AgPT09IFwiYWN0aW9ucyRcIikge1xuICAgICAgICByZXR1cm4gcnVudGltZS5hY3Rpb25zJFxuICAgICAgfVxuICAgICAgcmV0dXJuIChwYXlsb2FkOiBhbnkpID0+XG4gICAgICAgIHJ1bnRpbWUuZGlzcGF0Y2goeyBfdGFnOiBwcm9wIGFzIHN0cmluZywgcGF5bG9hZCB9IGFzIExvZ2l4LkFjdGlvbk9mPFNoPilcbiAgICB9LFxuICB9KVxuXG4gIGNvbnN0IG1hdGNoQXBpID0gPFY+KHZhbHVlOiBWKTogTG9naWMuRmx1ZW50TWF0Y2g8Vj4gPT5cbiAgICBNYXRjaEJ1aWxkZXIubWFrZU1hdGNoKHZhbHVlKVxuXG4gIGNvbnN0IG1hdGNoVGFnQXBpID0gPFYgZXh0ZW5kcyB7IF90YWc6IHN0cmluZyB9PihcbiAgICB2YWx1ZTogVlxuICApOiBMb2dpYy5GbHVlbnRNYXRjaFRhZzxWPiA9PiBNYXRjaEJ1aWxkZXIubWFrZU1hdGNoVGFnKHZhbHVlKVxuXG4gIC8vIFByaW1hcnkgUmVkdWNlciBcdTZDRThcdTUxOENcdUZGMUFcdTkwMUFcdThGQzcgcnVudGltZSBcdTRFMEFcdTc2ODRcdTUxODVcdTkwRThcdTZDRThcdTUxOENcdTUxRkRcdTY1NzBcdUZGMDhcdTgyRTVcdTVCNThcdTU3MjhcdUZGMDlcdTUxOTlcdTUxNjUgcmVkdWNlciBcdTY2MjBcdTVDMDRcdTMwMDJcbiAgY29uc3QgcmVkdWNlcjogQm91bmRBcGk8U2gsIFI+W1wicmVkdWNlclwiXSA9ICh0YWcsIGZuKSA9PiB7XG4gICAgcmV0dXJuIEVmZmVjdC5zeW5jKCgpID0+IHtcbiAgICAgIGNvbnN0IGFueVJ1bnRpbWUgPSBydW50aW1lIGFzIGFueVxuICAgICAgY29uc3QgcmVnaXN0ZXI6ICh0OiBzdHJpbmcsIGZuOiAoczogYW55LCBhOiBhbnkpID0+IGFueSkgPT4gdm9pZCA9XG4gICAgICAgIGFueVJ1bnRpbWUgJiYgYW55UnVudGltZS5fX3JlZ2lzdGVyUmVkdWNlclxuICAgICAgaWYgKCFyZWdpc3Rlcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgXCJbQm91bmRBcGkucmVkdWNlcl0gUHJpbWFyeSByZWR1Y2VyIHJlZ2lzdHJhdGlvbiBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoaXMgcnVudGltZSBcIiArXG4gICAgICAgICAgICBcIihtaXNzaW5nIGludGVybmFsIF9fcmVnaXN0ZXJSZWR1Y2VyIGhvb2spLlwiXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIHJlZ2lzdGVyKFN0cmluZyh0YWcpLCBmbiBhcyBhbnkpXG4gICAgfSkgYXMgYW55XG4gIH1cblxuICAvLyBTdGF0ZVRyYWl0LnNvdXJjZSBcdTUyMzdcdTY1QjBcdTUxNjVcdTUzRTNcdTc2ODRcdTZDRThcdTUxOENcdTg4NjhcdUZGMUFcbiAgLy8gLSBcdTVGQzVcdTk4N0JcdTYzMDJcdTUyMzAgcnVudGltZSBcdTRFMEFcdTUxNzFcdTRFQUJcdUZGMDhcdTgwMENcdTRFMERcdTY2MkZcdTYzMDJcdTUyMzBcdTUzNTVcdTRFMkEgQm91bmRBcGkgXHU1QjlFXHU0RjhCXHU0RTBBXHVGRjA5XHVGRjBDXHU1NDI2XHU1MjE5XHVGRjFBXG4gIC8vICAgLSBUcmFpdCBcdTVCODlcdTg4QzVcdTkwM0JcdThGOTFcdTRFMEVcdTRFMUFcdTUyQTFcdTkwM0JcdThGOTFcdTRGNERcdTRFOEVcdTRFMERcdTU0MEMgTW9kdWxlLmxvZ2ljIFx1NjVGNlx1NEYxQVx1NjJGRlx1NTIzMFx1NEUwRFx1NTQwQyBCb3VuZEFwaSBcdTVCOUVcdTRGOEJcdUZGMUJcbiAgLy8gICAtIFx1NEUxQVx1NTJBMVx1NEZBN1x1OTAxQVx1OEZDNyBgTG9naXguQm91bmQubWFrZSguLi4pYCBcdTY1QjBcdTVFRkFcdTc2ODQgQm91bmRBcGkgXHU0RTVGXHU2NUUwXHU2Q0Q1XHU3NzBCXHU1MjMwXHU1REYyXHU1Qjg5XHU4OEM1XHU3Njg0XHU1MjM3XHU2NUIwXHU1QjlFXHU3M0IwXHUzMDAyXG4gIC8vIC0ga2V5IFx1NEUzQVx1NUI1N1x1NkJCNVx1OERFRlx1NUY4NFx1RkYwOFx1NTk4MiBcInByb2ZpbGVSZXNvdXJjZVwiXHVGRjA5XHVGRjFCXG4gIC8vIC0gdmFsdWUgXHU0RTNBXHU1N0ZBXHU0RThFXHU1RjUzXHU1MjREIFN0YXRlIFx1NjI2N1x1ODg0Q1x1NEUwMFx1NkIyMVx1NTIzN1x1NjVCMFx1NkQ0MVx1N0EwQlx1NzY4NCBFZmZlY3RcdTMwMDJcbiAgY29uc3QgYW55UnVudGltZSA9IHJ1bnRpbWUgYXMgYW55XG4gIGNvbnN0IHNvdXJjZVJlZnJlc2hSZWdpc3RyeTogTWFwPFxuICAgIHN0cmluZyxcbiAgICAoc3RhdGU6IExvZ2l4LlN0YXRlT2Y8U2g+KSA9PiBFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBhbnk+XG4gID4gPVxuICAgIGFueVJ1bnRpbWUuX19zb3VyY2VSZWZyZXNoUmVnaXN0cnkgPz9cbiAgICAoYW55UnVudGltZS5fX3NvdXJjZVJlZnJlc2hSZWdpc3RyeSA9IG5ldyBNYXAoKSlcblxuICBjb25zdCBhcGk6IEJvdW5kQXBpPFNoLCBSPiAmIHtcbiAgICBfX21vZHVsZUlkPzogc3RyaW5nXG4gICAgX19ydW50aW1lSWQ/OiBzdHJpbmdcbiAgICBfX3Jvd0lkU3RvcmU/OiBSb3dJZFN0b3JlXG4gICAgX19yZWdpc3RlclNvdXJjZVJlZnJlc2g/OiAoXG4gICAgICBmaWVsZFBhdGg6IHN0cmluZyxcbiAgICAgIGhhbmRsZXI6IChcbiAgICAgICAgc3RhdGU6IExvZ2l4LlN0YXRlT2Y8U2g+LFxuICAgICAgKSA9PiBFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBhbnk+LFxuICAgICkgPT4gdm9pZFxuICAgIF9fcmVjb3JkU3RhdGVQYXRjaD86IChcbiAgICAgIHBhdGNoOiB7XG4gICAgICAgIHJlYWRvbmx5IHBhdGg6IHN0cmluZ1xuICAgICAgICByZWFkb25seSBmcm9tPzogdW5rbm93blxuICAgICAgICByZWFkb25seSB0bz86IHVua25vd25cbiAgICAgICAgcmVhZG9ubHkgcmVhc29uOiBzdHJpbmdcbiAgICAgICAgcmVhZG9ubHkgdHJhaXROb2RlSWQ/OiBzdHJpbmdcbiAgICAgICAgcmVhZG9ubHkgc3RlcElkPzogc3RyaW5nXG4gICAgICB9LFxuICAgICkgPT4gdm9pZFxuICAgIF9fcmVnaXN0ZXJTdGF0ZVRyYWl0UHJvZ3JhbT86IChwcm9ncmFtOiBTdGF0ZVRyYWl0UHJvZ3JhbTxhbnk+KSA9PiB2b2lkXG4gICAgX19ydW5XaXRoU3RhdGVUcmFuc2FjdGlvbj86IChcbiAgICAgIG9yaWdpbjoge1xuICAgICAgICByZWFkb25seSBraW5kOiBzdHJpbmdcbiAgICAgICAgcmVhZG9ubHkgbmFtZT86IHN0cmluZ1xuICAgICAgICByZWFkb25seSBkZXRhaWxzPzogdW5rbm93blxuICAgICAgfSxcbiAgICAgIGJvZHk6ICgpID0+IEVmZmVjdC5FZmZlY3Q8dm9pZCwgbmV2ZXIsIGFueT4sXG4gICAgKSA9PiBFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBhbnk+XG4gIH0gPSB7XG4gICAgc3RhdGU6IHN0YXRlQXBpLFxuICAgIGFjdGlvbnM6IGFjdGlvbnNBcGksXG4gICAgZmxvdzogZmxvd0FwaSxcbiAgICBtYXRjaDogbWF0Y2hBcGksXG4gICAgbWF0Y2hUYWc6IG1hdGNoVGFnQXBpLFxuICAgIGxpZmVjeWNsZToge1xuICAgICAgb25Jbml0OiAoXG4gICAgICAgIGVmZjogTG9naWMuT2Y8U2gsIFIsIHZvaWQsIG5ldmVyPixcbiAgICAgICkgPT4ge1xuICAgICAgICAvLyBQaGFzZSBHdWFyZFx1RkYxQSQubGlmZWN5Y2xlLm9uSW5pdCBcdTg5QzZcdTRFM0EgcnVuLW9ubHkgXHU4MEZEXHU1MjlCXHVGRjBDXHU3OTgxXHU2QjYyXHU1NzI4IHNldHVwIFx1NkJCNVx1NjI2N1x1ODg0Q1x1MzAwMlxuICAgICAgICAvLyBcdTUxNzhcdTU3OEJcdTUzOUZcdTU2RTBcdUZGMUFcbiAgICAgICAgLy8gLSBzZXR1cCBcdTZCQjVcdTkwMUFcdTVFMzhcdTU3MjggUnVudGltZSBcdTY3ODRcdTkwMjBcdThERUZcdTVGODRcdUZGMDhydW5TeW5jXHVGRjA5XHU0RTJEXHU2MjY3XHU4ODRDXHVGRjBDcnVubmluZyBcdTU0MkJcdTVGMDJcdTZCNjVcdTVERTVcdTRGNUNcdTc2ODQgb25Jbml0XG4gICAgICAgIC8vICAgXHU2NzgxXHU2NjEzXHU4OUU2XHU1M0QxIEFzeW5jRmliZXJFeGNlcHRpb25cdUZGMUJcbiAgICAgICAgLy8gLSBcdTYzMDkgdjMgXHU3RUE2XHU1QjlBXHVGRjBDb25Jbml0IFx1NjZGNFx1NjNBNVx1OEZEMVx1MjAxQ1x1NkEyMVx1NTc1N1x1OEZEMFx1ODg0Q1x1NjcxRlx1NzY4NFx1NTIxRFx1NTlDQlx1NTMxNlx1NkQ0MVx1N0EwQlx1MjAxRFx1RkYwQ1x1OEJFRFx1NEU0OVx1NEUwQVx1NUM1RVx1NEU4RSBydW4gXHU2QkI1XHUzMDAyXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFx1NTZFMFx1NkI2NFx1NTcyOCBzZXR1cCBcdTZCQjVcdThDMDNcdTc1MjhcdTY1RjZcdTYyOUJcdTUxRkEgTG9naWNQaGFzZUVycm9yXHVGRjBDXHU1RTc2XHU3NTMxIE1vZHVsZVJ1bnRpbWUubWFrZSAvXG4gICAgICAgIC8vIExvZ2ljRGlhZ25vc3RpY3MgXHU2NTM2XHU2NTVCXHU0RTNBIGxvZ2ljOjppbnZhbGlkX3BoYXNlIFx1OEJDQVx1NjVBRFx1RkYwQ1x1ODAwQ1x1NEUwRFx1NjYyRlx1OEJBOVx1NUU5NVx1NUM0MiBydW5TeW5jIFx1NTkzMVx1OEQyNVx1MzAwMlxuICAgICAgICBndWFyZFJ1bk9ubHkoXCJsaWZlY3ljbGVfaW5fc2V0dXBcIiwgXCIkLmxpZmVjeWNsZS5vbkluaXRcIilcblxuICAgICAgICByZXR1cm4gd2l0aExpZmVjeWNsZShcbiAgICAgICAgICAobWFuYWdlcikgPT4gbWFuYWdlci5yZWdpc3RlckluaXQoZWZmKSxcbiAgICAgICAgICAoKSA9PiBlZmZcbiAgICAgICAgKSBhcyB1bmtub3duIGFzIExvZ2ljLk9mPFNoLCBSLCB2b2lkLCBuZXZlcj5cbiAgICAgIH0sXG4gICAgICBvbkRlc3Ryb3k6IChcbiAgICAgICAgZWZmOiBMb2dpYy5PZjxTaCwgUiwgdm9pZCwgbmV2ZXI+LFxuICAgICAgKSA9PlxuICAgICAgICB3aXRoTGlmZWN5Y2xlKFxuICAgICAgICAgIChtYW5hZ2VyKSA9PiBtYW5hZ2VyLnJlZ2lzdGVyRGVzdHJveShlZmYpLFxuICAgICAgICAgICgpID0+IGVmZlxuICAgICAgICApIGFzIHVua25vd24gYXMgTG9naWMuT2Y8U2gsIFIsIHZvaWQsIG5ldmVyPixcbiAgICAgIG9uRXJyb3I6IChcbiAgICAgICAgaGFuZGxlcjogKFxuICAgICAgICAgIGNhdXNlOiBpbXBvcnQoXCJlZmZlY3RcIikuQ2F1c2UuQ2F1c2U8dW5rbm93bj4sXG4gICAgICAgICAgY29udGV4dDogTGlmZWN5Y2xlLkVycm9yQ29udGV4dCxcbiAgICAgICAgKSA9PiBFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBSPixcbiAgICAgICkgPT5cbiAgICAgICAgd2l0aExpZmVjeWNsZShcbiAgICAgICAgICAobWFuYWdlcikgPT4gbWFuYWdlci5yZWdpc3Rlck9uRXJyb3IoaGFuZGxlciksXG4gICAgICAgICAgKCkgPT4gRWZmZWN0LnZvaWRcbiAgICAgICAgKSBhcyB1bmtub3duIGFzIExvZ2ljLk9mPFNoLCBSLCB2b2lkLCBuZXZlcj4sXG4gICAgICBvblN1c3BlbmQ6IChcbiAgICAgICAgZWZmOiBMb2dpYy5PZjxTaCwgUiwgdm9pZCwgbmV2ZXI+LFxuICAgICAgKSA9PlxuICAgICAgICB3aXRoUGxhdGZvcm0oKHBsYXRmb3JtKSA9PlxuICAgICAgICAgIHBsYXRmb3JtLmxpZmVjeWNsZS5vblN1c3BlbmQoXG4gICAgICAgICAgICBFZmZlY3QuYXNWb2lkKGVmZiBhcyBFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBhbnk+KVxuICAgICAgICAgIClcbiAgICAgICAgKSBhcyB1bmtub3duIGFzIExvZ2ljLk9mPFNoLCBSLCB2b2lkLCBuZXZlcj4sXG4gICAgICBvblJlc3VtZTogKFxuICAgICAgICBlZmY6IExvZ2ljLk9mPFNoLCBSLCB2b2lkLCBuZXZlcj4sXG4gICAgICApID0+XG4gICAgICAgIHdpdGhQbGF0Zm9ybSgocGxhdGZvcm0pID0+XG4gICAgICAgICAgcGxhdGZvcm0ubGlmZWN5Y2xlLm9uUmVzdW1lKFxuICAgICAgICAgICAgRWZmZWN0LmFzVm9pZChlZmYgYXMgRWZmZWN0LkVmZmVjdDx2b2lkLCBuZXZlciwgYW55PilcbiAgICAgICAgICApXG4gICAgICAgICkgYXMgdW5rbm93biBhcyBMb2dpYy5PZjxTaCwgUiwgdm9pZCwgbmV2ZXI+LFxuICAgICAgb25SZXNldDogKFxuICAgICAgICBlZmY6IExvZ2ljLk9mPFNoLCBSLCB2b2lkLCBuZXZlcj4sXG4gICAgICApID0+XG4gICAgICAgIHdpdGhQbGF0Zm9ybSgocGxhdGZvcm0pID0+XG4gICAgICAgICAgcGxhdGZvcm0ubGlmZWN5Y2xlLm9uUmVzZXRcbiAgICAgICAgICAgID8gcGxhdGZvcm0ubGlmZWN5Y2xlLm9uUmVzZXQoXG4gICAgICAgICAgICAgICAgRWZmZWN0LmFzVm9pZChlZmYgYXMgRWZmZWN0LkVmZmVjdDx2b2lkLCBuZXZlciwgYW55PilcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgOiBFZmZlY3Qudm9pZFxuICAgICAgICApIGFzIHVua25vd24gYXMgTG9naWMuT2Y8U2gsIFIsIHZvaWQsIG5ldmVyPixcbiAgICB9LFxuICAgIHRyYWl0czoge1xuICAgICAgc291cmNlOiB7XG4gICAgICAgIHJlZnJlc2g6IChmaWVsZFBhdGg6IHN0cmluZykgPT5cbiAgICAgICAgICBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBoYW5kbGVyID0gc291cmNlUmVmcmVzaFJlZ2lzdHJ5LmdldChmaWVsZFBhdGgpXG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIpIHtcbiAgICAgICAgICAgICAgLy8gXHU4MkU1XHU2NzJBXHU2Q0U4XHU1MThDXHU1MjM3XHU2NUIwXHU5MDNCXHU4RjkxXHVGRjBDXHU1MjE5XHU4OUM2XHU0RTNBIG5vLW9wXHVGRjBDXHU5MDdGXHU1MTREXHU1NzI4XHU2NzJBXHU2MzAyIFN0YXRlVHJhaXRQcm9ncmFtIFx1NjVGNlx1NjI5Qlx1OTUxOVx1MzAwMlxuICAgICAgICAgICAgICByZXR1cm4geWllbGQqIEVmZmVjdC52b2lkXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFx1NEU4Qlx1NTJBMVx1N0E5N1x1NTNFM1x1NTE4NVx1Nzk4MVx1NkI2Mlx1NTE4RFx1OEQ3MCBlbnF1ZXVlVHJhbnNhY3Rpb25cdUZGMDhcdTRGMUFcdTVCRkNcdTgxRjRcdTZCN0JcdTk1MDFcdUZGMDlcdUZGMUFcbiAgICAgICAgICAgIC8vIC0gXHU3NkY0XHU2M0E1XHU1NzI4XHU1RjUzXHU1MjREXHU0RThCXHU1MkExXHU1MTg1XHU2MjY3XHU4ODRDIGhhbmRsZXJcdUZGMENcdTRGN0ZcdTUxNzZcdTkwMUFcdThGQzcgYm91bmQuc3RhdGUubXV0YXRlIFx1NTE5OVx1NTE2NSBkcmFmdFx1RkYxQlxuICAgICAgICAgICAgLy8gLSBcdTc1MzFcdTU5MTZcdTVDNDJcdTU0MENcdTRFMDBcdTRFOEJcdTUyQTFcdTdBOTdcdTUzRTNcdThEMUZcdThEMjMgY29tbWl0ICsgZGVidWcgXHU4MDVBXHU1NDA4XHUzMDAyXG4gICAgICAgICAgICBjb25zdCBpblR4biA9IHlpZWxkKiBGaWJlclJlZi5nZXQoVGFza1J1bm5lci5pblN5bmNUcmFuc2FjdGlvbkZpYmVyKVxuICAgICAgICAgICAgaWYgKGluVHhuKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gKHlpZWxkKiBydW50aW1lLmdldFN0YXRlKSBhcyBMb2dpeC5TdGF0ZU9mPFNoPlxuICAgICAgICAgICAgICByZXR1cm4geWllbGQqIGhhbmRsZXIoc3RhdGUpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHJ1bldpdGhTdGF0ZVRyYW5zYWN0aW9uID1cbiAgICAgICAgICAgICAgKGFwaSBhcyBhbnkpXG4gICAgICAgICAgICAgICAgLl9fcnVuV2l0aFN0YXRlVHJhbnNhY3Rpb24gYXNcbiAgICAgICAgICAgICAgfCAoKFxuICAgICAgICAgICAgICAgIG9yaWdpbjoge1xuICAgICAgICAgICAgICAgICAgcmVhZG9ubHkga2luZDogc3RyaW5nXG4gICAgICAgICAgICAgICAgICByZWFkb25seSBuYW1lPzogc3RyaW5nXG4gICAgICAgICAgICAgICAgICByZWFkb25seSBkZXRhaWxzPzogdW5rbm93blxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYm9keTogKCkgPT4gRWZmZWN0LkVmZmVjdDx2b2lkLCBuZXZlciwgYW55PixcbiAgICAgICAgICAgICAgKSA9PiBFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBhbnk+KVxuICAgICAgICAgICAgICB8IHVuZGVmaW5lZFxuXG4gICAgICAgICAgICBpZiAocnVuV2l0aFN0YXRlVHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICAgICAgLy8gXHU1NzI4XHU2NTJGXHU2MzAxIFN0YXRlVHJhbnNhY3Rpb24gXHU3Njg0IFJ1bnRpbWUgXHU0RTBBXHVGRjBDXHU1QzA2XHU0RTAwXHU2QjIxIHNvdXJjZS1yZWZyZXNoIFx1ODlDNlx1NEUzQVx1NTM1NVx1NzJFQ1x1NzY4NFx1NEU4Qlx1NTJBMVx1NTE2NVx1NTNFM1x1MzAwMlxuICAgICAgICAgICAgICByZXR1cm4geWllbGQqIHJ1bldpdGhTdGF0ZVRyYW5zYWN0aW9uKFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGtpbmQ6IFwic291cmNlLXJlZnJlc2hcIixcbiAgICAgICAgICAgICAgICAgIG5hbWU6IGZpZWxkUGF0aCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICgpID0+XG4gICAgICAgICAgICAgICAgICBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gKHlpZWxkKiBydW50aW1lLmdldFN0YXRlKSBhcyBMb2dpeC5TdGF0ZU9mPFNoPlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geWllbGQqIGhhbmRsZXIoc3RhdGUpXG4gICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBcdTY1RTdcdTVCOUVcdTczQjBcdUZGMDhcdTY1RTBcdTRFOEJcdTUyQTFcdThCRURcdTRFNDlcdUZGMDlcdUZGMUFcdTc2RjRcdTYzQTVcdThCRkJcdTUzRDZcdTVGNTNcdTUyNEQgU3RhdGUgXHU1RTc2XHU2MjY3XHU4ODRDXHU1MjM3XHU2NUIwXHU5MDNCXHU4RjkxXHUzMDAyXG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9ICh5aWVsZCogcnVudGltZS5nZXRTdGF0ZSkgYXMgTG9naXguU3RhdGVPZjxTaD5cbiAgICAgICAgICAgIHJldHVybiB5aWVsZCogaGFuZGxlcihzdGF0ZSlcbiAgICAgICAgICB9KSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICByZWR1Y2VyLFxuICAgIHVzZTogbmV3IFByb3h5KCgpID0+IHt9LCB7XG4gICAgICBhcHBseTogKF90YXJnZXQsIF90aGlzQXJnLCBbYXJnXSkgPT4ge1xuICAgICAgICBndWFyZFJ1bk9ubHkoXCJ1c2VfaW5fc2V0dXBcIiwgXCIkLnVzZVwiKVxuICAgICAgICBpZiAoQ29udGV4dC5pc1RhZyhhcmcpKSB7XG4gICAgICAgICAgY29uc3QgY2FuZGlkYXRlID0gYXJnIGFzIHsgX2tpbmQ/OiB1bmtub3duIH1cblxuICAgICAgICAgIC8vIE1vZHVsZVx1RkYxQVx1OEZENFx1NTZERVx1NTNFQVx1OEJGQiBNb2R1bGVIYW5kbGUgXHU4OUM2XHU1NkZFXG4gICAgICAgICAgaWYgKGNhbmRpZGF0ZS5fa2luZCA9PT0gXCJNb2R1bGVcIikge1xuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVNb2R1bGVSdW50aW1lKGFyZyBhcyBhbnkpLnBpcGUoXG4gICAgICAgICAgICAgIEVmZmVjdC5tYXAoKHJ1bnRpbWU6IExvZ2l4Lk1vZHVsZVJ1bnRpbWU8YW55LCBhbnk+KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWN0aW9uc1Byb3h5OiBMb2dpeC5Nb2R1bGVIYW5kbGU8YW55PltcImFjdGlvbnNcIl0gPVxuICAgICAgICAgICAgICAgICAgbmV3IFByb3h5KFxuICAgICAgICAgICAgICAgICAgICB7fSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIGdldDogKF90YXJnZXQsIHByb3ApID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAocGF5bG9hZDogdW5rbm93bikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgcnVudGltZS5kaXNwYXRjaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RhZzogcHJvcCBhcyBzdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICApIGFzIExvZ2l4Lk1vZHVsZUhhbmRsZTxhbnk+W1wiYWN0aW9uc1wiXVxuXG4gICAgICAgICAgICAgICAgY29uc3QgaGFuZGxlOiBMb2dpeC5Nb2R1bGVIYW5kbGU8YW55PiA9IHtcbiAgICAgICAgICAgICAgICAgIHJlYWQ6IChzZWxlY3RvcikgPT5cbiAgICAgICAgICAgICAgICAgICAgRWZmZWN0Lm1hcChydW50aW1lLmdldFN0YXRlLCBzZWxlY3RvciksXG4gICAgICAgICAgICAgICAgICBjaGFuZ2VzOiBydW50aW1lLmNoYW5nZXMsXG4gICAgICAgICAgICAgICAgICBkaXNwYXRjaDogcnVudGltZS5kaXNwYXRjaCxcbiAgICAgICAgICAgICAgICAgIGFjdGlvbnMkOiBydW50aW1lLmFjdGlvbnMkLFxuICAgICAgICAgICAgICAgICAgYWN0aW9uczogYWN0aW9uc1Byb3h5LFxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBoYW5kbGVcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICApIGFzIHVua25vd24gYXMgTG9naWMuT2Y8U2gsIFIsIGFueSwgbmV2ZXI+XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gXHU2NjZFXHU5MDFBIFNlcnZpY2UgVGFnXHVGRjFBXHU3NkY0XHU2M0E1XHU0RUNFIEVudiBcdTgzQjdcdTUzRDYgU2VydmljZVxuICAgICAgICAgIHJldHVybiBhcmcgYXMgdW5rbm93biBhcyBMb2dpYy5PZjxTaCwgUiwgYW55LCBuZXZlcj5cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gRWZmZWN0LmRpZShcIkJvdW5kQXBpLnVzZTogdW5zdXBwb3J0ZWQgYXJndW1lbnRcIikgYXMgdW5rbm93biBhcyBMb2dpYy5PZjxcbiAgICAgICAgICBTaCxcbiAgICAgICAgICBSLFxuICAgICAgICAgIGFueSxcbiAgICAgICAgICBuZXZlclxuICAgICAgICA+XG4gICAgICB9LFxuICAgIH0pIGFzIHVua25vd24gYXMgQm91bmRBcGk8U2gsIFI+W1widXNlXCJdLFxuICAgIG9uQWN0aW9uOiBuZXcgUHJveHkoKCkgPT4ge30sIHtcbiAgICAgIGFwcGx5OiAoX3RhcmdldCwgX3RoaXNBcmcsIGFyZ3MpID0+IHtcbiAgICAgICAgZ3VhcmRSdW5Pbmx5KFwidXNlX2luX3NldHVwXCIsIFwiJC5vbkFjdGlvblwiKVxuICAgICAgICBjb25zdCBhcmcgPSBhcmdzWzBdXG4gICAgICAgIGlmICh0eXBlb2YgYXJnID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICByZXR1cm4gY3JlYXRlSW50ZW50QnVpbGRlcihcbiAgICAgICAgICAgIHJ1bnRpbWUuYWN0aW9ucyQucGlwZShTdHJlYW0uZmlsdGVyKGFyZykpXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgYXJnID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgcmV0dXJuIGNyZWF0ZUludGVudEJ1aWxkZXIoXG4gICAgICAgICAgICBydW50aW1lLmFjdGlvbnMkLnBpcGUoXG4gICAgICAgICAgICAgIFN0cmVhbS5maWx0ZXIoKGE6IGFueSkgPT4gYS5fdGFnID09PSBhcmcgfHwgYS50eXBlID09PSBhcmcpXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgYXJnLFxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGFyZyA9PT0gXCJvYmplY3RcIiAmJiBhcmcgIT09IG51bGwpIHtcbiAgICAgICAgICBpZiAoXCJfdGFnXCIgaW4gYXJnKSB7XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlSW50ZW50QnVpbGRlcihcbiAgICAgICAgICAgICAgcnVudGltZS5hY3Rpb25zJC5waXBlKFxuICAgICAgICAgICAgICAgIFN0cmVhbS5maWx0ZXIoKGE6IGFueSkgPT4gYS5fdGFnID09PSAoYXJnIGFzIGFueSkuX3RhZylcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgU3RyaW5nKChhcmcgYXMgYW55KS5fdGFnKSxcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKFNjaGVtYS5pc1NjaGVtYShhcmcpKSB7XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlSW50ZW50QnVpbGRlcihcbiAgICAgICAgICAgICAgcnVudGltZS5hY3Rpb25zJC5waXBlKFxuICAgICAgICAgICAgICAgIFN0cmVhbS5maWx0ZXIoKGE6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gU2NoZW1hLmRlY29kZVVua25vd25TeW5jKFxuICAgICAgICAgICAgICAgICAgICBhcmcgYXMgU2NoZW1hLlNjaGVtYTxhbnksIGFueSwgbmV2ZXI+XG4gICAgICAgICAgICAgICAgICApKGEpXG4gICAgICAgICAgICAgICAgICByZXR1cm4gISFyZXN1bHRcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjcmVhdGVJbnRlbnRCdWlsZGVyKHJ1bnRpbWUuYWN0aW9ucyQpXG4gICAgICB9LFxuICAgICAgZ2V0OiAoX3RhcmdldCwgcHJvcCkgPT4ge1xuICAgICAgICBndWFyZFJ1bk9ubHkoXCJ1c2VfaW5fc2V0dXBcIiwgXCIkLm9uQWN0aW9uXCIpXG4gICAgICAgIGlmICh0eXBlb2YgcHJvcCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIHJldHVybiBjcmVhdGVJbnRlbnRCdWlsZGVyKFxuICAgICAgICAgICAgcnVudGltZS5hY3Rpb25zJC5waXBlKFxuICAgICAgICAgICAgICBTdHJlYW0uZmlsdGVyKFxuICAgICAgICAgICAgICAgIChhOiBhbnkpID0+IGEuX3RhZyA9PT0gcHJvcCB8fCBhLnR5cGUgPT09IHByb3BcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIHByb3AsXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICAgIH0sXG4gICAgfSkgYXMgdW5rbm93biBhcyBCb3VuZEFwaTxTaCwgUj5bXCJvbkFjdGlvblwiXSxcbiAgICBvblN0YXRlOiAoXG4gICAgICBzZWxlY3RvcjogKHM6IExvZ2l4LlN0YXRlT2Y8U2g+KSA9PiBhbnksXG4gICAgKSA9PiB7XG4gICAgICBndWFyZFJ1bk9ubHkoXCJ1c2VfaW5fc2V0dXBcIiwgXCIkLm9uU3RhdGVcIilcbiAgICAgIHJldHVybiBjcmVhdGVJbnRlbnRCdWlsZGVyKHJ1bnRpbWUuY2hhbmdlcyhzZWxlY3RvcikpXG4gICAgfSxcbiAgICBvbjogKFxuICAgICAgc3RyZWFtOiBTdHJlYW0uU3RyZWFtPGFueT4sXG4gICAgKSA9PiB7XG4gICAgICBndWFyZFJ1bk9ubHkoXCJ1c2VfaW5fc2V0dXBcIiwgXCIkLm9uXCIpXG4gICAgICByZXR1cm4gY3JlYXRlSW50ZW50QnVpbGRlcihzdHJlYW0pXG4gICAgfSxcbiAgfSBhcyBhbnlcblxuICAvLyBcdTRFQzVcdTRGOUJcdTUxODVcdTkwRThcdTRGN0ZcdTc1MjhcdUZGMUFcdTRFM0EgQm91bmQgQVBJIFx1NjgwN1x1OEJCMFx1NjI0MFx1NUM1RSBNb2R1bGVJZFx1RkYwQ1x1NjVCOVx1NEZCRlx1NTcyOCBTdGF0ZVRyYWl0Lmluc3RhbGxcbiAgLy8gXHU3QjQ5XHU4RkQwXHU4ODRDXHU2NUY2XHU0RUUzXHU3ODAxXHU0RTJEXHU0RTNBIEVmZmVjdE9wLm1ldGEgXHU4ODY1XHU1MTQ1IG1vZHVsZUlkXHUzMDAyXG4gIDsoYXBpIGFzIGFueSkuX19tb2R1bGVJZCA9IG9wdGlvbnM/Lm1vZHVsZUlkXG4gIDsoYXBpIGFzIGFueSkuX19ydW50aW1lSWQgPSAocnVudGltZSBhcyBhbnkpPy5pZCBhcyBzdHJpbmcgfCB1bmRlZmluZWRcbiAgOyhhcGkgYXMgYW55KS5fX3Jvd0lkU3RvcmUgPSAocnVudGltZSBhcyBhbnkpPy5fX3Jvd0lkU3RvcmUgYXNcbiAgICB8IFJvd0lkU3RvcmVcbiAgICB8IHVuZGVmaW5lZFxuXG4gIC8vIFx1NEVDNVx1NEY5QiBTdGF0ZVRyYWl0Lmluc3RhbGwgXHU0RjdGXHU3NTI4XHVGRjFBXHU2Q0U4XHU1MThDIHNvdXJjZSBcdTVCNTdcdTZCQjVcdTc2ODRcdTUyMzdcdTY1QjBcdTVCOUVcdTczQjBcdTMwMDJcbiAgOyhhcGkgYXMgYW55KS5fX3JlZ2lzdGVyU291cmNlUmVmcmVzaCA9IChcbiAgICBmaWVsZFBhdGg6IHN0cmluZyxcbiAgICBoYW5kbGVyOiAoc3RhdGU6IExvZ2l4LlN0YXRlT2Y8U2g+KSA9PiBFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBhbnk+LFxuICApOiB2b2lkID0+IHtcbiAgICBzb3VyY2VSZWZyZXNoUmVnaXN0cnkuc2V0KGZpZWxkUGF0aCwgaGFuZGxlcilcbiAgfVxuXG4gIC8vIFx1NEVDNVx1NEY5QiBTdGF0ZVRyYWl0Lmluc3RhbGwgXHU3QjQ5XHU1MTg1XHU5MEU4XHU0RUUzXHU3ODAxXHU0RjdGXHU3NTI4XHVGRjFBXHU1NzI4XHU1RjUzXHU1MjREIFJ1bnRpbWUgXHU3Njg0IFN0YXRlVHJhbnNhY3Rpb24gXHU0RTBBXHU4QkIwXHU1RjU1XHU1QjU3XHU2QkI1XHU3RUE3IFBhdGNoXHUzMDAyXG4gIDsoYXBpIGFzIGFueSkuX19yZWNvcmRTdGF0ZVBhdGNoID0gKFxuICAgIHBhdGNoOiB7XG4gICAgICByZWFkb25seSBwYXRoOiBzdHJpbmdcbiAgICAgIHJlYWRvbmx5IGZyb20/OiB1bmtub3duXG4gICAgICByZWFkb25seSB0bz86IHVua25vd25cbiAgICAgIHJlYWRvbmx5IHJlYXNvbjogc3RyaW5nXG4gICAgICByZWFkb25seSB0cmFpdE5vZGVJZD86IHN0cmluZ1xuICAgICAgcmVhZG9ubHkgc3RlcElkPzogc3RyaW5nXG4gICAgfSxcbiAgKTogdm9pZCA9PiB7XG4gICAgY29uc3QgYW55UnVudGltZSA9IHJ1bnRpbWUgYXMgYW55XG4gICAgY29uc3QgcmVjb3JkOiAoKHA6IHR5cGVvZiBwYXRjaCkgPT4gdm9pZCkgfCB1bmRlZmluZWQgPVxuICAgICAgYW55UnVudGltZSAmJiBhbnlSdW50aW1lLl9fcmVjb3JkU3RhdGVQYXRjaFxuICAgIGlmIChyZWNvcmQpIHtcbiAgICAgIHJlY29yZChwYXRjaClcbiAgICB9XG4gIH1cblxuICAvLyBcdTRFQzVcdTRGOUJcdTUxODVcdTkwRThcdTRGN0ZcdTc1MjhcdUZGMUFcdTVDMDYgUmVwbGF5TG9nIFx1NEU4Qlx1NEVGNlx1OEJCMFx1NUY1NVx1NTIzMFx1NUY1M1x1NTI0RFx1NEU4Qlx1NTJBMVx1RkYwQ1x1NEVFNVx1NEZCRlx1NTcyOCBzdGF0ZTp1cGRhdGUgXHU0RTJEXHU1MTczXHU4MDU0IHJlcGxheUV2ZW50XHUzMDAyXG4gIDsoYXBpIGFzIGFueSkuX19yZWNvcmRSZXBsYXlFdmVudCA9IChldmVudDogdW5rbm93bik6IHZvaWQgPT4ge1xuICAgIGNvbnN0IGFueVJ1bnRpbWUgPSBydW50aW1lIGFzIGFueVxuICAgIGNvbnN0IHJlY29yZDogKChlOiB1bmtub3duKSA9PiB2b2lkKSB8IHVuZGVmaW5lZCA9XG4gICAgICBhbnlSdW50aW1lICYmIGFueVJ1bnRpbWUuX19yZWNvcmRSZXBsYXlFdmVudFxuICAgIGlmIChyZWNvcmQpIHtcbiAgICAgIHJlY29yZChldmVudClcbiAgICB9XG4gIH1cblxuICAvLyBcdTRFQzVcdTRGOUIgU3RhdGVUcmFpdC5pbnN0YWxsIFx1NEY3Rlx1NzUyOFx1RkYxQVx1NTQxMSBSdW50aW1lIFx1NkNFOFx1NTE4QyBQcm9ncmFtXHVGRjBDXHU0RUU1XHU1NzI4XHU0RThCXHU1MkExXHU3QTk3XHU1M0UzXHU1MTg1XHU2MjY3XHU4ODRDXHU2NTM2XHU2NTVCXHUzMDAyXG4gIDsoYXBpIGFzIGFueSkuX19yZWdpc3RlclN0YXRlVHJhaXRQcm9ncmFtID0gKFxuICAgIHByb2dyYW06IFN0YXRlVHJhaXRQcm9ncmFtPGFueT4sXG4gICk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IGFueVJ1bnRpbWUgPSBydW50aW1lIGFzIGFueVxuICAgIGNvbnN0IHJlZ2lzdGVyOiAoKHA6IFN0YXRlVHJhaXRQcm9ncmFtPGFueT4pID0+IHZvaWQpIHwgdW5kZWZpbmVkID1cbiAgICAgIGFueVJ1bnRpbWUgJiYgYW55UnVudGltZS5fX3JlZ2lzdGVyU3RhdGVUcmFpdFByb2dyYW1cbiAgICBpZiAocmVnaXN0ZXIpIHtcbiAgICAgIHJlZ2lzdGVyKHByb2dyYW0pXG4gICAgfVxuICB9XG5cbiAgLy8gXHU0RUM1XHU0RjlCIFRyYWl0TGlmZWN5Y2xlLnNjb3BlZFZhbGlkYXRlIFx1NEY3Rlx1NzUyOFx1RkYxQVx1NUMwNlx1NjgyMVx1OUE4Q1x1OEJGN1x1NkM0Mlx1NjMwMlx1NTIzMFx1NUY1M1x1NTI0RFx1NEU4Qlx1NTJBMVx1RkYwQ1x1N0I0OVx1NUY4NSBydW50aW1lIFx1N0VERlx1NEUwMCBmbHVzaFx1MzAwMlxuICA7KGFwaSBhcyBhbnkpLl9fZW5xdWV1ZVN0YXRlVHJhaXRWYWxpZGF0ZVJlcXVlc3QgPSAoXG4gICAgcmVxdWVzdDogU2NvcGVkVmFsaWRhdGVSZXF1ZXN0LFxuICApOiB2b2lkID0+IHtcbiAgICBjb25zdCBhbnlSdW50aW1lID0gcnVudGltZSBhcyBhbnlcbiAgICBjb25zdCBlbnF1ZXVlOiAoKHI6IFNjb3BlZFZhbGlkYXRlUmVxdWVzdCkgPT4gdm9pZCkgfCB1bmRlZmluZWQgPVxuICAgICAgYW55UnVudGltZSAmJiBhbnlSdW50aW1lLl9fZW5xdWV1ZVN0YXRlVHJhaXRWYWxpZGF0ZVJlcXVlc3RcbiAgICBpZiAoZW5xdWV1ZSkge1xuICAgICAgZW5xdWV1ZShyZXF1ZXN0KVxuICAgIH1cbiAgfVxuXG4gIC8vIFx1NEVDNVx1NEY5Qlx1NTE4NVx1OTBFOFx1NEY3Rlx1NzUyOFx1RkYxQVx1NEUzQSBUcmFpdCBcdTdCNDlcdTUxNjVcdTUzRTNcdTYzRDBcdTRGOUJcdTdFREZcdTRFMDBcdTc2ODQgU3RhdGVUcmFuc2FjdGlvbiBcdTYyNjdcdTg4NENcdTUyQTlcdTYyNEJcdTMwMDJcbiAgOyhhcGkgYXMgYW55KS5fX3J1bldpdGhTdGF0ZVRyYW5zYWN0aW9uID0gKFxuICAgIG9yaWdpbjoge1xuICAgICAgcmVhZG9ubHkga2luZDogc3RyaW5nXG4gICAgICByZWFkb25seSBuYW1lPzogc3RyaW5nXG4gICAgICByZWFkb25seSBkZXRhaWxzPzogdW5rbm93blxuICAgIH0sXG4gICAgYm9keTogKCkgPT4gRWZmZWN0LkVmZmVjdDx2b2lkLCBuZXZlciwgYW55PixcbiAgKTogRWZmZWN0LkVmZmVjdDx2b2lkLCBuZXZlciwgYW55PiA9PiB7XG4gICAgY29uc3QgYW55UnVudGltZSA9IHJ1bnRpbWUgYXMgYW55XG4gICAgY29uc3QgcnVuV2l0aFR4bjpcbiAgICAgIHwgKChcbiAgICAgICAgb3JpZ2luOiB7XG4gICAgICAgICAgcmVhZG9ubHkga2luZDogc3RyaW5nXG4gICAgICAgICAgcmVhZG9ubHkgbmFtZT86IHN0cmluZ1xuICAgICAgICAgIHJlYWRvbmx5IGRldGFpbHM/OiB1bmtub3duXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6ICgpID0+IEVmZmVjdC5FZmZlY3Q8dm9pZCwgbmV2ZXIsIGFueT4sXG4gICAgICApID0+IEVmZmVjdC5FZmZlY3Q8dm9pZCwgbmV2ZXIsIGFueT4pXG4gICAgICB8IHVuZGVmaW5lZCA9IGFueVJ1bnRpbWUgJiYgYW55UnVudGltZS5fX3J1bldpdGhTdGF0ZVRyYW5zYWN0aW9uXG4gICAgcmV0dXJuIHJ1bldpdGhUeG4gPyBydW5XaXRoVHhuKG9yaWdpbiwgYm9keSkgOiBib2R5KClcbiAgfVxuXG4gIHJldHVybiBhcGlcbn1cbiIsICJpbXBvcnQgeyBFZmZlY3QsIFN0cmVhbSwgUmVmLCBPcHRpb24gfSBmcm9tIFwiZWZmZWN0XCJcbmltcG9ydCB0eXBlIHtcbiAgQW55TW9kdWxlU2hhcGUsXG4gIE1vZHVsZVJ1bnRpbWUsXG4gIFN0YXRlT2YsXG4gIEFjdGlvbk9mLFxuICBNb2R1bGVTaGFwZSxcbn0gZnJvbSBcIi4vbW9kdWxlLmpzXCJcbmltcG9ydCB0eXBlICogYXMgTG9naWMgZnJvbSBcIi4vTG9naWNNaWRkbGV3YXJlLmpzXCJcbmltcG9ydCAqIGFzIEVmZmVjdE9wIGZyb20gXCIuLi8uLi8uLi9lZmZlY3RvcC5qc1wiXG5pbXBvcnQgKiBhcyBFZmZlY3RPcENvcmUgZnJvbSBcIi4uL0VmZmVjdE9wQ29yZS5qc1wiXG5cbmNvbnN0IGdldE1pZGRsZXdhcmVTdGFjayA9ICgpOiBFZmZlY3QuRWZmZWN0PFxuICBFZmZlY3RPcC5NaWRkbGV3YXJlU3RhY2ssXG4gIG5ldmVyLFxuICBhbnlcbj4gPT5cbiAgRWZmZWN0LnNlcnZpY2VPcHRpb24oRWZmZWN0T3BDb3JlLkVmZmVjdE9wTWlkZGxld2FyZVRhZykucGlwZShcbiAgICBFZmZlY3QubWFwKChtYXliZSkgPT4gKE9wdGlvbi5pc1NvbWUobWF5YmUpID8gbWF5YmUudmFsdWUuc3RhY2sgOiBbXSkpLFxuICApXG5cbmV4cG9ydCBpbnRlcmZhY2UgQXBpPFNoIGV4dGVuZHMgTW9kdWxlU2hhcGU8YW55LCBhbnk+LCBSID0gbmV2ZXI+IHtcbiAgcmVhZG9ubHkgZnJvbUFjdGlvbjogPFQgZXh0ZW5kcyBBY3Rpb25PZjxTaD4+KFxuICAgIHByZWRpY2F0ZTogKGE6IEFjdGlvbk9mPFNoPikgPT4gYSBpcyBUXG4gICkgPT4gU3RyZWFtLlN0cmVhbTxUPlxuXG4gIHJlYWRvbmx5IGZyb21TdGF0ZTogPFY+KFxuICAgIHNlbGVjdG9yOiAoczogU3RhdGVPZjxTaD4pID0+IFZcbiAgKSA9PiBTdHJlYW0uU3RyZWFtPFY+XG5cbiAgcmVhZG9ubHkgZGVib3VuY2U6IDxWPihcbiAgICBtczogbnVtYmVyXG4gICkgPT4gKHN0cmVhbTogU3RyZWFtLlN0cmVhbTxWPikgPT4gU3RyZWFtLlN0cmVhbTxWPlxuXG4gIHJlYWRvbmx5IHRocm90dGxlOiA8Vj4oXG4gICAgbXM6IG51bWJlclxuICApID0+IChzdHJlYW06IFN0cmVhbS5TdHJlYW08Vj4pID0+IFN0cmVhbS5TdHJlYW08Vj5cblxuICByZWFkb25seSBmaWx0ZXI6IDxWPihcbiAgICBwcmVkaWNhdGU6ICh2YWx1ZTogVikgPT4gYm9vbGVhblxuICApID0+IChzdHJlYW06IFN0cmVhbS5TdHJlYW08Vj4pID0+IFN0cmVhbS5TdHJlYW08Vj5cblxuICByZWFkb25seSBydW46IDxWLCBBID0gdm9pZCwgRSA9IG5ldmVyLCBSMiA9IHVua25vd24+KFxuICAgIGVmZjpcbiAgICAgIHwgTG9naWMuT2Y8U2gsIFIgJiBSMiwgQSwgRT5cbiAgICAgIHwgKChwYXlsb2FkOiBWKSA9PiBMb2dpYy5PZjxTaCwgUiAmIFIyLCBBLCBFPiksXG4gICAgb3B0aW9ucz86IExvZ2ljLk9wZXJhdGlvbk9wdGlvbnMsXG4gICkgPT4gKHN0cmVhbTogU3RyZWFtLlN0cmVhbTxWPikgPT4gRWZmZWN0LkVmZmVjdDx2b2lkLCBFLCBMb2dpYy5FbnY8U2gsIFIgJiBSMj4+XG5cbiAgcmVhZG9ubHkgcnVuUGFyYWxsZWw6IDxWLCBBID0gdm9pZCwgRSA9IG5ldmVyLCBSMiA9IHVua25vd24+KFxuICAgIGVmZjpcbiAgICAgIHwgTG9naWMuT2Y8U2gsIFIgJiBSMiwgQSwgRT5cbiAgICAgIHwgKChwYXlsb2FkOiBWKSA9PiBMb2dpYy5PZjxTaCwgUiAmIFIyLCBBLCBFPiksXG4gICAgb3B0aW9ucz86IExvZ2ljLk9wZXJhdGlvbk9wdGlvbnMsXG4gICkgPT4gKHN0cmVhbTogU3RyZWFtLlN0cmVhbTxWPikgPT4gRWZmZWN0LkVmZmVjdDx2b2lkLCBFLCBMb2dpYy5FbnY8U2gsIFIgJiBSMj4+XG5cbiAgcmVhZG9ubHkgcnVuTGF0ZXN0OiA8ViwgQSA9IHZvaWQsIEUgPSBuZXZlciwgUjIgPSB1bmtub3duPihcbiAgICBlZmY6XG4gICAgICB8IExvZ2ljLk9mPFNoLCBSICYgUjIsIEEsIEU+XG4gICAgICB8ICgocGF5bG9hZDogVikgPT4gTG9naWMuT2Y8U2gsIFIgJiBSMiwgQSwgRT4pLFxuICAgIG9wdGlvbnM/OiBMb2dpYy5PcGVyYXRpb25PcHRpb25zLFxuICApID0+IChzdHJlYW06IFN0cmVhbS5TdHJlYW08Vj4pID0+IEVmZmVjdC5FZmZlY3Q8dm9pZCwgRSwgTG9naWMuRW52PFNoLCBSICYgUjI+PlxuXG4gIHJlYWRvbmx5IHJ1bkV4aGF1c3Q6IDxWLCBBID0gdm9pZCwgRSA9IG5ldmVyLCBSMiA9IHVua25vd24+KFxuICAgIGVmZjpcbiAgICAgIHwgTG9naWMuT2Y8U2gsIFIgJiBSMiwgQSwgRT5cbiAgICAgIHwgKChwYXlsb2FkOiBWKSA9PiBMb2dpYy5PZjxTaCwgUiAmIFIyLCBBLCBFPiksXG4gICAgb3B0aW9ucz86IExvZ2ljLk9wZXJhdGlvbk9wdGlvbnMsXG4gICkgPT4gKHN0cmVhbTogU3RyZWFtLlN0cmVhbTxWPikgPT4gRWZmZWN0LkVmZmVjdDx2b2lkLCBFLCBMb2dpYy5FbnY8U2gsIFIgJiBSMj4+XG59XG5cbmNvbnN0IHJlc29sdmVFZmZlY3QgPSA8VCwgU2ggZXh0ZW5kcyBBbnlNb2R1bGVTaGFwZSwgUiwgQSwgRT4oXG4gIGVmZjpcbiAgICB8IExvZ2ljLk9mPFNoLCBSLCBBLCBFPlxuICAgIHwgKChwYXlsb2FkOiBUKSA9PiBMb2dpYy5PZjxTaCwgUiwgQSwgRT4pLFxuICBwYXlsb2FkOiBUXG4pOiBMb2dpYy5PZjxTaCwgUiwgQSwgRT4gPT5cbiAgdHlwZW9mIGVmZiA9PT0gXCJmdW5jdGlvblwiXG4gICAgPyAoZWZmIGFzIChwOiBUKSA9PiBMb2dpYy5PZjxTaCwgUiwgQSwgRT4pKHBheWxvYWQpXG4gICAgOiBlZmZcblxuZXhwb3J0IGNvbnN0IG1ha2UgPSA8U2ggZXh0ZW5kcyBBbnlNb2R1bGVTaGFwZSwgUiA9IG5ldmVyPihcbiAgcnVudGltZTogTW9kdWxlUnVudGltZTxTdGF0ZU9mPFNoPiwgQWN0aW9uT2Y8U2g+PlxuKTogQXBpPFNoLCBSPiA9PiB7XG4gIGNvbnN0IHJ1bkFzRmxvd09wID0gPEEsIEUsIFIyLCBWPihcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgcGF5bG9hZDogVixcbiAgICBlZmY6IEVmZmVjdC5FZmZlY3Q8QSwgRSwgTG9naWMuRW52PFNoLCBSICYgUjI+PixcbiAgICBvcHRpb25zPzogTG9naWMuT3BlcmF0aW9uT3B0aW9ucyxcbiAgKTogRWZmZWN0LkVmZmVjdDxBLCBFLCBMb2dpYy5FbnY8U2gsIFIgJiBSMj4+ID0+XG4gICAgRWZmZWN0LmdlbihmdW5jdGlvbiogKCkge1xuICAgICAgY29uc3Qgc3RhY2sgPSB5aWVsZCogZ2V0TWlkZGxld2FyZVN0YWNrKClcbiAgICAgIGNvbnN0IG9wID0gRWZmZWN0T3AubWFrZTxBLCBFLCBhbnk+KHtcbiAgICAgICAga2luZDogXCJmbG93XCIsXG4gICAgICAgIG5hbWUsXG4gICAgICAgIHBheWxvYWQsXG4gICAgICAgIGVmZmVjdDogZWZmIGFzIGFueSxcbiAgICAgICAgbWV0YToge1xuICAgICAgICAgIC4uLihvcHRpb25zPy5tZXRhID8/IHt9KSxcbiAgICAgICAgICBwb2xpY3k6IG9wdGlvbnM/LnBvbGljeSxcbiAgICAgICAgICB0YWdzOiBvcHRpb25zPy50YWdzLFxuICAgICAgICAgIHRyYWNlOiBvcHRpb25zPy50cmFjZSxcbiAgICAgICAgICBtb2R1bGVJZDogKHJ1bnRpbWUgYXMgYW55KT8ubW9kdWxlSWQsXG4gICAgICAgICAgcnVudGltZUlkOiAocnVudGltZSBhcyBhbnkpPy5pZCxcbiAgICAgICAgfSxcbiAgICAgIH0pXG4gICAgICByZXR1cm4geWllbGQqIEVmZmVjdE9wLnJ1bihvcCwgc3RhY2spXG4gICAgfSkgYXMgYW55XG5cbiAgY29uc3QgcnVuRWZmZWN0ID1cbiAgICA8VCwgQSwgRSwgUjI+KFxuICAgICAgZWZmOlxuICAgICAgICB8IExvZ2ljLk9mPFNoLCBSICYgUjIsIEEsIEU+XG4gICAgICAgIHwgKChwYXlsb2FkOiBUKSA9PiBMb2dpYy5PZjxTaCwgUiAmIFIyLCBBLCBFPilcbiAgICApID0+XG4gICAgICAocGF5bG9hZDogVCkgPT5cbiAgICAgICAgcmVzb2x2ZUVmZmVjdDxULCBTaCwgUiAmIFIyLCBBLCBFPihlZmYsIHBheWxvYWQpXG5cbiAgY29uc3QgcnVuU3RyZWFtU2VxdWVudGlhbCA9IDxULCBBLCBFLCBSMj4oXG4gICAgZWZmOlxuICAgICAgfCBMb2dpYy5PZjxTaCwgUiAmIFIyLCBBLCBFPlxuICAgICAgfCAoKHBheWxvYWQ6IFQpID0+IExvZ2ljLk9mPFNoLCBSICYgUjIsIEEsIEU+KSxcbiAgICBvcHRpb25zPzogTG9naWMuT3BlcmF0aW9uT3B0aW9ucyxcbiAgKSA9PiAoc3RyZWFtOiBTdHJlYW0uU3RyZWFtPFQ+KTogRWZmZWN0LkVmZmVjdDx2b2lkLCBFLCBMb2dpYy5FbnY8U2gsIFIgJiBSMj4+ID0+XG4gICAgU3RyZWFtLnJ1bkZvckVhY2goc3RyZWFtLCAocGF5bG9hZCkgPT5cbiAgICAgIHJ1bkFzRmxvd09wPEEsIEUsIFIyLCBUPihcbiAgICAgICAgXCJmbG93LnJ1blwiLFxuICAgICAgICBwYXlsb2FkLFxuICAgICAgICBydW5FZmZlY3Q8VCwgQSwgRSwgUjI+KGVmZikocGF5bG9hZCksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICApLFxuICAgIClcblxuICBjb25zdCBydW5TdHJlYW1QYXJhbGxlbCA9IDxULCBBLCBFLCBSMj4oXG4gICAgZWZmOlxuICAgICAgfCBMb2dpYy5PZjxTaCwgUiAmIFIyLCBBLCBFPlxuICAgICAgfCAoKHBheWxvYWQ6IFQpID0+IExvZ2ljLk9mPFNoLCBSICYgUjIsIEEsIEU+KSxcbiAgICBvcHRpb25zPzogTG9naWMuT3BlcmF0aW9uT3B0aW9ucyxcbiAgKSA9PiAoc3RyZWFtOiBTdHJlYW0uU3RyZWFtPFQ+KTogRWZmZWN0LkVmZmVjdDx2b2lkLCBFLCBMb2dpYy5FbnY8U2gsIFIgJiBSMj4+ID0+XG4gICAgU3RyZWFtLnJ1bkRyYWluKFxuICAgICAgc3RyZWFtLnBpcGUoXG4gICAgICAgIFN0cmVhbS5tYXBFZmZlY3QoXG4gICAgICAgICAgKHBheWxvYWQpID0+XG4gICAgICAgICAgICBydW5Bc0Zsb3dPcDxBLCBFLCBSMiwgVD4oXG4gICAgICAgICAgICAgIFwiZmxvdy5ydW5QYXJhbGxlbFwiLFxuICAgICAgICAgICAgICBwYXlsb2FkLFxuICAgICAgICAgICAgICBydW5FZmZlY3Q8VCwgQSwgRSwgUjI+KGVmZikocGF5bG9hZCksXG4gICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICApLFxuICAgICAgICAgIHsgY29uY3VycmVuY3k6IFwidW5ib3VuZGVkXCIgfSxcbiAgICAgICAgKSxcbiAgICAgICksXG4gICAgKVxuXG4gIHJldHVybiB7XG4gICAgZnJvbUFjdGlvbjogPFQgZXh0ZW5kcyBBY3Rpb25PZjxTaD4+KFxuICAgICAgcHJlZGljYXRlOiAoYTogQWN0aW9uT2Y8U2g+KSA9PiBhIGlzIFRcbiAgICApID0+IHJ1bnRpbWUuYWN0aW9ucyQucGlwZShTdHJlYW0uZmlsdGVyKHByZWRpY2F0ZSkpLFxuXG4gICAgZnJvbVN0YXRlOiA8Vj4oc2VsZWN0b3I6IChzOiBTdGF0ZU9mPFNoPikgPT4gVikgPT5cbiAgICAgIHJ1bnRpbWUuY2hhbmdlcyhzZWxlY3RvciksXG5cbiAgICBkZWJvdW5jZTogKG1zOiBudW1iZXIpID0+IChzdHJlYW0pID0+IFN0cmVhbS5kZWJvdW5jZShzdHJlYW0sIG1zKSxcblxuICAgIHRocm90dGxlOiAobXM6IG51bWJlcikgPT4gKHN0cmVhbSkgPT5cbiAgICAgIFN0cmVhbS50aHJvdHRsZShzdHJlYW0sIHtcbiAgICAgICAgY29zdDogKCkgPT4gMSxcbiAgICAgICAgdW5pdHM6IDEsXG4gICAgICAgIGR1cmF0aW9uOiBtcyxcbiAgICAgICAgc3RyYXRlZ3k6IFwiZW5mb3JjZVwiLFxuICAgICAgfSksXG5cbiAgICBmaWx0ZXI6IChwcmVkaWNhdGU6ICh2YWx1ZTogYW55KSA9PiBib29sZWFuKSA9PiAoc3RyZWFtKSA9PlxuICAgICAgU3RyZWFtLmZpbHRlcihzdHJlYW0sIHByZWRpY2F0ZSksXG5cbiAgICBydW46IChlZmYsIG9wdGlvbnMpID0+IChzdHJlYW0pID0+XG4gICAgICBydW5TdHJlYW1TZXF1ZW50aWFsPGFueSwgYW55LCBhbnksIGFueT4oZWZmLCBvcHRpb25zKShzdHJlYW0pLFxuXG4gICAgcnVuUGFyYWxsZWw6IChlZmYsIG9wdGlvbnMpID0+IChzdHJlYW0pID0+XG4gICAgICBydW5TdHJlYW1QYXJhbGxlbDxhbnksIGFueSwgYW55LCBhbnk+KGVmZiwgb3B0aW9ucykoc3RyZWFtKSxcblxuICAgIHJ1bkxhdGVzdDogKGVmZiwgb3B0aW9ucykgPT4gKHN0cmVhbSkgPT5cbiAgICAgIFN0cmVhbS5ydW5EcmFpbihcbiAgICAgICAgU3RyZWFtLm1hcChzdHJlYW0sIChwYXlsb2FkKSA9PlxuICAgICAgICAgIHJ1bkFzRmxvd09wPGFueSwgYW55LCBhbnksIGFueT4oXG4gICAgICAgICAgICBcImZsb3cucnVuTGF0ZXN0XCIsXG4gICAgICAgICAgICBwYXlsb2FkLFxuICAgICAgICAgICAgcnVuRWZmZWN0PGFueSwgYW55LCBhbnksIGFueT4oZWZmKShwYXlsb2FkKSxcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgKVxuICAgICAgICApLnBpcGUoXG4gICAgICAgICAgU3RyZWFtLmZsYXRNYXAoKGVmZmVjdCkgPT4gU3RyZWFtLmZyb21FZmZlY3QoZWZmZWN0KSwge1xuICAgICAgICAgICAgc3dpdGNoOiB0cnVlLFxuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgICksXG5cbiAgICBydW5FeGhhdXN0OiAoZWZmLCBvcHRpb25zKSA9PiAoc3RyZWFtKSA9PlxuICAgICAgRWZmZWN0LmdlbihmdW5jdGlvbiogKCkge1xuICAgICAgICBjb25zdCBidXN5UmVmID0geWllbGQqIFJlZi5tYWtlKGZhbHNlKVxuICAgICAgICBjb25zdCBtYXBwZXIgPSAocGF5bG9hZDogYW55KSA9PlxuICAgICAgICAgIEVmZmVjdC5nZW4oZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IGFjcXVpcmVkID0geWllbGQqIFJlZi5tb2RpZnkoYnVzeVJlZiwgKGJ1c3kpID0+XG4gICAgICAgICAgICAgIGJ1c3kgPyAoW2ZhbHNlLCBidXN5XSBhcyBjb25zdCkgOiAoW3RydWUsIHRydWVdIGFzIGNvbnN0KVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgaWYgKCFhY3F1aXJlZCkge1xuICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIHlpZWxkKiBydW5Bc0Zsb3dPcDxhbnksIGFueSwgYW55LCBhbnk+KFxuICAgICAgICAgICAgICAgIFwiZmxvdy5ydW5FeGhhdXN0XCIsXG4gICAgICAgICAgICAgICAgcGF5bG9hZCxcbiAgICAgICAgICAgICAgICBydW5FZmZlY3Q8YW55LCBhbnksIGFueSwgYW55PihlZmYpKHBheWxvYWQpLFxuICAgICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgIHlpZWxkKiBSZWYuc2V0KGJ1c3lSZWYsIGZhbHNlKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG5cbiAgICAgICAgcmV0dXJuIHlpZWxkKiBTdHJlYW0ucnVuRHJhaW4oXG4gICAgICAgICAgc3RyZWFtLnBpcGUoXG4gICAgICAgICAgICBTdHJlYW0ubWFwRWZmZWN0KG1hcHBlciwgeyBjb25jdXJyZW5jeTogXCJ1bmJvdW5kZWRcIiB9KVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgfSksXG4gIH1cbn1cbiIsICIvLyBFZmZlY3RPcCBcdTY4MzhcdTVGQzNcdTZBMjFcdTU3OEJcdTRFMEUgTWlkZGxld2FyZSBcdTdFQzRcdTU0MDhcdTkwM0JcdThGOTFcdTMwMDJcbi8vIFx1NjZGNFx1OUFEOFx1NUM0Mlx1NzY4NCBSdW50aW1lIC8gRGV2dG9vbHMgXHU1QkY5XHU2M0E1XHU4OUMxXHVGRjFBXG4vLyBzcGVjcy8wMDEtbW9kdWxlLXRyYWl0cy1ydW50aW1lL3JlZmVyZW5jZXMvZWZmZWN0b3AtYW5kLW1pZGRsZXdhcmUubWRcblxuaW1wb3J0IHsgQ29udGV4dCwgRWZmZWN0LCBGaWJlclJlZiB9IGZyb20gXCJlZmZlY3RcIlxuXG4vKipcbiAqIGN1cnJlbnRMaW5rSWRcdUZGMUFcbiAqIC0gXHU0RUU1IEZpYmVyUmVmIFx1NUY2Mlx1NUYwRlx1NjI3Rlx1OEY3RFx1NUY1M1x1NTI0RFx1NjRDRFx1NEY1Q1x1OTRGRVx1OERFRiBpZFx1RkYwOGxpbmtJZFx1RkYwOVx1RkYxQlxuICogLSBcdTc1MjhcdTRFOEVcdTVDMDZcdTU0MENcdTRFMDBcdTk0RkVcdThERUZcdTRFMEJcdTc2ODRcdTU5MUFcdTZCNjVcdThGQjlcdTc1NENcdTY0Q0RcdTRGNUNcdTUxNzNcdTgwNTRcdThENzdcdTY3NjVcdUZGMDhcdThERThcdTZBMjFcdTU3NTdcdTRFNUZcdTUzRUZcdTU5MERcdTc1MjhcdTU0MENcdTRFMDAgRmliZXJSZWZcdUZGMDlcdTMwMDJcbiAqL1xuZXhwb3J0IGNvbnN0IGN1cnJlbnRMaW5rSWQgPSBGaWJlclJlZi51bnNhZmVNYWtlPHN0cmluZyB8IHVuZGVmaW5lZD4odW5kZWZpbmVkKVxuXG4vKipcbiAqIE9wZXJhdGlvblBvbGljeVx1RkYxQVxuICogLSBcdTVDNDBcdTkwRThcdTdCNTZcdTc1NjVcdTY4MDdcdTZDRThcdUZGMDhcdTRFQzVcdTg4NjhcdThGQkVcdTYxMEZcdTU2RkVcdUZGMENcdTRFMERcdTY0M0FcdTVFMjZcdTg5QzRcdTUyMTlcdTkwM0JcdThGOTFcdUZGMDlcdTMwMDJcbiAqXG4gKiBcdTdFQTZcdTY3NUZcdUZGMDhcdTc1MzEgUnVudGltZS9taWRkbGV3YXJlIFx1NTE3MVx1NTQwQ1x1NEZERFx1OEJDMVx1RkYwOVx1RkYxQVxuICogLSBcdTUzRUFcdTgwRkRcdTUxNzNcdTk1RURcdTdFQUZcdTg5QzJcdTZENEJcdTdDN0JcdTgwRkRcdTUyOUJcdUZGMDhPYnNlcnZlclx1RkYwOVx1RkYxQlx1NEUwRFx1NUY5N1x1NTE3M1x1OTVFRFx1NTE2OFx1NUM0MFx1NUI4OFx1NTM2Qlx1MzAwMlxuICovXG5leHBvcnQgaW50ZXJmYWNlIE9wZXJhdGlvblBvbGljeSB7XG4gIHJlYWRvbmx5IGRpc2FibGVPYnNlcnZlcnM/OiBib29sZWFuXG59XG5cbi8qKlxuICogT3BlcmF0aW9uUmVqZWN0ZWRcdUZGMUFcbiAqIC0gXHU1Qjg4XHU1MzZCXHU2MkQyXHU3RUREXHU2MjY3XHU4ODRDXHU2NUY2XHU3Njg0XHU3RURGXHU0RTAwXHU1OTMxXHU4RDI1XHU3RUQzXHU2NzlDXHVGRjFCXG4gKiAtIFx1OEJFRFx1NEU0OVx1RkYxQVx1NjYzRVx1NUYwRlx1NTkzMVx1OEQyNSArIFx1NjVFMFx1NEUxQVx1NTJBMVx1NTI2Rlx1NEY1Q1x1NzUyOFx1RkYwOFx1NjJEMlx1N0VERFx1NUZDNVx1OTg3Qlx1NTNEMVx1NzUxRlx1NTcyOFx1NzUyOFx1NjIzN1x1N0EwQlx1NUU4Rlx1NjI2N1x1ODg0Q1x1NTI0RFx1RkYwOVx1MzAwMlxuICovXG5leHBvcnQgaW50ZXJmYWNlIE9wZXJhdGlvblJlamVjdGVkIHtcbiAgcmVhZG9ubHkgX3RhZzogXCJPcGVyYXRpb25SZWplY3RlZFwiXG4gIHJlYWRvbmx5IG1lc3NhZ2U6IHN0cmluZ1xuICByZWFkb25seSBraW5kPzogRWZmZWN0T3BbXCJraW5kXCJdXG4gIHJlYWRvbmx5IG5hbWU/OiBzdHJpbmdcbiAgcmVhZG9ubHkgbGlua0lkPzogc3RyaW5nXG4gIHJlYWRvbmx5IGRldGFpbHM/OiB1bmtub3duXG59XG5cbi8qKlxuICogT3BlcmF0aW9uRXJyb3JcdUZGMUFcbiAqIC0gXHU0RUZCXHU0RjU1XHU5MDFBXHU4RkM3IEVmZmVjdE9wIFx1NjAzQlx1N0VCRlx1NjI2N1x1ODg0Q1x1NzY4NFx1OEZCOVx1NzU0Q1x1NjRDRFx1NEY1Q1x1RkYwQ1x1OTBGRFx1NTNFRlx1ODBGRFx1ODhBQiBHdWFyZCBtaWRkbGV3YXJlIFx1NjYzRVx1NUYwRlx1NjJEMlx1N0VERFx1RkYxQlxuICogLSBcdTU2RTBcdTZCNjQgbWlkZGxld2FyZSBcdTc2ODRcdTk1MTlcdThCRUZcdTkwMUFcdTkwNTNcdTVGQzVcdTk4N0JcdTUxNDFcdThCQjhcdTUzRTBcdTUyQTAgT3BlcmF0aW9uUmVqZWN0ZWRcdTMwMDJcbiAqL1xuZXhwb3J0IHR5cGUgT3BlcmF0aW9uRXJyb3I8RT4gPSBFIHwgT3BlcmF0aW9uUmVqZWN0ZWRcblxuZXhwb3J0IGNvbnN0IG1ha2VPcGVyYXRpb25SZWplY3RlZCA9IChwYXJhbXM6IHtcbiAgcmVhZG9ubHkgbWVzc2FnZTogc3RyaW5nXG4gIHJlYWRvbmx5IGtpbmQ/OiBFZmZlY3RPcFtcImtpbmRcIl1cbiAgcmVhZG9ubHkgbmFtZT86IHN0cmluZ1xuICByZWFkb25seSBsaW5rSWQ/OiBzdHJpbmdcbiAgcmVhZG9ubHkgZGV0YWlscz86IHVua25vd25cbn0pOiBPcGVyYXRpb25SZWplY3RlZCA9PiAoe1xuICBfdGFnOiBcIk9wZXJhdGlvblJlamVjdGVkXCIsXG4gIG1lc3NhZ2U6IHBhcmFtcy5tZXNzYWdlLFxuICBraW5kOiBwYXJhbXMua2luZCxcbiAgbmFtZTogcGFyYW1zLm5hbWUsXG4gIGxpbmtJZDogcGFyYW1zLmxpbmtJZCxcbiAgZGV0YWlsczogcGFyYW1zLmRldGFpbHMsXG59KVxuXG4vKipcbiAqIEVmZmVjdE9wXHVGRjFBXHU3RURGXHU0RTAwXHU4ODY4XHU3OTNBXHU0RTAwXHU2QjIxXHUyMDFDXHU1M0VGXHU4OUMyXHU2RDRCXHU4RkI5XHU3NTRDXHUyMDFEXHU3Njg0IEVmZmVjdCBcdTYyNjdcdTg4NENcdTMwMDJcbiAqXG4gKiAtIE91dCAvIEVyciAvIEVudiBcdTRFM0FcdTUxODVcdTkwRTggRWZmZWN0IFx1NzY4NFx1NkNEQlx1NTc4Qlx1NTNDMlx1NjU3MFx1RkYxQlxuICogLSBtZXRhIFx1NzUyOFx1NEU4RVx1NjI3Rlx1OEY3RCBEZXZ0b29scyAvIE1pZGRsZXdhcmUgXHU2MjQwXHU5NzAwXHU3Njg0XHU3RUQzXHU2Nzg0XHU1MzE2XHU0RTBBXHU0RTBCXHU2NTg3XHU0RkUxXHU2MDZGXHUzMDAyXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRWZmZWN0T3A8T3V0ID0gdW5rbm93biwgRXJyID0gdW5rbm93biwgRW52ID0gdW5rbm93bj4ge1xuICByZWFkb25seSBpZDogc3RyaW5nXG4gIHJlYWRvbmx5IGtpbmQ6XG4gICAgfCBcImFjdGlvblwiXG4gICAgfCBcImZsb3dcIlxuICAgIHwgXCJzdGF0ZVwiXG4gICAgfCBcInNlcnZpY2VcIlxuICAgIHwgXCJsaWZlY3ljbGVcIlxuICAgIHwgXCJ0cmFpdC1jb21wdXRlZFwiXG4gICAgfCBcInRyYWl0LWxpbmtcIlxuICAgIHwgXCJ0cmFpdC1zb3VyY2VcIlxuICAgIHwgXCJkZXZ0b29sc1wiXG4gIHJlYWRvbmx5IG5hbWU6IHN0cmluZ1xuICByZWFkb25seSBwYXlsb2FkPzogdW5rbm93blxuICByZWFkb25seSBtZXRhPzoge1xuICAgIC8qKlxuICAgICAqIGxpbmtJZFx1RkYxQVxuICAgICAqIC0gXHU2NENEXHU0RjVDXHU5NEZFXHU4REVGIGlkXHVGRjFBXHU1NDBDXHU0RTAwXHU5NEZFXHU4REVGXHU0RTBCXHU3Njg0XHU1OTFBXHU2QjY1XHU4RkI5XHU3NTRDXHU2NENEXHU0RjVDXHU1RkM1XHU5ODdCXHU1MTcxXHU0RUFCXHVGRjFCXG4gICAgICogLSBSdW50aW1lIFx1NEZERFx1OEJDMVx1NTcyOFx1NjI0MFx1NjcwOVx1OEZCOVx1NzU0Q1x1NjRDRFx1NEY1Q1x1NEUwQVx1OTBGRFx1NEYxQVx1ODg2NVx1OUY1MFx1OEJFNVx1NUI1N1x1NkJCNVx1MzAwMlxuICAgICAqL1xuICAgIGxpbmtJZD86IHN0cmluZ1xuICAgIG1vZHVsZUlkPzogc3RyaW5nXG4gICAgcnVudGltZUlkPzogc3RyaW5nXG4gICAgcnVudGltZUxhYmVsPzogc3RyaW5nXG4gICAgdHhuSWQ/OiBzdHJpbmdcbiAgICBmaWVsZFBhdGg/OiBzdHJpbmdcbiAgICBkZXBzPzogUmVhZG9ubHlBcnJheTxzdHJpbmc+XG4gICAgZnJvbT86IHN0cmluZ1xuICAgIHRvPzogc3RyaW5nXG4gICAgdHJhaXROb2RlSWQ/OiBzdHJpbmdcbiAgICBzdGVwSWQ/OiBzdHJpbmdcbiAgICByZXNvdXJjZUlkPzogc3RyaW5nXG4gICAga2V5PzogdW5rbm93blxuICAgIHRyYWNlPzogUmVhZG9ubHlBcnJheTxzdHJpbmc+XG4gICAgdGFncz86IFJlYWRvbmx5QXJyYXk8c3RyaW5nPlxuICAgIHBvbGljeT86IE9wZXJhdGlvblBvbGljeVxuICAgIC8vIFx1OTg4NFx1NzU1OVx1NjI2OVx1NUM1NVx1NEY0RFx1RkYwQ1x1NEY5Qlx1NEUyRFx1OTVGNFx1NEVGNlx1NEUwRSBEZXZ0b29scyBcdTYzMDJcdThGN0RcdTk4OURcdTU5MTZcdTRGRTFcdTYwNkZcdTMwMDJcbiAgICByZWFkb25seSBbazogc3RyaW5nXTogdW5rbm93blxuICB9XG4gIHJlYWRvbmx5IGVmZmVjdDogRWZmZWN0LkVmZmVjdDxPdXQsIEVyciwgRW52PlxufVxuXG4vKipcbiAqIE1pZGRsZXdhcmVcdUZGMUFcdTVCRjkgRWZmZWN0T3AgXHU4RkRCXHU4ODRDXHU4OUMyXHU1QkRGIC8gXHU1MzA1XHU4OEM1IC8gXHU1Qjg4XHU1MzZCXHU3Njg0XHU5MDFBXHU3NTI4XHU0RTJEXHU5NUY0XHU0RUY2XHU2QTIxXHU1NzhCXHUzMDAyXG4gKi9cbmV4cG9ydCB0eXBlIE1pZGRsZXdhcmUgPSA8QSwgRSwgUj4oXG4gIG9wOiBFZmZlY3RPcDxBLCBFLCBSPixcbikgPT4gRWZmZWN0LkVmZmVjdDxBLCBPcGVyYXRpb25FcnJvcjxFPiwgUj5cblxuZXhwb3J0IHR5cGUgTWlkZGxld2FyZVN0YWNrID0gUmVhZG9ubHlBcnJheTxNaWRkbGV3YXJlPlxuXG4vKipcbiAqIEVmZmVjdE9wTWlkZGxld2FyZUVudlx1RkYxQVxuICogLSBcdTRGNUNcdTRFM0EgRWZmZWN0IEVudiBcdTRFMkRcdTc2ODRcdTRFMDBcdTk4NzkgU2VydmljZVx1RkYwQ1x1NjI3Rlx1OEY3RFx1NUY1M1x1NTI0RCBSdW50aW1lIFx1NzY4NCBNaWRkbGV3YXJlU3RhY2tcdUZGMUJcbiAqIC0gXHU3NTMxIFJ1bnRpbWUudHMgXHU1NzI4XHU2Nzg0XHU5MDIwIE1hbmFnZWRSdW50aW1lIFx1NjVGNlx1NkNFOFx1NTE2NVx1RkYxQlxuICogLSBTdGF0ZVRyYWl0Lmluc3RhbGwgXHU3QjQ5XHU4RkQwXHU4ODRDXHU2NUY2XHU0RUUzXHU3ODAxXHU5MDFBXHU4RkM3XHU4QkU1IFNlcnZpY2UgXHU1MUIzXHU1QjlBXHU1QjlFXHU5NjQ1XHU0RjdGXHU3NTI4XHU3Njg0IE1pZGRsZXdhcmVTdGFja1x1MzAwMlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEVmZmVjdE9wTWlkZGxld2FyZUVudiB7XG4gIHJlYWRvbmx5IHN0YWNrOiBNaWRkbGV3YXJlU3RhY2tcbn1cblxuZXhwb3J0IGNsYXNzIEVmZmVjdE9wTWlkZGxld2FyZVRhZyBleHRlbmRzIENvbnRleHQuVGFnKFxuICBcIkxvZ2l4L0VmZmVjdE9wTWlkZGxld2FyZVwiLFxuKTxFZmZlY3RPcE1pZGRsZXdhcmVUYWcsIEVmZmVjdE9wTWlkZGxld2FyZUVudj4oKSB7fVxuXG4vKipcbiAqIGNvbXBvc2VNaWRkbGV3YXJlXHVGRjFBXG4gKiAtIFx1NjMwOVx1MzAwQ1x1NThGMFx1NjYwRVx1OTg3QVx1NUU4Rlx1NEVDRVx1NTkxNlx1NTIzMFx1NTE4NVx1MzAwRFx1N0VDNFx1NTQwOCBNaWRkbGV3YXJlXHVGRjFBXG4gKiAgIC0gc3RhY2sgPSBbbXcxLCBtdzJdID0+IFx1NUI5RVx1OTY0NVx1NjI2N1x1ODg0Q1x1OTg3QVx1NUU4Rlx1RkYxQW13MSAtPiBtdzIgLT4gZWZmZWN0IC0+IG13MiAtPiBtdzFcdUZGMUJcbiAqIC0gXHU0RTBFIHJlZmVyZW5jZSBcdTY1ODdcdTY4NjNcdTRFMkRcdTc2ODQgcmVkdWNlUmlnaHQgXHU3OTNBXHU0RjhCXHU0RkREXHU2MzAxXHU0RTAwXHU4MUY0XHUzMDAyXG4gKi9cbmV4cG9ydCBjb25zdCBjb21wb3NlTWlkZGxld2FyZSA9IChzdGFjazogTWlkZGxld2FyZVN0YWNrKTogTWlkZGxld2FyZSA9PiB7XG4gIHJldHVybiA8QSwgRSwgUj4ob3A6IEVmZmVjdE9wPEEsIEUsIFI+KTogRWZmZWN0LkVmZmVjdDxBLCBPcGVyYXRpb25FcnJvcjxFPiwgUj4gPT5cbiAgICBzdGFjay5yZWR1Y2VSaWdodDxFZmZlY3QuRWZmZWN0PEEsIE9wZXJhdGlvbkVycm9yPEU+LCBSPj4oXG4gICAgICAoZWZmLCBtdykgPT4gbXcoeyAuLi5vcCwgZWZmZWN0OiBlZmYgfSBhcyBhbnkpIGFzIGFueSxcbiAgICAgIG9wLmVmZmVjdCBhcyBFZmZlY3QuRWZmZWN0PEEsIE9wZXJhdGlvbkVycm9yPEU+LCBSPixcbiAgICApXG59XG5cbi8qKlxuICogcnVuV2l0aE1pZGRsZXdhcmVcdUZGMUFcbiAqIC0gXHU3RUQ5XHU1QjlBXHU0RTAwXHU2NzYxIEVmZmVjdE9wIFx1NEUwRSBNaWRkbGV3YXJlU3RhY2tcdUZGMENcdTYzMDlcdTdFQzRcdTU0MDhcdTg5QzRcdTUyMTlcdTYyNjdcdTg4NENcdUZGMUJcbiAqIC0gXHU4MkU1IHN0YWNrIFx1NEUzQVx1N0E3QVx1RkYwQ1x1NTIxOVx1NzZGNFx1NjNBNVx1OEZENFx1NTZERSBvcC5lZmZlY3RcdTMwMDJcbiAqL1xuZXhwb3J0IGNvbnN0IHJ1bldpdGhNaWRkbGV3YXJlID0gPEEsIEUsIFI+KFxuICBvcDogRWZmZWN0T3A8QSwgRSwgUj4sXG4gIHN0YWNrOiBNaWRkbGV3YXJlU3RhY2ssXG4pOiBFZmZlY3QuRWZmZWN0PEEsIEUsIFI+ID0+IHtcbiAgY29uc3QgbWFrZUxpbmtJZCA9ICgpOiBzdHJpbmcgPT5cbiAgICBgJHtEYXRlLm5vdygpLnRvU3RyaW5nKDM2KX0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyKX1gXG5cbiAgcmV0dXJuIEVmZmVjdC5nZW4oZnVuY3Rpb24qICgpIHtcbiAgICBjb25zdCBleGlzdGluZyA9IHlpZWxkKiBGaWJlclJlZi5nZXQoY3VycmVudExpbmtJZClcbiAgICBjb25zdCBsaW5rSWQgPSAob3AubWV0YSBhcyBhbnkpPy5saW5rSWQgPz8gZXhpc3RpbmcgPz8gbWFrZUxpbmtJZCgpXG5cbiAgICBjb25zdCBuZXh0T3A6IEVmZmVjdE9wPEEsIEUsIFI+ID0ge1xuICAgICAgLi4ub3AsXG4gICAgICBtZXRhOiB7XG4gICAgICAgIC4uLihvcC5tZXRhID8/IHt9KSxcbiAgICAgICAgbGlua0lkLFxuICAgICAgfSxcbiAgICB9XG5cbiAgICBjb25zdCBwcm9ncmFtID0gc3RhY2subGVuZ3RoID8gY29tcG9zZU1pZGRsZXdhcmUoc3RhY2spKG5leHRPcCkgOiBuZXh0T3AuZWZmZWN0XG5cbiAgICAvLyBsaW5rSWRcdUZGMUFcdThGQjlcdTc1NENcdThENzdcdTcwQjlcdTUyMUJcdTVFRkFcdUZGMENcdTVENENcdTU5NTdcdTU5MERcdTc1MjhcdUZGMDhcdTU0MENcdTRFMDAgRmliZXJSZWYgXHU0RTNBXHU1MTY4XHU1QzQwXHU1MzU1XHU0RTAwXHU0RThCXHU1QjlFXHU2RTkwXHVGRjA5XHUzMDAyXG4gICAgLy8gTk9URTogbWlkZGxld2FyZSBcdTUxNDFcdThCQjhcdTRFRTUgT3BlcmF0aW9uUmVqZWN0ZWQgXHU2NjNFXHU1RjBGXHU2MkQyXHU3RUREXHUzMDAyXG4gICAgcmV0dXJuIHlpZWxkKiBFZmZlY3QubG9jYWxseShjdXJyZW50TGlua0lkLCBsaW5rSWQpKHByb2dyYW0gYXMgYW55KVxuICB9KSBhcyBFZmZlY3QuRWZmZWN0PEEsIEUsIFI+XG59XG4iLCAiLy8gUHVibGljIEVmZmVjdE9wIEFQSVx1MzAwMlxuLy8gLSBcdTVCRjlcdTU5MTZcdTY2QjRcdTk3MzIgRWZmZWN0T3AgXHU2M0E1XHU1M0UzXHU0RTBFIE1pZGRsZXdhcmUgXHU3QzdCXHU1NzhCXHU1MjJCXHU1NDBEXHVGRjFCXG4vLyAtIFx1NjNEMFx1NEY5QiBtYWtlIC8gd2l0aE1ldGEgLyBydW4gXHU3QjQ5XHU4Rjg1XHU1MkE5XHU1MUZEXHU2NTcwXHVGRjFCXG4vLyAtIFx1NTE3N1x1NEY1M1x1OEZEMFx1ODg0Q1x1NjVGNlx1NjNBNVx1N0VCRlx1NzUzMSBpbnRlcm5hbC9ydW50aW1lL0VmZmVjdE9wQ29yZSBcdTYyN0ZcdTYyQzVcdTMwMDJcblxuaW1wb3J0IHsgRWZmZWN0IH0gZnJvbSBcImVmZmVjdFwiXG5pbXBvcnQgKiBhcyBDb3JlIGZyb20gXCIuL2ludGVybmFsL3J1bnRpbWUvRWZmZWN0T3BDb3JlLmpzXCJcblxuZXhwb3J0IHR5cGUgRWZmZWN0T3A8T3V0ID0gdW5rbm93biwgRXJyID0gdW5rbm93biwgRW52ID0gdW5rbm93bj4gPVxuICBDb3JlLkVmZmVjdE9wPE91dCwgRXJyLCBFbnY+XG5cbmV4cG9ydCB0eXBlIE9wZXJhdGlvblBvbGljeSA9IENvcmUuT3BlcmF0aW9uUG9saWN5XG5cbmV4cG9ydCB0eXBlIE9wZXJhdGlvblJlamVjdGVkID0gQ29yZS5PcGVyYXRpb25SZWplY3RlZFxuXG5leHBvcnQgdHlwZSBPcGVyYXRpb25FcnJvcjxFPiA9IENvcmUuT3BlcmF0aW9uRXJyb3I8RT5cblxuZXhwb3J0IHR5cGUgTWlkZGxld2FyZSA9IENvcmUuTWlkZGxld2FyZVxuXG5leHBvcnQgdHlwZSBNaWRkbGV3YXJlU3RhY2sgPSBDb3JlLk1pZGRsZXdhcmVTdGFja1xuXG5leHBvcnQgY29uc3QgY29tcG9zZU1pZGRsZXdhcmUgPSBDb3JlLmNvbXBvc2VNaWRkbGV3YXJlXG5cbmV4cG9ydCBjb25zdCBtYWtlT3BlcmF0aW9uUmVqZWN0ZWQgPSBDb3JlLm1ha2VPcGVyYXRpb25SZWplY3RlZFxuXG4vKipcbiAqIFx1NzUxRlx1NjIxMFx1OTY4Rlx1NjczQSBpZFx1RkYwQ1x1NzUyOFx1NEU4RVx1NjgwN1x1OEJDNlx1NEUwMFx1NkIyMSBFZmZlY3RPcFx1MzAwMlxuICogLSBcdTRFQzVcdTc1MjhcdTRFOEVcdTY1RTVcdTVGRDcgLyBcdThDMDNcdThCRDVcdUZGMENcdTRFMERcdTg5ODFcdTZDNDJcdTVGM0FcdTk2OEZcdTY3M0FcdTYwMjdcdTMwMDJcbiAqL1xuY29uc3QgbWFrZUlkID0gKCk6IHN0cmluZyA9PiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyKVxuXG4vKipcbiAqIEVmZmVjdE9wLm1ha2VcdUZGMUFcbiAqIC0gXHU1MjFCXHU1RUZBXHU0RTAwXHU2NzYxXHU1RTI2XHU1N0ZBXHU2NzJDIG1ldGEgXHU3Njg0IEVmZmVjdE9wXHVGRjFCXG4gKiAtIFx1OUVEOFx1OEJBNFx1NzUxRlx1NjIxMFx1OTY4Rlx1NjczQSBpZFx1RkYwQ1x1OEMwM1x1NzUyOFx1NjVCOVx1NTNFRlx1NTcyOFx1NTkxNlx1NUM0Mlx1ODk4Nlx1NTE5OVx1MzAwMlxuICovXG5leHBvcnQgY29uc3QgbWFrZSA9IDxBLCBFLCBSPihwYXJhbXM6IHtcbiAgcmVhZG9ubHkga2luZDogRWZmZWN0T3BbXCJraW5kXCJdXG4gIHJlYWRvbmx5IG5hbWU6IHN0cmluZ1xuICByZWFkb25seSBlZmZlY3Q6IEVmZmVjdC5FZmZlY3Q8QSwgRSwgUj5cbiAgcmVhZG9ubHkgcGF5bG9hZD86IHVua25vd25cbiAgcmVhZG9ubHkgbWV0YT86IEVmZmVjdE9wW1wibWV0YVwiXVxuICByZWFkb25seSBpZD86IHN0cmluZ1xufSk6IEVmZmVjdE9wPEEsIEUsIFI+ID0+ICh7XG4gIGlkOiBwYXJhbXMuaWQgPz8gbWFrZUlkKCksXG4gIGtpbmQ6IHBhcmFtcy5raW5kLFxuICBuYW1lOiBwYXJhbXMubmFtZSxcbiAgcGF5bG9hZDogcGFyYW1zLnBheWxvYWQsXG4gIG1ldGE6IHBhcmFtcy5tZXRhLFxuICBlZmZlY3Q6IHBhcmFtcy5lZmZlY3QsXG59KVxuXG4vKipcbiAqIEVmZmVjdE9wLndpdGhNZXRhXHVGRjFBXG4gKiAtIFx1NTcyOFx1NzNCMFx1NjcwOSBFZmZlY3RPcCBcdTRFMEFcdThGRkRcdTUyQTBcdTYyMTZcdTg5ODZcdTc2RDYgbWV0YSBcdTVCNTdcdTZCQjVcdUZGMUJcbiAqIC0gXHU0RTBEXHU2NTM5XHU1M0Q4IGVmZmVjdCBcdTY3MkNcdThFQUJcdTMwMDJcbiAqL1xuZXhwb3J0IGNvbnN0IHdpdGhNZXRhID0gPEEsIEUsIFI+KFxuICBvcDogRWZmZWN0T3A8QSwgRSwgUj4sXG4gIG1ldGE6IFBhcnRpYWw8Tm9uTnVsbGFibGU8RWZmZWN0T3BbXCJtZXRhXCJdPj4sXG4pOiBFZmZlY3RPcDxBLCBFLCBSPiA9PiAoe1xuICAuLi5vcCxcbiAgbWV0YTogeyAuLi4ob3AubWV0YSA/PyB7fSksIC4uLm1ldGEgfSxcbn0pXG5cbi8qKlxuICogRWZmZWN0T3AucnVuXHVGRjFBXG4gKiAtIFx1NEY3Rlx1NzUyOFx1N0VEOVx1NUI5QSBNaWRkbGV3YXJlU3RhY2sgXHU2MjY3XHU4ODRDXHU0RTAwXHU2NzYxIEVmZmVjdE9wXHVGRjFCXG4gKiAtIFx1ODJFNSBzdGFjayBcdTRFM0FcdTdBN0FcdUZGMENcdTUyMTlcdTc2RjRcdTYzQTVcdThGRDRcdTU2REUgb3AuZWZmZWN0XHUzMDAyXG4gKi9cbmV4cG9ydCBjb25zdCBydW4gPSA8QSwgRSwgUj4oXG4gIG9wOiBFZmZlY3RPcDxBLCBFLCBSPixcbiAgc3RhY2s6IE1pZGRsZXdhcmVTdGFjayxcbik6IEVmZmVjdC5FZmZlY3Q8QSwgRSwgUj4gPT4gQ29yZS5ydW5XaXRoTWlkZGxld2FyZShvcCwgc3RhY2spXG4iLCAiaW1wb3J0IHsgRWZmZWN0IH0gZnJvbSBcImVmZmVjdFwiXG5cbmV4cG9ydCBjb25zdCBtYWtlTWF0Y2ggPSA8Vj4odmFsdWU6IFYpID0+IHtcbiAgbGV0IHJlc3VsdDogRWZmZWN0LkVmZmVjdDxhbnksIGFueSwgYW55PiB8IHVuZGVmaW5lZFxuXG4gIGNvbnN0IGNoYWluID0ge1xuICAgIHdpdGg6IDxBPihcbiAgICAgIHByZWRpY2F0ZTogKHZhbHVlOiBWKSA9PiBib29sZWFuLFxuICAgICAgaGFuZGxlcjogKHZhbHVlOiBWKSA9PiBBXG4gICAgKSA9PiB7XG4gICAgICBpZiAocmVzdWx0KSByZXR1cm4gY2hhaW5cbiAgICAgIGlmIChwcmVkaWNhdGUodmFsdWUpKSB7XG4gICAgICAgIHJlc3VsdCA9IGhhbmRsZXIodmFsdWUpIGFzIGFueVxuICAgICAgfVxuICAgICAgcmV0dXJuIGNoYWluXG4gICAgfSxcbiAgICBvdGhlcndpc2U6IDxBPihoYW5kbGVyOiAodmFsdWU6IFYpID0+IEEpOiBBID0+IHtcbiAgICAgIGlmIChyZXN1bHQpIHJldHVybiByZXN1bHQgYXMgQVxuICAgICAgcmV0dXJuIGhhbmRsZXIodmFsdWUpXG4gICAgfSxcbiAgICBleGhhdXN0aXZlOiAoKSA9PiB7XG4gICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgIH1cbiAgICAgIHJldHVybiBFZmZlY3QuZGllTWVzc2FnZShcbiAgICAgICAgXCJbRmx1ZW50TWF0Y2hdIE5vbi1leGhhdXN0aXZlIG1hdGNoOiBubyBwYXR0ZXJuIG1hdGNoZWQgdmFsdWVcIlxuICAgICAgKVxuICAgIH0sXG4gIH1cblxuICByZXR1cm4gY2hhaW5cbn1cblxuZXhwb3J0IGNvbnN0IG1ha2VNYXRjaFRhZyA9IDxWIGV4dGVuZHMgeyBfdGFnOiBzdHJpbmcgfT4odmFsdWU6IFYpID0+IHtcbiAgbGV0IHJlc3VsdDogRWZmZWN0LkVmZmVjdDxhbnksIGFueSwgYW55PiB8IHVuZGVmaW5lZFxuXG4gIGNvbnN0IGNoYWluID0ge1xuICAgIHdpdGg6IDxLIGV4dGVuZHMgVltcIl90YWdcIl0sIEE+KFxuICAgICAgdDogSyxcbiAgICAgIGhhbmRsZXI6ICh2YWx1ZTogRXh0cmFjdDxWLCB7IF90YWc6IEsgfT4pID0+IEFcbiAgICApID0+IHtcbiAgICAgIGlmIChyZXN1bHQpIHJldHVybiBjaGFpblxuICAgICAgaWYgKHZhbHVlLl90YWcgPT09IHQpIHtcbiAgICAgICAgcmVzdWx0ID0gaGFuZGxlcih2YWx1ZSBhcyBFeHRyYWN0PFYsIHsgX3RhZzogSyB9PikgYXMgYW55XG4gICAgICB9XG4gICAgICByZXR1cm4gY2hhaW5cbiAgICB9LFxuICAgIG90aGVyd2lzZTogPEE+KGhhbmRsZXI6ICh2YWx1ZTogVikgPT4gQSk6IEEgPT4ge1xuICAgICAgaWYgKHJlc3VsdCkgcmV0dXJuIHJlc3VsdCBhcyBBXG4gICAgICByZXR1cm4gaGFuZGxlcih2YWx1ZSlcbiAgICB9LFxuICAgIGV4aGF1c3RpdmU6ICgpID0+IHtcbiAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgfVxuICAgICAgcmV0dXJuIEVmZmVjdC5kaWVNZXNzYWdlKFxuICAgICAgICBcIltGbHVlbnRNYXRjaFRhZ10gTm9uLWV4aGF1c3RpdmUgbWF0Y2g6IG5vIHRhZyBoYW5kbGVyIG1hdGNoZWQgdmFsdWVcIlxuICAgICAgKVxuICAgIH0sXG4gIH1cblxuICByZXR1cm4gY2hhaW5cbn1cbiIsICJpbXBvcnQgeyBDb250ZXh0LCBFZmZlY3QgfSBmcm9tIFwiZWZmZWN0XCJcblxuZXhwb3J0IGludGVyZmFjZSBTZXJ2aWNlIHtcbiAgcmVhZG9ubHkgbGlmZWN5Y2xlOiB7XG4gICAgcmVhZG9ubHkgb25TdXNwZW5kOiAoXG4gICAgICBlZmY6IEVmZmVjdC5FZmZlY3Q8dm9pZCwgbmV2ZXIsIGFueT5cbiAgICApID0+IEVmZmVjdC5FZmZlY3Q8dm9pZCwgbmV2ZXIsIGFueT5cbiAgICByZWFkb25seSBvblJlc3VtZTogKFxuICAgICAgZWZmOiBFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBhbnk+XG4gICAgKSA9PiBFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBhbnk+XG4gICAgcmVhZG9ubHkgb25SZXNldD86IChcbiAgICAgIGVmZjogRWZmZWN0LkVmZmVjdDx2b2lkLCBuZXZlciwgYW55PlxuICAgICkgPT4gRWZmZWN0LkVmZmVjdDx2b2lkLCBuZXZlciwgYW55PlxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBUYWcgPSBDb250ZXh0LkdlbmVyaWNUYWc8U2VydmljZT4oXCJAbG9naXgvUGxhdGZvcm1cIilcblxuIiwgImltcG9ydCB7IEVmZmVjdCwgT3B0aW9uIH0gZnJvbSAnZWZmZWN0J1xuaW1wb3J0IHsgY3JlYXRlIH0gZnJvbSAnbXV0YXRpdmUnXG5pbXBvcnQgKiBhcyBFZmZlY3RPcCBmcm9tICcuLi8uLi9lZmZlY3RvcC5qcydcbmltcG9ydCAqIGFzIEVmZmVjdE9wQ29yZSBmcm9tICcuLi9ydW50aW1lL0VmZmVjdE9wQ29yZS5qcydcbmltcG9ydCAqIGFzIERlYnVnIGZyb20gJy4uL3J1bnRpbWUvY29yZS9EZWJ1Z1NpbmsuanMnXG5pbXBvcnQgeyBpc0RldkVudiB9IGZyb20gJy4uL3J1bnRpbWUvY29yZS9lbnYuanMnXG5pbXBvcnQgdHlwZSB7IFBhdGNoUmVhc29uLCBTdGF0ZVBhdGNoIH0gZnJvbSAnLi4vcnVudGltZS9jb3JlL1N0YXRlVHJhbnNhY3Rpb24uanMnXG5pbXBvcnQgKiBhcyBEZXBzVHJhY2UgZnJvbSAnLi9kZXBzLXRyYWNlLmpzJ1xuaW1wb3J0IHR5cGUgeyBTdGF0ZVRyYWl0RW50cnksIFN0YXRlVHJhaXRQcm9ncmFtIH0gZnJvbSAnLi9tb2RlbC5qcydcblxuZXhwb3J0IGNsYXNzIFN0YXRlVHJhaXRDb25maWdFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgcmVhZG9ubHkgX3RhZyA9ICdTdGF0ZVRyYWl0Q29uZmlnRXJyb3InXG5cbiAgY29uc3RydWN0b3IoXG4gICAgcmVhZG9ubHkgY29kZTogJ0NZQ0xFX0RFVEVDVEVEJyB8ICdNVUxUSVBMRV9XUklURVJTJyxcbiAgICBtZXNzYWdlOiBzdHJpbmcsXG4gICAgcmVhZG9ubHkgZmllbGRzOiBSZWFkb25seUFycmF5PHN0cmluZz4gPSBbXSxcbiAgKSB7XG4gICAgc3VwZXIobWVzc2FnZSlcbiAgICB0aGlzLm5hbWUgPSAnU3RhdGVUcmFpdENvbmZpZ0Vycm9yJ1xuICB9XG59XG5cbmV4cG9ydCB0eXBlIENvbnZlcmdlRGVncmFkZVJlYXNvbiA9ICdidWRnZXRfZXhjZWVkZWQnIHwgJ3J1bnRpbWVfZXJyb3InXG5cbmV4cG9ydCB0eXBlIENvbnZlcmdlTW9kZSA9ICdmdWxsJyB8ICdkaXJ0eSdcblxuZXhwb3J0IGludGVyZmFjZSBDb252ZXJnZVN0ZXBTdW1tYXJ5IHtcbiAgcmVhZG9ubHkgc3RlcElkOiBzdHJpbmdcbiAgcmVhZG9ubHkga2luZDogJ2NvbXB1dGVkJyB8ICdsaW5rJ1xuICByZWFkb25seSBmaWVsZFBhdGg6IHN0cmluZ1xuICByZWFkb25seSBkdXJhdGlvbk1zOiBudW1iZXJcbiAgcmVhZG9ubHkgY2hhbmdlZDogYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbnZlcmdlU3VtbWFyeSB7XG4gIHJlYWRvbmx5IG1vZGU6IENvbnZlcmdlTW9kZVxuICByZWFkb25seSBidWRnZXRNczogbnVtYmVyXG4gIHJlYWRvbmx5IHRvdGFsRHVyYXRpb25NczogbnVtYmVyXG4gIHJlYWRvbmx5IHRvdGFsU3RlcHM6IG51bWJlclxuICByZWFkb25seSBleGVjdXRlZFN0ZXBzOiBudW1iZXJcbiAgcmVhZG9ubHkgc2tpcHBlZFN0ZXBzOiBudW1iZXJcbiAgcmVhZG9ubHkgY2hhbmdlZFN0ZXBzOiBudW1iZXJcbiAgcmVhZG9ubHkgZGlydHlSb290cz86IFJlYWRvbmx5QXJyYXk8c3RyaW5nPlxuICByZWFkb25seSB0b3AzOiBSZWFkb25seUFycmF5PENvbnZlcmdlU3RlcFN1bW1hcnk+XG59XG5cbmV4cG9ydCB0eXBlIENvbnZlcmdlT3V0Y29tZSA9XG4gIHwge1xuICAgICAgcmVhZG9ubHkgX3RhZzogJ0NvbnZlcmdlZCdcbiAgICAgIHJlYWRvbmx5IHBhdGNoQ291bnQ6IG51bWJlclxuICAgICAgcmVhZG9ubHkgc3VtbWFyeT86IENvbnZlcmdlU3VtbWFyeVxuICAgIH1cbiAgfCB7XG4gICAgICByZWFkb25seSBfdGFnOiAnTm9vcCdcbiAgICAgIHJlYWRvbmx5IHN1bW1hcnk/OiBDb252ZXJnZVN1bW1hcnlcbiAgICB9XG4gIHwge1xuICAgICAgcmVhZG9ubHkgX3RhZzogJ0RlZ3JhZGVkJ1xuICAgICAgcmVhZG9ubHkgcmVhc29uOiBDb252ZXJnZURlZ3JhZGVSZWFzb25cbiAgICAgIHJlYWRvbmx5IGVycm9yPzogdW5rbm93blxuICAgICAgcmVhZG9ubHkgc3VtbWFyeT86IENvbnZlcmdlU3VtbWFyeVxuICAgIH1cblxuZXhwb3J0IGludGVyZmFjZSBDb252ZXJnZUNvbnRleHQ8Uz4ge1xuICByZWFkb25seSBtb2R1bGVJZD86IHN0cmluZ1xuICByZWFkb25seSBydW50aW1lSWQ/OiBzdHJpbmdcbiAgcmVhZG9ubHkgbm93OiAoKSA9PiBudW1iZXJcbiAgcmVhZG9ubHkgYnVkZ2V0TXM6IG51bWJlclxuICByZWFkb25seSBtb2RlPzogQ29udmVyZ2VNb2RlXG4gIHJlYWRvbmx5IGRpcnR5UGF0aHM/OiBSZWFkb25seVNldDxzdHJpbmc+IHwgUmVhZG9ubHlBcnJheTxzdHJpbmc+XG4gIHJlYWRvbmx5IGdldERyYWZ0OiAoKSA9PiBTXG4gIHJlYWRvbmx5IHNldERyYWZ0OiAobmV4dDogUykgPT4gdm9pZFxuICByZWFkb25seSByZWNvcmRQYXRjaDogKHBhdGNoOiBTdGF0ZVBhdGNoKSA9PiB2b2lkXG59XG5cbmNvbnN0IGdldEF0UGF0aCA9IChzdGF0ZTogYW55LCBwYXRoOiBzdHJpbmcpOiBhbnkgPT4ge1xuICBpZiAoIXBhdGggfHwgc3RhdGUgPT0gbnVsbCkgcmV0dXJuIHN0YXRlXG4gIGNvbnN0IHNlZ21lbnRzID0gcGF0aC5zcGxpdCgnLicpXG4gIGxldCBjdXJyZW50OiBhbnkgPSBzdGF0ZVxuICBmb3IgKGxldCBpID0gMDsgaSA8IHNlZ21lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGN1cnJlbnQgPT0gbnVsbCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGN1cnJlbnQgPSBjdXJyZW50W3NlZ21lbnRzW2ldXVxuICB9XG4gIHJldHVybiBjdXJyZW50XG59XG5cbmNvbnN0IHNldEF0UGF0aE11dGF0aW5nID0gKGRyYWZ0OiBhbnksIHBhdGg6IHN0cmluZywgdmFsdWU6IGFueSk6IHZvaWQgPT4ge1xuICBpZiAoIXBhdGgpIHJldHVyblxuICBjb25zdCBzZWdtZW50cyA9IHBhdGguc3BsaXQoJy4nKVxuICBsZXQgY3VycmVudDogYW55ID0gZHJhZnRcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWdtZW50cy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICBjb25zdCBrZXkgPSBzZWdtZW50c1tpXVxuICAgIGNvbnN0IG5leHQgPSBjdXJyZW50W2tleV1cbiAgICBpZiAobmV4dCA9PSBudWxsIHx8IHR5cGVvZiBuZXh0ICE9PSAnb2JqZWN0Jykge1xuICAgICAgY3VycmVudFtrZXldID0ge31cbiAgICB9XG4gICAgY3VycmVudCA9IGN1cnJlbnRba2V5XVxuICB9XG4gIGN1cnJlbnRbc2VnbWVudHNbc2VnbWVudHMubGVuZ3RoIC0gMV1dID0gdmFsdWVcbn1cblxuY29uc3QgZ2V0TWlkZGxld2FyZVN0YWNrID0gKCk6IEVmZmVjdC5FZmZlY3Q8RWZmZWN0T3AuTWlkZGxld2FyZVN0YWNrLCBuZXZlciwgYW55PiA9PlxuICBFZmZlY3Quc2VydmljZU9wdGlvbihFZmZlY3RPcENvcmUuRWZmZWN0T3BNaWRkbGV3YXJlVGFnKS5waXBlKFxuICAgIEVmZmVjdC5tYXAoKG1heWJlKSA9PiAoT3B0aW9uLmlzU29tZShtYXliZSkgPyBtYXliZS52YWx1ZS5zdGFjayA6IFtdKSksXG4gIClcblxudHlwZSBXcml0ZXJLaW5kID0gJ2NvbXB1dGVkJyB8ICdsaW5rJ1xuXG5jb25zdCBnZXRXcml0ZXJLaW5kID0gKGVudHJ5OiBTdGF0ZVRyYWl0RW50cnk8YW55LCBzdHJpbmc+KTogV3JpdGVyS2luZCB8IHVuZGVmaW5lZCA9PlxuICBlbnRyeS5raW5kID09PSAnY29tcHV0ZWQnID8gJ2NvbXB1dGVkJyA6IGVudHJ5LmtpbmQgPT09ICdsaW5rJyA/ICdsaW5rJyA6IHVuZGVmaW5lZFxuXG5jb25zdCBnZXRXcml0ZXJEZXBzID0gKGVudHJ5OiBTdGF0ZVRyYWl0RW50cnk8YW55LCBzdHJpbmc+KTogUmVhZG9ubHlBcnJheTxzdHJpbmc+ID0+IHtcbiAgaWYgKGVudHJ5LmtpbmQgPT09ICdjb21wdXRlZCcpIHtcbiAgICByZXR1cm4gKChlbnRyeS5tZXRhIGFzIGFueSk/LmRlcHMgPz8gW10pIGFzIFJlYWRvbmx5QXJyYXk8c3RyaW5nPlxuICB9XG4gIGlmIChlbnRyeS5raW5kID09PSAnbGluaycpIHtcbiAgICByZXR1cm4gW2VudHJ5Lm1ldGEuZnJvbSBhcyBzdHJpbmddXG4gIH1cbiAgcmV0dXJuIFtdXG59XG5cbmNvbnN0IGNvbXB1dGVUb3BvT3JkZXIgPSAod3JpdGVyczogUmVhZG9ubHlBcnJheTxTdGF0ZVRyYWl0RW50cnk8YW55LCBzdHJpbmc+Pik6IFJlYWRvbmx5QXJyYXk8c3RyaW5nPiA9PiB7XG4gIGNvbnN0IHdyaXRlckJ5UGF0aCA9IG5ldyBNYXA8c3RyaW5nLCBTdGF0ZVRyYWl0RW50cnk8YW55LCBzdHJpbmc+PigpXG4gIGZvciAoY29uc3QgZW50cnkgb2Ygd3JpdGVycykge1xuICAgIGNvbnN0IGV4aXN0aW5nID0gd3JpdGVyQnlQYXRoLmdldChlbnRyeS5maWVsZFBhdGgpXG4gICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICB0aHJvdyBuZXcgU3RhdGVUcmFpdENvbmZpZ0Vycm9yKFxuICAgICAgICAnTVVMVElQTEVfV1JJVEVSUycsXG4gICAgICAgIGBbU3RhdGVUcmFpdC5jb252ZXJnZV0gTXVsdGlwbGUgd3JpdGVycyBmb3IgZmllbGQgXCIke2VudHJ5LmZpZWxkUGF0aH1cIiAoJHtleGlzdGluZy5raW5kfSArICR7ZW50cnkua2luZH0pLmAsXG4gICAgICAgIFtlbnRyeS5maWVsZFBhdGhdLFxuICAgICAgKVxuICAgIH1cbiAgICB3cml0ZXJCeVBhdGguc2V0KGVudHJ5LmZpZWxkUGF0aCwgZW50cnkpXG4gIH1cblxuICBjb25zdCBub2RlcyA9IG5ldyBTZXQ8c3RyaW5nPigpXG4gIGZvciAoY29uc3QgZW50cnkgb2Ygd3JpdGVycykge1xuICAgIG5vZGVzLmFkZChlbnRyeS5maWVsZFBhdGgpXG4gIH1cblxuICBjb25zdCBpbmRlZ3JlZSA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KClcbiAgY29uc3QgZm9yd2FyZCA9IG5ldyBNYXA8c3RyaW5nLCBBcnJheTxzdHJpbmc+PigpXG5cbiAgZm9yIChjb25zdCBub2RlIG9mIG5vZGVzKSB7XG4gICAgaW5kZWdyZWUuc2V0KG5vZGUsIDApXG4gICAgZm9yd2FyZC5zZXQobm9kZSwgW10pXG4gIH1cblxuICBmb3IgKGNvbnN0IGVudHJ5IG9mIHdyaXRlcnMpIHtcbiAgICBjb25zdCB0byA9IGVudHJ5LmZpZWxkUGF0aFxuICAgIGNvbnN0IGRlcHMgPSBnZXRXcml0ZXJEZXBzKGVudHJ5KVxuICAgIGZvciAoY29uc3QgZGVwIG9mIGRlcHMpIHtcbiAgICAgIGlmICghbm9kZXMuaGFzKGRlcCkpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cbiAgICAgIGZvcndhcmQuZ2V0KGRlcCkhLnB1c2godG8pXG4gICAgICBpbmRlZ3JlZS5zZXQodG8sIChpbmRlZ3JlZS5nZXQodG8pID8/IDApICsgMSlcbiAgICB9XG4gIH1cblxuICBjb25zdCBxdWV1ZTogQXJyYXk8c3RyaW5nPiA9IFtdXG4gIGZvciAoY29uc3QgW25vZGUsIGRlZ10gb2YgaW5kZWdyZWUuZW50cmllcygpKSB7XG4gICAgaWYgKGRlZyA9PT0gMCkgcXVldWUucHVzaChub2RlKVxuICB9XG5cbiAgY29uc3Qgb3JkZXI6IEFycmF5PHN0cmluZz4gPSBbXVxuICB3aGlsZSAocXVldWUubGVuZ3RoKSB7XG4gICAgY29uc3QgbiA9IHF1ZXVlLnNoaWZ0KCkhXG4gICAgb3JkZXIucHVzaChuKVxuICAgIGNvbnN0IG91dHMgPSBmb3J3YXJkLmdldChuKSFcbiAgICBmb3IgKGNvbnN0IHRvIG9mIG91dHMpIHtcbiAgICAgIGNvbnN0IG5leHQgPSAoaW5kZWdyZWUuZ2V0KHRvKSA/PyAwKSAtIDFcbiAgICAgIGluZGVncmVlLnNldCh0bywgbmV4dClcbiAgICAgIGlmIChuZXh0ID09PSAwKSBxdWV1ZS5wdXNoKHRvKVxuICAgIH1cbiAgfVxuXG4gIGlmIChvcmRlci5sZW5ndGggIT09IG5vZGVzLnNpemUpIHtcbiAgICBjb25zdCByZW1haW5pbmcgPSBBcnJheS5mcm9tKG5vZGVzKS5maWx0ZXIoKG4pID0+ICFvcmRlci5pbmNsdWRlcyhuKSlcbiAgICB0aHJvdyBuZXcgU3RhdGVUcmFpdENvbmZpZ0Vycm9yKFxuICAgICAgJ0NZQ0xFX0RFVEVDVEVEJyxcbiAgICAgIGBbU3RhdGVUcmFpdC5jb252ZXJnZV0gQ3ljbGUgZGV0ZWN0ZWQgaW4gY29tcHV0ZWQvbGluayBncmFwaDogJHtyZW1haW5pbmcuam9pbignLCAnKX1gLFxuICAgICAgcmVtYWluaW5nLFxuICAgIClcbiAgfVxuXG4gIHJldHVybiBvcmRlclxufVxuXG5jb25zdCBtYWtlUGF0Y2ggPSAocGF0aDogc3RyaW5nLCBmcm9tOiB1bmtub3duLCB0bzogdW5rbm93biwgcmVhc29uOiBQYXRjaFJlYXNvbiwgc3RlcElkOiBzdHJpbmcpOiBTdGF0ZVBhdGNoID0+ICh7XG4gIHBhdGgsXG4gIGZyb20sXG4gIHRvLFxuICByZWFzb24sXG4gIHN0ZXBJZCxcbn0pXG5cbmNvbnN0IGRlcHNUcmFjZVNldHRsZWQgPSBuZXcgU2V0PHN0cmluZz4oKVxuY29uc3QgZGVwc01pc21hdGNoRW1pdHRlZCA9IG5ldyBTZXQ8c3RyaW5nPigpXG5cbmNvbnN0IGZvcm1hdExpc3QgPSAoaXRlbXM6IFJlYWRvbmx5QXJyYXk8c3RyaW5nPiwgbGltaXQgPSAxMCk6IHN0cmluZyA9PiB7XG4gIGlmIChpdGVtcy5sZW5ndGggPT09IDApIHJldHVybiAnJ1xuICBpZiAoaXRlbXMubGVuZ3RoIDw9IGxpbWl0KSByZXR1cm4gaXRlbXMuam9pbignLCAnKVxuICByZXR1cm4gYCR7aXRlbXMuc2xpY2UoMCwgbGltaXQpLmpvaW4oJywgJyl9LCBcdTIwMjYoKyR7aXRlbXMubGVuZ3RoIC0gbGltaXR9KWBcbn1cblxuY29uc3QgZW1pdERlcHNNaXNtYXRjaCA9IChwYXJhbXM6IHtcbiAgcmVhZG9ubHkgbW9kdWxlSWQ/OiBzdHJpbmdcbiAgcmVhZG9ubHkgcnVudGltZUlkPzogc3RyaW5nXG4gIHJlYWRvbmx5IGtpbmQ6ICdjb21wdXRlZCcgfCAnc291cmNlJ1xuICByZWFkb25seSBmaWVsZFBhdGg6IHN0cmluZ1xuICByZWFkb25seSBkaWZmOiBEZXBzVHJhY2UuRGVwc0RpZmZcbn0pOiBFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBhbnk+ID0+IHtcbiAgY29uc3Qga2V5ID0gYCR7cGFyYW1zLnJ1bnRpbWVJZCA/PyAndW5rbm93bid9Ojoke3BhcmFtcy5raW5kfTo6JHtwYXJhbXMuZmllbGRQYXRofWBcbiAgaWYgKGRlcHNNaXNtYXRjaEVtaXR0ZWQuaGFzKGtleSkpIHJldHVybiBFZmZlY3Qudm9pZFxuICBkZXBzTWlzbWF0Y2hFbWl0dGVkLmFkZChrZXkpXG5cbiAgcmV0dXJuIERlYnVnLnJlY29yZCh7XG4gICAgdHlwZTogJ2RpYWdub3N0aWMnLFxuICAgIG1vZHVsZUlkOiBwYXJhbXMubW9kdWxlSWQsXG4gICAgcnVudGltZUlkOiBwYXJhbXMucnVudGltZUlkLFxuICAgIGNvZGU6ICdzdGF0ZV90cmFpdDo6ZGVwc19taXNtYXRjaCcsXG4gICAgc2V2ZXJpdHk6ICd3YXJuaW5nJyxcbiAgICBtZXNzYWdlOlxuICAgICAgYFtkZXBzXSAke3BhcmFtcy5raW5kfSBcIiR7cGFyYW1zLmZpZWxkUGF0aH1cIiBkZWNsYXJlZD1bJHtmb3JtYXRMaXN0KHBhcmFtcy5kaWZmLmRlY2xhcmVkKX1dIGAgK1xuICAgICAgYHJlYWRzPVske2Zvcm1hdExpc3QocGFyYW1zLmRpZmYucmVhZHMpfV0gbWlzc2luZz1bJHtmb3JtYXRMaXN0KHBhcmFtcy5kaWZmLm1pc3NpbmcpfV0gYCArXG4gICAgICBgdW51c2VkPVske2Zvcm1hdExpc3QocGFyYW1zLmRpZmYudW51c2VkKX1dYCxcbiAgICBoaW50OlxuICAgICAgJ2RlcHMgXHU2NjJGXHU1NTJGXHU0RTAwXHU0RjlEXHU4RDU2XHU0RThCXHU1QjlFXHU2RTkwXHVGRjFBXHU1NDBFXHU3RUVEXHU1ODlFXHU5MUNGXHU4QzAzXHU1RUE2L1x1NTNDRFx1NTQxMVx1OTVFRFx1NTMwNS9cdTYwMjdcdTgwRkRcdTRGMThcdTUzMTZcdTkwRkRcdTUzRUFcdThCQTQgZGVwc1x1MzAwMlx1OEJGN1x1NUMwNiBkZXBzIFx1NEUwRVx1NUI5RVx1OTY0NVx1OEJGQlx1NTNENlx1NEZERFx1NjMwMVx1NEUwMFx1ODFGNFx1RkYxQicgK1xuICAgICAgJ1x1ODJFNVx1Nzg2RVx1NUI5RVx1NEY5RFx1OEQ1Nlx1NjU3NFx1NjhGNVx1NUJGOVx1OEM2MVx1RkYwQ1x1NTNFRlx1NThGMFx1NjYwRVx1NjZGNFx1N0M5N1x1N0M5Mlx1NUVBNlx1NzY4NCBkZXBzXHVGRjA4XHU0RjhCXHU1OTgyIFwicHJvZmlsZVwiXHVGRjA5XHU0RUU1XHU4OTg2XHU3NkQ2XHU1QjUwXHU1QjU3XHU2QkI1XHU4QkZCXHU1M0Q2XHUzMDAyJyxcbiAgICBraW5kOiBgZGVwc19taXNtYXRjaDoke3BhcmFtcy5raW5kfWAsXG4gIH0pXG59XG5cbmNvbnN0IHNob3VsZFNraXAgPSAoZW50cnk6IFN0YXRlVHJhaXRFbnRyeTxhbnksIHN0cmluZz4sIHByZXY6IHVua25vd24sIG5leHQ6IHVua25vd24pOiBib29sZWFuID0+IHtcbiAgaWYgKGVudHJ5LmtpbmQgPT09ICdjb21wdXRlZCcpIHtcbiAgICBjb25zdCBlcXVhbHMgPSAoZW50cnkubWV0YSBhcyBhbnkpPy5lcXVhbHMgYXMgKChhOiB1bmtub3duLCBiOiB1bmtub3duKSA9PiBib29sZWFuKSB8IHVuZGVmaW5lZFxuICAgIHJldHVybiBlcXVhbHMgPyBlcXVhbHMocHJldiwgbmV4dCkgOiBPYmplY3QuaXMocHJldiwgbmV4dClcbiAgfVxuICByZXR1cm4gT2JqZWN0LmlzKHByZXYsIG5leHQpXG59XG5cbmNvbnN0IHJ1bldyaXRlclN0ZXAgPSA8Uz4oXG4gIGN0eDogQ29udmVyZ2VDb250ZXh0PFM+LFxuICBlbnRyeTogU3RhdGVUcmFpdEVudHJ5PGFueSwgc3RyaW5nPixcbiAgc3RhY2s6IEVmZmVjdE9wLk1pZGRsZXdhcmVTdGFjayxcbik6IEVmZmVjdC5FZmZlY3Q8Ym9vbGVhbiwgbmV2ZXIsIGFueT4gPT4ge1xuICBjb25zdCBtb2R1bGVJZCA9IGN0eC5tb2R1bGVJZFxuICBjb25zdCBydW50aW1lSWQgPSBjdHgucnVudGltZUlkXG4gIGNvbnN0IGZpZWxkUGF0aCA9IGVudHJ5LmZpZWxkUGF0aFxuXG4gIGNvbnN0IGtpbmQgPSBnZXRXcml0ZXJLaW5kKGVudHJ5KVxuICBpZiAoIWtpbmQpIHJldHVybiBFZmZlY3Quc3VjY2VlZChmYWxzZSlcblxuICBjb25zdCByZWFzb246IFBhdGNoUmVhc29uID0ga2luZCA9PT0gJ2NvbXB1dGVkJyA/ICd0cmFpdC1jb21wdXRlZCcgOiAndHJhaXQtbGluaydcbiAgY29uc3Qgb3BLaW5kOiBFZmZlY3RPcC5FZmZlY3RPcDxhbnksIGFueSwgYW55Plsna2luZCddID0ga2luZCA9PT0gJ2NvbXB1dGVkJyA/ICd0cmFpdC1jb21wdXRlZCcgOiAndHJhaXQtbGluaydcbiAgY29uc3Qgb3BOYW1lID0ga2luZCA9PT0gJ2NvbXB1dGVkJyA/ICdjb21wdXRlZDp1cGRhdGUnIDogJ2xpbms6cHJvcGFnYXRlJ1xuXG4gIGNvbnN0IHN0ZXBJZCA9IGtpbmQgPT09ICdjb21wdXRlZCcgPyBgY29tcHV0ZWQ6JHtmaWVsZFBhdGh9YCA6IGBsaW5rOiR7ZmllbGRQYXRofWBcbiAgY29uc3QgZGVwcyA9IGdldFdyaXRlckRlcHMoZW50cnkpXG4gIGNvbnN0IGZyb20gPSBraW5kID09PSAnbGluaycgPyAoZW50cnkubWV0YSBhcyBhbnkpLmZyb20gOiB1bmRlZmluZWRcblxuICBjb25zdCBib2R5OiBFZmZlY3QuRWZmZWN0PGJvb2xlYW4sIG5ldmVyLCBhbnk+ID0gRWZmZWN0LnN5bmMoKCkgPT4ge1xuICAgIGNvbnN0IGN1cnJlbnQgPSBjdHguZ2V0RHJhZnQoKSBhcyBhbnlcblxuICAgIGNvbnN0IHByZXYgPSBnZXRBdFBhdGgoY3VycmVudCwgZmllbGRQYXRoKVxuXG4gICAgbGV0IG5leHQ6IHVua25vd25cbiAgICBsZXQgZGVwc0RpZmY6IERlcHNUcmFjZS5EZXBzRGlmZiB8IHVuZGVmaW5lZFxuXG4gICAgaWYgKGtpbmQgPT09ICdjb21wdXRlZCcpIHtcbiAgICAgIGNvbnN0IGRlcml2ZSA9IChlbnRyeS5tZXRhIGFzIGFueSkuZGVyaXZlIGFzIChzOiBhbnkpID0+IHVua25vd25cbiAgICAgIGNvbnN0IHRyYWNlS2V5ID0gYCR7cnVudGltZUlkID8/ICd1bmtub3duJ306OmNvbXB1dGVkOjoke2ZpZWxkUGF0aH1gXG4gICAgICBpZiAoaXNEZXZFbnYoKSAmJiAhZGVwc1RyYWNlU2V0dGxlZC5oYXModHJhY2VLZXkpKSB7XG4gICAgICAgIGNvbnN0IHRyYWNlZCA9IERlcHNUcmFjZS50cmFjZSgocykgPT4gZGVyaXZlKHMpLCBjdXJyZW50KVxuICAgICAgICBuZXh0ID0gdHJhY2VkLnZhbHVlXG4gICAgICAgIGRlcHNUcmFjZVNldHRsZWQuYWRkKHRyYWNlS2V5KVxuICAgICAgICBkZXBzRGlmZiA9IERlcHNUcmFjZS5kaWZmRGVwcygoKGVudHJ5Lm1ldGEgYXMgYW55KS5kZXBzID8/IFtdKSBhcyBSZWFkb25seUFycmF5PHN0cmluZz4sIHRyYWNlZC5yZWFkcylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5leHQgPSBkZXJpdmUoY3VycmVudClcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbmV4dCA9IGdldEF0UGF0aChjdXJyZW50LCBmcm9tIGFzIHN0cmluZylcbiAgICB9XG5cbiAgICBjb25zdCBjaGFuZ2VkID0gIXNob3VsZFNraXAoZW50cnksIHByZXYsIG5leHQpXG4gICAgaWYgKCFjaGFuZ2VkKSB7XG4gICAgICByZXR1cm4geyBjaGFuZ2VkOiBmYWxzZSwgZGVwc0RpZmYgfVxuICAgIH1cblxuICAgIGNvbnN0IHVwZGF0ZWQgPSBjcmVhdGUoY3VycmVudCwgKGRyYWZ0KSA9PiB7XG4gICAgICBzZXRBdFBhdGhNdXRhdGluZyhkcmFmdCwgZmllbGRQYXRoLCBuZXh0KVxuICAgIH0pIGFzIHVua25vd24gYXMgU1xuXG4gICAgY3R4LnNldERyYWZ0KHVwZGF0ZWQpXG4gICAgY3R4LnJlY29yZFBhdGNoKG1ha2VQYXRjaChmaWVsZFBhdGgsIHByZXYsIG5leHQsIHJlYXNvbiwgc3RlcElkKSlcbiAgICByZXR1cm4geyBjaGFuZ2VkOiB0cnVlLCBkZXBzRGlmZiB9XG4gIH0pLnBpcGUoXG4gICAgRWZmZWN0LmZsYXRNYXAoKHsgY2hhbmdlZCwgZGVwc0RpZmYgfSkgPT5cbiAgICAgIGRlcHNEaWZmICYmIGtpbmQgPT09ICdjb21wdXRlZCdcbiAgICAgICAgPyBlbWl0RGVwc01pc21hdGNoKHtcbiAgICAgICAgICAgIG1vZHVsZUlkLFxuICAgICAgICAgICAgcnVudGltZUlkLFxuICAgICAgICAgICAga2luZDogJ2NvbXB1dGVkJyxcbiAgICAgICAgICAgIGZpZWxkUGF0aCxcbiAgICAgICAgICAgIGRpZmY6IGRlcHNEaWZmLFxuICAgICAgICAgIH0pLnBpcGUoRWZmZWN0LmFzKGNoYW5nZWQpKVxuICAgICAgICA6IEVmZmVjdC5zdWNjZWVkKGNoYW5nZWQpLFxuICAgICksXG4gIClcblxuICBjb25zdCBvcCA9IEVmZmVjdE9wLm1ha2U8Ym9vbGVhbiwgbmV2ZXIsIGFueT4oe1xuICAgIGtpbmQ6IG9wS2luZCxcbiAgICBuYW1lOiBvcE5hbWUsXG4gICAgZWZmZWN0OiBib2R5LFxuICAgIG1ldGE6IHtcbiAgICAgIG1vZHVsZUlkLFxuICAgICAgcnVudGltZUlkLFxuICAgICAgZmllbGRQYXRoLFxuICAgICAgZGVwcyxcbiAgICAgIC4uLihraW5kID09PSAnbGluaydcbiAgICAgICAgPyB7XG4gICAgICAgICAgICBmcm9tLFxuICAgICAgICAgICAgdG86IGZpZWxkUGF0aCxcbiAgICAgICAgICB9XG4gICAgICAgIDogbnVsbCksXG4gICAgICBzdGVwSWQsXG4gICAgfSxcbiAgfSlcblxuICByZXR1cm4gRWZmZWN0T3AucnVuKG9wLCBzdGFjaylcbn1cblxuLyoqXG4gKiBjb252ZXJnZUluVHJhbnNhY3Rpb25cdUZGMUFcbiAqIC0gXHU1NzI4XHUyMDFDXHU1REYyXHU1RjAwXHU1NDJGIFN0YXRlVHJhbnNhY3Rpb25cdTIwMURcdTc2ODRcdTRFMEFcdTRFMEJcdTY1ODdcdTUxODVcdTYyNjdcdTg4NENcdTRFMDBcdTZCMjFcdTZEM0VcdTc1MUZcdTY1MzZcdTY1NUJcdUZGMUJcbiAqIC0gXHU1RjUzXHU1MjREXHU0RUM1XHU4OTg2XHU3NkQ2IGNvbXB1dGVkL2xpbmtcdUZGMDhjaGVjay9zb3VyY2UgXHU1NDBFXHU3RUVEXHU5NjM2XHU2QkI1XHU2M0E1XHU1MTY1XHVGRjA5XHUzMDAyXG4gKi9cbmV4cG9ydCBjb25zdCBjb252ZXJnZUluVHJhbnNhY3Rpb24gPSA8UyBleHRlbmRzIG9iamVjdD4oXG4gIHByb2dyYW06IFN0YXRlVHJhaXRQcm9ncmFtPFM+LFxuICBjdHg6IENvbnZlcmdlQ29udGV4dDxTPixcbik6IEVmZmVjdC5FZmZlY3Q8Q29udmVyZ2VPdXRjb21lLCBuZXZlciwgYW55PiA9PlxuICBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG4gICAgY29uc3Qgc3RhcnRlZEF0ID0gY3R4Lm5vdygpXG4gICAgY29uc3QgYmFzZSA9IGN0eC5nZXREcmFmdCgpXG4gICAgY29uc3QgbW9kZTogQ29udmVyZ2VNb2RlID0gY3R4Lm1vZGUgPz8gJ2Z1bGwnXG5cbiAgICBjb25zdCB3cml0ZXJzID0gcHJvZ3JhbS5lbnRyaWVzLmZpbHRlcigoZSkgPT4ge1xuICAgICAgY29uc3Qga2luZCA9IGdldFdyaXRlcktpbmQoZSBhcyBhbnkpXG4gICAgICByZXR1cm4ga2luZCA9PT0gJ2NvbXB1dGVkJyB8fCBraW5kID09PSAnbGluaydcbiAgICB9KSBhcyBSZWFkb25seUFycmF5PFN0YXRlVHJhaXRFbnRyeTxhbnksIHN0cmluZz4+XG5cbiAgICBpZiAod3JpdGVycy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB7IF90YWc6ICdOb29wJyB9IGFzIGNvbnN0XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhY2sgPSB5aWVsZCogZ2V0TWlkZGxld2FyZVN0YWNrKClcblxuICAgIGNvbnN0IG5vcm1hbGl6ZURpcnR5UGF0aCA9IChwYXRoOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICAgICAgaWYgKCFwYXRoKSByZXR1cm4gJydcbiAgICAgIGlmIChwYXRoID09PSAnKicpIHJldHVybiAnKidcbiAgICAgIGNvbnN0IGlkeCA9IHBhdGguaW5kZXhPZignW10nKVxuICAgICAgaWYgKGlkeCA+PSAwKSByZXR1cm4gcGF0aC5zbGljZSgwLCBpZHgpXG4gICAgICBjb25zdCBzZWdzID0gcGF0aC5zcGxpdCgnLicpXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3Qgc2VnID0gc2Vnc1tpXSFcbiAgICAgICAgaWYgKC9eWzAtOV0rJC8udGVzdChzZWcpKSB7XG4gICAgICAgICAgcmV0dXJuIHNlZ3Muc2xpY2UoMCwgaSkuam9pbignLicpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBwYXRoXG4gICAgfVxuXG4gICAgY29uc3Qgb3ZlcmxhcHMgPSAoYTogc3RyaW5nLCBiOiBzdHJpbmcpOiBib29sZWFuID0+IGEgPT09IGIgfHwgYS5zdGFydHNXaXRoKGIgKyAnLicpIHx8IGIuc3RhcnRzV2l0aChhICsgJy4nKVxuXG4gICAgY29uc3QgcmVhZERpcnR5Um9vdHMgPSAoKTogeyByZWFkb25seSBkaXJ0eUFsbDogYm9vbGVhbjsgcmVhZG9ubHkgcm9vdHM6IFJlYWRvbmx5QXJyYXk8c3RyaW5nPiB9ID0+IHtcbiAgICAgIGlmIChtb2RlICE9PSAnZGlydHknKSB7XG4gICAgICAgIHJldHVybiB7IGRpcnR5QWxsOiB0cnVlLCByb290czogWycqJ10gfVxuICAgICAgfVxuICAgICAgY29uc3QgcmF3ID1cbiAgICAgICAgY3R4LmRpcnR5UGF0aHMgPT0gbnVsbCA/IFtdIDogQXJyYXkuaXNBcnJheShjdHguZGlydHlQYXRocykgPyBjdHguZGlydHlQYXRocyA6IEFycmF5LmZyb20oY3R4LmRpcnR5UGF0aHMpXG4gICAgICBjb25zdCBub3JtYWxpemVkID0gcmF3XG4gICAgICAgIC5tYXAoKHApID0+ICh0eXBlb2YgcCA9PT0gJ3N0cmluZycgPyBub3JtYWxpemVEaXJ0eVBhdGgocCkgOiAnJykpXG4gICAgICAgIC5maWx0ZXIoKHApID0+IHR5cGVvZiBwID09PSAnc3RyaW5nJyAmJiBwLmxlbmd0aCA+IDApXG5cbiAgICAgIGNvbnN0IGhhc1NwZWNpZmljID0gbm9ybWFsaXplZC5zb21lKChwKSA9PiBwICE9PSAnKicpXG4gICAgICBjb25zdCByb290cyA9IGhhc1NwZWNpZmljXG4gICAgICAgID8gQXJyYXkuZnJvbShuZXcgU2V0KG5vcm1hbGl6ZWQuZmlsdGVyKChwKSA9PiBwICE9PSAnKicpKSkuc29ydCgpXG4gICAgICAgIDogbm9ybWFsaXplZC5pbmNsdWRlcygnKicpXG4gICAgICAgICAgPyBbJyonXVxuICAgICAgICAgIDogW11cbiAgICAgIHJldHVybiB7IGRpcnR5QWxsOiByb290cy5sZW5ndGggPT09IDEgJiYgcm9vdHNbMF0gPT09ICcqJywgcm9vdHMgfVxuICAgIH1cblxuICAgIGNvbnN0IGRpcnR5ID0gcmVhZERpcnR5Um9vdHMoKVxuICAgIGNvbnN0IGRpcnR5Um9vdHMgPSBkaXJ0eS5kaXJ0eUFsbCA/IFtdIDogZGlydHkucm9vdHNcbiAgICBjb25zdCBkaXJ0eVNldCA9IG5ldyBTZXQ8c3RyaW5nPihkaXJ0eVJvb3RzKVxuXG4gICAgbGV0IGNoYW5nZWRDb3VudCA9IDBcbiAgICBjb25zdCBzdGVwczogQXJyYXk8Q29udmVyZ2VTdGVwU3VtbWFyeT4gPSBbXVxuICAgIHRyeSB7XG4gICAgICBjb25zdCBvcmRlciA9IGNvbXB1dGVUb3BvT3JkZXIod3JpdGVycylcbiAgICAgIGNvbnN0IHdyaXRlckJ5UGF0aCA9IG5ldyBNYXA8c3RyaW5nLCBTdGF0ZVRyYWl0RW50cnk8YW55LCBzdHJpbmc+PigpXG4gICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHdyaXRlcnMpIHtcbiAgICAgICAgd3JpdGVyQnlQYXRoLnNldChlbnRyeS5maWVsZFBhdGgsIGVudHJ5KVxuICAgICAgfVxuXG4gICAgICBjb25zdCB0b3RhbFN0ZXBzID0gb3JkZXIubGVuZ3RoXG5cbiAgICAgIGZvciAoY29uc3QgZmllbGRQYXRoIG9mIG9yZGVyKSB7XG4gICAgICAgIGlmIChjdHgubm93KCkgLSBzdGFydGVkQXQgPiBjdHguYnVkZ2V0TXMpIHtcbiAgICAgICAgICAvLyBcdThEODVcdTk4ODRcdTdCOTdcdUZGMUFcdThGNkZcdTk2NERcdTdFQTdcdUZGMENcdTU2REVcdTkwMDBcdTUyMzAgYmFzZVx1RkYwOFx1OTA3Rlx1NTE0RFx1NEVBN1x1NzUxRlx1NTM0QVx1NjIxMFx1NTRDMVx1NzJCNlx1NjAwMVx1RkYwOVx1MzAwMlxuICAgICAgICAgIGN0eC5zZXREcmFmdChiYXNlKVxuICAgICAgICAgIGNvbnN0IHRvdGFsRHVyYXRpb25NcyA9IE1hdGgubWF4KDAsIGN0eC5ub3coKSAtIHN0YXJ0ZWRBdClcbiAgICAgICAgICBjb25zdCB0b3AzID0gc3RlcHNcbiAgICAgICAgICAgIC5zbGljZSgpXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYi5kdXJhdGlvbk1zIC0gYS5kdXJhdGlvbk1zKVxuICAgICAgICAgICAgLnNsaWNlKDAsIDMpXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIF90YWc6ICdEZWdyYWRlZCcsXG4gICAgICAgICAgICByZWFzb246ICdidWRnZXRfZXhjZWVkZWQnLFxuICAgICAgICAgICAgc3VtbWFyeToge1xuICAgICAgICAgICAgICBtb2RlLFxuICAgICAgICAgICAgICBidWRnZXRNczogY3R4LmJ1ZGdldE1zLFxuICAgICAgICAgICAgICB0b3RhbER1cmF0aW9uTXMsXG4gICAgICAgICAgICAgIHRvdGFsU3RlcHMsXG4gICAgICAgICAgICAgIGV4ZWN1dGVkU3RlcHM6IHN0ZXBzLmxlbmd0aCxcbiAgICAgICAgICAgICAgc2tpcHBlZFN0ZXBzOiBNYXRoLm1heCgwLCB0b3RhbFN0ZXBzIC0gc3RlcHMubGVuZ3RoKSxcbiAgICAgICAgICAgICAgY2hhbmdlZFN0ZXBzOiBzdGVwcy5maWx0ZXIoKHMpID0+IHMuY2hhbmdlZCkubGVuZ3RoLFxuICAgICAgICAgICAgICAuLi4obW9kZSA9PT0gJ2RpcnR5JyAmJiAhZGlydHkuZGlydHlBbGwgPyB7IGRpcnR5Um9vdHMgfSA6IG51bGwpLFxuICAgICAgICAgICAgICB0b3AzLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9IGFzIGNvbnN0XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZW50cnkgPSB3cml0ZXJCeVBhdGguZ2V0KGZpZWxkUGF0aClcbiAgICAgICAgaWYgKCFlbnRyeSkgY29udGludWVcblxuICAgICAgICBpZiAobW9kZSA9PT0gJ2RpcnR5JyAmJiAhZGlydHkuZGlydHlBbGwpIHtcbiAgICAgICAgICBjb25zdCBkZXBzID0gZ2V0V3JpdGVyRGVwcyhlbnRyeSlcbiAgICAgICAgICAgIC5tYXAobm9ybWFsaXplRGlydHlQYXRoKVxuICAgICAgICAgICAgLmZpbHRlcigocCkgPT4gcC5sZW5ndGggPiAwKVxuICAgICAgICAgIGNvbnN0IHRvID0gbm9ybWFsaXplRGlydHlQYXRoKGZpZWxkUGF0aClcbiAgICAgICAgICBjb25zdCBzaG91bGRSdW4gPVxuICAgICAgICAgICAgZGVwcy5zb21lKChkKSA9PiBBcnJheS5mcm9tKGRpcnR5U2V0KS5zb21lKChyb290KSA9PiBvdmVybGFwcyhkLCByb290KSkpIHx8XG4gICAgICAgICAgICAodG8ubGVuZ3RoID4gMCAmJiBBcnJheS5mcm9tKGRpcnR5U2V0KS5zb21lKChyb290KSA9PiBvdmVybGFwcyh0bywgcm9vdCkpKVxuXG4gICAgICAgICAgaWYgKCFzaG91bGRSdW4pIHtcbiAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RlcFN0YXJ0ZWRBdCA9IGN0eC5ub3coKVxuICAgICAgICBjb25zdCBleGl0ID0geWllbGQqIEVmZmVjdC5leGl0KHJ1bldyaXRlclN0ZXAoY3R4LCBlbnRyeSwgc3RhY2spKVxuICAgICAgICBjb25zdCBzdGVwRW5kZWRBdCA9IGN0eC5ub3coKVxuICAgICAgICBjb25zdCBkdXJhdGlvbk1zID0gTWF0aC5tYXgoMCwgc3RlcEVuZGVkQXQgLSBzdGVwU3RhcnRlZEF0KVxuICAgICAgICBjb25zdCBzdGVwS2luZCA9IGVudHJ5LmtpbmQgPT09ICdjb21wdXRlZCcgPyAnY29tcHV0ZWQnIDogJ2xpbmsnXG4gICAgICAgIGNvbnN0IHN0ZXBJZCA9IGVudHJ5LmtpbmQgPT09ICdjb21wdXRlZCcgPyBgY29tcHV0ZWQ6JHtmaWVsZFBhdGh9YCA6IGBsaW5rOiR7ZmllbGRQYXRofWBcbiAgICAgICAgY29uc3QgY2hhbmdlZCA9IGV4aXQuX3RhZyA9PT0gJ1N1Y2Nlc3MnID8gZXhpdC52YWx1ZSA6IGZhbHNlXG4gICAgICAgIHN0ZXBzLnB1c2goe1xuICAgICAgICAgIHN0ZXBJZCxcbiAgICAgICAgICBraW5kOiBzdGVwS2luZCxcbiAgICAgICAgICBmaWVsZFBhdGgsXG4gICAgICAgICAgZHVyYXRpb25NcyxcbiAgICAgICAgICBjaGFuZ2VkLFxuICAgICAgICB9KVxuICAgICAgICBpZiAoZXhpdC5fdGFnID09PSAnRmFpbHVyZScpIHtcbiAgICAgICAgICBjdHguc2V0RHJhZnQoYmFzZSlcbiAgICAgICAgICBjb25zdCB0b3RhbER1cmF0aW9uTXMgPSBNYXRoLm1heCgwLCBjdHgubm93KCkgLSBzdGFydGVkQXQpXG4gICAgICAgICAgY29uc3QgdG9wMyA9IHN0ZXBzXG4gICAgICAgICAgICAuc2xpY2UoKVxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGIuZHVyYXRpb25NcyAtIGEuZHVyYXRpb25NcylcbiAgICAgICAgICAgIC5zbGljZSgwLCAzKVxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBfdGFnOiAnRGVncmFkZWQnLFxuICAgICAgICAgICAgcmVhc29uOiAncnVudGltZV9lcnJvcicsXG4gICAgICAgICAgICBlcnJvcjogZXhpdC5jYXVzZSxcbiAgICAgICAgICAgIHN1bW1hcnk6IHtcbiAgICAgICAgICAgICAgbW9kZSxcbiAgICAgICAgICAgICAgYnVkZ2V0TXM6IGN0eC5idWRnZXRNcyxcbiAgICAgICAgICAgICAgdG90YWxEdXJhdGlvbk1zLFxuICAgICAgICAgICAgICB0b3RhbFN0ZXBzLFxuICAgICAgICAgICAgICBleGVjdXRlZFN0ZXBzOiBzdGVwcy5sZW5ndGgsXG4gICAgICAgICAgICAgIHNraXBwZWRTdGVwczogTWF0aC5tYXgoMCwgdG90YWxTdGVwcyAtIHN0ZXBzLmxlbmd0aCksXG4gICAgICAgICAgICAgIGNoYW5nZWRTdGVwczogc3RlcHMuZmlsdGVyKChzKSA9PiBzLmNoYW5nZWQpLmxlbmd0aCxcbiAgICAgICAgICAgICAgLi4uKG1vZGUgPT09ICdkaXJ0eScgJiYgIWRpcnR5LmRpcnR5QWxsID8geyBkaXJ0eVJvb3RzIH0gOiBudWxsKSxcbiAgICAgICAgICAgICAgdG9wMyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSBhcyBjb25zdFxuICAgICAgICB9XG4gICAgICAgIGlmIChleGl0LnZhbHVlKSB7XG4gICAgICAgICAgY2hhbmdlZENvdW50ICs9IDFcbiAgICAgICAgICBpZiAobW9kZSA9PT0gJ2RpcnR5JyAmJiAhZGlydHkuZGlydHlBbGwpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvID0gbm9ybWFsaXplRGlydHlQYXRoKGZpZWxkUGF0aClcbiAgICAgICAgICAgIGlmICh0by5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGRpcnR5U2V0LmFkZCh0bylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBcdTkxNERcdTdGNkVcdTk1MTlcdThCRUZcdUZGMUFcdTc4NkNcdTU5MzFcdThEMjVcdUZGMDhcdTRFQTRcdTc1MzFcdTRFMEFcdTVDNDJcdTRFOEJcdTUyQTFcdTUxNjVcdTUzRTNcdTk2M0JcdTZCNjJcdTYzRDBcdTRFQTRcdUZGMDlcdTMwMDJcbiAgICAgIGlmIChlIGluc3RhbmNlb2YgU3RhdGVUcmFpdENvbmZpZ0Vycm9yKSB7XG4gICAgICAgIHRocm93IGVcbiAgICAgIH1cbiAgICAgIC8vIFx1OEZEMFx1ODg0Q1x1NjVGNlx1OTUxOVx1OEJFRlx1RkYxQVx1OEY2Rlx1OTY0RFx1N0VBN1x1RkYwQ1x1NTZERVx1OTAwMFx1NTIzMCBiYXNlXHVGRjA4XHU5MDdGXHU1MTREXHU0RUE3XHU3NTFGXHU1MzRBXHU2MjEwXHU1NEMxXHU3MkI2XHU2MDAxXHVGRjA5XHUzMDAyXG4gICAgICBjdHguc2V0RHJhZnQoYmFzZSlcbiAgICAgIGNvbnN0IHRvdGFsRHVyYXRpb25NcyA9IE1hdGgubWF4KDAsIGN0eC5ub3coKSAtIHN0YXJ0ZWRBdClcbiAgICAgIGNvbnN0IHRvcDMgPSBzdGVwc1xuICAgICAgICAuc2xpY2UoKVxuICAgICAgICAuc29ydCgoYSwgYikgPT4gYi5kdXJhdGlvbk1zIC0gYS5kdXJhdGlvbk1zKVxuICAgICAgICAuc2xpY2UoMCwgMylcbiAgICAgIHJldHVybiB7XG4gICAgICAgIF90YWc6ICdEZWdyYWRlZCcsXG4gICAgICAgIHJlYXNvbjogJ3J1bnRpbWVfZXJyb3InLFxuICAgICAgICBlcnJvcjogZSxcbiAgICAgICAgc3VtbWFyeToge1xuICAgICAgICAgIG1vZGUsXG4gICAgICAgICAgYnVkZ2V0TXM6IGN0eC5idWRnZXRNcyxcbiAgICAgICAgICB0b3RhbER1cmF0aW9uTXMsXG4gICAgICAgICAgdG90YWxTdGVwczogd3JpdGVycy5sZW5ndGgsXG4gICAgICAgICAgZXhlY3V0ZWRTdGVwczogc3RlcHMubGVuZ3RoLFxuICAgICAgICAgIHNraXBwZWRTdGVwczogTWF0aC5tYXgoMCwgd3JpdGVycy5sZW5ndGggLSBzdGVwcy5sZW5ndGgpLFxuICAgICAgICAgIGNoYW5nZWRTdGVwczogc3RlcHMuZmlsdGVyKChzKSA9PiBzLmNoYW5nZWQpLmxlbmd0aCxcbiAgICAgICAgICAuLi4obW9kZSA9PT0gJ2RpcnR5JyAmJiAhZGlydHkuZGlydHlBbGwgPyB7IGRpcnR5Um9vdHMgfSA6IG51bGwpLFxuICAgICAgICAgIHRvcDMsXG4gICAgICAgIH0sXG4gICAgICB9IGFzIGNvbnN0XG4gICAgfVxuXG4gICAgY29uc3QgdG90YWxEdXJhdGlvbk1zID0gTWF0aC5tYXgoMCwgY3R4Lm5vdygpIC0gc3RhcnRlZEF0KVxuICAgIGNvbnN0IHRvcDMgPSBzdGVwc1xuICAgICAgLnNsaWNlKClcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBiLmR1cmF0aW9uTXMgLSBhLmR1cmF0aW9uTXMpXG4gICAgICAuc2xpY2UoMCwgMylcbiAgICBjb25zdCBzdW1tYXJ5OiBDb252ZXJnZVN1bW1hcnkgPSB7XG4gICAgICBtb2RlLFxuICAgICAgYnVkZ2V0TXM6IGN0eC5idWRnZXRNcyxcbiAgICAgIHRvdGFsRHVyYXRpb25NcyxcbiAgICAgIHRvdGFsU3RlcHM6IHdyaXRlcnMubGVuZ3RoLFxuICAgICAgZXhlY3V0ZWRTdGVwczogc3RlcHMubGVuZ3RoLFxuICAgICAgc2tpcHBlZFN0ZXBzOiBNYXRoLm1heCgwLCB3cml0ZXJzLmxlbmd0aCAtIHN0ZXBzLmxlbmd0aCksXG4gICAgICBjaGFuZ2VkU3RlcHM6IHN0ZXBzLmZpbHRlcigocykgPT4gcy5jaGFuZ2VkKS5sZW5ndGgsXG4gICAgICAuLi4obW9kZSA9PT0gJ2RpcnR5JyAmJiAhZGlydHkuZGlydHlBbGwgPyB7IGRpcnR5Um9vdHMgfSA6IG51bGwpLFxuICAgICAgdG9wMyxcbiAgICB9XG5cbiAgICByZXR1cm4gY2hhbmdlZENvdW50ID4gMFxuICAgICAgPyAoeyBfdGFnOiAnQ29udmVyZ2VkJywgcGF0Y2hDb3VudDogY2hhbmdlZENvdW50LCBzdW1tYXJ5IH0gYXMgY29uc3QpXG4gICAgICA6ICh7IF90YWc6ICdOb29wJywgc3VtbWFyeSB9IGFzIGNvbnN0KVxuICB9KVxuIiwgImV4cG9ydCBpbnRlcmZhY2UgRGVwc1RyYWNlUmVzdWx0PFQ+IHtcbiAgcmVhZG9ubHkgdmFsdWU6IFRcbiAgcmVhZG9ubHkgcmVhZHM6IFJlYWRvbmx5QXJyYXk8c3RyaW5nPlxufVxuXG5leHBvcnQgaW50ZXJmYWNlIERlcHNEaWZmIHtcbiAgcmVhZG9ubHkgcmVhZHM6IFJlYWRvbmx5QXJyYXk8c3RyaW5nPlxuICByZWFkb25seSBkZWNsYXJlZDogUmVhZG9ubHlBcnJheTxzdHJpbmc+XG4gIHJlYWRvbmx5IG1pc3Npbmc6IFJlYWRvbmx5QXJyYXk8c3RyaW5nPlxuICByZWFkb25seSB1bnVzZWQ6IFJlYWRvbmx5QXJyYXk8c3RyaW5nPlxufVxuXG5jb25zdCBpc1RyYWNlYWJsZU9iamVjdCA9ICh2YWx1ZTogdW5rbm93bik6IHZhbHVlIGlzIG9iamVjdCA9PiB7XG4gIGlmICghdmFsdWUgfHwgdHlwZW9mIHZhbHVlICE9PSBcIm9iamVjdFwiKSByZXR1cm4gZmFsc2VcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSByZXR1cm4gdHJ1ZVxuICBpZiAodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSByZXR1cm4gZmFsc2VcbiAgaWYgKHZhbHVlIGluc3RhbmNlb2YgUmVnRXhwKSByZXR1cm4gZmFsc2VcbiAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRXJyb3IpIHJldHVybiBmYWxzZVxuICBpZiAodmFsdWUgaW5zdGFuY2VvZiBNYXApIHJldHVybiBmYWxzZVxuICBpZiAodmFsdWUgaW5zdGFuY2VvZiBTZXQpIHJldHVybiBmYWxzZVxuICBpZiAodmFsdWUgaW5zdGFuY2VvZiBXZWFrTWFwKSByZXR1cm4gZmFsc2VcbiAgaWYgKHZhbHVlIGluc3RhbmNlb2YgV2Vha1NldCkgcmV0dXJuIGZhbHNlXG4gIHJldHVybiB0cnVlXG59XG5cbmNvbnN0IHNob3VsZElnbm9yZUtleSA9IChrZXk6IHN0cmluZyk6IGJvb2xlYW4gPT5cbiAga2V5ID09PSBcIl9fcHJvdG9fX1wiIHx8IGtleSA9PT0gXCJwcm90b3R5cGVcIiB8fCBrZXkgPT09IFwiY29uc3RydWN0b3JcIlxuXG5jb25zdCBub3JtYWxpemVSZWFkcyA9IChyZWFkczogUmVhZG9ubHlTZXQ8c3RyaW5nPik6IFJlYWRvbmx5QXJyYXk8c3RyaW5nPiA9PiB7XG4gIGNvbnN0IGFsbCA9IEFycmF5LmZyb20ocmVhZHMpLmZpbHRlcigocCkgPT4gdHlwZW9mIHAgPT09IFwic3RyaW5nXCIgJiYgcC5sZW5ndGggPiAwKVxuICBhbGwuc29ydCgpXG5cbiAgLy8gXHU1M0JCXHU2Mzg5XHU0RTI1XHU2ODNDXHU1MjREXHU3RjAwXHU4REVGXHU1Rjg0XHVGRjA4XHU0RjhCXHU1OTgyXHU1NDBDXHU2NUY2XHU4QkZCXHU0RTg2IHByb2ZpbGUgXHU0RTBFIHByb2ZpbGUuaWQgXHU2NUY2XHVGRjBDXHU1M0VBXHU0RkREXHU3NTU5XHU2NkY0XHU1MTc3XHU0RjUzXHU3Njg0IHByb2ZpbGUuaWRcdUZGMDlcdTMwMDJcbiAgY29uc3QgaXNQcmVmaXggPSAocHJlZml4OiBzdHJpbmcsIGZ1bGw6IHN0cmluZyk6IGJvb2xlYW4gPT5cbiAgICBmdWxsICE9PSBwcmVmaXggJiYgZnVsbC5zdGFydHNXaXRoKHByZWZpeCArIFwiLlwiKVxuXG4gIGNvbnN0IHBydW5lZDogQXJyYXk8c3RyaW5nPiA9IFtdXG4gIGZvciAoY29uc3QgcCBvZiBhbGwpIHtcbiAgICBsZXQgaGFzTW9yZVNwZWNpZmljID0gZmFsc2VcbiAgICBmb3IgKGNvbnN0IG90aGVyIG9mIGFsbCkge1xuICAgICAgaWYgKGlzUHJlZml4KHAsIG90aGVyKSkge1xuICAgICAgICBoYXNNb3JlU3BlY2lmaWMgPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICAgIGlmICghaGFzTW9yZVNwZWNpZmljKSB7XG4gICAgICBwcnVuZWQucHVzaChwKVxuICAgIH1cbiAgfVxuXG4gIHBydW5lZC5zb3J0KClcbiAgcmV0dXJuIHBydW5lZFxufVxuXG5jb25zdCBjb3ZlcnMgPSAoZGVjbGFyZWQ6IHN0cmluZywgcmVhZDogc3RyaW5nKTogYm9vbGVhbiA9PlxuICBkZWNsYXJlZCA9PT0gcmVhZCB8fCByZWFkLnN0YXJ0c1dpdGgoZGVjbGFyZWQgKyBcIi5cIilcblxuZXhwb3J0IGNvbnN0IGRpZmZEZXBzID0gKFxuICBkZWNsYXJlZDogUmVhZG9ubHlBcnJheTxzdHJpbmc+LFxuICByZWFkczogUmVhZG9ubHlBcnJheTxzdHJpbmc+LFxuKTogRGVwc0RpZmYgfCB1bmRlZmluZWQgPT4ge1xuICBjb25zdCBkZWNsYXJlZExpc3QgPSBBcnJheS5mcm9tKG5ldyBTZXQoZGVjbGFyZWQpKS5maWx0ZXIoKHApID0+IHR5cGVvZiBwID09PSBcInN0cmluZ1wiICYmIHAubGVuZ3RoID4gMClcbiAgZGVjbGFyZWRMaXN0LnNvcnQoKVxuICBjb25zdCByZWFkTGlzdCA9IEFycmF5LmZyb20obmV3IFNldChyZWFkcykpLmZpbHRlcigocCkgPT4gdHlwZW9mIHAgPT09IFwic3RyaW5nXCIgJiYgcC5sZW5ndGggPiAwKVxuICByZWFkTGlzdC5zb3J0KClcblxuICBjb25zdCBtaXNzaW5nID0gcmVhZExpc3QuZmlsdGVyKChyKSA9PiBkZWNsYXJlZExpc3QuZXZlcnkoKGQpID0+ICFjb3ZlcnMoZCwgcikpKVxuICBjb25zdCB1bnVzZWQgPSBkZWNsYXJlZExpc3QuZmlsdGVyKChkKSA9PiByZWFkTGlzdC5ldmVyeSgocikgPT4gIWNvdmVycyhkLCByKSkpXG5cbiAgaWYgKG1pc3NpbmcubGVuZ3RoID09PSAwICYmIHVudXNlZC5sZW5ndGggPT09IDApIHJldHVybiB1bmRlZmluZWRcblxuICByZXR1cm4ge1xuICAgIHJlYWRzOiByZWFkTGlzdCxcbiAgICBkZWNsYXJlZDogZGVjbGFyZWRMaXN0LFxuICAgIG1pc3NpbmcsXG4gICAgdW51c2VkLFxuICB9XG59XG5cbmV4cG9ydCBjb25zdCB0cmFjZSA9IDxUPihcbiAgZm46IChzdGF0ZTogYW55KSA9PiBULFxuICBzdGF0ZTogdW5rbm93bixcbik6IERlcHNUcmFjZVJlc3VsdDxUPiA9PiB7XG4gIGlmICghaXNUcmFjZWFibGVPYmplY3Qoc3RhdGUpKSB7XG4gICAgcmV0dXJuIHsgdmFsdWU6IGZuKHN0YXRlIGFzIGFueSksIHJlYWRzOiBbXSB9XG4gIH1cblxuICBjb25zdCByZWFkcyA9IG5ldyBTZXQ8c3RyaW5nPigpXG5cbiAgLy8gcGVyLXRyYWNlIGNhY2hlcyB0byBwcmVzZXJ2ZSByZWZlcmVuY2UgaWRlbnRpdHkgd2l0aGluIHRoZSB0cmFjZWQgY2FsbC5cbiAgY29uc3QgcHJveHlDYWNoZSA9IG5ldyBXZWFrTWFwPG9iamVjdCwgTWFwPHN0cmluZywgYW55Pj4oKVxuICBjb25zdCBwcm94eVRvVGFyZ2V0ID0gbmV3IFdlYWtNYXA8b2JqZWN0LCBvYmplY3Q+KClcblxuICBjb25zdCB3cmFwID0gKHZhbHVlOiB1bmtub3duLCBwYXRoOiBzdHJpbmcpOiB1bmtub3duID0+IHtcbiAgICBpZiAoIWlzVHJhY2VhYmxlT2JqZWN0KHZhbHVlKSkgcmV0dXJuIHZhbHVlXG4gICAgcmV0dXJuIGdldFByb3h5KHZhbHVlIGFzIGFueSwgcGF0aClcbiAgfVxuXG4gIGNvbnN0IHVud3JhcCA9IDxWPih2YWx1ZTogVik6IFYgPT4ge1xuICAgIGlmICh2YWx1ZSAmJiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiKSkge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gcHJveHlUb1RhcmdldC5nZXQodmFsdWUgYXMgYW55KVxuICAgICAgaWYgKHRhcmdldCkgcmV0dXJuIHRhcmdldCBhcyBhbnkgYXMgVlxuICAgIH1cbiAgICByZXR1cm4gdmFsdWVcbiAgfVxuXG4gIGNvbnN0IGdldFByb3h5ID0gKHRhcmdldDogb2JqZWN0LCBiYXNlUGF0aDogc3RyaW5nKTogYW55ID0+IHtcbiAgICBsZXQgYnlQYXRoID0gcHJveHlDYWNoZS5nZXQodGFyZ2V0KVxuICAgIGlmICghYnlQYXRoKSB7XG4gICAgICBieVBhdGggPSBuZXcgTWFwKClcbiAgICAgIHByb3h5Q2FjaGUuc2V0KHRhcmdldCwgYnlQYXRoKVxuICAgIH1cblxuICAgIGNvbnN0IGNhY2hlZCA9IGJ5UGF0aC5nZXQoYmFzZVBhdGgpXG4gICAgaWYgKGNhY2hlZCkgcmV0dXJuIGNhY2hlZFxuXG4gICAgY29uc3QgcmVjb3JkID0gKHBhdGg6IHN0cmluZykgPT4ge1xuICAgICAgaWYgKHBhdGgpIHJlYWRzLmFkZChwYXRoKVxuICAgIH1cblxuICAgIGNvbnN0IHByb3h5ID0gbmV3IFByb3h5KHRhcmdldCBhcyBhbnksIHtcbiAgICAgIGdldDogKHQsIHByb3AsIHJlY2VpdmVyKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgcHJvcCA9PT0gXCJzeW1ib2xcIikge1xuICAgICAgICAgIHJldHVybiBSZWZsZWN0LmdldCh0LCBwcm9wLCByZWNlaXZlcilcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBrZXkgPSBTdHJpbmcocHJvcClcbiAgICAgICAgaWYgKHNob3VsZElnbm9yZUtleShrZXkpKSB7XG4gICAgICAgICAgcmV0dXJuIFJlZmxlY3QuZ2V0KHQsIHByb3AsIHJlY2VpdmVyKVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbmV4dFBhdGggPSBiYXNlUGF0aCA/IGAke2Jhc2VQYXRofS4ke2tleX1gIDoga2V5XG4gICAgICAgIHJlY29yZChuZXh0UGF0aClcblxuICAgICAgICBjb25zdCB2YWx1ZSA9IFJlZmxlY3QuZ2V0KHQsIHByb3AsIHJlY2VpdmVyKSBhcyB1bmtub3duXG4gICAgICAgIHJldHVybiB3cmFwKHZhbHVlLCBuZXh0UGF0aClcbiAgICAgIH0sXG4gICAgICBoYXM6ICh0LCBwcm9wKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgcHJvcCA9PT0gXCJzeW1ib2xcIikgcmV0dXJuIFJlZmxlY3QuaGFzKHQsIHByb3ApXG4gICAgICAgIGNvbnN0IGtleSA9IFN0cmluZyhwcm9wKVxuICAgICAgICBpZiAoIXNob3VsZElnbm9yZUtleShrZXkpKSB7XG4gICAgICAgICAgY29uc3QgbmV4dFBhdGggPSBiYXNlUGF0aCA/IGAke2Jhc2VQYXRofS4ke2tleX1gIDoga2V5XG4gICAgICAgICAgcmVjb3JkKG5leHRQYXRoKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBSZWZsZWN0Lmhhcyh0LCBwcm9wKVxuICAgICAgfSxcbiAgICAgIG93bktleXM6ICh0KSA9PiB7XG4gICAgICAgIGlmIChiYXNlUGF0aCkgcmVjb3JkKGJhc2VQYXRoKVxuICAgICAgICByZXR1cm4gUmVmbGVjdC5vd25LZXlzKHQpXG4gICAgICB9LFxuICAgICAgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOiAodCwgcHJvcCkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIHByb3AgPT09IFwic3ltYm9sXCIpIHtcbiAgICAgICAgICByZXR1cm4gUmVmbGVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgcHJvcClcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBrZXkgPSBTdHJpbmcocHJvcClcbiAgICAgICAgaWYgKCFzaG91bGRJZ25vcmVLZXkoa2V5KSkge1xuICAgICAgICAgIGNvbnN0IG5leHRQYXRoID0gYmFzZVBhdGggPyBgJHtiYXNlUGF0aH0uJHtrZXl9YCA6IGtleVxuICAgICAgICAgIHJlY29yZChuZXh0UGF0aClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUmVmbGVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgcHJvcClcbiAgICAgIH0sXG4gICAgICBzZXQ6ICgpID0+IHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIFwiW2RlcHMtdHJhY2VdIEF0dGVtcHRlZCB0byBtdXRhdGUgc3RhdGUgZHVyaW5nIGRlcHMgdHJhY2luZyAoc3RhdGUgaXMgcmVhZG9ubHkgaW4gZGV2LW1vZGUgZGlhZ25vc3RpY3MpLlwiLFxuICAgICAgICApXG4gICAgICB9LFxuICAgICAgZGVmaW5lUHJvcGVydHk6ICgpID0+IHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIFwiW2RlcHMtdHJhY2VdIEF0dGVtcHRlZCB0byBkZWZpbmUgcHJvcGVydHkgb24gc3RhdGUgZHVyaW5nIGRlcHMgdHJhY2luZyAoc3RhdGUgaXMgcmVhZG9ubHkgaW4gZGV2LW1vZGUgZGlhZ25vc3RpY3MpLlwiLFxuICAgICAgICApXG4gICAgICB9LFxuICAgICAgZGVsZXRlUHJvcGVydHk6ICgpID0+IHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIFwiW2RlcHMtdHJhY2VdIEF0dGVtcHRlZCB0byBkZWxldGUgcHJvcGVydHkgb24gc3RhdGUgZHVyaW5nIGRlcHMgdHJhY2luZyAoc3RhdGUgaXMgcmVhZG9ubHkgaW4gZGV2LW1vZGUgZGlhZ25vc3RpY3MpLlwiLFxuICAgICAgICApXG4gICAgICB9LFxuICAgIH0pXG5cbiAgICBieVBhdGguc2V0KGJhc2VQYXRoLCBwcm94eSlcbiAgICBwcm94eVRvVGFyZ2V0LnNldChwcm94eSwgdGFyZ2V0KVxuICAgIHJldHVybiBwcm94eVxuICB9XG5cbiAgY29uc3Qgcm9vdCA9IGdldFByb3h5KHN0YXRlIGFzIGFueSwgXCJcIilcbiAgY29uc3QgdmFsdWUgPSB1bndyYXAoZm4ocm9vdCkpXG5cbiAgcmV0dXJuIHtcbiAgICB2YWx1ZSxcbiAgICByZWFkczogbm9ybWFsaXplUmVhZHMocmVhZHMpLFxuICB9XG59XG5cbiIsICJpbXBvcnQgeyBFZmZlY3QgfSBmcm9tIFwiZWZmZWN0XCJcbmltcG9ydCB7IGNyZWF0ZSB9IGZyb20gXCJtdXRhdGl2ZVwiXG5pbXBvcnQgdHlwZSB7IFBhdGNoUmVhc29uLCBTdGF0ZVBhdGNoIH0gZnJvbSBcIi4uL3J1bnRpbWUvY29yZS9TdGF0ZVRyYW5zYWN0aW9uLmpzXCJcbmltcG9ydCB7IGJ1aWxkRGVwZW5kZW5jeUdyYXBoIH0gZnJvbSBcIi4vZ3JhcGguanNcIlxuaW1wb3J0IHR5cGUgeyBTdGF0ZVRyYWl0RW50cnksIFN0YXRlVHJhaXRQcm9ncmFtIH0gZnJvbSBcIi4vbW9kZWwuanNcIlxuaW1wb3J0IHsgcmV2ZXJzZUNsb3N1cmUgfSBmcm9tIFwiLi9yZXZlcnNlLWNsb3N1cmUuanNcIlxuXG5leHBvcnQgdHlwZSBWYWxpZGF0ZU1vZGUgPSBcInN1Ym1pdFwiIHwgXCJibHVyXCIgfCBcInZhbHVlQ2hhbmdlXCIgfCBcIm1hbnVhbFwiXG5cbmV4cG9ydCB0eXBlIFZhbGlkYXRlVGFyZ2V0ID1cbiAgfCB7IHJlYWRvbmx5IGtpbmQ6IFwicm9vdFwiIH1cbiAgfCB7IHJlYWRvbmx5IGtpbmQ6IFwiZmllbGRcIjsgcmVhZG9ubHkgcGF0aDogc3RyaW5nIH1cbiAgfCB7IHJlYWRvbmx5IGtpbmQ6IFwibGlzdFwiOyByZWFkb25seSBwYXRoOiBzdHJpbmcgfVxuICB8IHtcbiAgICAgIHJlYWRvbmx5IGtpbmQ6IFwiaXRlbVwiXG4gICAgICByZWFkb25seSBwYXRoOiBzdHJpbmdcbiAgICAgIHJlYWRvbmx5IGluZGV4OiBudW1iZXJcbiAgICAgIHJlYWRvbmx5IGZpZWxkPzogc3RyaW5nXG4gICAgfVxuXG5leHBvcnQgaW50ZXJmYWNlIFNjb3BlZFZhbGlkYXRlUmVxdWVzdCB7XG4gIHJlYWRvbmx5IG1vZGU6IFZhbGlkYXRlTW9kZVxuICByZWFkb25seSB0YXJnZXQ6IFZhbGlkYXRlVGFyZ2V0XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmFsaWRhdGVDb250ZXh0PFM+IHtcbiAgcmVhZG9ubHkgbW9kdWxlSWQ/OiBzdHJpbmdcbiAgcmVhZG9ubHkgcnVudGltZUlkPzogc3RyaW5nXG4gIHJlYWRvbmx5IGdldERyYWZ0OiAoKSA9PiBTXG4gIHJlYWRvbmx5IHNldERyYWZ0OiAobmV4dDogUykgPT4gdm9pZFxuICByZWFkb25seSByZWNvcmRQYXRjaDogKHBhdGNoOiBTdGF0ZVBhdGNoKSA9PiB2b2lkXG59XG5cbnR5cGUgUnVsZUNvbnRleHQgPSB7XG4gIHJlYWRvbmx5IG1vZGU6IFZhbGlkYXRlTW9kZVxuICByZWFkb25seSBzdGF0ZTogdW5rbm93blxuICByZWFkb25seSBzY29wZToge1xuICAgIHJlYWRvbmx5IGZpZWxkUGF0aDogc3RyaW5nXG4gICAgcmVhZG9ubHkgbGlzdFBhdGg/OiBzdHJpbmdcbiAgICByZWFkb25seSBpbmRleD86IG51bWJlclxuICB9XG59XG5cbmNvbnN0IHBhcnNlU2VnbWVudHMgPSAocGF0aDogc3RyaW5nKTogUmVhZG9ubHlBcnJheTxzdHJpbmcgfCBudW1iZXI+ID0+IHtcbiAgaWYgKCFwYXRoKSByZXR1cm4gW11cbiAgcmV0dXJuIHBhdGguc3BsaXQoXCIuXCIpLm1hcCgoc2VnKSA9PlxuICAgIC9eWzAtOV0rJC8udGVzdChzZWcpID8gTnVtYmVyKHNlZykgOiBzZWcsXG4gIClcbn1cblxuY29uc3QgZ2V0QXRQYXRoID0gKHN0YXRlOiBhbnksIHBhdGg6IHN0cmluZyk6IGFueSA9PiB7XG4gIGlmICghcGF0aCB8fCBzdGF0ZSA9PSBudWxsKSByZXR1cm4gc3RhdGVcbiAgY29uc3Qgc2VnbWVudHMgPSBwYXJzZVNlZ21lbnRzKHBhdGgpXG4gIGxldCBjdXJyZW50OiBhbnkgPSBzdGF0ZVxuICBmb3IgKGNvbnN0IHNlZyBvZiBzZWdtZW50cykge1xuICAgIGlmIChjdXJyZW50ID09IG51bGwpIHJldHVybiB1bmRlZmluZWRcbiAgICBjdXJyZW50ID0gY3VycmVudFtzZWcgYXMgYW55XVxuICB9XG4gIHJldHVybiBjdXJyZW50XG59XG5cbmNvbnN0IHNldEF0UGF0aE11dGF0aW5nID0gKGRyYWZ0OiBhbnksIHBhdGg6IHN0cmluZywgdmFsdWU6IGFueSk6IHZvaWQgPT4ge1xuICBpZiAoIXBhdGgpIHJldHVyblxuICBjb25zdCBzZWdtZW50cyA9IHBhcnNlU2VnbWVudHMocGF0aClcbiAgaWYgKHNlZ21lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuXG5cbiAgbGV0IGN1cnJlbnQ6IGFueSA9IGRyYWZ0XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc2VnbWVudHMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgY29uc3Qga2V5ID0gc2VnbWVudHNbaV0hXG4gICAgY29uc3QgbmV4dEtleSA9IHNlZ21lbnRzW2kgKyAxXSFcblxuICAgIGNvbnN0IG5leHQgPSBjdXJyZW50W2tleSBhcyBhbnldXG4gICAgaWYgKG5leHQgPT0gbnVsbCB8fCB0eXBlb2YgbmV4dCAhPT0gXCJvYmplY3RcIikge1xuICAgICAgY3VycmVudFtrZXkgYXMgYW55XSA9IHR5cGVvZiBuZXh0S2V5ID09PSBcIm51bWJlclwiID8gW10gOiB7fVxuICAgIH1cbiAgICBjdXJyZW50ID0gY3VycmVudFtrZXkgYXMgYW55XVxuICB9XG5cbiAgY29uc3QgbGFzdCA9IHNlZ21lbnRzW3NlZ21lbnRzLmxlbmd0aCAtIDFdIVxuICBjdXJyZW50W2xhc3QgYXMgYW55XSA9IHZhbHVlXG59XG5cbmNvbnN0IHVuc2V0QXRQYXRoTXV0YXRpbmcgPSAoZHJhZnQ6IGFueSwgcGF0aDogc3RyaW5nKTogdm9pZCA9PiB7XG4gIGlmICghcGF0aCkgcmV0dXJuXG4gIGNvbnN0IHNlZ21lbnRzID0gcGFyc2VTZWdtZW50cyhwYXRoKVxuICBpZiAoc2VnbWVudHMubGVuZ3RoID09PSAwKSByZXR1cm5cblxuICBsZXQgY3VycmVudDogYW55ID0gZHJhZnRcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWdtZW50cy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICBjb25zdCBrZXkgPSBzZWdtZW50c1tpXSFcbiAgICBjb25zdCBuZXh0ID0gY3VycmVudFtrZXkgYXMgYW55XVxuICAgIGlmIChuZXh0ID09IG51bGwgfHwgdHlwZW9mIG5leHQgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjdXJyZW50ID0gbmV4dFxuICB9XG5cbiAgY29uc3QgbGFzdCA9IHNlZ21lbnRzW3NlZ21lbnRzLmxlbmd0aCAtIDFdIVxuICBpZiAoQXJyYXkuaXNBcnJheShjdXJyZW50KSAmJiB0eXBlb2YgbGFzdCA9PT0gXCJudW1iZXJcIikge1xuICAgIGN1cnJlbnRbbGFzdF0gPSB1bmRlZmluZWRcbiAgICByZXR1cm5cbiAgfVxuICBpZiAoY3VycmVudCAmJiB0eXBlb2YgY3VycmVudCA9PT0gXCJvYmplY3RcIikge1xuICAgIGRlbGV0ZSBjdXJyZW50W2xhc3QgYXMgYW55XVxuICB9XG59XG5cbmNvbnN0IGlzUGxhaW5PYmplY3QgPSAodmFsdWU6IHVua25vd24pOiB2YWx1ZSBpcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9PlxuICB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgdmFsdWUgIT09IG51bGwgJiYgIUFycmF5LmlzQXJyYXkodmFsdWUpXG5cbmNvbnN0IG1lcmdlUnVsZUVycm9ycyA9IChlcnJvcnM6IFJlYWRvbmx5QXJyYXk8dW5rbm93bj4pOiB1bmtub3duID0+IHtcbiAgaWYgKGVycm9ycy5sZW5ndGggPT09IDApIHJldHVybiB1bmRlZmluZWRcbiAgaWYgKGVycm9ycy5sZW5ndGggPT09IDEpIHJldHVybiBlcnJvcnNbMF1cblxuICBpZiAoZXJyb3JzLmV2ZXJ5KGlzUGxhaW5PYmplY3QpKSB7XG4gICAgY29uc3QgbWVyZ2VkOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IHt9XG4gICAgZm9yIChjb25zdCBwYXRjaCBvZiBlcnJvcnMgYXMgUmVhZG9ubHlBcnJheTxSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4pIHtcbiAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHBhdGNoKSkge1xuICAgICAgICBjb25zdCBpbmNvbWluZyA9IHBhdGNoW2tleV1cbiAgICAgICAgaWYgKCEoa2V5IGluIG1lcmdlZCkpIHtcbiAgICAgICAgICBtZXJnZWRba2V5XSA9IGluY29taW5nXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBleGlzdGluZyA9IG1lcmdlZFtrZXldXG4gICAgICAgIG1lcmdlZFtrZXldID0gQXJyYXkuaXNBcnJheShleGlzdGluZykgPyBbLi4uZXhpc3RpbmcsIGluY29taW5nXSA6IFtleGlzdGluZywgaW5jb21pbmddXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXJnZWRcbiAgfVxuXG4gIHJldHVybiBlcnJvcnNcbn1cblxuY29uc3QgdG9HcmFwaFRhcmdldHMgPSAodGFyZ2V0OiBWYWxpZGF0ZVRhcmdldCk6IFJlYWRvbmx5QXJyYXk8c3RyaW5nPiA9PiB7XG4gIGlmICh0YXJnZXQua2luZCA9PT0gXCJyb290XCIpIHtcbiAgICByZXR1cm4gW11cbiAgfVxuICBpZiAodGFyZ2V0LmtpbmQgPT09IFwiZmllbGRcIikge1xuICAgIHJldHVybiBbdGFyZ2V0LnBhdGhdXG4gIH1cbiAgaWYgKHRhcmdldC5raW5kID09PSBcImxpc3RcIikge1xuICAgIHJldHVybiBbYCR7dGFyZ2V0LnBhdGh9W11gXVxuICB9XG4gIC8vIGl0ZW1cbiAgY29uc3QgYmFzZSA9IGAke3RhcmdldC5wYXRofVtdYFxuICByZXR1cm4gW3RhcmdldC5maWVsZCA/IGAke2Jhc2V9LiR7dGFyZ2V0LmZpZWxkfWAgOiBiYXNlXVxufVxuXG5jb25zdCBleHRyYWN0SW5kZXhCaW5kaW5ncyA9IChcbiAgcmVxdWVzdHM6IFJlYWRvbmx5QXJyYXk8U2NvcGVkVmFsaWRhdGVSZXF1ZXN0Pixcbik6IE1hcDxzdHJpbmcsIFJlYWRvbmx5U2V0PG51bWJlcj4+ID0+IHtcbiAgY29uc3QgbWFwID0gbmV3IE1hcDxzdHJpbmcsIFNldDxudW1iZXI+PigpXG4gIGZvciAoY29uc3QgcmVxIG9mIHJlcXVlc3RzKSB7XG4gICAgaWYgKHJlcS50YXJnZXQua2luZCAhPT0gXCJpdGVtXCIpIGNvbnRpbnVlXG4gICAgY29uc3Qgc2V0ID0gbWFwLmdldChyZXEudGFyZ2V0LnBhdGgpID8/IG5ldyBTZXQ8bnVtYmVyPigpXG4gICAgc2V0LmFkZChyZXEudGFyZ2V0LmluZGV4KVxuICAgIG1hcC5zZXQocmVxLnRhcmdldC5wYXRoLCBzZXQpXG4gIH1cbiAgcmV0dXJuIG1hcFxufVxuXG5jb25zdCBleHRyYWN0TGlzdEJpbmRpbmdzID0gKFxuICByZXF1ZXN0czogUmVhZG9ubHlBcnJheTxTY29wZWRWYWxpZGF0ZVJlcXVlc3Q+LFxuKTogUmVhZG9ubHlTZXQ8c3RyaW5nPiA9PiB7XG4gIGNvbnN0IHNldCA9IG5ldyBTZXQ8c3RyaW5nPigpXG4gIGZvciAoY29uc3QgcmVxIG9mIHJlcXVlc3RzKSB7XG4gICAgaWYgKHJlcS50YXJnZXQua2luZCAhPT0gXCJsaXN0XCIpIGNvbnRpbnVlXG4gICAgaWYgKHJlcS50YXJnZXQucGF0aCkgc2V0LmFkZChyZXEudGFyZ2V0LnBhdGgpXG4gIH1cbiAgcmV0dXJuIHNldFxufVxuXG5jb25zdCByZXNvbHZlTW9kZSA9IChyZXF1ZXN0czogUmVhZG9ubHlBcnJheTxTY29wZWRWYWxpZGF0ZVJlcXVlc3Q+KTogVmFsaWRhdGVNb2RlID0+IHtcbiAgY29uc3QgcHJpb3JpdGllczogUmVjb3JkPFZhbGlkYXRlTW9kZSwgbnVtYmVyPiA9IHtcbiAgICBzdWJtaXQ6IDQsXG4gICAgYmx1cjogMyxcbiAgICB2YWx1ZUNoYW5nZTogMixcbiAgICBtYW51YWw6IDEsXG4gIH1cbiAgbGV0IGJlc3Q6IFZhbGlkYXRlTW9kZSA9IFwibWFudWFsXCJcbiAgbGV0IGJlc3RQID0gcHJpb3JpdGllc1tiZXN0XVxuICBmb3IgKGNvbnN0IHIgb2YgcmVxdWVzdHMpIHtcbiAgICBjb25zdCBwID0gcHJpb3JpdGllc1tyLm1vZGVdXG4gICAgaWYgKHAgPiBiZXN0UCkge1xuICAgICAgYmVzdFAgPSBwXG4gICAgICBiZXN0ID0gci5tb2RlXG4gICAgfVxuICB9XG4gIHJldHVybiBiZXN0XG59XG5cbmNvbnN0IGV2YWxDaGVjayA9IChcbiAgZW50cnk6IEV4dHJhY3Q8U3RhdGVUcmFpdEVudHJ5PGFueSwgc3RyaW5nPiwgeyByZWFkb25seSBraW5kOiBcImNoZWNrXCIgfT4sXG4gIGlucHV0OiB1bmtub3duLFxuICBjdHg6IFJ1bGVDb250ZXh0LFxuKTogdW5rbm93biA9PiB7XG4gIGNvbnN0IHJ1bGVzID0gZW50cnkubWV0YS5ydWxlcyBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+XG4gIGNvbnN0IG5hbWVzID0gT2JqZWN0LmtleXMocnVsZXMpLnNvcnQoKVxuICBjb25zdCByZXN1bHRzOiBBcnJheTx1bmtub3duPiA9IFtdXG5cbiAgZm9yIChjb25zdCBuYW1lIG9mIG5hbWVzKSB7XG4gICAgY29uc3QgcnVsZSA9IHJ1bGVzW25hbWVdXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG91dCA9XG4gICAgICAgIHR5cGVvZiBydWxlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICA/IHJ1bGUoaW5wdXQsIGN0eClcbiAgICAgICAgICA6IHJ1bGUgJiYgdHlwZW9mIHJ1bGUgPT09IFwib2JqZWN0XCJcbiAgICAgICAgICAgID8gcnVsZS52YWxpZGF0ZShpbnB1dCwgY3R4KVxuICAgICAgICAgICAgOiB1bmRlZmluZWRcbiAgICAgIGlmIChvdXQgIT09IHVuZGVmaW5lZCkgcmVzdWx0cy5wdXNoKG91dClcbiAgICB9IGNhdGNoIHtcbiAgICAgIC8vIFx1ODlDNFx1NTIxOVx1OEZEMFx1ODg0Q1x1NjcxRlx1NUYwMlx1NUUzOFx1RkYxQVx1NEZERFx1NjMwMSBuby1vcFx1RkYwQ1x1OTA3Rlx1NTE0RFx1NEVBN1x1NzUxRlx1NTM0QVx1NjIxMFx1NTRDMVx1OTUxOVx1OEJFRlx1NjgxMVx1MzAwMlxuICAgICAgLy8gXHU4QkNBXHU2NUFEXHU0RTBFXHU5NjREXHU3RUE3XHU1NzI4XHU1NDBFXHU3RUVEIFBoYXNlIFx1NzUzMSBEZWJ1Z1NpbmsvRGV2dG9vbHNIdWIgXHU2MjdGXHU2M0E1XHUzMDAyXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG1lcmdlUnVsZUVycm9ycyhyZXN1bHRzKVxufVxuXG50eXBlIEVycm9yVXBkYXRlID0ge1xuICByZWFkb25seSBlcnJvclBhdGg6IHN0cmluZ1xuICByZWFkb25seSBwcmV2OiB1bmtub3duXG4gIHJlYWRvbmx5IG5leHQ6IHVua25vd25cbiAgcmVhZG9ubHkgc3RlcElkOiBzdHJpbmdcbn1cblxuLyoqXG4gKiB2YWxpZGF0ZUluVHJhbnNhY3Rpb25cdUZGMUFcbiAqIC0gXHU1NzI4XHUyMDFDXHU1REYyXHU1RjAwXHU1NDJGIFN0YXRlVHJhbnNhY3Rpb25cdTIwMURcdTc2ODRcdTRFMEFcdTRFMEJcdTY1ODdcdTUxODVcdTYyNjdcdTg4NENcdTRFMDBcdTYyNzkgc2NvcGVkIHZhbGlkYXRlIFx1OEJGN1x1NkM0Mlx1RkYxQlxuICogLSBcdTYzMDkgUmV2ZXJzZUNsb3N1cmUgXHU4QkExXHU3Qjk3XHU2NzAwXHU1QzBGIGNoZWNrIFx1OTZDNlx1NTQwOFx1RkYwQ1x1NUU3Nlx1NUMwNlx1N0VEM1x1Njc5Q1x1NTE5OVx1NTZERSBgc3RhdGUuZXJyb3JzLipgXHVGRjFCXG4gKiAtIFx1ODJFNVx1NjVFMFx1NEVGQlx1NEY1NVx1NUI5RVx1OTY0NVx1OTUxOVx1OEJFRlx1NTNEOFx1NTMxNlx1RkYwQ1x1NTIxOVx1NEUwRFx1ODlFNlx1NTNEMSBkcmFmdCBcdTY2RjRcdTY1QjBcdUZGMDhcdTRGRERcdTYzMDEgMCBjb21taXQgXHU4QkVEXHU0RTQ5XHVGRjA5XHUzMDAyXG4gKi9cbmV4cG9ydCBjb25zdCB2YWxpZGF0ZUluVHJhbnNhY3Rpb24gPSA8UyBleHRlbmRzIG9iamVjdD4oXG4gIHByb2dyYW06IFN0YXRlVHJhaXRQcm9ncmFtPFM+LFxuICBjdHg6IFZhbGlkYXRlQ29udGV4dDxTPixcbiAgcmVxdWVzdHM6IFJlYWRvbmx5QXJyYXk8U2NvcGVkVmFsaWRhdGVSZXF1ZXN0Pixcbik6IEVmZmVjdC5FZmZlY3Q8dm9pZCwgbmV2ZXIsIGFueT4gPT5cbiAgRWZmZWN0LnN5bmMoKCkgPT4ge1xuICAgIGlmIChyZXF1ZXN0cy5sZW5ndGggPT09IDApIHJldHVyblxuXG4gICAgY29uc3QgY2hlY2tzID0gcHJvZ3JhbS5lbnRyaWVzLmZpbHRlcihcbiAgICAgIChlKTogZSBpcyBFeHRyYWN0PFN0YXRlVHJhaXRFbnRyeTxhbnksIHN0cmluZz4sIHsgcmVhZG9ubHkga2luZDogXCJjaGVja1wiIH0+ID0+XG4gICAgICAgIChlIGFzIGFueSkua2luZCA9PT0gXCJjaGVja1wiLFxuICAgIClcbiAgICBpZiAoY2hlY2tzLmxlbmd0aCA9PT0gMCkgcmV0dXJuXG5cbiAgICBjb25zdCBoYXNSb290ID0gcmVxdWVzdHMuc29tZSgocikgPT4gci50YXJnZXQua2luZCA9PT0gXCJyb290XCIpXG4gICAgY29uc3QgZHJhZnQgPSBjdHguZ2V0RHJhZnQoKSBhcyBhbnlcblxuICAgIC8vIFx1OEJBMVx1N0I5N1x1NUY4NVx1NjI2N1x1ODg0Q1x1NzY4NCBjaGVjayBzY29wZVx1RkYwOFx1NUI1N1x1NkJCNVx1OERFRlx1NUY4NFx1OTZDNlx1NTQwOFx1RkYwOVx1MzAwMlxuICAgIGNvbnN0IHNjb3Blc1RvVmFsaWRhdGUgPSAoKCkgPT4ge1xuICAgICAgaWYgKGhhc1Jvb3QpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTZXQ8c3RyaW5nPihjaGVja3MubWFwKChjKSA9PiBjLmZpZWxkUGF0aCkpXG4gICAgICB9XG4gICAgICBjb25zdCBncmFwaCA9IGJ1aWxkRGVwZW5kZW5jeUdyYXBoKHByb2dyYW0pXG4gICAgICBjb25zdCBzZXQgPSBuZXcgU2V0PHN0cmluZz4oKVxuICAgICAgZm9yIChjb25zdCByZXEgb2YgcmVxdWVzdHMpIHtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRvR3JhcGhUYXJnZXRzKHJlcS50YXJnZXQpKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBub2RlIG9mIHJldmVyc2VDbG9zdXJlKGdyYXBoLCB0KSkge1xuICAgICAgICAgICAgc2V0LmFkZChub2RlKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHNldFxuICAgIH0pKClcblxuICAgIGNvbnN0IHNlbGVjdGVkQ2hlY2tzID0gY2hlY2tzLmZpbHRlcigoYykgPT4gc2NvcGVzVG9WYWxpZGF0ZS5oYXMoYy5maWVsZFBhdGgpKVxuICAgIGlmIChzZWxlY3RlZENoZWNrcy5sZW5ndGggPT09IDApIHJldHVyblxuXG4gICAgLy8gaXRlbSBzY29wZSBiaW5kaW5nXHVGRjFBXHU0RUM1XHU1NzI4XHU5NzVFIHJvb3QgdmFsaWRhdGUgXHU0RTBCXHU0RjdGXHU3NTI4XHVGRjA4cm9vdCB2YWxpZGF0ZSBcdTRGMUFcdTYzMDlcdTVGNTNcdTUyNERcdTY1NzBcdTdFQzRcdTk1N0ZcdTVFQTZcdThERDFcdTUxNjhcdTkxQ0ZcdUZGMDlcdTMwMDJcbiAgICBjb25zdCBpbmRleEJpbmRpbmdzID0gZXh0cmFjdEluZGV4QmluZGluZ3MocmVxdWVzdHMpXG4gICAgY29uc3QgbGlzdEJpbmRpbmdzID0gZXh0cmFjdExpc3RCaW5kaW5ncyhyZXF1ZXN0cylcblxuICAgIGNvbnN0IG1vZGUgPSByZXNvbHZlTW9kZShyZXF1ZXN0cylcbiAgICBjb25zdCB1cGRhdGVzOiBBcnJheTxFcnJvclVwZGF0ZT4gPSBbXVxuXG4gICAgY29uc3QgbWFrZVN0ZXBJZCA9IChmaWVsZFBhdGg6IHN0cmluZywgaW5kZXg/OiBudW1iZXIpOiBzdHJpbmcgPT5cbiAgICAgIGluZGV4ID09PSB1bmRlZmluZWQgPyBgY2hlY2s6JHtmaWVsZFBhdGh9YCA6IGBjaGVjazoke2ZpZWxkUGF0aH1AJHtpbmRleH1gXG5cbiAgICBmb3IgKGNvbnN0IGNoZWNrIG9mIHNlbGVjdGVkQ2hlY2tzKSB7XG4gICAgICBjb25zdCBzY29wZUZpZWxkUGF0aCA9IGNoZWNrLmZpZWxkUGF0aFxuXG4gICAgICAvLyBQaGFzZSAyXHVGRjFBXHU0RUM1XHU2NTJGXHU2MzAxXHU2NzAwXHU2RDQ1XHU1QzQyIGxpc3QuaXRlbSBzY29wZVx1RkYwOFx1NUY2Mlx1NTk4MiBcIml0ZW1zW11cIlx1RkYwOVx1MzAwMlxuICAgICAgaWYgKHNjb3BlRmllbGRQYXRoLmVuZHNXaXRoKFwiW11cIikpIHtcbiAgICAgICAgY29uc3QgbGlzdFBhdGggPSBzY29wZUZpZWxkUGF0aC5zbGljZSgwLCAtMilcblxuICAgICAgICBjb25zdCBpbmRpY2VzOiBSZWFkb25seUFycmF5PG51bWJlcj4gPSBoYXNSb290IHx8IGxpc3RCaW5kaW5ncy5oYXMobGlzdFBhdGgpXG4gICAgICAgICAgPyAoKCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBsaXN0VmFsdWUgPSBnZXRBdFBhdGgoZHJhZnQsIGxpc3RQYXRoKVxuICAgICAgICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShsaXN0VmFsdWUpXG4gICAgICAgICAgICAgICAgPyBsaXN0VmFsdWUubWFwKChfLCBpKSA9PiBpKVxuICAgICAgICAgICAgICAgIDogW11cbiAgICAgICAgICAgIH0pKClcbiAgICAgICAgICA6IEFycmF5LmZyb20oaW5kZXhCaW5kaW5ncy5nZXQobGlzdFBhdGgpID8/IFtdKVxuXG4gICAgICAgIGZvciAoY29uc3QgaW5kZXggb2YgaW5kaWNlcykge1xuICAgICAgICAgIGNvbnN0IGJvdW5kVmFsdWVQYXRoID0gYCR7bGlzdFBhdGh9LiR7aW5kZXh9YFxuICAgICAgICAgIGNvbnN0IGlucHV0ID0gZ2V0QXRQYXRoKGRyYWZ0LCBib3VuZFZhbHVlUGF0aClcblxuICAgICAgICAgIGNvbnN0IG5leHRFcnJvciA9IGV2YWxDaGVjayhjaGVjaywgaW5wdXQsIHtcbiAgICAgICAgICAgIG1vZGUsXG4gICAgICAgICAgICBzdGF0ZTogZHJhZnQsXG4gICAgICAgICAgICBzY29wZTogeyBmaWVsZFBhdGg6IHNjb3BlRmllbGRQYXRoLCBsaXN0UGF0aCwgaW5kZXggfSxcbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgY29uc3QgZXJyb3JQYXRoID0gYGVycm9ycy4ke2JvdW5kVmFsdWVQYXRofWBcbiAgICAgICAgICBjb25zdCBwcmV2ID0gZ2V0QXRQYXRoKGRyYWZ0LCBlcnJvclBhdGgpXG5cbiAgICAgICAgICBpZiAoIU9iamVjdC5pcyhwcmV2LCBuZXh0RXJyb3IpKSB7XG4gICAgICAgICAgICB1cGRhdGVzLnB1c2goe1xuICAgICAgICAgICAgICBlcnJvclBhdGgsXG4gICAgICAgICAgICAgIHByZXYsXG4gICAgICAgICAgICAgIG5leHQ6IG5leHRFcnJvcixcbiAgICAgICAgICAgICAgc3RlcElkOiBtYWtlU3RlcElkKHNjb3BlRmllbGRQYXRoLCBpbmRleCksXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGlucHV0ID1cbiAgICAgICAgc2NvcGVGaWVsZFBhdGggPT09IFwiJHJvb3RcIiA/IGRyYWZ0IDogZ2V0QXRQYXRoKGRyYWZ0LCBzY29wZUZpZWxkUGF0aClcblxuICAgICAgY29uc3QgbmV4dEVycm9yID0gZXZhbENoZWNrKGNoZWNrLCBpbnB1dCwge1xuICAgICAgICBtb2RlLFxuICAgICAgICBzdGF0ZTogZHJhZnQsXG4gICAgICAgIHNjb3BlOiB7IGZpZWxkUGF0aDogc2NvcGVGaWVsZFBhdGggfSxcbiAgICAgIH0pXG5cbiAgICAgIGNvbnN0IGVycm9yUGF0aCA9IGBlcnJvcnMuJHtzY29wZUZpZWxkUGF0aH1gXG4gICAgICBjb25zdCBwcmV2ID0gZ2V0QXRQYXRoKGRyYWZ0LCBlcnJvclBhdGgpXG5cbiAgICAgIGlmICghT2JqZWN0LmlzKHByZXYsIG5leHRFcnJvcikpIHtcbiAgICAgICAgdXBkYXRlcy5wdXNoKHtcbiAgICAgICAgICBlcnJvclBhdGgsXG4gICAgICAgICAgcHJldixcbiAgICAgICAgICBuZXh0OiBuZXh0RXJyb3IsXG4gICAgICAgICAgc3RlcElkOiBtYWtlU3RlcElkKHNjb3BlRmllbGRQYXRoKSxcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodXBkYXRlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IHJlYXNvbjogUGF0Y2hSZWFzb24gPSBcInRyYWl0LWNoZWNrXCJcblxuICAgIGNvbnN0IG5leHRTdGF0ZSA9IGNyZWF0ZShkcmFmdCwgKG5leHREcmFmdDogYW55KSA9PiB7XG4gICAgICBmb3IgKGNvbnN0IHUgb2YgdXBkYXRlcykge1xuICAgICAgICBpZiAodS5uZXh0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB1bnNldEF0UGF0aE11dGF0aW5nKG5leHREcmFmdCwgdS5lcnJvclBhdGgpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2V0QXRQYXRoTXV0YXRpbmcobmV4dERyYWZ0LCB1LmVycm9yUGF0aCwgdS5uZXh0KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSkgYXMgdW5rbm93biBhcyBTXG5cbiAgICBjdHguc2V0RHJhZnQobmV4dFN0YXRlKVxuXG4gICAgZm9yIChjb25zdCB1IG9mIHVwZGF0ZXMpIHtcbiAgICAgIGN0eC5yZWNvcmRQYXRjaCh7XG4gICAgICAgIHBhdGg6IHUuZXJyb3JQYXRoLFxuICAgICAgICBmcm9tOiB1LnByZXYsXG4gICAgICAgIHRvOiB1Lm5leHQsXG4gICAgICAgIHJlYXNvbixcbiAgICAgICAgc3RlcElkOiB1LnN0ZXBJZCxcbiAgICAgIH0pXG4gICAgfVxuICB9KVxuIiwgImltcG9ydCB0eXBlIHsgU3RhdGVUcmFpdFByb2dyYW0gfSBmcm9tIFwiLi9tb2RlbC5qc1wiXG5cbi8qKlxuICogRGVwZW5kZW5jeUdyYXBoXHVGRjA4UGhhc2UgMiBcdTlBQThcdTY3QjZcdUZGMDlcdTMwMDJcbiAqXG4gKiBcdThCRjRcdTY2MEVcdUZGMUFcbiAqIC0gXHU1RjUzXHU1MjREIGJ1aWxkLnRzIFx1NURGMlx1NTcyOCBHcmFwaC5lZGdlcyBcdTRFMkRcdThCQjBcdTVGNTVcdTRFODYgZGVwcy9saW5rIFx1OEZCOVx1RkYxQlxuICogLSBcdTY3MkNcdTZBMjFcdTU3NTdcdTUzRUFcdTYyOEEgZWRnZXMgXHU1RjUyXHU0RTAwXHU0RTNBXHU1M0VGXHU3NTI4XHU0RThFXHUyMDFDXHU1M0NEXHU1NDExXHU5NUVEXHU1MzA1XHVGRjA4UmV2ZXJzZSBDbG9zdXJlXHVGRjA5XHUyMDFEXHU3Njg0XHU5MEJCXHU2M0E1XHU4ODY4XHVGRjFCXG4gKiAtIFx1NTQwRVx1N0VFRCBQaGFzZSBcdTRGMUFcdTU3MjhcdTZCNjRcdTU5MDRcdTUyQTBcdTUxNjVcdTY2RjRcdTRFMjVcdTY4M0NcdTc2ODRcdTgyODJcdTcwQjkvXHU4RkI5XHU2QTIxXHU1NzhCXHUzMDAxXHU1RkFBXHU3M0FGXHU2OEMwXHU2RDRCXHU0RTBFXHU2NkY0XHU0RTMwXHU1QkNDXHU3Njg0XHU4QkNBXHU2NUFEXHU0RkUxXHU2MDZGXHUzMDAyXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRGVwZW5kZW5jeUdyYXBoIHtcbiAgcmVhZG9ubHkgX3RhZzogXCJTdGF0ZVRyYWl0RGVwZW5kZW5jeUdyYXBoXCJcbiAgLyoqXG4gICAqIHJldmVyc2VBZGpcdUZGMUFcdTc1MjhcdTRFOEVcdTRFQ0VcdTY3RDBcdTRFMkFcdTVCNTdcdTZCQjVcdTVGRUJcdTkwMUZcdTYyN0VcdTUyMzBcdTIwMUNcdTRGOURcdThENTZcdTRFOEVcdTVCODNcdTIwMURcdTc2ODRcdTRFMEJcdTZFMzhcdTVCNTdcdTZCQjVcdTk2QzZcdTU0MDhcdTMwMDJcbiAgICovXG4gIHJlYWRvbmx5IHJldmVyc2VBZGo6IFJlYWRvbmx5TWFwPHN0cmluZywgUmVhZG9ubHlBcnJheTxzdHJpbmc+PlxufVxuXG5leHBvcnQgY29uc3QgYnVpbGREZXBlbmRlbmN5R3JhcGggPSAoXG4gIHByb2dyYW06IFN0YXRlVHJhaXRQcm9ncmFtPGFueT4sXG4pOiBEZXBlbmRlbmN5R3JhcGggPT4ge1xuICBjb25zdCByZXZlcnNlQWRqID0gbmV3IE1hcDxzdHJpbmcsIEFycmF5PHN0cmluZz4+KClcblxuICBmb3IgKGNvbnN0IGVkZ2Ugb2YgcHJvZ3JhbS5ncmFwaC5lZGdlcykge1xuICAgIGNvbnN0IGxpc3QgPSByZXZlcnNlQWRqLmdldChlZGdlLmZyb20pID8/IFtdXG4gICAgbGlzdC5wdXNoKGVkZ2UudG8pXG4gICAgcmV2ZXJzZUFkai5zZXQoZWRnZS5mcm9tLCBsaXN0KVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBfdGFnOiBcIlN0YXRlVHJhaXREZXBlbmRlbmN5R3JhcGhcIixcbiAgICByZXZlcnNlQWRqLFxuICB9XG59XG5cbiIsICJpbXBvcnQgdHlwZSB7IERlcGVuZGVuY3lHcmFwaCB9IGZyb20gXCIuL2dyYXBoLmpzXCJcblxuLyoqXG4gKiBSZXZlcnNlQ2xvc3VyZVx1RkYwOFBoYXNlIDIgXHU5QUE4XHU2N0I2XHVGRjA5XHUzMDAyXG4gKlxuICogLSBcdThGRDRcdTU2REUgdGFyZ2V0IFx1NTNDQVx1NjI0MFx1NjcwOVx1MjAxQ1x1NzZGNFx1NjNBNVx1NjIxNlx1OTVGNFx1NjNBNVx1NEY5RFx1OEQ1NiB0YXJnZXRcdTIwMURcdTc2ODRcdTVCNTdcdTZCQjVcdTk2QzZcdTU0MDhcdUZGMUJcbiAqIC0gXHU3NTI4XHU0RThFIHNjb3BlZCB2YWxpZGF0ZSAvIFx1ODlFNlx1NTNEMVx1ODMwM1x1NTZGNFx1NjUzNlx1NjU1Qlx1MzAwMlxuICovXG5leHBvcnQgY29uc3QgcmV2ZXJzZUNsb3N1cmUgPSAoXG4gIGdyYXBoOiBEZXBlbmRlbmN5R3JhcGgsXG4gIHRhcmdldDogc3RyaW5nLFxuKTogUmVhZG9ubHlTZXQ8c3RyaW5nPiA9PiB7XG4gIGNvbnN0IHZpc2l0ZWQgPSBuZXcgU2V0PHN0cmluZz4oKVxuICBjb25zdCBxdWV1ZTogQXJyYXk8c3RyaW5nPiA9IFt0YXJnZXRdXG5cbiAgd2hpbGUgKHF1ZXVlLmxlbmd0aCkge1xuICAgIGNvbnN0IGN1cnJlbnQgPSBxdWV1ZS5zaGlmdCgpXG4gICAgaWYgKCFjdXJyZW50KSBicmVha1xuICAgIGlmICh2aXNpdGVkLmhhcyhjdXJyZW50KSkgY29udGludWVcbiAgICB2aXNpdGVkLmFkZChjdXJyZW50KVxuXG4gICAgY29uc3QgbmV4dHMgPSBncmFwaC5yZXZlcnNlQWRqLmdldChjdXJyZW50KVxuICAgIGlmIChuZXh0cykge1xuICAgICAgZm9yIChjb25zdCBuIG9mIG5leHRzKSBxdWV1ZS5wdXNoKG4pXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHZpc2l0ZWRcbn1cblxuIiwgImltcG9ydCB7IEVmZmVjdCwgRmliZXIsIE9wdGlvbiB9IGZyb20gXCJlZmZlY3RcIlxuaW1wb3J0IHsgY3JlYXRlIH0gZnJvbSBcIm11dGF0aXZlXCJcbmltcG9ydCAqIGFzIEVmZmVjdE9wIGZyb20gXCIuLi8uLi9lZmZlY3RvcC5qc1wiXG5pbXBvcnQgeyBTbmFwc2hvdCwgaW50ZXJuYWwgYXMgUmVzb3VyY2VJbnRlcm5hbCwga2V5SGFzaCBhcyBoYXNoS2V5IH0gZnJvbSBcIi4uLy4uL1Jlc291cmNlLmpzXCJcbmltcG9ydCAqIGFzIEVmZmVjdE9wQ29yZSBmcm9tIFwiLi4vcnVudGltZS9FZmZlY3RPcENvcmUuanNcIlxuaW1wb3J0ICogYXMgRGVidWcgZnJvbSBcIi4uL3J1bnRpbWUvY29yZS9EZWJ1Z1NpbmsuanNcIlxuaW1wb3J0IHsgaXNEZXZFbnYsIFJlcGxheU1vZGVDb25maWdUYWcgfSBmcm9tIFwiLi4vcnVudGltZS9jb3JlL2Vudi5qc1wiXG5pbXBvcnQgKiBhcyBSZXBsYXlMb2cgZnJvbSBcIi4uL3J1bnRpbWUvY29yZS9SZXBsYXlMb2cuanNcIlxuaW1wb3J0IHR5cGUgeyBQYXRjaFJlYXNvbiwgU3RhdGVQYXRjaCB9IGZyb20gXCIuLi9ydW50aW1lL2NvcmUvU3RhdGVUcmFuc2FjdGlvbi5qc1wiXG5pbXBvcnQgdHlwZSB7IEJvdW5kQXBpIH0gZnJvbSBcIi4uL3J1bnRpbWUvY29yZS9tb2R1bGUuanNcIlxuaW1wb3J0ICogYXMgRGVwc1RyYWNlIGZyb20gXCIuL2RlcHMtdHJhY2UuanNcIlxuaW1wb3J0ICogYXMgUm93SWQgZnJvbSBcIi4vcm93aWQuanNcIlxuaW1wb3J0IHR5cGUge1xuICBTdGF0ZVRyYWl0RW50cnksXG4gIFN0YXRlVHJhaXRQbGFuU3RlcCxcbiAgU3RhdGVUcmFpdFByb2dyYW0sXG59IGZyb20gXCIuL21vZGVsLmpzXCJcblxuZXhwb3J0IGludGVyZmFjZSBTb3VyY2VTeW5jQ29udGV4dDxTPiB7XG4gIHJlYWRvbmx5IG1vZHVsZUlkPzogc3RyaW5nXG4gIHJlYWRvbmx5IHJ1bnRpbWVJZD86IHN0cmluZ1xuICByZWFkb25seSBnZXREcmFmdDogKCkgPT4gU1xuICByZWFkb25seSBzZXREcmFmdDogKG5leHQ6IFMpID0+IHZvaWRcbiAgcmVhZG9ubHkgcmVjb3JkUGF0Y2g6IChwYXRjaDogU3RhdGVQYXRjaCkgPT4gdm9pZFxufVxuXG5jb25zdCBtYWtlUGF0Y2ggPSAoXG4gIHBhdGg6IHN0cmluZyxcbiAgZnJvbTogdW5rbm93bixcbiAgdG86IHVua25vd24sXG4gIHJlYXNvbjogUGF0Y2hSZWFzb24sXG4gIHN0ZXBJZDogc3RyaW5nLFxuKTogU3RhdGVQYXRjaCA9PiAoe1xuICBwYXRoLFxuICBmcm9tLFxuICB0byxcbiAgcmVhc29uLFxuICBzdGVwSWQsXG59KVxuXG5jb25zdCBkZXBzVHJhY2VTZXR0bGVkID0gbmV3IFNldDxzdHJpbmc+KClcbmNvbnN0IGRlcHNNaXNtYXRjaEVtaXR0ZWQgPSBuZXcgU2V0PHN0cmluZz4oKVxuXG5jb25zdCBmb3JtYXRMaXN0ID0gKGl0ZW1zOiBSZWFkb25seUFycmF5PHN0cmluZz4sIGxpbWl0ID0gMTApOiBzdHJpbmcgPT4ge1xuICBpZiAoaXRlbXMubGVuZ3RoID09PSAwKSByZXR1cm4gXCJcIlxuICBpZiAoaXRlbXMubGVuZ3RoIDw9IGxpbWl0KSByZXR1cm4gaXRlbXMuam9pbihcIiwgXCIpXG4gIHJldHVybiBgJHtpdGVtcy5zbGljZSgwLCBsaW1pdCkuam9pbihcIiwgXCIpfSwgXHUyMDI2KCske2l0ZW1zLmxlbmd0aCAtIGxpbWl0fSlgXG59XG5cbmNvbnN0IGVtaXREZXBzTWlzbWF0Y2ggPSAoXG4gIHBhcmFtczoge1xuICAgIHJlYWRvbmx5IG1vZHVsZUlkPzogc3RyaW5nXG4gICAgcmVhZG9ubHkgcnVudGltZUlkPzogc3RyaW5nXG4gICAgcmVhZG9ubHkga2luZDogXCJjb21wdXRlZFwiIHwgXCJzb3VyY2VcIlxuICAgIHJlYWRvbmx5IGZpZWxkUGF0aDogc3RyaW5nXG4gICAgcmVhZG9ubHkgZGlmZjogRGVwc1RyYWNlLkRlcHNEaWZmXG4gIH0sXG4pOiBFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBhbnk+ID0+IHtcbiAgY29uc3Qga2V5ID0gYCR7cGFyYW1zLnJ1bnRpbWVJZCA/PyBcInVua25vd25cIn06OiR7cGFyYW1zLmtpbmR9Ojoke3BhcmFtcy5maWVsZFBhdGh9YFxuICBpZiAoZGVwc01pc21hdGNoRW1pdHRlZC5oYXMoa2V5KSkgcmV0dXJuIEVmZmVjdC52b2lkXG4gIGRlcHNNaXNtYXRjaEVtaXR0ZWQuYWRkKGtleSlcblxuICByZXR1cm4gRGVidWcucmVjb3JkKHtcbiAgICB0eXBlOiBcImRpYWdub3N0aWNcIixcbiAgICBtb2R1bGVJZDogcGFyYW1zLm1vZHVsZUlkLFxuICAgIHJ1bnRpbWVJZDogcGFyYW1zLnJ1bnRpbWVJZCxcbiAgICBjb2RlOiBcInN0YXRlX3RyYWl0OjpkZXBzX21pc21hdGNoXCIsXG4gICAgc2V2ZXJpdHk6IFwid2FybmluZ1wiLFxuICAgIG1lc3NhZ2U6XG4gICAgICBgW2RlcHNdICR7cGFyYW1zLmtpbmR9IFwiJHtwYXJhbXMuZmllbGRQYXRofVwiIGRlY2xhcmVkPVske2Zvcm1hdExpc3QocGFyYW1zLmRpZmYuZGVjbGFyZWQpfV0gYCArXG4gICAgICBgcmVhZHM9WyR7Zm9ybWF0TGlzdChwYXJhbXMuZGlmZi5yZWFkcyl9XSBtaXNzaW5nPVske2Zvcm1hdExpc3QocGFyYW1zLmRpZmYubWlzc2luZyl9XSBgICtcbiAgICAgIGB1bnVzZWQ9WyR7Zm9ybWF0TGlzdChwYXJhbXMuZGlmZi51bnVzZWQpfV1gLFxuICAgIGhpbnQ6XG4gICAgICBcImRlcHMgXHU2NjJGXHU1NTJGXHU0RTAwXHU0RjlEXHU4RDU2XHU0RThCXHU1QjlFXHU2RTkwXHVGRjFBXHU1NDBFXHU3RUVEXHU1ODlFXHU5MUNGXHU4QzAzXHU1RUE2L1x1NTNDRFx1NTQxMVx1OTVFRFx1NTMwNS9cdTYwMjdcdTgwRkRcdTRGMThcdTUzMTZcdTkwRkRcdTUzRUFcdThCQTQgZGVwc1x1MzAwMlx1OEJGN1x1NUMwNiBkZXBzIFx1NEUwRVx1NUI5RVx1OTY0NVx1OEJGQlx1NTNENlx1NEZERFx1NjMwMVx1NEUwMFx1ODFGNFx1RkYxQlwiICtcbiAgICAgIFwiXHU4MkU1XHU3ODZFXHU1QjlFXHU0RjlEXHU4RDU2XHU2NTc0XHU2OEY1XHU1QkY5XHU4QzYxXHVGRjBDXHU1M0VGXHU1OEYwXHU2NjBFXHU2NkY0XHU3Qzk3XHU3QzkyXHU1RUE2XHU3Njg0IGRlcHNcdUZGMDhcdTRGOEJcdTU5ODIgXFxcInByb2ZpbGVcXFwiXHVGRjA5XHU0RUU1XHU4OTg2XHU3NkQ2XHU1QjUwXHU1QjU3XHU2QkI1XHU4QkZCXHU1M0Q2XHUzMDAyXCIsXG4gICAga2luZDogYGRlcHNfbWlzbWF0Y2g6JHtwYXJhbXMua2luZH1gLFxuICB9KVxufVxuXG5jb25zdCBnZXRNaWRkbGV3YXJlU3RhY2sgPSAoKTogRWZmZWN0LkVmZmVjdDxcbiAgRWZmZWN0T3AuTWlkZGxld2FyZVN0YWNrLFxuICBuZXZlcixcbiAgYW55XG4+ID0+XG4gIEVmZmVjdC5zZXJ2aWNlT3B0aW9uKEVmZmVjdE9wQ29yZS5FZmZlY3RPcE1pZGRsZXdhcmVUYWcpLnBpcGUoXG4gICAgRWZmZWN0Lm1hcCgobWF5YmUpID0+XG4gICAgICBPcHRpb24uaXNTb21lKG1heWJlKSA/IG1heWJlLnZhbHVlLnN0YWNrIDogW10sXG4gICAgKSxcbiAgKVxuXG5jb25zdCByZWNvcmRUcmFpdFBhdGNoID0gKFxuICBib3VuZDogQm91bmRBcGk8YW55LCBhbnk+LFxuICBwYXRjaDoge1xuICAgIHJlYWRvbmx5IHBhdGg6IHN0cmluZ1xuICAgIHJlYWRvbmx5IGZyb20/OiB1bmtub3duXG4gICAgcmVhZG9ubHkgdG8/OiB1bmtub3duXG4gICAgcmVhZG9ubHkgcmVhc29uOiBQYXRjaFJlYXNvblxuICAgIHJlYWRvbmx5IHRyYWl0Tm9kZUlkPzogc3RyaW5nXG4gICAgcmVhZG9ubHkgc3RlcElkPzogc3RyaW5nXG4gIH0sXG4pOiB2b2lkID0+IHtcbiAgY29uc3QgcmVjb3JkID1cbiAgICAoYm91bmQgYXMgYW55KS5fX3JlY29yZFN0YXRlUGF0Y2ggYXNcbiAgICAgIHwgKChwOiB0eXBlb2YgcGF0Y2gpID0+IHZvaWQpXG4gICAgICB8IHVuZGVmaW5lZFxuICBpZiAocmVjb3JkKSB7XG4gICAgcmVjb3JkKHBhdGNoKVxuICB9XG59XG5cbmNvbnN0IHJlY29yZFJlcGxheUV2ZW50ID0gKFxuICBib3VuZDogQm91bmRBcGk8YW55LCBhbnk+LFxuICBldmVudDogUmVwbGF5TG9nLlJlcGxheUxvZ0V2ZW50LFxuKTogdm9pZCA9PiB7XG4gIGNvbnN0IHJlY29yZCA9XG4gICAgKGJvdW5kIGFzIGFueSkuX19yZWNvcmRSZXBsYXlFdmVudCBhc1xuICAgICAgfCAoKGU6IFJlcGxheUxvZy5SZXBsYXlMb2dFdmVudCkgPT4gdm9pZClcbiAgICAgIHwgdW5kZWZpbmVkXG4gIGlmIChyZWNvcmQpIHtcbiAgICByZWNvcmQoZXZlbnQpXG4gIH1cbn1cblxuY29uc3Qgc2V0U25hcHNob3RJblR4biA9IChcbiAgYm91bmQ6IEJvdW5kQXBpPGFueSwgYW55PixcbiAgZmllbGRQYXRoOiBzdHJpbmcsXG4gIG5leHQ6IHVua25vd24sXG4gIHJlYXNvbjogUGF0Y2hSZWFzb24sXG4gIHN0ZXBJZDogc3RyaW5nLFxuICB0cmFpdE5vZGVJZD86IHN0cmluZyxcbik6IEVmZmVjdC5FZmZlY3Q8Ym9vbGVhbiwgbmV2ZXIsIGFueT4gPT5cbiAgRWZmZWN0LmdlbihmdW5jdGlvbiogKCkge1xuICAgIGxldCB3cm90ZSA9IGZhbHNlXG4gICAgeWllbGQqIChib3VuZC5zdGF0ZS5tdXRhdGUoKGRyYWZ0OiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IHByZXYgPSBSb3dJZC5nZXRBdFBhdGgoZHJhZnQsIGZpZWxkUGF0aClcbiAgICAgIGlmIChPYmplY3QuaXMocHJldiwgbmV4dCkpIHJldHVyblxuICAgICAgd3JvdGUgPSB0cnVlXG4gICAgICBSb3dJZC5zZXRBdFBhdGhNdXRhdGluZyhkcmFmdCwgZmllbGRQYXRoLCBuZXh0KVxuICAgICAgcmVjb3JkVHJhaXRQYXRjaChib3VuZCwge1xuICAgICAgICBwYXRoOiBmaWVsZFBhdGgsXG4gICAgICAgIGZyb206IHByZXYsXG4gICAgICAgIHRvOiBuZXh0LFxuICAgICAgICByZWFzb24sXG4gICAgICAgIHN0ZXBJZCxcbiAgICAgICAgdHJhaXROb2RlSWQsXG4gICAgICB9KVxuICAgIH0pIGFzIEVmZmVjdC5FZmZlY3Q8dm9pZCwgbmV2ZXIsIGFueT4pXG4gICAgcmV0dXJuIHdyb3RlXG4gIH0pXG5cbmNvbnN0IHdyaXRlYmFja0lmQ3VycmVudEtleUhhc2ggPSAoXG4gIGJvdW5kOiBCb3VuZEFwaTxhbnksIGFueT4sXG4gIGZpZWxkUGF0aDogc3RyaW5nLFxuICBrZXlIYXNoOiBzdHJpbmcsXG4gIG5leHQ6IHVua25vd24sXG4gIHJlYXNvbjogUGF0Y2hSZWFzb24sXG4gIHN0ZXBJZDogc3RyaW5nLFxuICB0cmFpdE5vZGVJZD86IHN0cmluZyxcbiAgcmVwbGF5RXZlbnQ/OiBSZXBsYXlMb2cuUmVwbGF5TG9nRXZlbnQsXG4pOiBFZmZlY3QuRWZmZWN0PGJvb2xlYW4sIG5ldmVyLCBhbnk+ID0+XG4gIEVmZmVjdC5nZW4oZnVuY3Rpb24qICgpIHtcbiAgICBsZXQgd3JvdGUgPSBmYWxzZVxuICAgIHlpZWxkKiAoYm91bmQuc3RhdGUubXV0YXRlKChkcmFmdDogYW55KSA9PiB7XG4gICAgICBjb25zdCBjdXJyZW50ID0gUm93SWQuZ2V0QXRQYXRoKGRyYWZ0LCBmaWVsZFBhdGgpXG4gICAgICBjb25zdCBjdXJyZW50S2V5SGFzaCA9XG4gICAgICAgIGN1cnJlbnQgJiYgdHlwZW9mIGN1cnJlbnQgPT09IFwib2JqZWN0XCIgPyAoY3VycmVudCBhcyBhbnkpLmtleUhhc2ggOiB1bmRlZmluZWRcbiAgICAgIGlmIChjdXJyZW50S2V5SGFzaCAhPT0ga2V5SGFzaCkgcmV0dXJuXG5cbiAgICAgIGNvbnN0IHByZXYgPSBjdXJyZW50XG4gICAgICBpZiAoT2JqZWN0LmlzKHByZXYsIG5leHQpKSByZXR1cm5cblxuICAgICAgd3JvdGUgPSB0cnVlXG4gICAgICBSb3dJZC5zZXRBdFBhdGhNdXRhdGluZyhkcmFmdCwgZmllbGRQYXRoLCBuZXh0KVxuICAgICAgaWYgKHJlcGxheUV2ZW50KSB7XG4gICAgICAgIHJlY29yZFJlcGxheUV2ZW50KGJvdW5kLCByZXBsYXlFdmVudClcbiAgICAgIH1cbiAgICAgIHJlY29yZFRyYWl0UGF0Y2goYm91bmQsIHtcbiAgICAgICAgcGF0aDogZmllbGRQYXRoLFxuICAgICAgICBmcm9tOiBwcmV2LFxuICAgICAgICB0bzogbmV4dCxcbiAgICAgICAgcmVhc29uLFxuICAgICAgICBzdGVwSWQsXG4gICAgICAgIHRyYWl0Tm9kZUlkLFxuICAgICAgfSlcbiAgICB9KSBhcyBFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBhbnk+KVxuICAgIHJldHVybiB3cm90ZVxuICB9KVxuXG4vKipcbiAqIHN5bmNJZGxlSW5UcmFuc2FjdGlvblx1RkYxQVxuICogLSBcdTU3MjhcdTRFOEJcdTUyQTFcdTdBOTdcdTUzRTNcdTUxODVcdTU0MENcdTZCNjVcdThCQzRcdTRGMzBcdTYyNDBcdTY3MDkgc291cmNlLmtleShzdGF0ZSlcdUZGMUJcbiAqIC0gXHU4MkU1IGtleSBcdTUzRDhcdTRFM0FcdTdBN0FcdUZGMDh1bmRlZmluZWRcdUZGMDlcdUZGMENcdTUyMTlcdTU0MENcdTZCNjVcdTVDMDZcdTVCRjlcdTVFOTRcdTVCNTdcdTZCQjVcdTkxQ0RcdTdGNkVcdTRFM0EgaWRsZSBzbmFwc2hvdFx1RkYwOFx1OTA3Rlx1NTE0RCB0ZWFyaW5nXHVGRjA5XHUzMDAyXG4gKi9cbmV4cG9ydCBjb25zdCBzeW5jSWRsZUluVHJhbnNhY3Rpb24gPSA8UyBleHRlbmRzIG9iamVjdD4oXG4gIHByb2dyYW06IFN0YXRlVHJhaXRQcm9ncmFtPFM+LFxuICBjdHg6IFNvdXJjZVN5bmNDb250ZXh0PFM+LFxuKTogRWZmZWN0LkVmZmVjdDx2b2lkLCBuZXZlciwgYW55PiA9PlxuICBFZmZlY3Quc3luYygoKSA9PiB7XG4gICAgY29uc3QgZHJhZnQgPSBjdHguZ2V0RHJhZnQoKSBhcyBhbnlcbiAgICBjb25zdCB1cGRhdGVzOiBBcnJheTx7IHJlYWRvbmx5IGZpZWxkUGF0aDogc3RyaW5nOyByZWFkb25seSBwcmV2OiB1bmtub3duIH0+ID0gW11cblxuICAgIGZvciAoY29uc3QgZW50cnkgb2YgcHJvZ3JhbS5lbnRyaWVzKSB7XG4gICAgICBpZiAoZW50cnkua2luZCAhPT0gXCJzb3VyY2VcIikgY29udGludWVcbiAgICAgIGNvbnN0IGZpZWxkUGF0aCA9IGVudHJ5LmZpZWxkUGF0aFxuICAgICAgY29uc3QgbGlzdEl0ZW0gPSBSb3dJZC5wYXJzZUxpc3RJdGVtRmllbGRQYXRoKGZpZWxkUGF0aClcblxuICAgICAgaWYgKGxpc3RJdGVtKSB7XG4gICAgICAgIC8vIGxpc3QuaXRlbSBzY29wZVx1RkYxQVx1NjMwOSBpbmRleCBcdTkwMTBcdTg4NENcdThCQzRcdTRGMzAga2V5XHVGRjBDXHU1RTc2XHU1QkY5XHU2NzJBXHU2RkMwXHU2RDNCXHU4ODRDXHU1NDBDXHU2QjY1XHU1MTk5XHU1NkRFIGlkbGVcdTMwMDJcbiAgICAgICAgY29uc3QgbGlzdFZhbHVlID0gUm93SWQuZ2V0QXRQYXRoKGRyYWZ0LCBsaXN0SXRlbS5saXN0UGF0aClcbiAgICAgICAgY29uc3QgaXRlbXM6IFJlYWRvbmx5QXJyYXk8dW5rbm93bj4gPSBBcnJheS5pc0FycmF5KGxpc3RWYWx1ZSkgPyBsaXN0VmFsdWUgOiBbXVxuXG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBpdGVtcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICBjb25zdCBpdGVtID0gaXRlbXNbaW5kZXhdXG5cbiAgICAgICAgICBsZXQga2V5OiB1bmtub3duXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGtleSA9IChlbnRyeS5tZXRhIGFzIGFueSkua2V5KGl0ZW0pXG4gICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChrZXkgIT09IHVuZGVmaW5lZCkgY29udGludWVcblxuICAgICAgICAgIGNvbnN0IGNvbmNyZXRlUGF0aCA9IFJvd0lkLnRvTGlzdEl0ZW1WYWx1ZVBhdGgoXG4gICAgICAgICAgICBsaXN0SXRlbS5saXN0UGF0aCxcbiAgICAgICAgICAgIGluZGV4LFxuICAgICAgICAgICAgbGlzdEl0ZW0uaXRlbVBhdGgsXG4gICAgICAgICAgKVxuICAgICAgICAgIGNvbnN0IHByZXYgPSBSb3dJZC5nZXRBdFBhdGgoZHJhZnQsIGNvbmNyZXRlUGF0aClcbiAgICAgICAgICBjb25zdCBwcmV2U3RhdHVzID1cbiAgICAgICAgICAgIHByZXYgJiYgdHlwZW9mIHByZXYgPT09IFwib2JqZWN0XCIgPyAocHJldiBhcyBhbnkpLnN0YXR1cyA6IHVuZGVmaW5lZFxuICAgICAgICAgIGlmIChwcmV2U3RhdHVzID09PSBcImlkbGVcIikge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IChwcmV2IGFzIGFueSk/LmRhdGFcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gKHByZXYgYXMgYW55KT8uZXJyb3JcbiAgICAgICAgICAgIGlmIChkYXRhID09PSB1bmRlZmluZWQgJiYgZXJyb3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHVwZGF0ZXMucHVzaCh7IGZpZWxkUGF0aDogY29uY3JldGVQYXRoLCBwcmV2IH0pXG4gICAgICAgIH1cblxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICBsZXQga2V5OiB1bmtub3duXG4gICAgICB0cnkge1xuICAgICAgICBrZXkgPSAoZW50cnkubWV0YSBhcyBhbnkpLmtleShkcmFmdClcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICBpZiAoa2V5ICE9PSB1bmRlZmluZWQpIGNvbnRpbnVlXG5cbiAgICAgIGNvbnN0IHByZXYgPSBSb3dJZC5nZXRBdFBhdGgoZHJhZnQsIGZpZWxkUGF0aClcbiAgICAgIGNvbnN0IHByZXZTdGF0dXMgPVxuICAgICAgICBwcmV2ICYmIHR5cGVvZiBwcmV2ID09PSBcIm9iamVjdFwiID8gKHByZXYgYXMgYW55KS5zdGF0dXMgOiB1bmRlZmluZWRcbiAgICAgIGlmIChwcmV2U3RhdHVzID09PSBcImlkbGVcIikge1xuICAgICAgICAvLyBcdTRFQ0RcdTk3MDBcdTc4NkVcdTRGREQgZGF0YS9lcnJvciBcdTg4QUJcdTZFMDVcdTdBN0FcbiAgICAgICAgY29uc3QgZGF0YSA9IChwcmV2IGFzIGFueSk/LmRhdGFcbiAgICAgICAgY29uc3QgZXJyb3IgPSAocHJldiBhcyBhbnkpPy5lcnJvclxuICAgICAgICBpZiAoZGF0YSA9PT0gdW5kZWZpbmVkICYmIGVycm9yID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHVwZGF0ZXMucHVzaCh7IGZpZWxkUGF0aCwgcHJldiB9KVxuICAgIH1cblxuICAgIGlmICh1cGRhdGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuXG5cbiAgICBjb25zdCByZWFzb246IFBhdGNoUmVhc29uID0gXCJzb3VyY2U6aWRsZVwiXG5cbiAgICBjb25zdCBuZXh0RHJhZnQgPSBjcmVhdGUoZHJhZnQsIChuZXh0OiBhbnkpID0+IHtcbiAgICAgIGZvciAoY29uc3QgdSBvZiB1cGRhdGVzKSB7XG4gICAgICAgIFJvd0lkLnNldEF0UGF0aE11dGF0aW5nKG5leHQsIHUuZmllbGRQYXRoLCBTbmFwc2hvdC5pZGxlKCkpXG4gICAgICB9XG4gICAgfSlcblxuICAgIGN0eC5zZXREcmFmdChuZXh0RHJhZnQgYXMgUylcblxuICAgIGZvciAoY29uc3QgdSBvZiB1cGRhdGVzKSB7XG4gICAgICBjdHgucmVjb3JkUGF0Y2goXG4gICAgICAgIG1ha2VQYXRjaChcbiAgICAgICAgICB1LmZpZWxkUGF0aCxcbiAgICAgICAgICB1LnByZXYsXG4gICAgICAgICAgU25hcHNob3QuaWRsZSgpLFxuICAgICAgICAgIHJlYXNvbixcbiAgICAgICAgICBgc291cmNlOiR7dS5maWVsZFBhdGh9OmlkbGVgLFxuICAgICAgICApLFxuICAgICAgKVxuICAgIH1cbiAgfSlcblxuLyoqXG4gKiBpbnN0YWxsU291cmNlUmVmcmVzaFx1RkYxQVxuICogLSBcdTRFM0FcdTUzNTVcdTRFMkEgc291cmNlIFx1NUI1N1x1NkJCNVx1NkNFOFx1NTE4Q1x1NTIzN1x1NjVCMFx1NUI5RVx1NzNCMFx1RkYwOFJlc291cmNlU25hcHNob3QgKyBrZXlIYXNoIGdhdGUgKyBjb25jdXJyZW5jeVx1RkYwOVx1MzAwMlxuICovXG5leHBvcnQgY29uc3QgaW5zdGFsbFNvdXJjZVJlZnJlc2ggPSA8Uz4oXG4gIGJvdW5kOiBCb3VuZEFwaTxhbnksIGFueT4sXG4gIHN0ZXA6IFN0YXRlVHJhaXRQbGFuU3RlcCxcbiAgZW50cnk6IEV4dHJhY3Q8U3RhdGVUcmFpdEVudHJ5PFMsIHN0cmluZz4sIHsgcmVhZG9ubHkga2luZDogXCJzb3VyY2VcIiB9Pixcbik6IEVmZmVjdC5FZmZlY3Q8dm9pZCwgbmV2ZXIsIGFueT4gPT4ge1xuICBpZiAoIXN0ZXAudGFyZ2V0RmllbGRQYXRoKSByZXR1cm4gRWZmZWN0LnZvaWRcblxuICBjb25zdCBmaWVsZFBhdGggPSBzdGVwLnRhcmdldEZpZWxkUGF0aFxuICBjb25zdCByZXNvdXJjZUlkID0gc3RlcC5yZXNvdXJjZUlkID8/IGVudHJ5Lm1ldGEucmVzb3VyY2VcbiAgY29uc3QgbGlzdEl0ZW0gPSBSb3dJZC5wYXJzZUxpc3RJdGVtRmllbGRQYXRoKGZpZWxkUGF0aClcblxuICBjb25zdCByZWdpc3RlciA9IChib3VuZCBhcyBhbnkpXG4gICAgLl9fcmVnaXN0ZXJTb3VyY2VSZWZyZXNoIGFzXG4gICAgfCAoKFxuICAgICAgICBmaWVsZDogc3RyaW5nLFxuICAgICAgICBoYW5kbGVyOiAoc3RhdGU6IGFueSkgPT4gRWZmZWN0LkVmZmVjdDx2b2lkLCBuZXZlciwgYW55PixcbiAgICAgICkgPT4gdm9pZClcbiAgICB8IHVuZGVmaW5lZFxuXG4gIGlmICghcmVnaXN0ZXIpIHtcbiAgICByZXR1cm4gRWZmZWN0LnZvaWRcbiAgfVxuXG4gIGNvbnN0IHJlY29yZFNuYXBzaG90ID0gKFxuICAgIHJlcGxheU1vZGU6IFwibGl2ZVwiIHwgXCJyZXBsYXlcIixcbiAgICByZXBsYXlMb2c6IFJlcGxheUxvZy5SZXBsYXlMb2dTZXJ2aWNlIHwgdW5kZWZpbmVkLFxuICAgIGlucHV0OlxuICAgICAgfCBSZXBsYXlMb2cuUmVwbGF5TG9nRXZlbnRcbiAgICAgIHwge1xuICAgICAgICAgIHJlYWRvbmx5IG1vZHVsZUlkPzogc3RyaW5nXG4gICAgICAgICAgcmVhZG9ubHkgcnVudGltZUlkPzogc3RyaW5nXG4gICAgICAgICAgcmVhZG9ubHkgZmllbGRQYXRoOiBzdHJpbmdcbiAgICAgICAgICByZWFkb25seSBrZXlIYXNoPzogc3RyaW5nXG4gICAgICAgICAgcmVhZG9ubHkgcGhhc2U6IFJlcGxheUxvZy5SZXNvdXJjZVNuYXBzaG90UGhhc2VcbiAgICAgICAgICByZWFkb25seSBzbmFwc2hvdDogdW5rbm93blxuICAgICAgICB9LFxuICApOiBFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBhbnk+ID0+IHtcbiAgICBpZiAoIXJlcGxheUxvZykgcmV0dXJuIEVmZmVjdC52b2lkXG4gICAgaWYgKHJlcGxheU1vZGUgIT09IFwibGl2ZVwiKSByZXR1cm4gRWZmZWN0LnZvaWRcbiAgICBjb25zdCBldmVudDogUmVwbGF5TG9nLlJlcGxheUxvZ0V2ZW50ID1cbiAgICAgIGlucHV0ICYmIHR5cGVvZiBpbnB1dCA9PT0gXCJvYmplY3RcIiAmJiAoaW5wdXQgYXMgYW55KS5fdGFnID09PSBcIlJlc291cmNlU25hcHNob3RcIlxuICAgICAgICA/IChpbnB1dCBhcyBSZXBsYXlMb2cuUmVwbGF5TG9nRXZlbnQpXG4gICAgICAgIDoge1xuICAgICAgICAgICAgX3RhZzogXCJSZXNvdXJjZVNuYXBzaG90XCIsXG4gICAgICAgICAgICByZXNvdXJjZUlkLFxuICAgICAgICAgICAgZmllbGRQYXRoOiAoaW5wdXQgYXMgYW55KS5maWVsZFBhdGgsXG4gICAgICAgICAgICBrZXlIYXNoOiAoaW5wdXQgYXMgYW55KS5rZXlIYXNoLFxuICAgICAgICAgICAgcGhhc2U6IChpbnB1dCBhcyBhbnkpLnBoYXNlLFxuICAgICAgICAgICAgc25hcHNob3Q6IChpbnB1dCBhcyBhbnkpLnNuYXBzaG90LFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgbW9kdWxlSWQ6IChpbnB1dCBhcyBhbnkpLm1vZHVsZUlkLFxuICAgICAgICAgICAgcnVudGltZUlkOiAoaW5wdXQgYXMgYW55KS5ydW50aW1lSWQsXG4gICAgICAgICAgfVxuICAgIHJldHVybiByZXBsYXlMb2cucmVjb3JkKGV2ZW50KVxuICB9XG5cbiAgLy8gbGlzdC5pdGVtIHNjb3BlXHVGRjFBXHU2MzA5IFJvd0lEIFx1NTA1QSBpbi1mbGlnaHQgXHU5NUU4XHU2M0E3XHVGRjA4XHU5MDdGXHU1MTREIGluc2VydC9yZW1vdmUvcmVvcmRlciBcdTRFMEJcdTUxOTlcdTk1MTlcdTg4NENcdUZGMDlcdTMwMDJcbiAgaWYgKGxpc3RJdGVtKSB7XG4gICAgY29uc3Qgc3RvcmUgPSAoYm91bmQgYXMgYW55KS5fX3Jvd0lkU3RvcmUgYXMgUm93SWQuUm93SWRTdG9yZSB8IHVuZGVmaW5lZFxuICAgIGlmICghc3RvcmUpIHtcbiAgICAgIHJldHVybiBFZmZlY3Qudm9pZFxuICAgIH1cblxuICAgIGNvbnN0IGxpc3RQYXRoID0gbGlzdEl0ZW0ubGlzdFBhdGhcbiAgICBjb25zdCBpdGVtUGF0aCA9IGxpc3RJdGVtLml0ZW1QYXRoXG4gICAgaWYgKCFpdGVtUGF0aCkge1xuICAgICAgLy8gXHU3OTgxXHU2QjYyXHU2MjhBIHNuYXBzaG90IFx1NTE5OVx1NTZERVx1NTIzMFx1NjU3NFx1NEUyQSBpdGVtXHVGRjA4XHU0RjFBXHU4OTg2XHU3NkQ2XHU0RTFBXHU1MkExIHZhbHVlc1x1RkYwOVx1MzAwMlxuICAgICAgcmV0dXJuIEVmZmVjdC52b2lkXG4gICAgfVxuXG4gICAgY29uc3QgY29uY3VycmVuY3kgPSAoZW50cnkubWV0YSBhcyBhbnkpLmNvbmN1cnJlbmN5IGFzXG4gICAgICB8IFwic3dpdGNoXCJcbiAgICAgIHwgXCJleGhhdXN0LXRyYWlsaW5nXCJcbiAgICAgIHwgdW5kZWZpbmVkXG4gICAgY29uc3QgbW9kZSA9IGNvbmN1cnJlbmN5ID8/IFwic3dpdGNoXCJcblxuICAgIGNvbnN0IGluRmxpZ2h0ID0gbmV3IE1hcDxcbiAgICAgIFJvd0lkLlJvd0lkLFxuICAgICAge1xuICAgICAgICByZWFkb25seSBnZW46IG51bWJlclxuICAgICAgICByZWFkb25seSBmaWJlcjogRmliZXIuUnVudGltZUZpYmVyPHZvaWQsIG5ldmVyPlxuICAgICAgICByZWFkb25seSBrZXlIYXNoOiBzdHJpbmdcbiAgICAgIH1cbiAgICA+KClcbiAgICBjb25zdCB0cmFpbGluZyA9IG5ldyBNYXA8Um93SWQuUm93SWQsIHsgcmVhZG9ubHkga2V5OiB1bmtub3duOyByZWFkb25seSBrZXlIYXNoOiBzdHJpbmcgfT4oKVxuICAgIGxldCBnZW4gPSAwXG5cbiAgICAvLyByb3cgXHU4OEFCXHU3OUZCXHU5NjY0XHVGRjFBXHU2RTA1XHU3NDA2IHRyYWlsaW5nL2luRmxpZ2h0IFx1NUYxNVx1NzUyOFx1RkYwQ1x1OTA3Rlx1NTE0RFx1NTQwRVx1N0VFRFx1OTUxOVx1OEJFRlx1NUY1Mlx1NUM1RVx1NjIxNlx1NTE4NVx1NUI1OFx1NkNDNFx1NkYwRlx1MzAwMlxuICAgIHN0b3JlLm9uUmVtb3ZlZChsaXN0UGF0aCwgKHJvd0lkKSA9PiB7XG4gICAgICB0cmFpbGluZy5kZWxldGUocm93SWQpXG4gICAgICBpbkZsaWdodC5kZWxldGUocm93SWQpXG4gICAgfSlcblxuICAgIGNvbnN0IHNldFNuYXBzaG90Rm9yUm93SW5UeG4gPSAoXG4gICAgICByb3dJZDogUm93SWQuUm93SWQsXG4gICAgICBuZXh0OiB1bmtub3duLFxuICAgICAgcmVhc29uOiBQYXRjaFJlYXNvbixcbiAgICAgIHN0ZXBJZDogc3RyaW5nLFxuICAgICk6IEVmZmVjdC5FZmZlY3Q8c3RyaW5nIHwgdW5kZWZpbmVkLCBuZXZlciwgYW55PiA9PlxuICAgICAgRWZmZWN0LmdlbihmdW5jdGlvbiogKCkge1xuICAgICAgICBsZXQgd3JvdGVQYXRoOiBzdHJpbmcgfCB1bmRlZmluZWRcbiAgICAgICAgeWllbGQqIChib3VuZC5zdGF0ZS5tdXRhdGUoKGRyYWZ0OiBhbnkpID0+IHtcbiAgICAgICAgICBjb25zdCBpbmRleCA9IHN0b3JlLmdldEluZGV4KGxpc3RQYXRoLCByb3dJZClcbiAgICAgICAgICBpZiAoaW5kZXggPT09IHVuZGVmaW5lZCkgcmV0dXJuXG4gICAgICAgICAgY29uc3QgY29uY3JldGVQYXRoID0gUm93SWQudG9MaXN0SXRlbVZhbHVlUGF0aChsaXN0UGF0aCwgaW5kZXgsIGl0ZW1QYXRoKVxuICAgICAgICAgIGNvbnN0IHByZXYgPSBSb3dJZC5nZXRBdFBhdGgoZHJhZnQsIGNvbmNyZXRlUGF0aClcbiAgICAgICAgICBpZiAoT2JqZWN0LmlzKHByZXYsIG5leHQpKSByZXR1cm5cbiAgICAgICAgICB3cm90ZVBhdGggPSBjb25jcmV0ZVBhdGhcbiAgICAgICAgICBSb3dJZC5zZXRBdFBhdGhNdXRhdGluZyhkcmFmdCwgY29uY3JldGVQYXRoLCBuZXh0KVxuICAgICAgICAgIHJlY29yZFRyYWl0UGF0Y2goYm91bmQsIHtcbiAgICAgICAgICAgIHBhdGg6IGNvbmNyZXRlUGF0aCxcbiAgICAgICAgICAgIGZyb206IHByZXYsXG4gICAgICAgICAgICB0bzogbmV4dCxcbiAgICAgICAgICAgIHJlYXNvbixcbiAgICAgICAgICAgIHN0ZXBJZCxcbiAgICAgICAgICAgIHRyYWl0Tm9kZUlkOiBzdGVwLmRlYnVnSW5mbz8uZ3JhcGhOb2RlSWQsXG4gICAgICAgICAgfSlcbiAgICAgICAgfSkgYXMgRWZmZWN0LkVmZmVjdDx2b2lkLCBuZXZlciwgYW55PilcbiAgICAgICAgcmV0dXJuIHdyb3RlUGF0aFxuICAgICAgfSlcblxuICAgIGNvbnN0IHdyaXRlYmFja0lmQ3VycmVudEtleUhhc2hGb3JSb3cgPSAoXG4gICAgICByb3dJZDogUm93SWQuUm93SWQsXG4gICAgICBrZXlIYXNoOiBzdHJpbmcsXG4gICAgICBuZXh0OiB1bmtub3duLFxuICAgICAgcmVhc29uOiBQYXRjaFJlYXNvbixcbiAgICAgIHN0ZXBJZDogc3RyaW5nLFxuICAgICAgcGhhc2U/OiBSZXBsYXlMb2cuUmVzb3VyY2VTbmFwc2hvdFBoYXNlLFxuICAgICk6IEVmZmVjdC5FZmZlY3Q8c3RyaW5nIHwgdW5kZWZpbmVkLCBuZXZlciwgYW55PiA9PlxuICAgICAgRWZmZWN0LmdlbihmdW5jdGlvbiogKCkge1xuICAgICAgICBsZXQgd3JvdGVQYXRoOiBzdHJpbmcgfCB1bmRlZmluZWRcbiAgICAgICAgeWllbGQqIChib3VuZC5zdGF0ZS5tdXRhdGUoKGRyYWZ0OiBhbnkpID0+IHtcbiAgICAgICAgICBjb25zdCBpbmRleCA9IHN0b3JlLmdldEluZGV4KGxpc3RQYXRoLCByb3dJZClcbiAgICAgICAgICBpZiAoaW5kZXggPT09IHVuZGVmaW5lZCkgcmV0dXJuXG4gICAgICAgICAgY29uc3QgY29uY3JldGVQYXRoID0gUm93SWQudG9MaXN0SXRlbVZhbHVlUGF0aChsaXN0UGF0aCwgaW5kZXgsIGl0ZW1QYXRoKVxuXG4gICAgICAgICAgY29uc3QgY3VycmVudCA9IFJvd0lkLmdldEF0UGF0aChkcmFmdCwgY29uY3JldGVQYXRoKVxuICAgICAgICAgIGNvbnN0IGN1cnJlbnRLZXlIYXNoID1cbiAgICAgICAgICAgIGN1cnJlbnQgJiYgdHlwZW9mIGN1cnJlbnQgPT09IFwib2JqZWN0XCIgPyAoY3VycmVudCBhcyBhbnkpLmtleUhhc2ggOiB1bmRlZmluZWRcbiAgICAgICAgICBpZiAoY3VycmVudEtleUhhc2ggIT09IGtleUhhc2gpIHJldHVyblxuXG4gICAgICAgICAgY29uc3QgcHJldiA9IGN1cnJlbnRcbiAgICAgICAgICBpZiAoT2JqZWN0LmlzKHByZXYsIG5leHQpKSByZXR1cm5cblxuICAgICAgICAgIHdyb3RlUGF0aCA9IGNvbmNyZXRlUGF0aFxuICAgICAgICAgIFJvd0lkLnNldEF0UGF0aE11dGF0aW5nKGRyYWZ0LCBjb25jcmV0ZVBhdGgsIG5leHQpXG4gICAgICAgICAgaWYgKHBoYXNlKSB7XG4gICAgICAgICAgICByZWNvcmRSZXBsYXlFdmVudChib3VuZCwge1xuICAgICAgICAgICAgICBfdGFnOiBcIlJlc291cmNlU25hcHNob3RcIixcbiAgICAgICAgICAgICAgcmVzb3VyY2VJZCxcbiAgICAgICAgICAgICAgZmllbGRQYXRoOiBjb25jcmV0ZVBhdGgsXG4gICAgICAgICAgICAgIGtleUhhc2gsXG4gICAgICAgICAgICAgIHBoYXNlLFxuICAgICAgICAgICAgICBzbmFwc2hvdDogbmV4dCxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgICBtb2R1bGVJZDogKGJvdW5kIGFzIGFueSkuX19tb2R1bGVJZCBhcyBzdHJpbmcgfCB1bmRlZmluZWQsXG4gICAgICAgICAgICAgIHJ1bnRpbWVJZDogKGJvdW5kIGFzIGFueSkuX19ydW50aW1lSWQgYXMgc3RyaW5nIHwgdW5kZWZpbmVkLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVjb3JkVHJhaXRQYXRjaChib3VuZCwge1xuICAgICAgICAgICAgcGF0aDogY29uY3JldGVQYXRoLFxuICAgICAgICAgICAgZnJvbTogcHJldixcbiAgICAgICAgICAgIHRvOiBuZXh0LFxuICAgICAgICAgICAgcmVhc29uLFxuICAgICAgICAgICAgc3RlcElkLFxuICAgICAgICAgICAgdHJhaXROb2RlSWQ6IHN0ZXAuZGVidWdJbmZvPy5ncmFwaE5vZGVJZCxcbiAgICAgICAgICB9KVxuICAgICAgICB9KSBhcyBFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBhbnk+KVxuICAgICAgICByZXR1cm4gd3JvdGVQYXRoXG4gICAgICB9KVxuXG4gICAgY29uc3Qgc3RhcnRGZXRjaCA9IChcbiAgICAgIHJvd0lkOiBSb3dJZC5Sb3dJZCxcbiAgICAgIGtleTogdW5rbm93bixcbiAgICAgIGtleUhhc2g6IHN0cmluZyxcbiAgICAgIHJlcGxheU1vZGU6IFwibGl2ZVwiIHwgXCJyZXBsYXlcIixcbiAgICAgIHJlcGxheUxvZzogUmVwbGF5TG9nLlJlcGxheUxvZ1NlcnZpY2UgfCB1bmRlZmluZWQsXG4gICAgKTogRWZmZWN0LkVmZmVjdDx2b2lkLCBuZXZlciwgYW55PiA9PlxuICAgICAgRWZmZWN0LmdlbihmdW5jdGlvbiogKCkge1xuICAgICAgICBjb25zdCBtb2R1bGVJZCA9IChib3VuZCBhcyBhbnkpLl9fbW9kdWxlSWQgYXMgc3RyaW5nIHwgdW5kZWZpbmVkXG4gICAgICAgIGNvbnN0IHJ1bnRpbWVJZCA9IChib3VuZCBhcyBhbnkpLl9fcnVudGltZUlkIGFzIHN0cmluZyB8IHVuZGVmaW5lZFxuXG4gICAgICAgIGNvbnN0IGluZGV4Rm9yTG9nID0gc3RvcmUuZ2V0SW5kZXgobGlzdFBhdGgsIHJvd0lkKVxuICAgICAgICBjb25zdCBsb2dGaWVsZFBhdGggPVxuICAgICAgICAgIGluZGV4Rm9yTG9nID09PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gdW5kZWZpbmVkXG4gICAgICAgICAgICA6IFJvd0lkLnRvTGlzdEl0ZW1WYWx1ZVBhdGgobGlzdFBhdGgsIGluZGV4Rm9yTG9nLCBpdGVtUGF0aClcblxuICAgICAgICBsZXQgbG9hZGluZ1NuYXBzaG90OiB1bmtub3duID0gU25hcHNob3QubG9hZGluZyh7IGtleUhhc2ggfSlcbiAgICAgICAgaWYgKHJlcGxheU1vZGUgPT09IFwicmVwbGF5XCIgJiYgcmVwbGF5TG9nICYmIGxvZ0ZpZWxkUGF0aCkge1xuICAgICAgICAgIGNvbnN0IHJlcGxheUxvYWRpbmcgPSB5aWVsZCogcmVwbGF5TG9nLmNvbnN1bWVOZXh0UmVzb3VyY2VTbmFwc2hvdCh7XG4gICAgICAgICAgICByZXNvdXJjZUlkLFxuICAgICAgICAgICAgZmllbGRQYXRoOiBsb2dGaWVsZFBhdGgsXG4gICAgICAgICAgICBrZXlIYXNoLFxuICAgICAgICAgICAgcGhhc2U6IFwibG9hZGluZ1wiLFxuICAgICAgICAgIH0pXG4gICAgICAgICAgaWYgKHJlcGxheUxvYWRpbmcpIHtcbiAgICAgICAgICAgIGxvYWRpbmdTbmFwc2hvdCA9IHJlcGxheUxvYWRpbmcuc25hcHNob3RcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd3JvdGVMb2FkaW5nUGF0aCA9IHlpZWxkKiBzZXRTbmFwc2hvdEZvclJvd0luVHhuKFxuICAgICAgICAgIHJvd0lkLFxuICAgICAgICAgIGxvYWRpbmdTbmFwc2hvdCxcbiAgICAgICAgICBcInNvdXJjZTpsb2FkaW5nXCIsXG4gICAgICAgICAgYHNvdXJjZToke2ZpZWxkUGF0aH06JHtyb3dJZH06bG9hZGluZ2AsXG4gICAgICAgIClcbiAgICAgICAgaWYgKHdyb3RlTG9hZGluZ1BhdGgpIHtcbiAgICAgICAgICBjb25zdCBldmVudDogUmVwbGF5TG9nLlJlcGxheUxvZ0V2ZW50ID0ge1xuICAgICAgICAgICAgX3RhZzogXCJSZXNvdXJjZVNuYXBzaG90XCIsXG4gICAgICAgICAgICByZXNvdXJjZUlkLFxuICAgICAgICAgICAgZmllbGRQYXRoOiB3cm90ZUxvYWRpbmdQYXRoLFxuICAgICAgICAgICAga2V5SGFzaCxcbiAgICAgICAgICAgIHBoYXNlOiBcImxvYWRpbmdcIixcbiAgICAgICAgICAgIHNuYXBzaG90OiBsb2FkaW5nU25hcHNob3QsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgICAgICBtb2R1bGVJZCxcbiAgICAgICAgICAgIHJ1bnRpbWVJZCxcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVjb3JkUmVwbGF5RXZlbnQoYm91bmQsIGV2ZW50KVxuICAgICAgICAgIHlpZWxkKiByZWNvcmRTbmFwc2hvdChyZXBsYXlNb2RlLCByZXBsYXlMb2csIGV2ZW50KVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaW8gPSBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgaWYgKHJlcGxheU1vZGUgPT09IFwicmVwbGF5XCIgJiYgcmVwbGF5TG9nKSB7XG4gICAgICAgICAgICAvLyBcdThCQTkgbG9hZGluZyBcdTYzRDBcdTRFQTRcdTUxNDhcdTUzRUZcdTg5QzFcdUZGMENcdTUxOERcdTkxQ0RcdThENUJcdTdFQzhcdTYwMDFcdUZGMDhcdTRGRERcdTYzMDFcdTIwMUNcdTVGMDJcdTZCNjVcdThENDRcdTZFOTBcdTIwMURcdTc2ODRcdTY1RjZcdTk1RjRcdTdFQkZcdTdFRDNcdTY3ODRcdUZGMDlcdTMwMDJcbiAgICAgICAgICAgIHlpZWxkKiBFZmZlY3QueWllbGROb3coKVxuICAgICAgICAgICAgY29uc3QgY29uc3VtZVBhdGggPSB3cm90ZUxvYWRpbmdQYXRoID8/IGxvZ0ZpZWxkUGF0aFxuICAgICAgICAgICAgaWYgKCFjb25zdW1lUGF0aCkgcmV0dXJuIHlpZWxkKiBFZmZlY3Qudm9pZFxuXG4gICAgICAgICAgICBjb25zdCByZXBsYXllZCA9IHlpZWxkKiByZXBsYXlMb2cuY29uc3VtZU5leHRSZXNvdXJjZVNuYXBzaG90KHtcbiAgICAgICAgICAgICAgcmVzb3VyY2VJZCxcbiAgICAgICAgICAgICAgZmllbGRQYXRoOiBjb25zdW1lUGF0aCxcbiAgICAgICAgICAgICAga2V5SGFzaCxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBpZiAoIXJlcGxheWVkKSByZXR1cm4geWllbGQqIEVmZmVjdC52b2lkXG5cbiAgICAgICAgICAgIGlmIChyZXBsYXllZC5waGFzZSA9PT0gXCJzdWNjZXNzXCIpIHtcbiAgICAgICAgICAgICAgeWllbGQqIHdyaXRlYmFja0lmQ3VycmVudEtleUhhc2hGb3JSb3coXG4gICAgICAgICAgICAgICAgcm93SWQsXG4gICAgICAgICAgICAgICAga2V5SGFzaCxcbiAgICAgICAgICAgICAgICByZXBsYXllZC5zbmFwc2hvdCxcbiAgICAgICAgICAgICAgICBcInNvdXJjZTpzdWNjZXNzXCIsXG4gICAgICAgICAgICAgICAgYHNvdXJjZToke2ZpZWxkUGF0aH06JHtyb3dJZH06c3VjY2Vzc2AsXG4gICAgICAgICAgICAgICAgXCJzdWNjZXNzXCIsXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVwbGF5ZWQucGhhc2UgPT09IFwiZXJyb3JcIikge1xuICAgICAgICAgICAgICB5aWVsZCogd3JpdGViYWNrSWZDdXJyZW50S2V5SGFzaEZvclJvdyhcbiAgICAgICAgICAgICAgICByb3dJZCxcbiAgICAgICAgICAgICAgICBrZXlIYXNoLFxuICAgICAgICAgICAgICAgIHJlcGxheWVkLnNuYXBzaG90LFxuICAgICAgICAgICAgICAgIFwic291cmNlOmVycm9yXCIsXG4gICAgICAgICAgICAgICAgYHNvdXJjZToke2ZpZWxkUGF0aH06JHtyb3dJZH06ZXJyb3JgLFxuICAgICAgICAgICAgICAgIFwiZXJyb3JcIixcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4geWllbGQqIEVmZmVjdC52b2lkXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3Qgc3RhY2sgPSB5aWVsZCogZ2V0TWlkZGxld2FyZVN0YWNrKClcblxuICAgICAgICAgIGNvbnN0IHJlZ2lzdHJ5T3B0ID0geWllbGQqIEVmZmVjdC5zZXJ2aWNlT3B0aW9uKFJlc291cmNlSW50ZXJuYWwuUmVzb3VyY2VSZWdpc3RyeVRhZylcbiAgICAgICAgICBjb25zdCByZWdpc3RyeSA9IE9wdGlvbi5pc1NvbWUocmVnaXN0cnlPcHQpID8gcmVnaXN0cnlPcHQudmFsdWUgOiB1bmRlZmluZWRcbiAgICAgICAgICBjb25zdCBzcGVjID0gcmVnaXN0cnk/LnNwZWNzLmdldChyZXNvdXJjZUlkKVxuXG4gICAgICAgICAgaWYgKCFzcGVjKSB7XG4gICAgICAgICAgICByZXR1cm4geWllbGQqIEVmZmVjdC52b2lkXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgbG9hZEVmZmVjdCA9IChzcGVjLmxvYWQgYXMgYW55KShrZXkpIGFzIEVmZmVjdC5FZmZlY3Q8YW55LCBhbnksIGFueT5cblxuICAgICAgICAgIGNvbnN0IG9wID0gRWZmZWN0T3AubWFrZTxhbnksIGFueSwgYW55Pih7XG4gICAgICAgICAgICBraW5kOiBcInNlcnZpY2VcIixcbiAgICAgICAgICAgIG5hbWU6IHJlc291cmNlSWQsXG4gICAgICAgICAgICBlZmZlY3Q6IGxvYWRFZmZlY3QsXG4gICAgICAgICAgICBtZXRhOiB7XG4gICAgICAgICAgICAgIG1vZHVsZUlkLFxuICAgICAgICAgICAgICBydW50aW1lSWQsXG4gICAgICAgICAgICAgIGZpZWxkUGF0aCxcbiAgICAgICAgICAgICAgcmVzb3VyY2VJZCxcbiAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICBrZXlIYXNoLFxuICAgICAgICAgICAgICByb3dJZCxcbiAgICAgICAgICAgICAgdHJhaXROb2RlSWQ6IHN0ZXAuZGVidWdJbmZvPy5ncmFwaE5vZGVJZCxcbiAgICAgICAgICAgICAgc3RlcElkOiBzdGVwLmlkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgY29uc3QgZXhpdCA9IHlpZWxkKiBFZmZlY3QuZXhpdChFZmZlY3RPcC5ydW4ob3AsIHN0YWNrKSlcblxuICAgICAgICAgIGlmIChleGl0Ll90YWcgPT09IFwiU3VjY2Vzc1wiKSB7XG4gICAgICAgICAgICBjb25zdCBzdWNjZXNzU25hcHNob3QgPSBTbmFwc2hvdC5zdWNjZXNzKHsga2V5SGFzaCwgZGF0YTogZXhpdC52YWx1ZSB9KVxuICAgICAgICAgICAgY29uc3Qgd3JvdGVTdWNjZXNzUGF0aCA9IHlpZWxkKiB3cml0ZWJhY2tJZkN1cnJlbnRLZXlIYXNoRm9yUm93KFxuICAgICAgICAgICAgICByb3dJZCxcbiAgICAgICAgICAgICAga2V5SGFzaCxcbiAgICAgICAgICAgICAgc3VjY2Vzc1NuYXBzaG90LFxuICAgICAgICAgICAgICBcInNvdXJjZTpzdWNjZXNzXCIsXG4gICAgICAgICAgICAgIGBzb3VyY2U6JHtmaWVsZFBhdGh9OiR7cm93SWR9OnN1Y2Nlc3NgLFxuICAgICAgICAgICAgICBcInN1Y2Nlc3NcIixcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGlmICh3cm90ZVN1Y2Nlc3NQYXRoKSB7XG4gICAgICAgICAgICAgIHlpZWxkKiByZWNvcmRTbmFwc2hvdChyZXBsYXlNb2RlLCByZXBsYXlMb2csIHtcbiAgICAgICAgICAgICAgICBfdGFnOiBcIlJlc291cmNlU25hcHNob3RcIixcbiAgICAgICAgICAgICAgICByZXNvdXJjZUlkLFxuICAgICAgICAgICAgICAgIGZpZWxkUGF0aDogd3JvdGVTdWNjZXNzUGF0aCxcbiAgICAgICAgICAgICAgICBrZXlIYXNoLFxuICAgICAgICAgICAgICAgIHBoYXNlOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgICAgICAgICBzbmFwc2hvdDogc3VjY2Vzc1NuYXBzaG90LFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgICAgICBtb2R1bGVJZCxcbiAgICAgICAgICAgICAgICBydW50aW1lSWQsXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yU25hcHNob3QgPSBTbmFwc2hvdC5lcnJvcih7IGtleUhhc2gsIGVycm9yOiBleGl0LmNhdXNlIH0pXG4gICAgICAgICAgICBjb25zdCB3cm90ZUVycm9yUGF0aCA9IHlpZWxkKiB3cml0ZWJhY2tJZkN1cnJlbnRLZXlIYXNoRm9yUm93KFxuICAgICAgICAgICAgICByb3dJZCxcbiAgICAgICAgICAgICAga2V5SGFzaCxcbiAgICAgICAgICAgICAgZXJyb3JTbmFwc2hvdCxcbiAgICAgICAgICAgICAgXCJzb3VyY2U6ZXJyb3JcIixcbiAgICAgICAgICAgICAgYHNvdXJjZToke2ZpZWxkUGF0aH06JHtyb3dJZH06ZXJyb3JgLFxuICAgICAgICAgICAgICBcImVycm9yXCIsXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBpZiAod3JvdGVFcnJvclBhdGgpIHtcbiAgICAgICAgICAgICAgeWllbGQqIHJlY29yZFNuYXBzaG90KHJlcGxheU1vZGUsIHJlcGxheUxvZywge1xuICAgICAgICAgICAgICAgIF90YWc6IFwiUmVzb3VyY2VTbmFwc2hvdFwiLFxuICAgICAgICAgICAgICAgIHJlc291cmNlSWQsXG4gICAgICAgICAgICAgICAgZmllbGRQYXRoOiB3cm90ZUVycm9yUGF0aCxcbiAgICAgICAgICAgICAgICBrZXlIYXNoLFxuICAgICAgICAgICAgICAgIHBoYXNlOiBcImVycm9yXCIsXG4gICAgICAgICAgICAgICAgc25hcHNob3Q6IGVycm9yU25hcHNob3QsXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgICAgIG1vZHVsZUlkLFxuICAgICAgICAgICAgICAgIHJ1bnRpbWVJZCxcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pLnBpcGUoRWZmZWN0LmNhdGNoQWxsQ2F1c2UoKCkgPT4gRWZmZWN0LnZvaWQpKVxuXG4gICAgICAgIGNvbnN0IGZpYmVyID0geWllbGQqIEVmZmVjdC5mb3JrU2NvcGVkKGlvKVxuICAgICAgICBjb25zdCBteUdlbiA9IChnZW4gKz0gMSlcbiAgICAgICAgaW5GbGlnaHQuc2V0KHJvd0lkLCB7IGdlbjogbXlHZW4sIGZpYmVyLCBrZXlIYXNoIH0pXG5cbiAgICAgICAgeWllbGQqIEVmZmVjdC5mb3JrU2NvcGVkKFxuICAgICAgICAgIEZpYmVyLmF3YWl0KGZpYmVyKS5waXBlKFxuICAgICAgICAgICAgRWZmZWN0LnppcFJpZ2h0KFxuICAgICAgICAgICAgICBFZmZlY3Quc3luYygoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudCA9IGluRmxpZ2h0LmdldChyb3dJZClcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudCAmJiBjdXJyZW50LmdlbiA9PT0gbXlHZW4pIHtcbiAgICAgICAgICAgICAgICAgIGluRmxpZ2h0LmRlbGV0ZShyb3dJZClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIEVmZmVjdC56aXBSaWdodChcbiAgICAgICAgICAgICAgbW9kZSA9PT0gXCJleGhhdXN0LXRyYWlsaW5nXCIgJiYgdHJhaWxpbmcuaGFzKHJvd0lkKVxuICAgICAgICAgICAgICAgID8gRWZmZWN0LmdlbihmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0ID0gdHJhaWxpbmcuZ2V0KHJvd0lkKVxuICAgICAgICAgICAgICAgICAgICB0cmFpbGluZy5kZWxldGUocm93SWQpXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgeWllbGQqIHN0YXJ0RmV0Y2goXG4gICAgICAgICAgICAgICAgICAgICAgICByb3dJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQua2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dC5rZXlIYXNoLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGF5TW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGxheUxvZyxcbiAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgOiBFZmZlY3Qudm9pZCxcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBFZmZlY3QuY2F0Y2hBbGxDYXVzZSgoKSA9PiBFZmZlY3Qudm9pZCksXG4gICAgICAgICAgKSxcbiAgICAgICAgKVxuICAgICAgfSlcblxuICAgIHJlZ2lzdGVyKGZpZWxkUGF0aCwgKHN0YXRlOiBhbnkpID0+XG4gICAgICBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGNvbnN0IG1vZHVsZUlkID0gKGJvdW5kIGFzIGFueSkuX19tb2R1bGVJZCBhcyBzdHJpbmcgfCB1bmRlZmluZWRcbiAgICAgICAgY29uc3QgcnVudGltZUlkID0gKGJvdW5kIGFzIGFueSkuX19ydW50aW1lSWQgYXMgc3RyaW5nIHwgdW5kZWZpbmVkXG4gICAgICAgIGNvbnN0IHJlcGxheU1vZGVPcHQgPSB5aWVsZCogRWZmZWN0LnNlcnZpY2VPcHRpb24oUmVwbGF5TW9kZUNvbmZpZ1RhZylcbiAgICAgICAgY29uc3QgcmVwbGF5TW9kZSA9IE9wdGlvbi5pc1NvbWUocmVwbGF5TW9kZU9wdCkgPyByZXBsYXlNb2RlT3B0LnZhbHVlLm1vZGUgOiBcImxpdmVcIlxuICAgICAgICBjb25zdCByZXBsYXlMb2dPcHQgPSB5aWVsZCogRWZmZWN0LnNlcnZpY2VPcHRpb24oUmVwbGF5TG9nLlJlcGxheUxvZylcbiAgICAgICAgY29uc3QgcmVwbGF5TG9nID0gT3B0aW9uLmlzU29tZShyZXBsYXlMb2dPcHQpID8gcmVwbGF5TG9nT3B0LnZhbHVlIDogdW5kZWZpbmVkXG5cbiAgICAgICAgY29uc3QgbGlzdFZhbHVlID0gUm93SWQuZ2V0QXRQYXRoKHN0YXRlLCBsaXN0UGF0aClcbiAgICAgICAgY29uc3QgaXRlbXM6IFJlYWRvbmx5QXJyYXk8dW5rbm93bj4gPSBBcnJheS5pc0FycmF5KGxpc3RWYWx1ZSkgPyBsaXN0VmFsdWUgOiBbXVxuICAgICAgICBjb25zdCBpZHMgPSBzdG9yZS5lbnN1cmVMaXN0KGxpc3RQYXRoLCBpdGVtcylcblxuICAgICAgICAvLyBkZXYtbW9kZVx1RkYxQVx1NUJGOVx1OTk5Nlx1ODg0Q1x1NTA1QVx1NEUwMFx1NkIyMSBkZXBzIHRyYWNlXHVGRjA4XHU1M0VBXHU1MDVBXHU4QkNBXHU2NUFEXHVGRjBDXHU0RTBEXHU1RjcxXHU1NENEXHU2MjY3XHU4ODRDXHU4QkVEXHU0RTQ5XHVGRjA5XHUzMDAyXG4gICAgICAgIGNvbnN0IHRyYWNlS2V5ID0gYCR7cnVudGltZUlkID8/IFwidW5rbm93blwifTo6c291cmNlOjoke2ZpZWxkUGF0aH1gXG4gICAgICAgIGlmIChpc0RldkVudigpICYmICFkZXBzVHJhY2VTZXR0bGVkLmhhcyh0cmFjZUtleSkpIHtcbiAgICAgICAgICBkZXBzVHJhY2VTZXR0bGVkLmFkZCh0cmFjZUtleSlcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc2FtcGxlID0gaXRlbXNbMF1cbiAgICAgICAgICAgIGlmIChzYW1wbGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICBjb25zdCB0cmFjZWQgPSBEZXBzVHJhY2UudHJhY2UoKHMpID0+IChlbnRyeS5tZXRhIGFzIGFueSkua2V5KHMpLCBzYW1wbGUgYXMgYW55KVxuICAgICAgICAgICAgICBjb25zdCBwcmVmaXhlZFJlYWRzID0gdHJhY2VkLnJlYWRzLm1hcCgocikgPT5cbiAgICAgICAgICAgICAgICByID8gYCR7bGlzdFBhdGh9W10uJHtyfWAgOiBgJHtsaXN0UGF0aH1bXWAsXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgY29uc3QgZGlmZiA9IERlcHNUcmFjZS5kaWZmRGVwcyhcbiAgICAgICAgICAgICAgICAoKGVudHJ5Lm1ldGEgYXMgYW55KS5kZXBzID8/IFtdKSBhcyBSZWFkb25seUFycmF5PHN0cmluZz4sXG4gICAgICAgICAgICAgICAgcHJlZml4ZWRSZWFkcyxcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBpZiAoZGlmZikge1xuICAgICAgICAgICAgICAgIHlpZWxkKiBlbWl0RGVwc01pc21hdGNoKHtcbiAgICAgICAgICAgICAgICAgIG1vZHVsZUlkLFxuICAgICAgICAgICAgICAgICAgcnVudGltZUlkLFxuICAgICAgICAgICAgICAgICAga2luZDogXCJzb3VyY2VcIixcbiAgICAgICAgICAgICAgICAgIGZpZWxkUGF0aCxcbiAgICAgICAgICAgICAgICAgIGRpZmYsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgLy8gdHJhY2luZyBmYWlsdXJlIHNob3VsZCBuZXZlciBicmVhayByZWZyZXNoIGZsb3dcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgaXRlbXMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgY29uc3Qgcm93SWQgPSBpZHNbaW5kZXhdXG4gICAgICAgICAgaWYgKCFyb3dJZCkgY29udGludWVcblxuICAgICAgICAgIGNvbnN0IGNvbmNyZXRlUGF0aCA9IFJvd0lkLnRvTGlzdEl0ZW1WYWx1ZVBhdGgobGlzdFBhdGgsIGluZGV4LCBpdGVtUGF0aClcbiAgICAgICAgICBjb25zdCBwcmV2U25hcHNob3QgPSBSb3dJZC5nZXRBdFBhdGgoc3RhdGUsIGNvbmNyZXRlUGF0aCkgYXMgYW55XG5cbiAgICAgICAgICBsZXQga2V5OiB1bmtub3duXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGtleSA9IChlbnRyeS5tZXRhIGFzIGFueSkua2V5KGl0ZW1zW2luZGV4XSlcbiAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgIGtleSA9IHVuZGVmaW5lZFxuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGN1cnJlbnQgPSBpbkZsaWdodC5nZXQocm93SWQpXG5cbiAgICAgICAgICBpZiAoa2V5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRyYWlsaW5nLmRlbGV0ZShyb3dJZClcbiAgICAgICAgICAgIGluRmxpZ2h0LmRlbGV0ZShyb3dJZClcblxuICAgICAgICAgICAgLy8gXHU4MkU1XHU1REYyXHU2NjJGIGNsZWFuIGlkbGVcdUZGMENcdTUyMTlcdTY1RTBcdTk3MDBcdTkxQ0RcdTU5MERcdTUxOTlcdTU2REVcdUZGMDhcdTkwN0ZcdTUxNERcdTY1RTBcdTYxMEZcdTRFNDkgcGF0Y2ggXHU1QkZDXHU4MUY0IFVJIFx1NjI5Nlx1NTJBOFx1RkYwOVx1MzAwMlxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBwcmV2U25hcHNob3QgJiZcbiAgICAgICAgICAgICAgdHlwZW9mIHByZXZTbmFwc2hvdCA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgICBwcmV2U25hcHNob3Quc3RhdHVzID09PSBcImlkbGVcIiAmJlxuICAgICAgICAgICAgICBwcmV2U25hcHNob3QuZGF0YSA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgIHByZXZTbmFwc2hvdC5lcnJvciA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgaWRsZVNuYXBzaG90ID0gU25hcHNob3QuaWRsZSgpXG4gICAgICAgICAgICBjb25zdCB3cm90ZUlkbGVQYXRoID0geWllbGQqIHNldFNuYXBzaG90Rm9yUm93SW5UeG4oXG4gICAgICAgICAgICAgIHJvd0lkLFxuICAgICAgICAgICAgICBpZGxlU25hcHNob3QsXG4gICAgICAgICAgICAgIFwic291cmNlOmlkbGVcIixcbiAgICAgICAgICAgICAgYHNvdXJjZToke2ZpZWxkUGF0aH06JHtyb3dJZH06aWRsZWAsXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBpZiAod3JvdGVJZGxlUGF0aCkge1xuICAgICAgICAgICAgICBjb25zdCBldmVudDogUmVwbGF5TG9nLlJlcGxheUxvZ0V2ZW50ID0ge1xuICAgICAgICAgICAgICAgIF90YWc6IFwiUmVzb3VyY2VTbmFwc2hvdFwiLFxuICAgICAgICAgICAgICAgIHJlc291cmNlSWQsXG4gICAgICAgICAgICAgICAgZmllbGRQYXRoOiB3cm90ZUlkbGVQYXRoLFxuICAgICAgICAgICAgICAgIGtleUhhc2g6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBwaGFzZTogXCJpZGxlXCIsXG4gICAgICAgICAgICAgICAgc25hcHNob3Q6IGlkbGVTbmFwc2hvdCxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgICAgICAgICAgbW9kdWxlSWQsXG4gICAgICAgICAgICAgICAgcnVudGltZUlkLFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJlY29yZFJlcGxheUV2ZW50KGJvdW5kLCBldmVudClcbiAgICAgICAgICAgICAgeWllbGQqIHJlY29yZFNuYXBzaG90KHJlcGxheU1vZGUsIHJlcGxheUxvZywgZXZlbnQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGggPSBoYXNoS2V5KGtleSlcblxuICAgICAgICAgIC8vIGtleUhhc2ggXHU2NzJBXHU1M0Q4XHU1MzE2XHVGRjFBXHU5MDdGXHU1MTREXHU2NUUwXHU2MTBGXHU0RTQ5XHU5MUNEXHU1OTBEXHU1MjM3XHU2NUIwXHVGRjA4XHU1NDBDXHU2NUY2XHU0RkREXHU0RjRGIGluLWZsaWdodFx1RkYwOVx1MzAwMlxuICAgICAgICAgIGlmIChjdXJyZW50ICYmIGN1cnJlbnQua2V5SGFzaCA9PT0gaCkge1xuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBcdTk3NUUgaW4tZmxpZ2h0XHVGRjFBXHU4MkU1XHU1RjUzXHU1MjREIHNuYXBzaG90LmtleUhhc2ggXHU1REYyXHU1MzM5XHU5MTREXHVGRjBDXHU1MjE5XHU4OUM2XHU0RTNBXHU1REYyXHU2NjJGXHU2NzAwXHU2NUIwXHU2NTcwXHU2MzZFXHVGRjA4XHU5MDdGXHU1MTREXHU1MTY4XHU5MUNGIHJlZnJlc2ggXHU5MDIwXHU2MjEwXHU2MjQwXHU2NzA5XHU4ODRDXHU2Mjk2XHU1MkE4XHVGRjA5XHUzMDAyXG4gICAgICAgICAgY29uc3QgcHJldktleUhhc2ggPVxuICAgICAgICAgICAgcHJldlNuYXBzaG90ICYmIHR5cGVvZiBwcmV2U25hcHNob3QgPT09IFwib2JqZWN0XCJcbiAgICAgICAgICAgICAgPyAocHJldlNuYXBzaG90IGFzIGFueSkua2V5SGFzaFxuICAgICAgICAgICAgICA6IHVuZGVmaW5lZFxuICAgICAgICAgIGlmICghY3VycmVudCAmJiBwcmV2S2V5SGFzaCA9PT0gaCkge1xuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAobW9kZSA9PT0gXCJleGhhdXN0LXRyYWlsaW5nXCIgJiYgY3VycmVudCkge1xuICAgICAgICAgICAgdHJhaWxpbmcuc2V0KHJvd0lkLCB7IGtleSwga2V5SGFzaDogaCB9KVxuICAgICAgICAgICAgY29uc3QgbG9hZGluZ1NuYXBzaG90ID0gU25hcHNob3QubG9hZGluZyh7IGtleUhhc2g6IGggfSlcbiAgICAgICAgICAgIGNvbnN0IHdyb3RlTG9hZGluZ1BhdGggPSB5aWVsZCogc2V0U25hcHNob3RGb3JSb3dJblR4bihcbiAgICAgICAgICAgICAgcm93SWQsXG4gICAgICAgICAgICAgIGxvYWRpbmdTbmFwc2hvdCxcbiAgICAgICAgICAgICAgXCJzb3VyY2U6bG9hZGluZ1wiLFxuICAgICAgICAgICAgICBgc291cmNlOiR7ZmllbGRQYXRofToke3Jvd0lkfTpsb2FkaW5nYCxcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGlmICh3cm90ZUxvYWRpbmdQYXRoKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGV2ZW50OiBSZXBsYXlMb2cuUmVwbGF5TG9nRXZlbnQgPSB7XG4gICAgICAgICAgICAgICAgX3RhZzogXCJSZXNvdXJjZVNuYXBzaG90XCIsXG4gICAgICAgICAgICAgICAgcmVzb3VyY2VJZCxcbiAgICAgICAgICAgICAgICBmaWVsZFBhdGg6IHdyb3RlTG9hZGluZ1BhdGgsXG4gICAgICAgICAgICAgICAga2V5SGFzaDogaCxcbiAgICAgICAgICAgICAgICBwaGFzZTogXCJsb2FkaW5nXCIsXG4gICAgICAgICAgICAgICAgc25hcHNob3Q6IGxvYWRpbmdTbmFwc2hvdCxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgICAgICAgICAgbW9kdWxlSWQsXG4gICAgICAgICAgICAgICAgcnVudGltZUlkLFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJlY29yZFJlcGxheUV2ZW50KGJvdW5kLCBldmVudClcbiAgICAgICAgICAgICAgeWllbGQqIHJlY29yZFNuYXBzaG90KHJlcGxheU1vZGUsIHJlcGxheUxvZywgZXZlbnQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChtb2RlID09PSBcInN3aXRjaFwiICYmIGN1cnJlbnQpIHtcbiAgICAgICAgICAgIC8vIFx1NEUwRFx1NEY5RFx1OEQ1Nlx1NTNENlx1NkQ4OFx1NkI2M1x1Nzg2RVx1NjAyN1x1RkYxQVx1NjVFN1x1N0VEM1x1Njc5Q1x1NTE5OVx1NTZERVx1NEYxQVx1ODhBQiBrZXlIYXNoIGdhdGUgXHU0RTIyXHU1RjAzXHUzMDAyXG4gICAgICAgICAgICB0cmFpbGluZy5kZWxldGUocm93SWQpXG4gICAgICAgICAgICBpbkZsaWdodC5kZWxldGUocm93SWQpXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgeWllbGQqIHN0YXJ0RmV0Y2gocm93SWQsIGtleSwgaCwgcmVwbGF5TW9kZSwgcmVwbGF5TG9nKVxuICAgICAgICB9XG4gICAgICB9KSxcbiAgICApXG5cbiAgICByZXR1cm4gRWZmZWN0LnZvaWRcbiAgfVxuXG4gIC8vIGluLWZsaWdodCBzdGF0ZSAocGVyIGZpZWxkKVxuICBsZXQgaW5GbGlnaHQ6XG4gICAgfCB7XG4gICAgICAgIHJlYWRvbmx5IGdlbjogbnVtYmVyXG4gICAgICAgIHJlYWRvbmx5IGZpYmVyOiBGaWJlci5SdW50aW1lRmliZXI8dm9pZCwgbmV2ZXI+XG4gICAgICAgIHJlYWRvbmx5IGtleUhhc2g6IHN0cmluZ1xuICAgICAgfVxuICAgIHwgdW5kZWZpbmVkXG4gIGxldCBnZW4gPSAwXG4gIGxldCB0cmFpbGluZzogeyByZWFkb25seSBrZXk6IHVua25vd247IHJlYWRvbmx5IGtleUhhc2g6IHN0cmluZyB9IHwgdW5kZWZpbmVkXG5cbiAgY29uc3QgY29uY3VycmVuY3kgPSAoZW50cnkubWV0YSBhcyBhbnkpLmNvbmN1cnJlbmN5IGFzXG4gICAgfCBcInN3aXRjaFwiXG4gICAgfCBcImV4aGF1c3QtdHJhaWxpbmdcIlxuICAgIHwgdW5kZWZpbmVkXG4gIGNvbnN0IG1vZGUgPSBjb25jdXJyZW5jeSA/PyBcInN3aXRjaFwiXG5cbiAgY29uc3Qgc3RhcnRGZXRjaCA9IChcbiAgICBrZXk6IHVua25vd24sXG4gICAga2V5SGFzaDogc3RyaW5nLFxuICAgIHJlcGxheU1vZGU6IFwibGl2ZVwiIHwgXCJyZXBsYXlcIixcbiAgICByZXBsYXlMb2c6IFJlcGxheUxvZy5SZXBsYXlMb2dTZXJ2aWNlIHwgdW5kZWZpbmVkLFxuICApOiBFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBhbnk+ID0+XG4gICAgRWZmZWN0LmdlbihmdW5jdGlvbiogKCkge1xuICAgICAgY29uc3QgbW9kdWxlSWQgPSAoYm91bmQgYXMgYW55KS5fX21vZHVsZUlkIGFzIHN0cmluZyB8IHVuZGVmaW5lZFxuICAgICAgY29uc3QgcnVudGltZUlkID0gKGJvdW5kIGFzIGFueSkuX19ydW50aW1lSWQgYXMgc3RyaW5nIHwgdW5kZWZpbmVkXG5cbiAgICAgIC8vIDEpIHBlbmRpbmdcdUZGMUFcdTU0MENcdTZCNjVcdTUxOTlcdTUxNjUgbG9hZGluZyBzbmFwc2hvdFx1RkYwOFx1ODQzRFx1NTcyOFx1NUY1M1x1NTI0RFx1NEU4Qlx1NTJBMVx1N0E5N1x1NTNFM1x1RkYwOVx1MzAwMlxuICAgICAgbGV0IGxvYWRpbmdTbmFwc2hvdDogdW5rbm93biA9IFNuYXBzaG90LmxvYWRpbmcoeyBrZXlIYXNoIH0pXG4gICAgICBpZiAocmVwbGF5TW9kZSA9PT0gXCJyZXBsYXlcIiAmJiByZXBsYXlMb2cpIHtcbiAgICAgICAgY29uc3QgcmVwbGF5TG9hZGluZyA9IHlpZWxkKiByZXBsYXlMb2cuY29uc3VtZU5leHRSZXNvdXJjZVNuYXBzaG90KHtcbiAgICAgICAgICByZXNvdXJjZUlkLFxuICAgICAgICAgIGZpZWxkUGF0aCxcbiAgICAgICAgICBrZXlIYXNoLFxuICAgICAgICAgIHBoYXNlOiBcImxvYWRpbmdcIixcbiAgICAgICAgfSlcbiAgICAgICAgaWYgKHJlcGxheUxvYWRpbmcpIHtcbiAgICAgICAgICBsb2FkaW5nU25hcHNob3QgPSByZXBsYXlMb2FkaW5nLnNuYXBzaG90XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IHdyb3RlTG9hZGluZyA9IHlpZWxkKiBzZXRTbmFwc2hvdEluVHhuKFxuICAgICAgICBib3VuZCxcbiAgICAgICAgZmllbGRQYXRoLFxuICAgICAgICBsb2FkaW5nU25hcHNob3QsXG4gICAgICAgIFwic291cmNlOmxvYWRpbmdcIixcbiAgICAgICAgYHNvdXJjZToke2ZpZWxkUGF0aH06bG9hZGluZ2AsXG4gICAgICAgIHN0ZXAuZGVidWdJbmZvPy5ncmFwaE5vZGVJZCxcbiAgICAgIClcbiAgICAgIGlmICh3cm90ZUxvYWRpbmcpIHtcbiAgICAgICAgY29uc3QgZXZlbnQ6IFJlcGxheUxvZy5SZXBsYXlMb2dFdmVudCA9IHtcbiAgICAgICAgICBfdGFnOiBcIlJlc291cmNlU25hcHNob3RcIixcbiAgICAgICAgICByZXNvdXJjZUlkLFxuICAgICAgICAgIGZpZWxkUGF0aCxcbiAgICAgICAgICBrZXlIYXNoLFxuICAgICAgICAgIHBoYXNlOiBcImxvYWRpbmdcIixcbiAgICAgICAgICBzbmFwc2hvdDogbG9hZGluZ1NuYXBzaG90LFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgICBtb2R1bGVJZCxcbiAgICAgICAgICBydW50aW1lSWQsXG4gICAgICAgIH1cbiAgICAgICAgcmVjb3JkUmVwbGF5RXZlbnQoYm91bmQsIGV2ZW50KVxuICAgICAgICB5aWVsZCogcmVjb3JkU25hcHNob3QocmVwbGF5TW9kZSwgcmVwbGF5TG9nLCBldmVudClcbiAgICAgIH1cblxuICAgICAgLy8gMikgSU9cdUZGMUFcdTU3MjhcdTU0MEVcdTUzRjAgZmliZXIgXHU0RTJEXHU4RkQwXHU4ODRDXHVGRjA4XHU5MDdGXHU1MTREXHU5NjNCXHU1ODVFXHU1RjUzXHU1MjREXHU0RThCXHU1MkExXHVGRjA5XHUzMDAyXG4gICAgICBjb25zdCBpbyA9IEVmZmVjdC5nZW4oZnVuY3Rpb24qICgpIHtcbiAgICAgICAgaWYgKHJlcGxheU1vZGUgPT09IFwicmVwbGF5XCIgJiYgcmVwbGF5TG9nKSB7XG4gICAgICAgICAgLy8gXHU4QkE5IGxvYWRpbmcgXHU2M0QwXHU0RUE0XHU1MTQ4XHU1M0VGXHU4OUMxXHVGRjBDXHU1MThEXHU5MUNEXHU4RDVCXHU3RUM4XHU2MDAxXHVGRjA4XHU0RkREXHU2MzAxXHUyMDFDXHU1RjAyXHU2QjY1XHU4RDQ0XHU2RTkwXHUyMDFEXHU3Njg0XHU2NUY2XHU5NUY0XHU3RUJGXHU3RUQzXHU2Nzg0XHVGRjA5XHUzMDAyXG4gICAgICAgICAgeWllbGQqIEVmZmVjdC55aWVsZE5vdygpXG4gICAgICAgICAgY29uc3QgcmVwbGF5ZWQgPSB5aWVsZCogcmVwbGF5TG9nLmNvbnN1bWVOZXh0UmVzb3VyY2VTbmFwc2hvdCh7XG4gICAgICAgICAgICByZXNvdXJjZUlkLFxuICAgICAgICAgICAgZmllbGRQYXRoLFxuICAgICAgICAgICAga2V5SGFzaCxcbiAgICAgICAgICB9KVxuICAgICAgICAgIGlmICghcmVwbGF5ZWQpIHJldHVybiB5aWVsZCogRWZmZWN0LnZvaWRcblxuICAgICAgICAgIGlmIChyZXBsYXllZC5waGFzZSA9PT0gXCJzdWNjZXNzXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50OiBSZXBsYXlMb2cuUmVwbGF5TG9nRXZlbnQgPSB7XG4gICAgICAgICAgICAgIF90YWc6IFwiUmVzb3VyY2VTbmFwc2hvdFwiLFxuICAgICAgICAgICAgICByZXNvdXJjZUlkLFxuICAgICAgICAgICAgICBmaWVsZFBhdGgsXG4gICAgICAgICAgICAgIGtleUhhc2gsXG4gICAgICAgICAgICAgIHBoYXNlOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgICAgICAgc25hcHNob3Q6IHJlcGxheWVkLnNuYXBzaG90LFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgICAgICAgIG1vZHVsZUlkLFxuICAgICAgICAgICAgICBydW50aW1lSWQsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB5aWVsZCogd3JpdGViYWNrSWZDdXJyZW50S2V5SGFzaChcbiAgICAgICAgICAgICAgYm91bmQsXG4gICAgICAgICAgICAgIGZpZWxkUGF0aCxcbiAgICAgICAgICAgICAga2V5SGFzaCxcbiAgICAgICAgICAgICAgcmVwbGF5ZWQuc25hcHNob3QsXG4gICAgICAgICAgICAgIFwic291cmNlOnN1Y2Nlc3NcIixcbiAgICAgICAgICAgICAgYHNvdXJjZToke2ZpZWxkUGF0aH06c3VjY2Vzc2AsXG4gICAgICAgICAgICAgIHN0ZXAuZGVidWdJbmZvPy5ncmFwaE5vZGVJZCxcbiAgICAgICAgICAgICAgZXZlbnQsXG4gICAgICAgICAgICApXG4gICAgICAgICAgfSBlbHNlIGlmIChyZXBsYXllZC5waGFzZSA9PT0gXCJlcnJvclwiKSB7XG4gICAgICAgICAgICBjb25zdCBldmVudDogUmVwbGF5TG9nLlJlcGxheUxvZ0V2ZW50ID0ge1xuICAgICAgICAgICAgICBfdGFnOiBcIlJlc291cmNlU25hcHNob3RcIixcbiAgICAgICAgICAgICAgcmVzb3VyY2VJZCxcbiAgICAgICAgICAgICAgZmllbGRQYXRoLFxuICAgICAgICAgICAgICBrZXlIYXNoLFxuICAgICAgICAgICAgICBwaGFzZTogXCJlcnJvclwiLFxuICAgICAgICAgICAgICBzbmFwc2hvdDogcmVwbGF5ZWQuc25hcHNob3QsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgICAgbW9kdWxlSWQsXG4gICAgICAgICAgICAgIHJ1bnRpbWVJZCxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHlpZWxkKiB3cml0ZWJhY2tJZkN1cnJlbnRLZXlIYXNoKFxuICAgICAgICAgICAgICBib3VuZCxcbiAgICAgICAgICAgICAgZmllbGRQYXRoLFxuICAgICAgICAgICAgICBrZXlIYXNoLFxuICAgICAgICAgICAgICByZXBsYXllZC5zbmFwc2hvdCxcbiAgICAgICAgICAgICAgXCJzb3VyY2U6ZXJyb3JcIixcbiAgICAgICAgICAgICAgYHNvdXJjZToke2ZpZWxkUGF0aH06ZXJyb3JgLFxuICAgICAgICAgICAgICBzdGVwLmRlYnVnSW5mbz8uZ3JhcGhOb2RlSWQsXG4gICAgICAgICAgICAgIGV2ZW50LFxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB5aWVsZCogRWZmZWN0LnZvaWRcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0YWNrID0geWllbGQqIGdldE1pZGRsZXdhcmVTdGFjaygpXG5cbiAgICAgICAgY29uc3QgcmVnaXN0cnlPcHQgPSB5aWVsZCogRWZmZWN0LnNlcnZpY2VPcHRpb24oXG4gICAgICAgICAgUmVzb3VyY2VJbnRlcm5hbC5SZXNvdXJjZVJlZ2lzdHJ5VGFnLFxuICAgICAgICApXG4gICAgICAgIGNvbnN0IHJlZ2lzdHJ5ID0gT3B0aW9uLmlzU29tZShyZWdpc3RyeU9wdCkgPyByZWdpc3RyeU9wdC52YWx1ZSA6IHVuZGVmaW5lZFxuICAgICAgICBjb25zdCBzcGVjID0gcmVnaXN0cnk/LnNwZWNzLmdldChyZXNvdXJjZUlkKVxuXG4gICAgICAgIGlmICghc3BlYykge1xuICAgICAgICAgIHJldHVybiB5aWVsZCogRWZmZWN0LnZvaWRcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvYWRFZmZlY3QgPSAoc3BlYy5sb2FkIGFzIGFueSkoa2V5KSBhcyBFZmZlY3QuRWZmZWN0PGFueSwgYW55LCBhbnk+XG5cbiAgICAgICAgY29uc3Qgb3AgPSBFZmZlY3RPcC5tYWtlPGFueSwgYW55LCBhbnk+KHtcbiAgICAgICAgICBraW5kOiBcInNlcnZpY2VcIixcbiAgICAgICAgICBuYW1lOiByZXNvdXJjZUlkLFxuICAgICAgICAgIGVmZmVjdDogbG9hZEVmZmVjdCxcbiAgICAgICAgICBtZXRhOiB7XG4gICAgICAgICAgICBtb2R1bGVJZCxcbiAgICAgICAgICAgIHJ1bnRpbWVJZCxcbiAgICAgICAgICAgIGZpZWxkUGF0aCxcbiAgICAgICAgICAgIHJlc291cmNlSWQsXG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgICBrZXlIYXNoLFxuICAgICAgICAgICAgdHJhaXROb2RlSWQ6IHN0ZXAuZGVidWdJbmZvPy5ncmFwaE5vZGVJZCxcbiAgICAgICAgICAgIHN0ZXBJZDogc3RlcC5pZCxcbiAgICAgICAgICB9LFxuICAgICAgICB9KVxuXG4gICAgICAgIGNvbnN0IGV4aXQgPSB5aWVsZCogRWZmZWN0LmV4aXQoRWZmZWN0T3AucnVuKG9wLCBzdGFjaykpXG5cbiAgICAgICAgLy8gMykgd3JpdGViYWNrXHVGRjFBXHU0RUU1IGtleUhhc2ggZ2F0ZSBcdTk2MzJcdTZCNjJcdTY1RTdcdTdFRDNcdTY3OUNcdTU2REVcdTUxOTlcdTUyMzBcdTY1QjAga2V5IFx1NEUwQVx1MzAwMlxuICAgICAgICBpZiAoZXhpdC5fdGFnID09PSBcIlN1Y2Nlc3NcIikge1xuICAgICAgICAgIGNvbnN0IHN1Y2Nlc3NTbmFwc2hvdCA9IFNuYXBzaG90LnN1Y2Nlc3MoeyBrZXlIYXNoLCBkYXRhOiBleGl0LnZhbHVlIH0pXG4gICAgICAgICAgY29uc3QgZXZlbnQ6IFJlcGxheUxvZy5SZXBsYXlMb2dFdmVudCA9IHtcbiAgICAgICAgICAgIF90YWc6IFwiUmVzb3VyY2VTbmFwc2hvdFwiLFxuICAgICAgICAgICAgcmVzb3VyY2VJZCxcbiAgICAgICAgICAgIGZpZWxkUGF0aCxcbiAgICAgICAgICAgIGtleUhhc2gsXG4gICAgICAgICAgICBwaGFzZTogXCJzdWNjZXNzXCIsXG4gICAgICAgICAgICBzbmFwc2hvdDogc3VjY2Vzc1NuYXBzaG90LFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgbW9kdWxlSWQsXG4gICAgICAgICAgICBydW50aW1lSWQsXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHdyb3RlU3VjY2VzcyA9IHlpZWxkKiB3cml0ZWJhY2tJZkN1cnJlbnRLZXlIYXNoKFxuICAgICAgICAgICAgYm91bmQsXG4gICAgICAgICAgICBmaWVsZFBhdGgsXG4gICAgICAgICAgICBrZXlIYXNoLFxuICAgICAgICAgICAgc3VjY2Vzc1NuYXBzaG90LFxuICAgICAgICAgICAgXCJzb3VyY2U6c3VjY2Vzc1wiLFxuICAgICAgICAgICAgYHNvdXJjZToke2ZpZWxkUGF0aH06c3VjY2Vzc2AsXG4gICAgICAgICAgICBzdGVwLmRlYnVnSW5mbz8uZ3JhcGhOb2RlSWQsXG4gICAgICAgICAgICBldmVudCxcbiAgICAgICAgICApXG4gICAgICAgICAgaWYgKHdyb3RlU3VjY2Vzcykge1xuICAgICAgICAgICAgeWllbGQqIHJlY29yZFNuYXBzaG90KHJlcGxheU1vZGUsIHJlcGxheUxvZywgZXZlbnQpXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGVycm9yU25hcHNob3QgPSBTbmFwc2hvdC5lcnJvcih7IGtleUhhc2gsIGVycm9yOiBleGl0LmNhdXNlIH0pXG4gICAgICAgICAgY29uc3QgZXZlbnQ6IFJlcGxheUxvZy5SZXBsYXlMb2dFdmVudCA9IHtcbiAgICAgICAgICAgIF90YWc6IFwiUmVzb3VyY2VTbmFwc2hvdFwiLFxuICAgICAgICAgICAgcmVzb3VyY2VJZCxcbiAgICAgICAgICAgIGZpZWxkUGF0aCxcbiAgICAgICAgICAgIGtleUhhc2gsXG4gICAgICAgICAgICBwaGFzZTogXCJlcnJvclwiLFxuICAgICAgICAgICAgc25hcHNob3Q6IGVycm9yU25hcHNob3QsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgICAgICBtb2R1bGVJZCxcbiAgICAgICAgICAgIHJ1bnRpbWVJZCxcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3Qgd3JvdGVFcnJvciA9IHlpZWxkKiB3cml0ZWJhY2tJZkN1cnJlbnRLZXlIYXNoKFxuICAgICAgICAgICAgYm91bmQsXG4gICAgICAgICAgICBmaWVsZFBhdGgsXG4gICAgICAgICAgICBrZXlIYXNoLFxuICAgICAgICAgICAgZXJyb3JTbmFwc2hvdCxcbiAgICAgICAgICAgIFwic291cmNlOmVycm9yXCIsXG4gICAgICAgICAgICBgc291cmNlOiR7ZmllbGRQYXRofTplcnJvcmAsXG4gICAgICAgICAgICBzdGVwLmRlYnVnSW5mbz8uZ3JhcGhOb2RlSWQsXG4gICAgICAgICAgICBldmVudCxcbiAgICAgICAgICApXG4gICAgICAgICAgaWYgKHdyb3RlRXJyb3IpIHtcbiAgICAgICAgICAgIHlpZWxkKiByZWNvcmRTbmFwc2hvdChyZXBsYXlNb2RlLCByZXBsYXlMb2csIGV2ZW50KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSkucGlwZShcbiAgICAgICAgRWZmZWN0LmNhdGNoQWxsQ2F1c2UoKCkgPT4gRWZmZWN0LnZvaWQpLFxuICAgICAgKVxuXG4gICAgICAvLyBcdTRFMERcdTdCNDlcdTVGODUgSU8gXHU1QjhDXHU2MjEwXHVGRjFBZm9ya1Njb3BlZCBcdTYzMDJcdTUyMzAgcnVudGltZSBzY29wZVx1RkYwQ1x1NEZERFx1OEJDMVx1NTM3OFx1OEY3RFx1NjVGNlx1ODFFQVx1NTJBOCBpbnRlcnJ1cHRcdTMwMDJcbiAgICAgIGNvbnN0IGZpYmVyID0geWllbGQqIEVmZmVjdC5mb3JrU2NvcGVkKGlvKVxuICAgICAgY29uc3QgbXlHZW4gPSAoZ2VuICs9IDEpXG4gICAgICBpbkZsaWdodCA9IHsgZ2VuOiBteUdlbiwgZmliZXIsIGtleUhhc2ggfVxuXG4gICAgICAvLyBpbi1mbGlnaHQgXHU3RUQzXHU2NzVGXHU1NDBFXHU2RTA1XHU3NDA2XHVGRjBDXHU1RTc2XHU1NzI4IGV4aGF1c3QtdHJhaWxpbmcgXHU2QTIxXHU1RjBGXHU0RTBCXHU4ODY1XHU4REQxXHU0RTAwXHU2QjIxIHRyYWlsaW5nXHUzMDAyXG4gICAgICB5aWVsZCogRWZmZWN0LmZvcmtTY29wZWQoXG4gICAgICAgIEZpYmVyLmF3YWl0KGZpYmVyKS5waXBlKFxuICAgICAgICAgIEVmZmVjdC56aXBSaWdodChcbiAgICAgICAgICAgIEVmZmVjdC5zeW5jKCgpID0+IHtcbiAgICAgICAgICAgICAgaWYgKGluRmxpZ2h0ICYmIGluRmxpZ2h0LmdlbiA9PT0gbXlHZW4pIHtcbiAgICAgICAgICAgICAgICBpbkZsaWdodCA9IHVuZGVmaW5lZFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICApLFxuICAgICAgICAgIEVmZmVjdC56aXBSaWdodChcbiAgICAgICAgICAgIG1vZGUgPT09IFwiZXhoYXVzdC10cmFpbGluZ1wiICYmIHRyYWlsaW5nXG4gICAgICAgICAgICAgID8gRWZmZWN0LmdlbihmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dCA9IHRyYWlsaW5nXG4gICAgICAgICAgICAgICAgICB0cmFpbGluZyA9IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgaWYgKG5leHQpIHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQqIHN0YXJ0RmV0Y2goXG4gICAgICAgICAgICAgICAgICAgICAgbmV4dC5rZXksXG4gICAgICAgICAgICAgICAgICAgICAgbmV4dC5rZXlIYXNoLFxuICAgICAgICAgICAgICAgICAgICAgIHJlcGxheU1vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgcmVwbGF5TG9nLFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgOiBFZmZlY3Qudm9pZCxcbiAgICAgICAgICApLFxuICAgICAgICAgIEVmZmVjdC5jYXRjaEFsbENhdXNlKCgpID0+IEVmZmVjdC52b2lkKSxcbiAgICAgICAgKSxcbiAgICAgIClcbiAgICB9KVxuXG4gIHJlZ2lzdGVyKGZpZWxkUGF0aCwgKHN0YXRlOiBhbnkpID0+XG4gICAgRWZmZWN0LmdlbihmdW5jdGlvbiogKCkge1xuICAgICAgY29uc3QgbW9kdWxlSWQgPSAoYm91bmQgYXMgYW55KS5fX21vZHVsZUlkIGFzIHN0cmluZyB8IHVuZGVmaW5lZFxuICAgICAgY29uc3QgcnVudGltZUlkID0gKGJvdW5kIGFzIGFueSkuX19ydW50aW1lSWQgYXMgc3RyaW5nIHwgdW5kZWZpbmVkXG4gICAgICBjb25zdCByZXBsYXlNb2RlT3B0ID0geWllbGQqIEVmZmVjdC5zZXJ2aWNlT3B0aW9uKFJlcGxheU1vZGVDb25maWdUYWcpXG4gICAgICBjb25zdCByZXBsYXlNb2RlID0gT3B0aW9uLmlzU29tZShyZXBsYXlNb2RlT3B0KSA/IHJlcGxheU1vZGVPcHQudmFsdWUubW9kZSA6IFwibGl2ZVwiXG4gICAgICBjb25zdCByZXBsYXlMb2dPcHQgPSB5aWVsZCogRWZmZWN0LnNlcnZpY2VPcHRpb24oUmVwbGF5TG9nLlJlcGxheUxvZylcbiAgICAgIGNvbnN0IHJlcGxheUxvZyA9IE9wdGlvbi5pc1NvbWUocmVwbGF5TG9nT3B0KSA/IHJlcGxheUxvZ09wdC52YWx1ZSA6IHVuZGVmaW5lZFxuXG4gICAgICBsZXQga2V5OiB1bmtub3duXG4gICAgICB0cnkge1xuICAgICAgICBrZXkgPSAoZW50cnkubWV0YSBhcyBhbnkpLmtleShzdGF0ZSlcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICBrZXkgPSB1bmRlZmluZWRcbiAgICAgIH1cblxuICAgICAgLy8gZGV2LW1vZGVcdUZGMUFcdTRGQTZcdTZENEIga2V5U2VsZWN0b3IgXHU3Njg0XHU1QjlFXHU5NjQ1XHU4QkZCXHU1M0Q2XHU4REVGXHU1Rjg0XHU0RTBFXHU1OEYwXHU2NjBFIGRlcHMgXHU3Njg0XHU1REVFXHU1RjAyXHVGRjA4XHU0RUM1XHU1MDVBXHU4QkNBXHU2NUFEXHVGRjBDXHU0RTBEXHU1RjcxXHU1NENEXHU2MjY3XHU4ODRDXHU4QkVEXHU0RTQ5XHVGRjA5XHUzMDAyXG4gICAgICBjb25zdCB0cmFjZUtleSA9IGAke3J1bnRpbWVJZCA/PyBcInVua25vd25cIn06OnNvdXJjZTo6JHtmaWVsZFBhdGh9YFxuICAgICAgaWYgKGlzRGV2RW52KCkgJiYgIWRlcHNUcmFjZVNldHRsZWQuaGFzKHRyYWNlS2V5KSkge1xuICAgICAgICBkZXBzVHJhY2VTZXR0bGVkLmFkZCh0cmFjZUtleSlcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCB0cmFjZWQgPSBEZXBzVHJhY2UudHJhY2UoKHMpID0+IChlbnRyeS5tZXRhIGFzIGFueSkua2V5KHMpLCBzdGF0ZSlcbiAgICAgICAgICBjb25zdCBkaWZmID0gRGVwc1RyYWNlLmRpZmZEZXBzKFxuICAgICAgICAgICAgKChlbnRyeS5tZXRhIGFzIGFueSkuZGVwcyA/PyBbXSkgYXMgUmVhZG9ubHlBcnJheTxzdHJpbmc+LFxuICAgICAgICAgICAgdHJhY2VkLnJlYWRzLFxuICAgICAgICAgIClcbiAgICAgICAgICBpZiAoZGlmZikge1xuICAgICAgICAgICAgeWllbGQqIGVtaXREZXBzTWlzbWF0Y2goe1xuICAgICAgICAgICAgICBtb2R1bGVJZCxcbiAgICAgICAgICAgICAgcnVudGltZUlkLFxuICAgICAgICAgICAgICBraW5kOiBcInNvdXJjZVwiLFxuICAgICAgICAgICAgICBmaWVsZFBhdGgsXG4gICAgICAgICAgICAgIGRpZmYsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgLy8gdHJhY2luZyBmYWlsdXJlIHNob3VsZCBuZXZlciBicmVhayByZWZyZXNoIGZsb3dcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBrZXkgXHU1M0Q4XHU3QTdBXHVGRjFBXHU1NDBDXHU2QjY1IGlkbGUgXHU2RTA1XHU3QTdBXHVGRjA4XHU1RTc2XHU0RTJEXHU2NUFEIGluLWZsaWdodFx1RkYwOVx1MzAwMlxuICAgICAgaWYgKGtleSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChpbkZsaWdodCkge1xuICAgICAgICAgIHlpZWxkKiBGaWJlci5pbnRlcnJ1cHRGb3JrKGluRmxpZ2h0LmZpYmVyKVxuICAgICAgICAgIGluRmxpZ2h0ID0gdW5kZWZpbmVkXG4gICAgICAgIH1cbiAgICAgICAgdHJhaWxpbmcgPSB1bmRlZmluZWRcblxuICAgICAgICBjb25zdCBpZGxlU25hcHNob3QgPSBTbmFwc2hvdC5pZGxlKClcbiAgICAgICAgY29uc3Qgd3JvdGVJZGxlID0geWllbGQqIHNldFNuYXBzaG90SW5UeG4oXG4gICAgICAgICAgYm91bmQsXG4gICAgICAgICAgZmllbGRQYXRoLFxuICAgICAgICAgIGlkbGVTbmFwc2hvdCxcbiAgICAgICAgICBcInNvdXJjZTppZGxlXCIsXG4gICAgICAgICAgYHNvdXJjZToke2ZpZWxkUGF0aH06aWRsZWAsXG4gICAgICAgICAgc3RlcC5kZWJ1Z0luZm8/LmdyYXBoTm9kZUlkLFxuICAgICAgICApXG4gICAgICAgIGlmICh3cm90ZUlkbGUpIHtcbiAgICAgICAgICBjb25zdCBldmVudDogUmVwbGF5TG9nLlJlcGxheUxvZ0V2ZW50ID0ge1xuICAgICAgICAgICAgX3RhZzogXCJSZXNvdXJjZVNuYXBzaG90XCIsXG4gICAgICAgICAgICByZXNvdXJjZUlkLFxuICAgICAgICAgICAgZmllbGRQYXRoLFxuICAgICAgICAgICAga2V5SGFzaDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgcGhhc2U6IFwiaWRsZVwiLFxuICAgICAgICAgICAgc25hcHNob3Q6IGlkbGVTbmFwc2hvdCxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIG1vZHVsZUlkLFxuICAgICAgICAgICAgcnVudGltZUlkLFxuICAgICAgICAgIH1cbiAgICAgICAgICByZWNvcmRSZXBsYXlFdmVudChib3VuZCwgZXZlbnQpXG4gICAgICAgICAgeWllbGQqIHJlY29yZFNuYXBzaG90KHJlcGxheU1vZGUsIHJlcGxheUxvZywgZXZlbnQpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGggPSBoYXNoS2V5KGtleSlcblxuICAgICAgaWYgKG1vZGUgPT09IFwiZXhoYXVzdC10cmFpbGluZ1wiICYmIGluRmxpZ2h0KSB7XG4gICAgICAgIC8vIFx1NUZEOVx1Nzg4Q1x1NjVGNlx1RkYxQVx1OEJCMFx1NUY1NSB0cmFpbGluZ1x1RkYwQ1x1NUU3Nlx1N0FDQlx1NTM3M1x1NjZGNFx1NjVCMFx1NTIzMFx1NjcwMFx1NjVCMCBsb2FkaW5nXHVGRjA4XHU2NUU3IGluLWZsaWdodCBcdTUxOTlcdTU2REVcdTRGMUFcdTg4QUIga2V5SGFzaCBnYXRlIFx1NjJFNlx1NEY0Rlx1RkYwOVx1MzAwMlxuICAgICAgICB0cmFpbGluZyA9IHsga2V5LCBrZXlIYXNoOiBoIH1cbiAgICAgICAgY29uc3QgbG9hZGluZ1NuYXBzaG90ID0gU25hcHNob3QubG9hZGluZyh7IGtleUhhc2g6IGggfSlcbiAgICAgICAgY29uc3Qgd3JvdGVMb2FkaW5nID0geWllbGQqIHNldFNuYXBzaG90SW5UeG4oXG4gICAgICAgICAgYm91bmQsXG4gICAgICAgICAgZmllbGRQYXRoLFxuICAgICAgICAgIGxvYWRpbmdTbmFwc2hvdCxcbiAgICAgICAgICBcInNvdXJjZTpsb2FkaW5nXCIsXG4gICAgICAgICAgYHNvdXJjZToke2ZpZWxkUGF0aH06bG9hZGluZ2AsXG4gICAgICAgICAgc3RlcC5kZWJ1Z0luZm8/LmdyYXBoTm9kZUlkLFxuICAgICAgICApXG4gICAgICAgIGlmICh3cm90ZUxvYWRpbmcpIHtcbiAgICAgICAgICBjb25zdCBldmVudDogUmVwbGF5TG9nLlJlcGxheUxvZ0V2ZW50ID0ge1xuICAgICAgICAgICAgX3RhZzogXCJSZXNvdXJjZVNuYXBzaG90XCIsXG4gICAgICAgICAgICByZXNvdXJjZUlkLFxuICAgICAgICAgICAgZmllbGRQYXRoLFxuICAgICAgICAgICAga2V5SGFzaDogaCxcbiAgICAgICAgICAgIHBoYXNlOiBcImxvYWRpbmdcIixcbiAgICAgICAgICAgIHNuYXBzaG90OiBsb2FkaW5nU25hcHNob3QsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgICAgICBtb2R1bGVJZCxcbiAgICAgICAgICAgIHJ1bnRpbWVJZCxcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVjb3JkUmVwbGF5RXZlbnQoYm91bmQsIGV2ZW50KVxuICAgICAgICAgIHlpZWxkKiByZWNvcmRTbmFwc2hvdChyZXBsYXlNb2RlLCByZXBsYXlMb2csIGV2ZW50KVxuICAgICAgICB9XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBpZiAobW9kZSA9PT0gXCJzd2l0Y2hcIiAmJiBpbkZsaWdodCkge1xuICAgICAgICB5aWVsZCogRmliZXIuaW50ZXJydXB0Rm9yayhpbkZsaWdodC5maWJlcilcbiAgICAgICAgaW5GbGlnaHQgPSB1bmRlZmluZWRcbiAgICAgICAgdHJhaWxpbmcgPSB1bmRlZmluZWRcbiAgICAgIH1cblxuICAgICAgLy8gc3RhcnQgZmV0Y2ggKHBlbmRpbmcgdHggKyBmb3JrIElPKVxuICAgICAgeWllbGQqIHN0YXJ0RmV0Y2goa2V5LCBoLCByZXBsYXlNb2RlLCByZXBsYXlMb2cpXG4gICAgfSksXG4gIClcblxuICByZXR1cm4gRWZmZWN0LnZvaWRcbn1cbiIsICIvLyBSZXNvdXJjZSBcdTZBMjFcdTU3NTdcdUZGMUFcbi8vIC0gXHU1QjlBXHU0RTQ5XHU5MDNCXHU4RjkxXHU4RDQ0XHU2RTkwXHU4OUM0XHU2ODNDIFJlc291cmNlU3BlY1x1RkYxQlxuLy8gLSBcdTkwMUFcdThGQzcgUmVzb3VyY2UubGF5ZXIgXHU1NzI4IFJ1bnRpbWUgRW52IFx1NEUyRFx1NkNFOFx1NTE4Q1x1OEQ0NFx1NkU5MFx1ODg2OFx1RkYxQlxuLy8gLSBcdTUxODVcdTkwRThcdTkwMUFcdThGQzcgUmVzb3VyY2VSZWdpc3RyeVRhZyBcdTYyN0ZcdThGN0RcdTVGNTNcdTUyNERcdTRGNUNcdTc1MjhcdTU3REZcdTUxODVcdTUzRUZcdTc1MjhcdTc2ODRcdThENDRcdTZFOTBcdTk2QzZcdTU0MDhcdTMwMDJcbi8vXG4vLyBcdThCQkVcdThCQTFcdTdFQTZcdTY3NUZcdUZGMDhcdTg5QzEgc3BlY3MvMDAxLW1vZHVsZS10cmFpdHMtcnVudGltZS9yZWZlcmVuY2VzL3Jlc291cmNlLWFuZC1xdWVyeS5tZFx1RkYwOVx1RkYxQVxuLy8gLSBTdGF0ZVRyYWl0IC8gTW9kdWxlIFx1NTZGRVx1N0VCOFx1NUM0Mlx1NTNFQVx1NzdFNVx1OTA1MyByZXNvdXJjZUlkICsga2V5IFx1ODlDNFx1NTIxOVx1RkYwQ1x1NEUwRFx1NzZGNFx1NjNBNVx1NjNBNVx1ODlFNiBSZXNvdXJjZVNwZWMgXHU3QzdCXHU1NzhCXHVGRjFCXG4vLyAtIFJlc291cmNlU3BlYyBcdTRGRERcdTYzMDEgRWZmZWN0LU5hdGl2ZVx1RkYxQWxvYWQgXHU0RjdGXHU3NTI4IEVmZmVjdC5FZmZlY3QgXHU4ODY4XHU4RkJFXHVGRjFCXG4vLyAtIFJlc291cmNlLmxheWVyIFx1NTcyOFx1NTM1NVx1NEUyQSBSdW50aW1lIFx1NEY1Q1x1NzUyOFx1NTdERlx1NTE4NVx1NkNFOFx1NTE4Q1x1NEUwMFx1N0VDNFx1OEQ0NFx1NkU5MFx1RkYwQ1x1NUU3Nlx1NTcyOCBkZXYgXHU0RTBCXHU1QkY5XHU5MUNEXHU1OTBEIGlkIFx1NTA1QVx1NTdGQVx1NjcyQ1x1NjgyMVx1OUE4Q1x1MzAwMlxuXG5pbXBvcnQgeyBDb250ZXh0LCBFZmZlY3QsIExheWVyLCBTY2hlbWEgfSBmcm9tIFwiZWZmZWN0XCJcbmltcG9ydCB7IGlzRGV2RW52IH0gZnJvbSBcIi4vaW50ZXJuYWwvcnVudGltZS9jb3JlL2Vudi5qc1wiXG5cbi8qKlxuICogUmVzb3VyY2VTcGVjIFx1NjNDRlx1OEZGMFx1MjAxQ1x1NEUwMFx1NEUyQVx1OTAzQlx1OEY5MVx1OEQ0NFx1NkU5MFx1OTU3Rlx1NEVDMFx1NEU0OFx1NjgzN1x1MzAwMVx1NTk4Mlx1NEY1NVx1OEJCRlx1OTVFRVx1MjAxRFx1MzAwMlxuICpcbiAqIC0gS2V5OiBcdTc1MjggU2NoZW1hIFx1NjNDRlx1OEZGMFx1NzY4NCBrZXkgXHU1RjYyXHU3MkI2XHVGRjA4XHU3QzdCXHU0RjNDXHU1RjNBXHU3QzdCXHU1NzhCIHF1ZXJ5S2V5XHVGRjA5XHVGRjFCXG4gKiAtIGxvYWQ6IFx1NTdGQVx1NEU4RSBrZXkgXHU4QkJGXHU5NUVFXHU4RDQ0XHU2RTkwXHU3Njg0IEVmZmVjdFx1RkYxQlxuICogLSBtZXRhOiBcdTk4ODRcdTc1NTlcdTYyNjlcdTVDNTVcdTRGNERcdUZGMDhjYWNoZUdyb3VwL1x1NjNDRlx1OEZGMFx1NEZFMVx1NjA2Rlx1N0I0OVx1RkYwOVx1MzAwMlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFJlc291cmNlU3BlYzxLZXksIE91dCwgRXJyLCBFbnY+IHtcbiAgcmVhZG9ubHkgaWQ6IHN0cmluZ1xuICByZWFkb25seSBrZXlTY2hlbWE6IFNjaGVtYS5TY2hlbWE8S2V5LCBhbnk+XG4gIHJlYWRvbmx5IGxvYWQ6IChrZXk6IEtleSkgPT4gRWZmZWN0LkVmZmVjdDxPdXQsIEVyciwgRW52PlxuICByZWFkb25seSBtZXRhPzoge1xuICAgIHJlYWRvbmx5IGNhY2hlR3JvdXA/OiBzdHJpbmdcbiAgICByZWFkb25seSBkZXNjcmlwdGlvbj86IHN0cmluZ1xuICAgIHJlYWRvbmx5IFtrOiBzdHJpbmddOiB1bmtub3duXG4gIH1cbn1cblxuZXhwb3J0IHR5cGUgQW55UmVzb3VyY2VTcGVjID0gUmVzb3VyY2VTcGVjPGFueSwgYW55LCBhbnksIGFueT5cblxuZXhwb3J0IHR5cGUgUmVzb3VyY2VTdGF0dXMgPSBcImlkbGVcIiB8IFwibG9hZGluZ1wiIHwgXCJzdWNjZXNzXCIgfCBcImVycm9yXCJcblxuZXhwb3J0IGludGVyZmFjZSBSZXNvdXJjZVNuYXBzaG90PERhdGEgPSB1bmtub3duLCBFcnIgPSB1bmtub3duPiB7XG4gIHJlYWRvbmx5IHN0YXR1czogUmVzb3VyY2VTdGF0dXNcbiAgcmVhZG9ubHkga2V5SGFzaD86IHN0cmluZ1xuICByZWFkb25seSBkYXRhPzogRGF0YVxuICByZWFkb25seSBlcnJvcj86IEVyclxufVxuXG5jb25zdCBzdGFibGVTdHJpbmdpZnkgPSAodmFsdWU6IHVua25vd24pOiBzdHJpbmcgPT4ge1xuICBjb25zdCBzZWVuID0gbmV3IFdlYWtTZXQ8b2JqZWN0PigpXG4gIGNvbnN0IGVuY29kZSA9IChpbnB1dDogdW5rbm93bik6IHVua25vd24gPT4ge1xuICAgIGlmIChpbnB1dCA9PT0gbnVsbCkgcmV0dXJuIG51bGxcbiAgICBpZiAoXG4gICAgICB0eXBlb2YgaW5wdXQgPT09IFwic3RyaW5nXCIgfHxcbiAgICAgIHR5cGVvZiBpbnB1dCA9PT0gXCJudW1iZXJcIiB8fFxuICAgICAgdHlwZW9mIGlucHV0ID09PSBcImJvb2xlYW5cIlxuICAgICkge1xuICAgICAgcmV0dXJuIGlucHV0XG4gICAgfVxuICAgIGlmICh0eXBlb2YgaW5wdXQgPT09IFwiYmlnaW50XCIpIHJldHVybiBpbnB1dC50b1N0cmluZygpXG4gICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIFwiX191bmRlZmluZWRfX1wiXG4gICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gXCJzeW1ib2xcIikgcmV0dXJuIGBfX3N5bWJvbF9fOiR7U3RyaW5nKGlucHV0KX1gXG4gICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gXCJfX2Z1bmN0aW9uX19cIlxuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG4gICAgICByZXR1cm4gaW5wdXQubWFwKCh2KSA9PiBlbmNvZGUodikpXG4gICAgfVxuICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgIHJldHVybiBgX19kYXRlX186JHtpbnB1dC50b0lTT1N0cmluZygpfWBcbiAgICB9XG4gICAgaWYgKGlucHV0IGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIF90YWc6IFwiRXJyb3JcIixcbiAgICAgICAgbmFtZTogaW5wdXQubmFtZSxcbiAgICAgICAgbWVzc2FnZTogaW5wdXQubWVzc2FnZSxcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlucHV0ICYmIHR5cGVvZiBpbnB1dCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgY29uc3Qgb2JqID0gaW5wdXQgYXMgb2JqZWN0XG4gICAgICBpZiAoc2Vlbi5oYXMob2JqKSkgcmV0dXJuIFwiX19jeWNsZV9fXCJcbiAgICAgIHNlZW4uYWRkKG9iailcblxuICAgICAgY29uc3QgcmVjb3JkID0gaW5wdXQgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj5cbiAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhyZWNvcmQpLnNvcnQoKVxuICAgICAgY29uc3Qgb3V0OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IHt9XG4gICAgICBmb3IgKGNvbnN0IGsgb2Yga2V5cykge1xuICAgICAgICBvdXRba10gPSBlbmNvZGUocmVjb3JkW2tdKVxuICAgICAgfVxuICAgICAgcmV0dXJuIG91dFxuICAgIH1cbiAgICByZXR1cm4gU3RyaW5nKGlucHV0KVxuICB9XG5cbiAgdHJ5IHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZW5jb2RlKHZhbHVlKSlcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIFN0cmluZyh2YWx1ZSlcbiAgfVxufVxuXG5leHBvcnQgY29uc3Qga2V5SGFzaCA9IChrZXk6IHVua25vd24pOiBzdHJpbmcgPT4gc3RhYmxlU3RyaW5naWZ5KGtleSlcblxuZXhwb3J0IGNvbnN0IFNuYXBzaG90ID0ge1xuICBpZGxlOiA8RGF0YSA9IG5ldmVyLCBFcnIgPSBuZXZlcj4oKTogUmVzb3VyY2VTbmFwc2hvdDxEYXRhLCBFcnI+ID0+ICh7XG4gICAgc3RhdHVzOiBcImlkbGVcIixcbiAgICBrZXlIYXNoOiB1bmRlZmluZWQsXG4gICAgZGF0YTogdW5kZWZpbmVkLFxuICAgIGVycm9yOiB1bmRlZmluZWQsXG4gIH0pLFxuICBsb2FkaW5nOiA8RGF0YSA9IG5ldmVyLCBFcnIgPSBuZXZlcj4ocGFyYW1zOiB7XG4gICAgcmVhZG9ubHkga2V5SGFzaDogc3RyaW5nXG4gIH0pOiBSZXNvdXJjZVNuYXBzaG90PERhdGEsIEVycj4gPT4gKHtcbiAgICBzdGF0dXM6IFwibG9hZGluZ1wiLFxuICAgIGtleUhhc2g6IHBhcmFtcy5rZXlIYXNoLFxuICAgIGRhdGE6IHVuZGVmaW5lZCxcbiAgICBlcnJvcjogdW5kZWZpbmVkLFxuICB9KSxcbiAgc3VjY2VzczogPERhdGE+KHBhcmFtczoge1xuICAgIHJlYWRvbmx5IGtleUhhc2g6IHN0cmluZ1xuICAgIHJlYWRvbmx5IGRhdGE6IERhdGFcbiAgfSk6IFJlc291cmNlU25hcHNob3Q8RGF0YSwgbmV2ZXI+ID0+ICh7XG4gICAgc3RhdHVzOiBcInN1Y2Nlc3NcIixcbiAgICBrZXlIYXNoOiBwYXJhbXMua2V5SGFzaCxcbiAgICBkYXRhOiBwYXJhbXMuZGF0YSxcbiAgICBlcnJvcjogdW5kZWZpbmVkLFxuICB9KSxcbiAgZXJyb3I6IDxFcnI+KHBhcmFtczoge1xuICAgIHJlYWRvbmx5IGtleUhhc2g6IHN0cmluZ1xuICAgIHJlYWRvbmx5IGVycm9yOiBFcnJcbiAgfSk6IFJlc291cmNlU25hcHNob3Q8bmV2ZXIsIEVycj4gPT4gKHtcbiAgICBzdGF0dXM6IFwiZXJyb3JcIixcbiAgICBrZXlIYXNoOiBwYXJhbXMua2V5SGFzaCxcbiAgICBkYXRhOiB1bmRlZmluZWQsXG4gICAgZXJyb3I6IHBhcmFtcy5lcnJvcixcbiAgfSksXG59IGFzIGNvbnN0XG5cbi8qKlxuICogUmVzb3VyY2VSZWdpc3RyeVx1RkYxQVxuICogLSBcdTRGNUNcdTRFM0EgRW52IFx1NEUyRFx1NzY4NFx1NEUwMFx1OTg3OSBTZXJ2aWNlXHVGRjBDXHU3RUY0XHU2MkE0XHU1RjUzXHU1MjREXHU0RjVDXHU3NTI4XHU1N0RGXHU1MTg1XHU3Njg0XHU4RDQ0XHU2RTkwXHU4OUM0XHU2ODNDXHU4ODY4XHVGRjFCXG4gKiAtIGtleSBcdTRFM0FcdTkwM0JcdThGOTFcdThENDRcdTZFOTAgSURcdUZGMDhcdTU5ODIgXCJ1c2VyL3Byb2ZpbGVcIlx1RkYwOVx1MzAwMlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFJlc291cmNlUmVnaXN0cnkge1xuICByZWFkb25seSBzcGVjczogUmVhZG9ubHlNYXA8c3RyaW5nLCBBbnlSZXNvdXJjZVNwZWM+XG59XG5cbmV4cG9ydCBjbGFzcyBSZXNvdXJjZVJlZ2lzdHJ5VGFnIGV4dGVuZHMgQ29udGV4dC5UYWcoXG4gIFwiQGxvZ2l4L2NvcmUvUmVzb3VyY2VSZWdpc3RyeVwiLFxuKTxSZXNvdXJjZVJlZ2lzdHJ5VGFnLCBSZXNvdXJjZVJlZ2lzdHJ5PigpIHt9XG5cbi8qKlxuICogaW50ZXJuYWxcdUZGMUFcdTRFQzVcdTRGOUJcdTUxODVcdTkwRThcdTZBMjFcdTU3NTdcdUZGMDhcdTU5ODIgUXVlcnkgXHU0RTJEXHU5NUY0XHU0RUY2XHVGRjA5XHU0RjdGXHU3NTI4XHU3Njg0IFRhZyBcdTVCRkNcdTUxRkFcdTMwMDJcbiAqIC0gXHU0RTBEXHU1NzI4IGluZGV4LnRzIFx1NTA1QVx1NTE4RFx1NkIyMSByZS1leHBvcnRcdUZGMENcdTkwN0ZcdTUxNERcdTc2RjRcdTYzQTVcdTY2QjRcdTk3MzJcdTdFRDlcdTY3MDBcdTdFQzhcdTc1MjhcdTYyMzdcdUZGMUJcbiAqIC0gXHU2RDRCXHU4QkQ1XHU0RTBFXHU1MTg1XHU5MEU4XHU4RkQwXHU4ODRDXHU2NUY2XHU0RUUzXHU3ODAxXHU1M0VGXHU5MDFBXHU4RkM3IGBSZXNvdXJjZS5pbnRlcm5hbC5SZXNvdXJjZVJlZ2lzdHJ5VGFnYCBcdThCQkZcdTk1RUVcdTMwMDJcbiAqL1xuZXhwb3J0IGNvbnN0IGludGVybmFsID0ge1xuICBSZXNvdXJjZVJlZ2lzdHJ5VGFnLFxufVxuXG4vKipcbiAqIFJlc291cmNlLlNwZWNcdUZGMUFcbiAqIC0gUmVzb3VyY2VTcGVjIFx1NzY4NFx1N0M3Qlx1NTc4Qlx1NTIyQlx1NTQwRFx1RkYwQ1x1NjVCOVx1NEZCRlx1NTcyOFx1OEMwM1x1NzUyOFx1NjVCOVx1NEVFM1x1NzgwMVx1NEUyRFx1NUYxNVx1NzUyOFx1RkYxQlxuICogLSBcdTVFOTVcdTVDNDJcdTRFQ0RcdTcxMzZcdTRGN0ZcdTc1MjggUmVzb3VyY2VTcGVjIFx1NjNBNVx1NTNFM1x1MzAwMlxuICovXG5leHBvcnQgdHlwZSBTcGVjPEtleSwgT3V0LCBFcnIsIEVudj4gPSBSZXNvdXJjZVNwZWM8S2V5LCBPdXQsIEVyciwgRW52PlxuXG4vKipcbiAqIG1ha2VcdUZGMUFcbiAqIC0gXHU3NTI4XHU0RThFXHU1QjlBXHU0RTQ5XHU0RTAwXHU2NzYxXHU5MDNCXHU4RjkxXHU4RDQ0XHU2RTkwXHU4OUM0XHU2ODNDXHVGRjFCXG4gKiAtIFx1NzZFRVx1NTI0RFx1NEVDNVx1NTA1QVx1N0I4MFx1NTM1NSBpZGVudGl0eVx1RkYwQ1x1NEUzQlx1ODk4MVx1NjI3Rlx1OEY3RFx1N0M3Qlx1NTc4Qlx1NjNBOFx1NUJGQ1x1NEUwRVx1OEJFRFx1NEU0OVx1NjgwN1x1OEJCMFx1MzAwMlxuICovXG5leHBvcnQgY29uc3QgbWFrZSA9IDxLZXksIE91dCwgRXJyLCBFbnY+KFxuICBzcGVjOiBSZXNvdXJjZVNwZWM8S2V5LCBPdXQsIEVyciwgRW52Pixcbik6IFJlc291cmNlU3BlYzxLZXksIE91dCwgRXJyLCBFbnY+ID0+IHNwZWNcblxuLyoqXG4gKiBsYXllclx1RkYxQVxuICogLSBcdTU3MjhcdTVGNTNcdTUyNEQgUnVudGltZSBcdTRGNUNcdTc1MjhcdTU3REZcdTUxODVcdTZDRThcdTUxOENcdTRFMDBcdTdFQzQgUmVzb3VyY2VTcGVjXHVGRjFCXG4gKiAtIFx1ODJFNSBFbnYgXHU0RTJEXHU1REYyXHU1QjU4XHU1NzI4IFJlc291cmNlUmVnaXN0cnlcdUZGMENcdTUyMTlcdTU3MjhcdTUxNzZcdTU3RkFcdTc4NDBcdTRFMEFcdTUzRTBcdTUyQTBcdUZGMUJcbiAqIC0gXHU1NzI4IGRldiBcdTczQUZcdTU4ODNcdTRFMEJcdTVCRjlcdTkxQ0RcdTU5MEQgaWQgXHU1MDVBXHU1N0ZBXHU2NzJDXHU2ODIxXHU5QThDXHVGRjA4XHU5MDdGXHU1MTREXHU2NUUwXHU1OEYwXHU4OTg2XHU3NkQ2XHVGRjA5XHUzMDAyXG4gKlxuICogXHU4QkY0XHU2NjBFXHVGRjFBXG4gKiAtIFx1NEUwRFx1OEQxRlx1OEQyM1x1OERFOFx1NEY1Q1x1NzUyOFx1NTdERlx1NTFCMlx1N0E4MVx1NTkwNFx1NzQwNlx1RkYxQVx1NEUwRFx1NTQwQyBSdW50aW1lUHJvdmlkZXIgXHU1QjUwXHU2ODExXHU1M0VGXHU0RUU1XHU0RTNBXHU1NDBDXHU0RTAwIGlkIFx1NjNEMFx1NEY5Qlx1NEUwRFx1NTQwQ1x1NUI5RVx1NzNCMFx1RkYxQlxuICogLSBcdTgyRTVcdTU3MjhcdTU0MENcdTRFMDBcdTRGNUNcdTc1MjhcdTU3REZcdTUxODVcdTkxQ0RcdTU5MERcdTZDRThcdTUxOENcdTU0MENcdTRFMDAgaWQgXHU0RTE0XHU1QjlFXHU3M0IwXHU0RTBEXHU0RTAwXHU4MUY0XHVGRjBDXHU1NzI4IGRldiBcdTRFMEJcdTRGMUFcdTYyOUJcdTk1MTlcdTMwMDJcbiAqL1xuZXhwb3J0IGNvbnN0IGxheWVyID0gKFxuICBzcGVjczogUmVhZG9ubHlBcnJheTxBbnlSZXNvdXJjZVNwZWM+LFxuKTogTGF5ZXIuTGF5ZXI8UmVzb3VyY2VSZWdpc3RyeVRhZywgbmV2ZXIsIG5ldmVyPiA9PlxuICBMYXllci5zdWNjZWVkKFxuICAgIFJlc291cmNlUmVnaXN0cnlUYWcsXG4gICAgKCgpID0+IHtcbiAgICAgIGNvbnN0IG1hcCA9IG5ldyBNYXA8c3RyaW5nLCBBbnlSZXNvdXJjZVNwZWM+KClcbiAgICAgIGZvciAoY29uc3Qgc3BlYyBvZiBzcGVjcykge1xuICAgICAgICBpZiAoaXNEZXZFbnYoKSAmJiBtYXAuaGFzKHNwZWMuaWQpICYmIG1hcC5nZXQoc3BlYy5pZCkgIT09IHNwZWMpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBgW1Jlc291cmNlLmxheWVyXSBEdXBsaWNhdGUgcmVzb3VyY2UgaWQgXCIke3NwZWMuaWR9XCIgZGV0ZWN0ZWQgaW4gdGhlIHNhbWUgcnVudGltZSBzY29wZWAsXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICAgIG1hcC5zZXQoc3BlYy5pZCwgc3BlYylcbiAgICAgIH1cbiAgICAgIHJldHVybiB7IHNwZWNzOiBtYXAgfVxuICAgIH0pKCksXG4gIClcbiIsICJpbXBvcnQgeyBDb250ZXh0LCBFZmZlY3QsIExheWVyIH0gZnJvbSBcImVmZmVjdFwiXG5cbmV4cG9ydCB0eXBlIFJlc291cmNlU25hcHNob3RQaGFzZSA9IFwiaWRsZVwiIHwgXCJsb2FkaW5nXCIgfCBcInN1Y2Nlc3NcIiB8IFwiZXJyb3JcIlxuXG5leHBvcnQgdHlwZSBSZXBsYXlMb2dFdmVudCA9XG4gIHwge1xuICAgICAgcmVhZG9ubHkgX3RhZzogXCJSZXNvdXJjZVNuYXBzaG90XCJcbiAgICAgIHJlYWRvbmx5IHJlc291cmNlSWQ6IHN0cmluZ1xuICAgICAgcmVhZG9ubHkgZmllbGRQYXRoOiBzdHJpbmdcbiAgICAgIHJlYWRvbmx5IGtleUhhc2g/OiBzdHJpbmdcbiAgICAgIHJlYWRvbmx5IHBoYXNlOiBSZXNvdXJjZVNuYXBzaG90UGhhc2VcbiAgICAgIHJlYWRvbmx5IHNuYXBzaG90OiB1bmtub3duXG4gICAgICByZWFkb25seSB0aW1lc3RhbXA6IG51bWJlclxuICAgICAgcmVhZG9ubHkgbW9kdWxlSWQ/OiBzdHJpbmdcbiAgICAgIHJlYWRvbmx5IHJ1bnRpbWVJZD86IHN0cmluZ1xuICAgIH1cbiAgfCB7XG4gICAgICByZWFkb25seSBfdGFnOiBcIkludmFsaWRhdGVSZXF1ZXN0XCJcbiAgICAgIHJlYWRvbmx5IHRpbWVzdGFtcDogbnVtYmVyXG4gICAgICByZWFkb25seSBtb2R1bGVJZD86IHN0cmluZ1xuICAgICAgcmVhZG9ubHkgcnVudGltZUlkPzogc3RyaW5nXG4gICAgICByZWFkb25seSBraW5kOiBcInJlc291cmNlXCIgfCBcInF1ZXJ5XCJcbiAgICAgIHJlYWRvbmx5IHRhcmdldDogc3RyaW5nXG4gICAgICByZWFkb25seSBtZXRhPzogdW5rbm93blxuICAgIH1cblxuZXhwb3J0IHR5cGUgUmVzb3VyY2VTbmFwc2hvdEV2ZW50ID0gRXh0cmFjdDxSZXBsYXlMb2dFdmVudCwgeyByZWFkb25seSBfdGFnOiBcIlJlc291cmNlU25hcHNob3RcIiB9PlxuXG5leHBvcnQgaW50ZXJmYWNlIFJlcGxheUxvZ1NlcnZpY2Uge1xuICByZWFkb25seSByZWNvcmQ6IChldmVudDogUmVwbGF5TG9nRXZlbnQpID0+IEVmZmVjdC5FZmZlY3Q8dm9pZD5cbiAgcmVhZG9ubHkgc25hcHNob3Q6IEVmZmVjdC5FZmZlY3Q8UmVhZG9ubHlBcnJheTxSZXBsYXlMb2dFdmVudD4+XG4gIHJlYWRvbmx5IHJlc2V0Q3Vyc29yOiBFZmZlY3QuRWZmZWN0PHZvaWQ+XG4gIHJlYWRvbmx5IGNvbnN1bWVOZXh0OiAoXG4gICAgcHJlZGljYXRlOiAoZXZlbnQ6IFJlcGxheUxvZ0V2ZW50KSA9PiBib29sZWFuLFxuICApID0+IEVmZmVjdC5FZmZlY3Q8UmVwbGF5TG9nRXZlbnQgfCB1bmRlZmluZWQ+XG4gIHJlYWRvbmx5IGNvbnN1bWVOZXh0UmVzb3VyY2VTbmFwc2hvdDogKHBhcmFtczoge1xuICAgIHJlYWRvbmx5IHJlc291cmNlSWQ6IHN0cmluZ1xuICAgIHJlYWRvbmx5IGZpZWxkUGF0aDogc3RyaW5nXG4gICAgcmVhZG9ubHkga2V5SGFzaD86IHN0cmluZ1xuICAgIHJlYWRvbmx5IHBoYXNlPzogUmVzb3VyY2VTbmFwc2hvdFBoYXNlXG4gIH0pID0+IEVmZmVjdC5FZmZlY3Q8UmVzb3VyY2VTbmFwc2hvdEV2ZW50IHwgdW5kZWZpbmVkPlxufVxuXG5leHBvcnQgY2xhc3MgUmVwbGF5TG9nIGV4dGVuZHMgQ29udGV4dC5UYWcoXCJAbG9naXgvY29yZS9SZXBsYXlMb2dcIik8XG4gIFJlcGxheUxvZyxcbiAgUmVwbGF5TG9nU2VydmljZVxuPigpIHt9XG5cbmV4cG9ydCBjb25zdCBtYWtlID0gKFxuICBpbml0aWFsPzogUmVhZG9ubHlBcnJheTxSZXBsYXlMb2dFdmVudD4sXG4pOiBSZXBsYXlMb2dTZXJ2aWNlID0+IHtcbiAgY29uc3QgZXZlbnRzOiBBcnJheTxSZXBsYXlMb2dFdmVudD4gPSBpbml0aWFsID8gQXJyYXkuZnJvbShpbml0aWFsKSA6IFtdXG4gIGxldCBjdXJzb3IgPSAwXG5cbiAgY29uc3QgY29uc3VtZU5leHQgPSAoXG4gICAgcHJlZGljYXRlOiAoZXZlbnQ6IFJlcGxheUxvZ0V2ZW50KSA9PiBib29sZWFuLFxuICApOiBFZmZlY3QuRWZmZWN0PFJlcGxheUxvZ0V2ZW50IHwgdW5kZWZpbmVkPiA9PlxuICAgIEVmZmVjdC5zeW5jKCgpID0+IHtcbiAgICAgIGZvciAobGV0IGkgPSBjdXJzb3I7IGkgPCBldmVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgZXZlbnQgPSBldmVudHNbaV1cbiAgICAgICAgaWYgKCFwcmVkaWNhdGUoZXZlbnQpKSBjb250aW51ZVxuICAgICAgICBjdXJzb3IgPSBpICsgMVxuICAgICAgICByZXR1cm4gZXZlbnRcbiAgICAgIH1cbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9KVxuXG4gIGNvbnN0IGNvbnN1bWVOZXh0UmVzb3VyY2VTbmFwc2hvdCA9IChwYXJhbXM6IHtcbiAgICByZWFkb25seSByZXNvdXJjZUlkOiBzdHJpbmdcbiAgICByZWFkb25seSBmaWVsZFBhdGg6IHN0cmluZ1xuICAgIHJlYWRvbmx5IGtleUhhc2g/OiBzdHJpbmdcbiAgICByZWFkb25seSBwaGFzZT86IFJlc291cmNlU25hcHNob3RQaGFzZVxuICB9KTogRWZmZWN0LkVmZmVjdDxSZXNvdXJjZVNuYXBzaG90RXZlbnQgfCB1bmRlZmluZWQ+ID0+XG4gICAgY29uc3VtZU5leHQoKGV2ZW50KTogZXZlbnQgaXMgUmVzb3VyY2VTbmFwc2hvdEV2ZW50ID0+IHtcbiAgICAgIGlmIChldmVudC5fdGFnICE9PSBcIlJlc291cmNlU25hcHNob3RcIikgcmV0dXJuIGZhbHNlXG4gICAgICBpZiAoZXZlbnQucmVzb3VyY2VJZCAhPT0gcGFyYW1zLnJlc291cmNlSWQpIHJldHVybiBmYWxzZVxuICAgICAgaWYgKGV2ZW50LmZpZWxkUGF0aCAhPT0gcGFyYW1zLmZpZWxkUGF0aCkgcmV0dXJuIGZhbHNlXG4gICAgICBpZiAocGFyYW1zLmtleUhhc2ggIT09IHVuZGVmaW5lZCAmJiBldmVudC5rZXlIYXNoICE9PSBwYXJhbXMua2V5SGFzaCkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIGlmIChwYXJhbXMucGhhc2UgIT09IHVuZGVmaW5lZCAmJiBldmVudC5waGFzZSAhPT0gcGFyYW1zLnBoYXNlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9KS5waXBlKEVmZmVjdC5tYXAoKGV2ZW50KSA9PiBldmVudCBhcyBSZXNvdXJjZVNuYXBzaG90RXZlbnQgfCB1bmRlZmluZWQpKVxuXG4gIHJldHVybiB7XG4gICAgcmVjb3JkOiAoZXZlbnQpID0+IEVmZmVjdC5zeW5jKCgpID0+IGV2ZW50cy5wdXNoKGV2ZW50KSksXG4gICAgc25hcHNob3Q6IEVmZmVjdC5zeW5jKCgpID0+IGV2ZW50cy5zbGljZSgpKSxcbiAgICByZXNldEN1cnNvcjogRWZmZWN0LnN5bmMoKCkgPT4ge1xuICAgICAgY3Vyc29yID0gMFxuICAgIH0pLFxuICAgIGNvbnN1bWVOZXh0LFxuICAgIGNvbnN1bWVOZXh0UmVzb3VyY2VTbmFwc2hvdCxcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgbGF5ZXIgPSAoXG4gIGluaXRpYWw/OiBSZWFkb25seUFycmF5PFJlcGxheUxvZ0V2ZW50Pixcbik6IExheWVyLkxheWVyPFJlcGxheUxvZywgbmV2ZXIsIG5ldmVyPiA9PlxuICBMYXllci5zdWNjZWVkKFJlcGxheUxvZywgbWFrZShpbml0aWFsKSlcblxuZXhwb3J0IGNvbnN0IHJlY29yZCA9IChcbiAgZXZlbnQ6IFJlcGxheUxvZ0V2ZW50LFxuKTogRWZmZWN0LkVmZmVjdDx2b2lkLCBuZXZlciwgUmVwbGF5TG9nPiA9PlxuICBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG4gICAgY29uc3QgbG9nID0geWllbGQqIFJlcGxheUxvZ1xuICAgIHlpZWxkKiBsb2cucmVjb3JkKGV2ZW50KVxuICB9KVxuXG5leHBvcnQgY29uc3Qgc25hcHNob3Q6IEVmZmVjdC5FZmZlY3Q8XG4gIFJlYWRvbmx5QXJyYXk8UmVwbGF5TG9nRXZlbnQ+LFxuICBuZXZlcixcbiAgUmVwbGF5TG9nXG4+ID0gRWZmZWN0LmdlbihmdW5jdGlvbiogKCkge1xuICBjb25zdCBsb2cgPSB5aWVsZCogUmVwbGF5TG9nXG4gIHJldHVybiB5aWVsZCogbG9nLnNuYXBzaG90XG59KVxuXG5leHBvcnQgY29uc3QgcmVzZXRDdXJzb3I6IEVmZmVjdC5FZmZlY3Q8dm9pZCwgbmV2ZXIsIFJlcGxheUxvZz4gPSBFZmZlY3QuZ2VuKFxuICBmdW5jdGlvbiogKCkge1xuICAgIGNvbnN0IGxvZyA9IHlpZWxkKiBSZXBsYXlMb2dcbiAgICB5aWVsZCogbG9nLnJlc2V0Q3Vyc29yXG4gIH0sXG4pXG5cbmV4cG9ydCBjb25zdCBjb25zdW1lTmV4dFJlc291cmNlU25hcHNob3QgPSAocGFyYW1zOiB7XG4gIHJlYWRvbmx5IHJlc291cmNlSWQ6IHN0cmluZ1xuICByZWFkb25seSBmaWVsZFBhdGg6IHN0cmluZ1xuICByZWFkb25seSBrZXlIYXNoPzogc3RyaW5nXG4gIHJlYWRvbmx5IHBoYXNlPzogUmVzb3VyY2VTbmFwc2hvdFBoYXNlXG59KTogRWZmZWN0LkVmZmVjdDxSZXNvdXJjZVNuYXBzaG90RXZlbnQgfCB1bmRlZmluZWQsIG5ldmVyLCBSZXBsYXlMb2c+ID0+XG4gIEVmZmVjdC5nZW4oZnVuY3Rpb24qICgpIHtcbiAgICBjb25zdCBsb2cgPSB5aWVsZCogUmVwbGF5TG9nXG4gICAgcmV0dXJuIHlpZWxkKiBsb2cuY29uc3VtZU5leHRSZXNvdXJjZVNuYXBzaG90KHBhcmFtcylcbiAgfSlcbiIsICJleHBvcnQgdHlwZSBSb3dJZCA9IHN0cmluZ1xuXG5leHBvcnQgaW50ZXJmYWNlIExpc3RDb25maWcge1xuICByZWFkb25seSBwYXRoOiBzdHJpbmdcbiAgcmVhZG9ubHkgdHJhY2tCeT86IHN0cmluZ1xufVxuXG5leHBvcnQgdHlwZSBMaXN0UmVtb3ZhbExpc3RlbmVyID0gKHJvd0lkOiBSb3dJZCkgPT4gdm9pZFxuXG50eXBlIFNlZ21lbnQgPSBzdHJpbmcgfCBudW1iZXJcblxuY29uc3QgcGFyc2VTZWdtZW50cyA9IChwYXRoOiBzdHJpbmcpOiBSZWFkb25seUFycmF5PFNlZ21lbnQ+ID0+IHtcbiAgaWYgKCFwYXRoKSByZXR1cm4gW11cbiAgcmV0dXJuIHBhdGguc3BsaXQoXCIuXCIpLm1hcCgoc2VnKSA9PlxuICAgIC9eWzAtOV0rJC8udGVzdChzZWcpID8gTnVtYmVyKHNlZykgOiBzZWcsXG4gIClcbn1cblxuZXhwb3J0IGNvbnN0IGdldEF0UGF0aCA9IChzdGF0ZTogYW55LCBwYXRoOiBzdHJpbmcpOiBhbnkgPT4ge1xuICBpZiAoIXBhdGggfHwgc3RhdGUgPT0gbnVsbCkgcmV0dXJuIHN0YXRlXG4gIGNvbnN0IHNlZ21lbnRzID0gcGFyc2VTZWdtZW50cyhwYXRoKVxuICBsZXQgY3VycmVudDogYW55ID0gc3RhdGVcbiAgZm9yIChjb25zdCBzZWcgb2Ygc2VnbWVudHMpIHtcbiAgICBpZiAoY3VycmVudCA9PSBudWxsKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKHR5cGVvZiBzZWcgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIGN1cnJlbnQgPSBBcnJheS5pc0FycmF5KGN1cnJlbnQpID8gY3VycmVudFtzZWddIDogY3VycmVudFtTdHJpbmcoc2VnKV1cbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuICAgIGN1cnJlbnQgPSBjdXJyZW50W3NlZ11cbiAgfVxuICByZXR1cm4gY3VycmVudFxufVxuXG5leHBvcnQgY29uc3Qgc2V0QXRQYXRoTXV0YXRpbmcgPSAoZHJhZnQ6IGFueSwgcGF0aDogc3RyaW5nLCB2YWx1ZTogYW55KTogdm9pZCA9PiB7XG4gIGlmICghcGF0aCkgcmV0dXJuXG4gIGNvbnN0IHNlZ21lbnRzID0gcGFyc2VTZWdtZW50cyhwYXRoKVxuICBpZiAoc2VnbWVudHMubGVuZ3RoID09PSAwKSByZXR1cm5cblxuICBsZXQgY3VycmVudDogYW55ID0gZHJhZnRcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWdtZW50cy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICBjb25zdCBrZXkgPSBzZWdtZW50c1tpXSFcbiAgICBjb25zdCBuZXh0S2V5ID0gc2VnbWVudHNbaSArIDFdIVxuXG4gICAgY29uc3QgbmV4dCA9IGN1cnJlbnQ/LltrZXkgYXMgYW55XVxuICAgIGlmIChuZXh0ID09IG51bGwgfHwgdHlwZW9mIG5leHQgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgIGN1cnJlbnRba2V5IGFzIGFueV0gPSB0eXBlb2YgbmV4dEtleSA9PT0gXCJudW1iZXJcIiA/IFtdIDoge31cbiAgICB9XG4gICAgY3VycmVudCA9IGN1cnJlbnRba2V5IGFzIGFueV1cbiAgfVxuXG4gIGNvbnN0IGxhc3QgPSBzZWdtZW50c1tzZWdtZW50cy5sZW5ndGggLSAxXSFcbiAgY3VycmVudFtsYXN0IGFzIGFueV0gPSB2YWx1ZVxufVxuXG5leHBvcnQgY29uc3QgdW5zZXRBdFBhdGhNdXRhdGluZyA9IChkcmFmdDogYW55LCBwYXRoOiBzdHJpbmcpOiB2b2lkID0+IHtcbiAgaWYgKCFwYXRoKSByZXR1cm5cbiAgY29uc3Qgc2VnbWVudHMgPSBwYXJzZVNlZ21lbnRzKHBhdGgpXG4gIGlmIChzZWdtZW50cy5sZW5ndGggPT09IDApIHJldHVyblxuXG4gIGxldCBjdXJyZW50OiBhbnkgPSBkcmFmdFxuICBmb3IgKGxldCBpID0gMDsgaSA8IHNlZ21lbnRzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgIGNvbnN0IGtleSA9IHNlZ21lbnRzW2ldIVxuICAgIGNvbnN0IG5leHQgPSBjdXJyZW50Py5ba2V5IGFzIGFueV1cbiAgICBpZiAobmV4dCA9PSBudWxsIHx8IHR5cGVvZiBuZXh0ICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY3VycmVudCA9IG5leHRcbiAgfVxuXG4gIGNvbnN0IGxhc3QgPSBzZWdtZW50c1tzZWdtZW50cy5sZW5ndGggLSAxXSFcbiAgaWYgKEFycmF5LmlzQXJyYXkoY3VycmVudCkgJiYgdHlwZW9mIGxhc3QgPT09IFwibnVtYmVyXCIpIHtcbiAgICBjdXJyZW50W2xhc3RdID0gdW5kZWZpbmVkXG4gICAgcmV0dXJuXG4gIH1cblxuICBpZiAoY3VycmVudCAmJiB0eXBlb2YgY3VycmVudCA9PT0gXCJvYmplY3RcIikge1xuICAgIGRlbGV0ZSBjdXJyZW50W2xhc3QgYXMgYW55XVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBqb2luUGF0aCA9IChwcmVmaXg6IHN0cmluZywgc3VmZml4OiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICBpZiAoIXByZWZpeCkgcmV0dXJuIHN1ZmZpeFxuICBpZiAoIXN1ZmZpeCkgcmV0dXJuIHByZWZpeFxuICByZXR1cm4gYCR7cHJlZml4fS4ke3N1ZmZpeH1gXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGlzdEl0ZW1GaWVsZFBhdGgge1xuICByZWFkb25seSBsaXN0UGF0aDogc3RyaW5nXG4gIHJlYWRvbmx5IGl0ZW1QYXRoOiBzdHJpbmdcbn1cblxuLyoqXG4gKiBwYXJzZUxpc3RJdGVtRmllbGRQYXRoXHVGRjFBXG4gKiAtIFx1OEJDNlx1NTIyQlx1NUY2Mlx1NTk4MiBcIml0ZW1zW10ucHJvZmlsZVJlc291cmNlXCIgXHU3Njg0IGxpc3QuaXRlbSBcdTVCNTdcdTZCQjVcdThERUZcdTVGODRcdUZGMUJcbiAqIC0gXHU0RUM1XHU2NTJGXHU2MzAxXHU1MzU1XHU1QzQyIFwiW11cIlx1RkYwQ1x1NTkxQVx1NUM0Mlx1NUQ0Q1x1NTk1N1x1NjU3MFx1N0VDNFx1NTcyOFx1NTQwRVx1N0VFRFx1OTYzNlx1NkJCNVx1NTE4RFx1NTg5RVx1NUYzQVx1MzAwMlxuICovXG5leHBvcnQgY29uc3QgcGFyc2VMaXN0SXRlbUZpZWxkUGF0aCA9IChmaWVsZFBhdGg6IHN0cmluZyk6IExpc3RJdGVtRmllbGRQYXRoIHwgdW5kZWZpbmVkID0+IHtcbiAgY29uc3QgaWR4ID0gZmllbGRQYXRoLmluZGV4T2YoXCJbXVwiKVxuICBpZiAoaWR4IDwgMCkgcmV0dXJuIHVuZGVmaW5lZFxuICBpZiAoZmllbGRQYXRoLmluZGV4T2YoXCJbXVwiLCBpZHggKyAyKSA+PSAwKSByZXR1cm4gdW5kZWZpbmVkXG5cbiAgY29uc3QgbGlzdFBhdGggPSBmaWVsZFBhdGguc2xpY2UoMCwgaWR4KVxuICBjb25zdCByZXN0ID0gZmllbGRQYXRoLnNsaWNlKGlkeCArIDIpXG4gIGNvbnN0IGl0ZW1QYXRoID0gcmVzdC5zdGFydHNXaXRoKFwiLlwiKSA/IHJlc3Quc2xpY2UoMSkgOiByZXN0XG4gIHJldHVybiB7IGxpc3RQYXRoLCBpdGVtUGF0aCB9XG59XG5cbmV4cG9ydCBjb25zdCB0b0xpc3RJdGVtVmFsdWVQYXRoID0gKFxuICBsaXN0UGF0aDogc3RyaW5nLFxuICBpbmRleDogbnVtYmVyLFxuICBpdGVtUGF0aDogc3RyaW5nLFxuKTogc3RyaW5nID0+XG4gIGl0ZW1QYXRoID8gYCR7bGlzdFBhdGh9LiR7aW5kZXh9LiR7aXRlbVBhdGh9YCA6IGAke2xpc3RQYXRofS4ke2luZGV4fWBcblxudHlwZSBMaXN0U3RhdGUgPSB7XG4gIHJlYWRvbmx5IGl0ZW1zUmVmOiBSZWFkb25seUFycmF5PHVua25vd24+XG4gIHJlYWRvbmx5IGlkczogUmVhZG9ubHlBcnJheTxSb3dJZD5cbiAgcmVhZG9ubHkgaW5kZXhCeUlkOiBSZWFkb25seU1hcDxSb3dJZCwgbnVtYmVyPlxuICByZWFkb25seSB0cmFja0J5Pzogc3RyaW5nXG59XG5cbmNvbnN0IG1ha2VSb3dJZCA9ICgpOiBSb3dJZCA9PlxuICBgJHtEYXRlLm5vdygpLnRvU3RyaW5nKDM2KX0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyKX1gXG5cbmNvbnN0IHJlYWRUcmFja0J5ID0gKGl0ZW06IHVua25vd24sIHRyYWNrQnk6IHN0cmluZyk6IHVua25vd24gPT4ge1xuICBpZiAoIWl0ZW0gfHwgdHlwZW9mIGl0ZW0gIT09IFwib2JqZWN0XCIpIHJldHVybiB1bmRlZmluZWRcbiAgY29uc3Qgc2VnbWVudHMgPSB0cmFja0J5LnNwbGl0KFwiLlwiKVxuICBsZXQgY3VycmVudDogYW55ID0gaXRlbVxuICBmb3IgKGNvbnN0IHNlZyBvZiBzZWdtZW50cykge1xuICAgIGlmIChjdXJyZW50ID09IG51bGwpIHJldHVybiB1bmRlZmluZWRcbiAgICBjdXJyZW50ID0gY3VycmVudFtzZWcgYXMgYW55XVxuICB9XG4gIHJldHVybiBjdXJyZW50XG59XG5cbmNvbnN0IGRpZFJlb3JkZXJCeVJlZmVyZW5jZSA9IChcbiAgcHJldkl0ZW1zOiBSZWFkb25seUFycmF5PHVua25vd24+LFxuICBuZXh0SXRlbXM6IFJlYWRvbmx5QXJyYXk8dW5rbm93bj4sXG4pOiBib29sZWFuID0+IHtcbiAgY29uc3QgYnVja2V0cyA9IG5ldyBNYXA8dW5rbm93biwgQXJyYXk8bnVtYmVyPj4oKVxuICBmb3IgKGxldCBpID0gMDsgaSA8IHByZXZJdGVtcy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGl0ZW0gPSBwcmV2SXRlbXNbaV1cbiAgICBjb25zdCBsaXN0ID0gYnVja2V0cy5nZXQoaXRlbSkgPz8gW11cbiAgICBsaXN0LnB1c2goaSlcbiAgICBidWNrZXRzLnNldChpdGVtLCBsaXN0KVxuICB9XG5cbiAgZm9yIChsZXQgbmV4dEluZGV4ID0gMDsgbmV4dEluZGV4IDwgbmV4dEl0ZW1zLmxlbmd0aDsgbmV4dEluZGV4KyspIHtcbiAgICBjb25zdCBpdGVtID0gbmV4dEl0ZW1zW25leHRJbmRleF1cbiAgICBjb25zdCBxID0gYnVja2V0cy5nZXQoaXRlbSlcbiAgICBpZiAoIXEgfHwgcS5sZW5ndGggPT09IDApIGNvbnRpbnVlXG4gICAgY29uc3QgcHJldkluZGV4ID0gcS5zaGlmdCgpIVxuICAgIGlmIChwcmV2SW5kZXggIT09IG5leHRJbmRleCkge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2Vcbn1cblxuY29uc3QgaGFzU3RhYmxlVHJhY2tCeUtleXMgPSAoXG4gIGl0ZW1zOiBSZWFkb25seUFycmF5PHVua25vd24+LFxuICB0cmFja0J5OiBzdHJpbmcsXG4pOiBib29sZWFuID0+IGl0ZW1zLmV2ZXJ5KChpdGVtKSA9PiByZWFkVHJhY2tCeShpdGVtLCB0cmFja0J5KSAhPT0gdW5kZWZpbmVkKVxuXG5jb25zdCBpc1NhbWVUcmFja0J5U2VxdWVuY2UgPSAoXG4gIHByZXZJdGVtczogUmVhZG9ubHlBcnJheTx1bmtub3duPixcbiAgbmV4dEl0ZW1zOiBSZWFkb25seUFycmF5PHVua25vd24+LFxuICB0cmFja0J5OiBzdHJpbmcsXG4pOiBib29sZWFuID0+IHtcbiAgaWYgKHByZXZJdGVtcy5sZW5ndGggIT09IG5leHRJdGVtcy5sZW5ndGgpIHJldHVybiBmYWxzZVxuICBmb3IgKGxldCBpID0gMDsgaSA8IHByZXZJdGVtcy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChcbiAgICAgICFPYmplY3QuaXMoXG4gICAgICAgIHJlYWRUcmFja0J5KHByZXZJdGVtc1tpXSwgdHJhY2tCeSksXG4gICAgICAgIHJlYWRUcmFja0J5KG5leHRJdGVtc1tpXSwgdHJhY2tCeSksXG4gICAgICApXG4gICAgKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWVcbn1cblxuY29uc3QgcmVjb25jaWxlSWRzID0gKFxuICBwcmV2OiBMaXN0U3RhdGUgfCB1bmRlZmluZWQsXG4gIG5leHRJdGVtczogUmVhZG9ubHlBcnJheTx1bmtub3duPixcbiAgdHJhY2tCeT86IHN0cmluZyxcbik6IHsgcmVhZG9ubHkgaWRzOiBSZWFkb25seUFycmF5PFJvd0lkPjsgcmVhZG9ubHkgcmVtb3ZlZDogUmVhZG9ubHlBcnJheTxSb3dJZD4gfSA9PiB7XG4gIGlmICghcHJldikge1xuICAgIHJldHVybiB7XG4gICAgICBpZHM6IG5leHRJdGVtcy5tYXAoKCkgPT4gbWFrZVJvd0lkKCkpLFxuICAgICAgcmVtb3ZlZDogW10sXG4gICAgfVxuICB9XG5cbiAgaWYgKHByZXYuaXRlbXNSZWYgPT09IG5leHRJdGVtcykge1xuICAgIHJldHVybiB7XG4gICAgICBpZHM6IHByZXYuaWRzLFxuICAgICAgcmVtb3ZlZDogW10sXG4gICAgfVxuICB9XG5cbiAgLy8gXHU5MUNEXHU4OTgxXHVGRjFBXHU0RkREXHU2MzAxIFJvd0lkIFx1NTcyOFx1MjAxQ1x1OTc1RVx1N0VEM1x1Njc4NFx1NTNEOFx1NjZGNFx1MjAxRFx1RkYwOFx1NEVDNVx1NUI1N1x1NkJCNVx1NjZGNFx1NjVCMC9cdTVCRjlcdThDNjFcdTUxNEJcdTk2ODZcdUZGMDlcdTRFMEJcdTc2ODRcdTdBMzNcdTVCOUFcdTYwMjdcdUZGMENcbiAgLy8gXHU1NDI2XHU1MjE5IGluLWZsaWdodCAvIFx1N0YxM1x1NUI1OCBcdTRGMUFcdTg4QUJcdTY1RTBcdTYxMEZcdTRFNDlcdTU3MzBcdTU5MzFcdTY1NDhcdTMwMDJcbiAgY29uc3Qgc2FtZUxlbmd0aCA9IHByZXYuaXRlbXNSZWYubGVuZ3RoID09PSBuZXh0SXRlbXMubGVuZ3RoXG4gIGlmIChzYW1lTGVuZ3RoKSB7XG4gICAgLy8gdHJhY2tCeSBcdTU3M0FcdTY2NkZcdUZGMUFcdTgyRTUga2V5IFx1NUU4Rlx1NTIxN1x1NEUwMFx1ODFGNFx1RkYwQ1x1NTIxOVx1NTNFRlx1NzZGNFx1NjNBNVx1NTkwRFx1NzUyOFx1NjVFNyBpZHNcdUZGMUJcbiAgICAvLyBcdTU0MjZcdTUyMTlcdTVGQzVcdTk4N0JcdThENzAga2V5LWJhc2VkIHJlY29uY2lsZVx1RkYwOFx1OTA3Rlx1NTE0RCBjbG9uZSArIHJlb3JkZXIgXHU2NUY2XHU4QkVGXHU1MjI0XHU0RTNBXHUyMDFDXHU2NzJBXHU5MUNEXHU2MzkyXHUyMDFEXHVGRjA5XHUzMDAyXG4gICAgaWYgKHRyYWNrQnkpIHtcbiAgICAgIGNvbnN0IGNhblVzZUtleXMgPVxuICAgICAgICBoYXNTdGFibGVUcmFja0J5S2V5cyhwcmV2Lml0ZW1zUmVmLCB0cmFja0J5KSAmJlxuICAgICAgICBoYXNTdGFibGVUcmFja0J5S2V5cyhuZXh0SXRlbXMsIHRyYWNrQnkpXG4gICAgICBpZiAoY2FuVXNlS2V5cykge1xuICAgICAgICBpZiAoaXNTYW1lVHJhY2tCeVNlcXVlbmNlKHByZXYuaXRlbXNSZWYsIG5leHRJdGVtcywgdHJhY2tCeSkpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWRzOiBwcmV2LmlkcyxcbiAgICAgICAgICAgIHJlbW92ZWQ6IFtdLFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gdHJhY2tCeSBrZXkgXHU0RTBEXHU1M0VGXHU3NTI4XHU2NUY2XHU5MDAwXHU1NkRFXHU1MjMwXHU1RjE1XHU3NTI4XHU3RUE3XHU0RkE2XHU2RDRCXHVGRjA4XHU1QzNEXHU5MUNGXHU0RkREXHU2MzAxXHUyMDFDXHU1MTRCXHU5Njg2XHU0RjQ2XHU0RTBEXHU5MUNEXHU2MzkyXHUyMDFEXHU3Njg0XHU3QTMzXHU1QjlBXHU2MDI3XHVGRjA5XHUzMDAyXG4gICAgICAgIGlmICghZGlkUmVvcmRlckJ5UmVmZXJlbmNlKHByZXYuaXRlbXNSZWYsIG5leHRJdGVtcykpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWRzOiBwcmV2LmlkcyxcbiAgICAgICAgICAgIHJlbW92ZWQ6IFtdLFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIWRpZFJlb3JkZXJCeVJlZmVyZW5jZShwcmV2Lml0ZW1zUmVmLCBuZXh0SXRlbXMpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZHM6IHByZXYuaWRzLFxuICAgICAgICByZW1vdmVkOiBbXSxcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjb25zdCBrZXlPZiA9IChpdGVtOiB1bmtub3duKTogdW5rbm93biA9PiB7XG4gICAgaWYgKCF0cmFja0J5KSByZXR1cm4gaXRlbVxuICAgIGNvbnN0IGsgPSByZWFkVHJhY2tCeShpdGVtLCB0cmFja0J5KVxuICAgIHJldHVybiBrICE9PSB1bmRlZmluZWQgPyBrIDogaXRlbVxuICB9XG5cbiAgY29uc3QgYnVja2V0cyA9IG5ldyBNYXA8dW5rbm93biwgQXJyYXk8Um93SWQ+PigpXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcHJldi5pdGVtc1JlZi5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGtleSA9IGtleU9mKHByZXYuaXRlbXNSZWZbaV0pXG4gICAgY29uc3QgbGlzdCA9IGJ1Y2tldHMuZ2V0KGtleSkgPz8gW11cbiAgICBsaXN0LnB1c2gocHJldi5pZHNbaV0hKVxuICAgIGJ1Y2tldHMuc2V0KGtleSwgbGlzdClcbiAgfVxuXG4gIGNvbnN0IGlkczogQXJyYXk8Um93SWQ+ID0gW11cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXh0SXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBrZXkgPSBrZXlPZihuZXh0SXRlbXNbaV0pXG4gICAgY29uc3QgbGlzdCA9IGJ1Y2tldHMuZ2V0KGtleSlcbiAgICBpZiAobGlzdCAmJiBsaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgIGlkcy5wdXNoKGxpc3Quc2hpZnQoKSEpXG4gICAgfSBlbHNlIHtcbiAgICAgIGlkcy5wdXNoKG1ha2VSb3dJZCgpKVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHJlbW92ZWQ6IEFycmF5PFJvd0lkPiA9IFtdXG4gIGZvciAoY29uc3QgbGlzdCBvZiBidWNrZXRzLnZhbHVlcygpKSB7XG4gICAgcmVtb3ZlZC5wdXNoKC4uLmxpc3QpXG4gIH1cblxuICByZXR1cm4geyBpZHMsIHJlbW92ZWQgfVxufVxuXG5jb25zdCBidWlsZEluZGV4QnlJZCA9IChpZHM6IFJlYWRvbmx5QXJyYXk8Um93SWQ+KTogUmVhZG9ubHlNYXA8Um93SWQsIG51bWJlcj4gPT4ge1xuICBjb25zdCBtYXAgPSBuZXcgTWFwPFJvd0lkLCBudW1iZXI+KClcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBpZHMubGVuZ3RoOyBpKyspIHtcbiAgICBtYXAuc2V0KGlkc1tpXSEsIGkpXG4gIH1cbiAgcmV0dXJuIG1hcFxufVxuXG5leHBvcnQgY2xhc3MgUm93SWRTdG9yZSB7XG4gIHByaXZhdGUgcmVhZG9ubHkgbGlzdHMgPSBuZXcgTWFwPHN0cmluZywgTGlzdFN0YXRlPigpXG4gIHByaXZhdGUgcmVhZG9ubHkgcmVtb3ZhbExpc3RlbmVycyA9IG5ldyBNYXA8c3RyaW5nLCBTZXQ8TGlzdFJlbW92YWxMaXN0ZW5lcj4+KClcblxuICBvblJlbW92ZWQobGlzdFBhdGg6IHN0cmluZywgbGlzdGVuZXI6IExpc3RSZW1vdmFsTGlzdGVuZXIpOiAoKSA9PiB2b2lkIHtcbiAgICBjb25zdCBzZXQgPSB0aGlzLnJlbW92YWxMaXN0ZW5lcnMuZ2V0KGxpc3RQYXRoKSA/PyBuZXcgU2V0PExpc3RSZW1vdmFsTGlzdGVuZXI+KClcbiAgICBzZXQuYWRkKGxpc3RlbmVyKVxuICAgIHRoaXMucmVtb3ZhbExpc3RlbmVycy5zZXQobGlzdFBhdGgsIHNldClcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY29uc3QgY3VycmVudCA9IHRoaXMucmVtb3ZhbExpc3RlbmVycy5nZXQobGlzdFBhdGgpXG4gICAgICBpZiAoIWN1cnJlbnQpIHJldHVyblxuICAgICAgY3VycmVudC5kZWxldGUobGlzdGVuZXIpXG4gICAgICBpZiAoY3VycmVudC5zaXplID09PSAwKSB0aGlzLnJlbW92YWxMaXN0ZW5lcnMuZGVsZXRlKGxpc3RQYXRoKVxuICAgIH1cbiAgfVxuXG4gIGdldFJvd0lkKGxpc3RQYXRoOiBzdHJpbmcsIGluZGV4OiBudW1iZXIpOiBSb3dJZCB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3Qgc3RhdGUgPSB0aGlzLmxpc3RzLmdldChsaXN0UGF0aClcbiAgICByZXR1cm4gc3RhdGUgPyBzdGF0ZS5pZHNbaW5kZXhdIDogdW5kZWZpbmVkXG4gIH1cblxuICBnZXRJbmRleChsaXN0UGF0aDogc3RyaW5nLCByb3dJZDogUm93SWQpOiBudW1iZXIgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IHN0YXRlID0gdGhpcy5saXN0cy5nZXQobGlzdFBhdGgpXG4gICAgaWYgKCFzdGF0ZSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiBzdGF0ZS5pbmRleEJ5SWQuZ2V0KHJvd0lkKVxuICB9XG5cbiAgLyoqXG4gICAqIGVuc3VyZUxpc3RcdUZGMUFcbiAgICogLSBcdThCQTlcdTYzMDdcdTVCOUEgbGlzdFBhdGggXHU3Njg0IFJvd0lEIFx1NjYyMFx1NUMwNFx1NEUwRVx1NUY1M1x1NTI0RCBpdGVtcyBcdTVCRjlcdTlGNTBcdUZGMUJcbiAgICogLSBcdThGRDRcdTU2REVcdTY3MDBcdTY1QjBcdTc2ODQgaWRzXHVGRjA4aW5kZXggLT4gUm93SWRcdUZGMDlcdTMwMDJcbiAgICovXG4gIGVuc3VyZUxpc3QoXG4gICAgbGlzdFBhdGg6IHN0cmluZyxcbiAgICBpdGVtczogUmVhZG9ubHlBcnJheTx1bmtub3duPixcbiAgICB0cmFja0J5Pzogc3RyaW5nLFxuICApOiBSZWFkb25seUFycmF5PFJvd0lkPiB7XG4gICAgY29uc3QgcHJldiA9IHRoaXMubGlzdHMuZ2V0KGxpc3RQYXRoKVxuICAgIGNvbnN0IHsgaWRzLCByZW1vdmVkIH0gPSByZWNvbmNpbGVJZHMocHJldiwgaXRlbXMsIHRyYWNrQnkgPz8gcHJldj8udHJhY2tCeSlcblxuICAgIGNvbnN0IG5leHQ6IExpc3RTdGF0ZSA9IHtcbiAgICAgIGl0ZW1zUmVmOiBpdGVtcyxcbiAgICAgIGlkcyxcbiAgICAgIGluZGV4QnlJZDogYnVpbGRJbmRleEJ5SWQoaWRzKSxcbiAgICAgIHRyYWNrQnk6IHRyYWNrQnkgPz8gcHJldj8udHJhY2tCeSxcbiAgICB9XG4gICAgdGhpcy5saXN0cy5zZXQobGlzdFBhdGgsIG5leHQpXG5cbiAgICBpZiAocmVtb3ZlZC5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLnJlbW92YWxMaXN0ZW5lcnMuZ2V0KGxpc3RQYXRoKVxuICAgICAgaWYgKGxpc3RlbmVycyAmJiBsaXN0ZW5lcnMuc2l6ZSA+IDApIHtcbiAgICAgICAgZm9yIChjb25zdCByb3dJZCBvZiByZW1vdmVkKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBmbiBvZiBsaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGZuKHJvd0lkKVxuICAgICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICAgIC8vIGxpc3RlbmVyIGZhaWx1cmVzIHNob3VsZCBuZXZlciBicmVhayBydW50aW1lIGJlaGF2aW9yXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGlkc1xuICB9XG5cbiAgLyoqXG4gICAqIHVwZGF0ZUFsbFx1RkYxQVxuICAgKiAtIFx1NTcyOFx1NkJDRlx1NkIyMVx1NjNEMFx1NEVBNFx1NTQwRVx1NUJGOVx1OUY1MFx1NjI0MFx1NjcwOVx1NURGMlx1NzdFNSBsaXN0IFx1NzY4NCBSb3dJRCBcdTY2MjBcdTVDMDRcdUZGMUJcbiAgICogLSBjb25maWdzIFx1Njc2NVx1ODFFQSBTdGF0ZVRyYWl0UHJvZ3JhbS5zcGVjIFx1NEUyRFx1NzY4NCBsaXN0IFx1NThGMFx1NjYwRVx1RkYwOFx1NTNFRlx1NjQzQVx1NUUyNiB0cmFja0J5XHVGRjA5XHUzMDAyXG4gICAqL1xuICB1cGRhdGVBbGwoc3RhdGU6IHVua25vd24sIGNvbmZpZ3M6IFJlYWRvbmx5QXJyYXk8TGlzdENvbmZpZz4pOiB2b2lkIHtcbiAgICBmb3IgKGNvbnN0IGNmZyBvZiBjb25maWdzKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IGdldEF0UGF0aChzdGF0ZSBhcyBhbnksIGNmZy5wYXRoKVxuICAgICAgY29uc3QgaXRlbXMgPSBBcnJheS5pc0FycmF5KHZhbHVlKSA/ICh2YWx1ZSBhcyBSZWFkb25seUFycmF5PHVua25vd24+KSA6IFtdXG4gICAgICB0aGlzLmVuc3VyZUxpc3QoY2ZnLnBhdGgsIGl0ZW1zLCBjZmcudHJhY2tCeSlcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGNvbGxlY3RMaXN0Q29uZmlncyA9IChzcGVjOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPik6IFJlYWRvbmx5QXJyYXk8TGlzdENvbmZpZz4gPT4ge1xuICBjb25zdCBjb25maWdzOiBBcnJheTxMaXN0Q29uZmlnPiA9IFtdXG4gIGZvciAoY29uc3Qga2V5IGluIHNwZWMpIHtcbiAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzcGVjLCBrZXkpKSBjb250aW51ZVxuICAgIGNvbnN0IHJhdyA9IHNwZWNba2V5XVxuICAgIGlmICghcmF3IHx8IHR5cGVvZiByYXcgIT09IFwib2JqZWN0XCIpIGNvbnRpbnVlXG4gICAgY29uc3QgdGFnID0gKHJhdyBhcyBhbnkpLl90YWdcbiAgICBpZiAodGFnICE9PSBcIlN0YXRlVHJhaXRMaXN0XCIpIGNvbnRpbnVlXG4gICAgY29uc3QgdHJhY2tCeSA9IChyYXcgYXMgYW55KS5pZGVudGl0eUhpbnQ/LnRyYWNrQnlcbiAgICBjb25maWdzLnB1c2goe1xuICAgICAgcGF0aDoga2V5LFxuICAgICAgdHJhY2tCeTogdHlwZW9mIHRyYWNrQnkgPT09IFwic3RyaW5nXCIgPyB0cmFja0J5IDogdW5kZWZpbmVkLFxuICAgIH0pXG4gIH1cbiAgcmV0dXJuIGNvbmZpZ3Ncbn1cbiIsICIvLyBTdGF0ZVRyYWl0IFx1NTQ3RFx1NTQwRFx1N0E3QVx1OTVGNFx1NkEyMVx1NTc1N1x1RkYxQVxuLy8gLSBcdTYzRDBcdTRGOUIgdHJhaXRzIHNwZWMgXHU3Njg0IERTTFx1RkYwOGZyb20vbm9kZS9saXN0L2NvbXB1dGVkL3NvdXJjZS9saW5rXHVGRjA5XHVGRjFCXG4vLyAtIGJ1aWxkXHVGRjFBXHU1RjUyXHU0RTAwXHU1MzE2IHNwZWMgXHU1RTc2XHU3NTFGXHU2MjEwIFByb2dyYW0vR3JhcGgvUGxhblx1RkYxQlxuLy8gLSBpbnN0YWxsXHVGRjFBXHU1QzA2IFByb2dyYW0gXHU1Qjg5XHU4OEM1XHU1MjMwXHU4RkQwXHU4ODRDXHU2NUY2XHVGRjA4XHU2Q0U4XHU1MThDIHNvdXJjZS5yZWZyZXNoIFx1N0I0OVx1NTE2NVx1NTNFM1x1RkYwQ1x1NUU3Nlx1NTcyOFx1NEU4Qlx1NTJBMVx1N0E5N1x1NTNFM1x1NjI2N1x1ODg0QyBjb252ZXJnZS92YWxpZGF0ZVx1RkYwOVx1MzAwMlxuXG5pbXBvcnQgdHlwZSB7IFNjaGVtYSB9IGZyb20gXCJlZmZlY3RcIlxuaW1wb3J0IHsgRWZmZWN0IH0gZnJvbSBcImVmZmVjdFwiXG5pbXBvcnQgdHlwZSB7IEJvdW5kQXBpIH0gZnJvbSBcIi4vQm91bmQuanNcIlxuaW1wb3J0ICogYXMgTW9kZWwgZnJvbSBcIi4vaW50ZXJuYWwvc3RhdGUtdHJhaXQvbW9kZWwuanNcIlxuaW1wb3J0ICogYXMgRmllbGRQYXRoIGZyb20gXCIuL2ludGVybmFsL3N0YXRlLXRyYWl0L2ZpZWxkLXBhdGguanNcIlxuaW1wb3J0ICogYXMgSW50ZXJuYWxCdWlsZCBmcm9tIFwiLi9pbnRlcm5hbC9zdGF0ZS10cmFpdC9idWlsZC5qc1wiXG5pbXBvcnQgKiBhcyBJbnRlcm5hbEluc3RhbGwgZnJvbSBcIi4vaW50ZXJuYWwvc3RhdGUtdHJhaXQvaW5zdGFsbC5qc1wiXG5cbi8vIFx1NUJGOVx1NTkxNlx1NjZCNFx1OTczMlx1NzY4NFx1NjgzOFx1NUZDM1x1N0M3Qlx1NTc4Qlx1NTIyQlx1NTQwRFx1MzAwMlxuZXhwb3J0IHR5cGUgU3RhdGVUcmFpdFNwZWM8Uz4gPSBNb2RlbC5TdGF0ZVRyYWl0U3BlYzxTPlxuZXhwb3J0IHR5cGUgU3RhdGVUcmFpdEVudHJ5PFMgPSB1bmtub3duLCBQIGV4dGVuZHMgc3RyaW5nID0gc3RyaW5nPiA9XG4gIE1vZGVsLlN0YXRlVHJhaXRFbnRyeTxTLCBQPlxuZXhwb3J0IHR5cGUgU3RhdGVUcmFpdFByb2dyYW08Uz4gPSBNb2RlbC5TdGF0ZVRyYWl0UHJvZ3JhbTxTPlxuZXhwb3J0IHR5cGUgU3RhdGVUcmFpdEdyYXBoID0gTW9kZWwuU3RhdGVUcmFpdEdyYXBoXG5leHBvcnQgdHlwZSBTdGF0ZVRyYWl0UGxhbiA9IE1vZGVsLlN0YXRlVHJhaXRQbGFuXG5leHBvcnQgdHlwZSBTdGF0ZVRyYWl0Tm9kZTxJbnB1dCA9IHVua25vd24sIEN0eCA9IHVua25vd24+ID0gTW9kZWwuU3RhdGVUcmFpdE5vZGU8SW5wdXQsIEN0eD5cbmV4cG9ydCB0eXBlIFN0YXRlVHJhaXRMaXN0PEl0ZW0gPSB1bmtub3duPiA9IE1vZGVsLlN0YXRlVHJhaXRMaXN0PEl0ZW0+XG5leHBvcnQgdHlwZSBDaGVja1J1bGU8SW5wdXQgPSB1bmtub3duLCBDdHggPSB1bmtub3duPiA9IE1vZGVsLkNoZWNrUnVsZTxJbnB1dCwgQ3R4PlxuXG5leHBvcnQgdHlwZSBTdGF0ZUZpZWxkUGF0aDxTPiA9IEZpZWxkUGF0aC5TdGF0ZUZpZWxkUGF0aDxTPlxuZXhwb3J0IHR5cGUgU3RhdGVBdFBhdGg8UywgUD4gPSBGaWVsZFBhdGguU3RhdGVBdFBhdGg8UywgUD5cblxuZXhwb3J0IGNvbnN0ICRyb290ID0gXCIkcm9vdFwiIGFzIGNvbnN0XG5cbi8qKlxuICogU3RhdGVUcmFpdC5mcm9tXHVGRjFBXG4gKiAtIFx1NjgzOVx1NjM2RSBTdGF0ZSBTY2hlbWEgXHU2NTM2XHU3QTg0XHU1M0VGXHU3NTI4XHU1QjU3XHU2QkI1XHU4REVGXHU1Rjg0XHVGRjBDXHU1RTc2XHU0RTNBIHRyYWl0cyBzcGVjIFx1NjNEMFx1NEY5Qlx1N0M3Qlx1NTc4Qlx1N0VBNlx1Njc1Rlx1RkYxQlxuICogLSBcdThGRDBcdTg4NENcdTY1RjZcdTRFQzVcdThGRDRcdTU2REVcdTUzOUZcdTU5Q0Igc3BlYyBcdTVCRjlcdThDNjFcdUZGMENcdTUxNzdcdTRGNTNcdTVGNTJcdTRFMDBcdTUzMTZcdTc1MzEgaW50ZXJuYWwgXHU1QzQyXHU1OTA0XHU3NDA2XHUzMDAyXG4gKi9cbmV4cG9ydCBjb25zdCBmcm9tID0gPFMgZXh0ZW5kcyBvYmplY3QsIEk+KFxuICBfc2NoZW1hOiBTY2hlbWEuU2NoZW1hPFMsIEk+LFxuKSA9PlxuKHNwZWM6IFN0YXRlVHJhaXRTcGVjPFM+KTogU3RhdGVUcmFpdFNwZWM8Uz4gPT5cbiAgc3BlY1xuXG5leHBvcnQgY29uc3Qgbm9kZSA9IDxJbnB1dCA9IHVua25vd24sIEN0eCA9IHVua25vd24+KFxuICBzcGVjOiBPbWl0PE1vZGVsLlN0YXRlVHJhaXROb2RlPElucHV0LCBDdHg+LCBcIl90YWdcIj4sXG4pOiBNb2RlbC5TdGF0ZVRyYWl0Tm9kZTxJbnB1dCwgQ3R4PiA9PiAoe1xuICBfdGFnOiBcIlN0YXRlVHJhaXROb2RlXCIsXG4gIC4uLnNwZWMsXG59KVxuXG5leHBvcnQgY29uc3QgbGlzdCA9IDxJdGVtID0gdW5rbm93bj4oXG4gIHNwZWM6IE9taXQ8TW9kZWwuU3RhdGVUcmFpdExpc3Q8SXRlbT4sIFwiX3RhZ1wiPixcbik6IE1vZGVsLlN0YXRlVHJhaXRMaXN0PEl0ZW0+ID0+ICh7XG4gIF90YWc6IFwiU3RhdGVUcmFpdExpc3RcIixcbiAgLi4uc3BlYyxcbn0pXG5cbi8qKlxuICogU3RhdGVUcmFpdC5jb21wdXRlZFx1RkYxQVxuICogLSBcdTRFM0FcdTY3RDBcdTRFMkFcdTVCNTdcdTZCQjVcdTU4RjBcdTY2MEUgY29tcHV0ZWQgXHU4MEZEXHU1MjlCXHVGRjFCXG4gKiAtIFx1OTAxQVx1OEZDN1x1NjYzRVx1NUYwRiBkZXBzIFx1NEY1Q1x1NEUzQVx1NTUyRlx1NEUwMFx1NEY5RFx1OEQ1Nlx1NEU4Qlx1NUI5RVx1NkU5MFx1RkYwOFx1NzUyOFx1NEU4RVx1OEJDQVx1NjVBRC9cdTUzQ0RcdTU0MTFcdTk1RURcdTUzMDUvXHU1NDBFXHU3RUVEXHU1ODlFXHU5MUNGXHU4QzAzXHU1RUE2XHVGRjA5XHUzMDAyXG4gKi9cbmV4cG9ydCBjb25zdCBjb21wdXRlZCA9IDxTIGV4dGVuZHMgb2JqZWN0LCBQIGV4dGVuZHMgU3RhdGVGaWVsZFBhdGg8Uz4+KFxuICBpbnB1dDoge1xuICAgIHJlYWRvbmx5IGRlcHM6IFJlYWRvbmx5QXJyYXk8U3RhdGVGaWVsZFBhdGg8Uz4+XG4gICAgcmVhZG9ubHkgZ2V0OiAoc3RhdGU6IFJlYWRvbmx5PFM+KSA9PiBTdGF0ZUF0UGF0aDxTLCBQPlxuICAgIHJlYWRvbmx5IGVxdWFscz86IChwcmV2OiBTdGF0ZUF0UGF0aDxTLCBQPiwgbmV4dDogU3RhdGVBdFBhdGg8UywgUD4pID0+IGJvb2xlYW5cbiAgfSxcbik6IFN0YXRlVHJhaXRFbnRyeTxTLCBQPiA9PiB7XG4gIHJldHVybiB7XG4gICAgZmllbGRQYXRoOiB1bmRlZmluZWQgYXMgdW5rbm93biBhcyBQLFxuICAgIGtpbmQ6IFwiY29tcHV0ZWRcIixcbiAgICBtZXRhOiB7IGRlcHM6IGlucHV0LmRlcHMsIGRlcml2ZTogaW5wdXQuZ2V0LCBlcXVhbHM6IGlucHV0LmVxdWFscyB9LFxuICB9IGFzIFN0YXRlVHJhaXRFbnRyeTxTLCBQPlxufVxuXG4vKipcbiAqIFN0YXRlVHJhaXQuc291cmNlXHVGRjFBXG4gKiAtIFx1NEUzQVx1NjdEMFx1NEUyQVx1NUI1N1x1NkJCNVx1NThGMFx1NjYwRVx1NTkxNlx1OTBFOFx1OEQ0NFx1NkU5MFx1Njc2NVx1NkU5MFx1RkYwOFJlc291cmNlIC8gUXVlcnkgXHU5NkM2XHU2MjEwXHU1NzI4XHU1NDBFXHU3RUVEIFBoYXNlIFx1NEUyRFx1NUI5RVx1NzNCMFx1RkYwOVx1RkYxQlxuICogLSBcdTUxODVcdTY4MzhcdThEMUZcdThEMjMga2V5SGFzaCBnYXRlIC8gY29uY3VycmVuY3kgLyBSZXBsYXlNb2RlIFx1ODg0Q1x1NEUzQVx1MzAwMlxuICovXG5leHBvcnQgY29uc3Qgc291cmNlID0gPFMgZXh0ZW5kcyBvYmplY3QsIFAgZXh0ZW5kcyBTdGF0ZUZpZWxkUGF0aDxTPj4obWV0YToge1xuICByZXNvdXJjZTogc3RyaW5nXG4gIGRlcHM6IFJlYWRvbmx5QXJyYXk8U3RhdGVGaWVsZFBhdGg8Uz4+XG4gIGtleTogKHN0YXRlOiBSZWFkb25seTxTPikgPT4gdW5rbm93blxuICB0cmlnZ2Vycz86IFJlYWRvbmx5QXJyYXk8XCJvbk1vdW50XCIgfCBcIm9uVmFsdWVDaGFuZ2VcIiB8IFwibWFudWFsXCI+XG4gIGRlYm91bmNlTXM/OiBudW1iZXJcbiAgY29uY3VycmVuY3k/OiBcInN3aXRjaFwiIHwgXCJleGhhdXN0LXRyYWlsaW5nXCJcbiAgLyoqXG4gICAqIFx1NzUyOFx1NEU4RSBEZXZ0b29scy9cdTY1ODdcdTY4NjNcdTc2ODRcdTUzRUZcdTVFOEZcdTUyMTdcdTUzMTZcdTUxNDNcdTRGRTFcdTYwNkZcdUZGMDhcdTc2N0RcdTU0MERcdTUzNTVcdTVCNTdcdTZCQjVcdTRGMUFcdTU3MjggYnVpbGQgXHU5NjM2XHU2QkI1XHU4OEFCXHU2M0QwXHU1M0Q2XHVGRjA5XHUzMDAyXG4gICAqL1xuICBtZXRhPzogUmVjb3JkPHN0cmluZywgdW5rbm93bj5cbn0pOiBTdGF0ZVRyYWl0RW50cnk8UywgUD4gPT5cbiAgKHtcbiAgICBmaWVsZFBhdGg6IHVuZGVmaW5lZCBhcyB1bmtub3duIGFzIFAsXG4gICAga2luZDogXCJzb3VyY2VcIixcbiAgICBtZXRhLFxuICB9IGFzIFN0YXRlVHJhaXRFbnRyeTxTLCBQPilcblxuLyoqXG4gKiBTdGF0ZVRyYWl0LmxpbmtcdUZGMUFcbiAqIC0gXHU0RTNBXHU3NkVFXHU2ODA3XHU1QjU3XHU2QkI1XHU1OEYwXHU2NjBFXHU0RUNFXHU1MTc2XHU0RUQ2XHU1QjU3XHU2QkI1XHU4MDU0XHU1MkE4XHU3Njg0XHU4MEZEXHU1MjlCXHVGRjFCXG4gKiAtIG1ldGEuZnJvbSBcdTU0MENcdTY4MzdcdTUzRDcgU3RhdGVGaWVsZFBhdGg8Uz4gXHU3RUE2XHU2NzVGXHUzMDAyXG4gKi9cbmV4cG9ydCBjb25zdCBsaW5rID0gPFMgZXh0ZW5kcyBvYmplY3QsIFAgZXh0ZW5kcyBTdGF0ZUZpZWxkUGF0aDxTPj4obWV0YToge1xuICBmcm9tOiBTdGF0ZUZpZWxkUGF0aDxTPlxufSk6IFN0YXRlVHJhaXRFbnRyeTxTLCBQPiA9PlxuICAoe1xuICAgIGZpZWxkUGF0aDogdW5kZWZpbmVkIGFzIHVua25vd24gYXMgUCxcbiAgICBraW5kOiBcImxpbmtcIixcbiAgICBtZXRhLFxuICB9IGFzIFN0YXRlVHJhaXRFbnRyeTxTLCBQPilcblxuLyoqXG4gKiBTdGF0ZVRyYWl0LmJ1aWxkXHVGRjFBXG4gKiAtIFx1NUMwNiBTcGVjIFx1NUY1Mlx1NEUwMFx1NTMxNlx1NEUzQVx1NTNFRlx1NjI2N1x1ODg0QyBQcm9ncmFtXHVGRjA4XHU1NDJCIEdyYXBoL1BsYW5cdUZGMDlcdUZGMUJcbiAqIC0gRFNMIFx1NUM0Mlx1NEUwRSBidWlsZCBcdTVDNDJcdTc2ODRcdTdFQTZcdTY3NUZcdTRFRTUgYnVpbGQgXHU0RTNBXHU2NzAwXHU3RUM4XHU4OEMxXHU1MUIzXHVGRjA4XHU0RjhCXHU1OTgyXHU1RjNBXHU1MjM2XHU2NjNFXHU1RjBGIGRlcHNcdUZGMDlcdTMwMDJcbiAqL1xuZXhwb3J0IGNvbnN0IGJ1aWxkID0gPFMgZXh0ZW5kcyBvYmplY3Q+KFxuICBzdGF0ZVNjaGVtYTogU2NoZW1hLlNjaGVtYTxTLCBhbnk+LFxuICBzcGVjOiBTdGF0ZVRyYWl0U3BlYzxTPixcbik6IFN0YXRlVHJhaXRQcm9ncmFtPFM+ID0+IEludGVybmFsQnVpbGQuYnVpbGQoc3RhdGVTY2hlbWEsIHNwZWMpXG5cbi8qKlxuICogU3RhdGVUcmFpdC5pbnN0YWxsXHVGRjFBXG4gKiAtIFx1NTcyOFx1N0VEOVx1NUI5QSBCb3VuZCBBUEkgXHU0RTBBXHU1Qjg5XHU4OEM1IFByb2dyYW0gXHU2M0NGXHU4RkYwXHU3Njg0XHU4ODRDXHU0RTNBXHVGRjA4Y29tcHV0ZWQvbGluay9zb3VyY2UvY2hlY2sgXHU3QjQ5XHVGRjA5XHVGRjFCXG4gKiAtIFx1NkJDRlx1NEUyQSBQbGFuU3RlcCBcdTVCRjlcdTVFOTRcdTRFMDBcdTRFMkFcdTk1N0ZcdTc1MUZcdTU0N0RcdTU0NjhcdTY3MUYgRWZmZWN0XHVGRjBDXHU1RTc2XHU2MzAyXHU4RjdEXHU1MjMwIFJ1bnRpbWUgU2NvcGVcdTMwMDJcbiAqL1xuZXhwb3J0IGNvbnN0IGluc3RhbGwgPSA8UyBleHRlbmRzIG9iamVjdD4oXG4gIGJvdW5kOiBCb3VuZEFwaTxhbnksIGFueT4sXG4gIHByb2dyYW06IFN0YXRlVHJhaXRQcm9ncmFtPFM+LFxuKTogRWZmZWN0LkVmZmVjdDx2b2lkLCBuZXZlciwgYW55PiA9PiBJbnRlcm5hbEluc3RhbGwuaW5zdGFsbChib3VuZCwgcHJvZ3JhbSlcbiIsICJleHBvcnQgdHlwZSBUcmFpdE1ldGEgPSBSZWFkb25seTx7XG4gIHJlYWRvbmx5IGxhYmVsPzogc3RyaW5nXG4gIHJlYWRvbmx5IGRlc2NyaXB0aW9uPzogc3RyaW5nXG4gIHJlYWRvbmx5IHRhZ3M/OiBSZWFkb25seUFycmF5PHN0cmluZz5cbiAgcmVhZG9ubHkgZ3JvdXA/OiBzdHJpbmdcbiAgcmVhZG9ubHkgZG9jc1VybD86IHN0cmluZ1xuICByZWFkb25seSBjYWNoZUdyb3VwPzogc3RyaW5nXG4gIC8qKlxuICAgKiBcdThCRURcdTRFNDlcdTYzRDBcdTc5M0FcdUZGMUFcdTVGNTNcdTU0MENcdTRFMDBcdTVCOUVcdTRGNTNcdUZGMDhcdTRGOEJcdTU5ODJcdTU0MENcdTRFMDAgcmVzb3VyY2VJZFx1RkYwOVx1NTFGQVx1NzNCMFx1NTkxQVx1NTkwNCBtZXRhIFx1NThGMFx1NjYwRVx1NEUxNFx1NEUwRFx1NEUwMFx1ODFGNFx1NjVGNlx1RkYwQ1xuICAgKiBjYW5vbmljYWw9dHJ1ZSBcdTc2ODRcdTU4RjBcdTY2MEVcdTRGMThcdTUxNDhcdTYyMTBcdTRFM0FcdTIwMUNcdTVDNTVcdTc5M0FcdTc1MjggY2Fub25pY2FsXHUyMDFEXHVGRjFCXHU1MTc2XHU0RUQ2XHU1OEYwXHU2NjBFXHU0RjFBXHU4QkIwXHU1RjU1XHU0RTNBIGNvbmZsaWN0c1x1MzAwMlxuICAgKi9cbiAgcmVhZG9ubHkgY2Fub25pY2FsPzogYm9vbGVhblxufT5cblxuZXhwb3J0IHR5cGUgVHJhaXRNZXRhQ29uZmxpY3QgPSBSZWFkb25seTx7XG4gIHJlYWRvbmx5IG9yaWdpbjogc3RyaW5nXG4gIHJlYWRvbmx5IG1ldGE6IFRyYWl0TWV0YVxufT5cblxuY29uc3QgdW5pcVNvcnRlZFN0cmluZ3MgPSAoaW5wdXQ6IFJlYWRvbmx5QXJyYXk8c3RyaW5nPik6IFJlYWRvbmx5QXJyYXk8c3RyaW5nPiA9PiB7XG4gIGNvbnN0IHNldCA9IG5ldyBTZXQ8c3RyaW5nPigpXG4gIGZvciAoY29uc3QgaXRlbSBvZiBpbnB1dCkge1xuICAgIGNvbnN0IHYgPSBpdGVtLnRyaW0oKVxuICAgIGlmICghdikgY29udGludWVcbiAgICBzZXQuYWRkKHYpXG4gIH1cbiAgcmV0dXJuIEFycmF5LmZyb20oc2V0KS5zb3J0KChhLCBiKSA9PiBhLmxvY2FsZUNvbXBhcmUoYikpXG59XG5cbmV4cG9ydCBjb25zdCBzYW5pdGl6ZSA9IChpbnB1dDogdW5rbm93bik6IFRyYWl0TWV0YSB8IHVuZGVmaW5lZCA9PiB7XG4gIGlmIChpbnB1dCA9PT0gbnVsbCB8fCBpbnB1dCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gdW5kZWZpbmVkXG4gIGlmICh0eXBlb2YgaW5wdXQgIT09IFwib2JqZWN0XCIgfHwgQXJyYXkuaXNBcnJheShpbnB1dCkpIHJldHVybiB1bmRlZmluZWRcblxuICBjb25zdCByZWNvcmQgPSBpbnB1dCBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPlxuICBjb25zdCBvdXQ6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge31cblxuICBjb25zdCBwaWNrU3RyaW5nID0gKGtleToga2V5b2YgVHJhaXRNZXRhKTogdm9pZCA9PiB7XG4gICAgY29uc3QgdmFsdWUgPSByZWNvcmRba2V5IGFzIHN0cmluZ11cbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSBcInN0cmluZ1wiKSByZXR1cm5cbiAgICBjb25zdCB0cmltbWVkID0gdmFsdWUudHJpbSgpXG4gICAgaWYgKCF0cmltbWVkKSByZXR1cm5cbiAgICBvdXRba2V5XSA9IHRyaW1tZWRcbiAgfVxuXG4gIHBpY2tTdHJpbmcoXCJsYWJlbFwiKVxuICBwaWNrU3RyaW5nKFwiZGVzY3JpcHRpb25cIilcbiAgcGlja1N0cmluZyhcImdyb3VwXCIpXG4gIHBpY2tTdHJpbmcoXCJkb2NzVXJsXCIpXG4gIHBpY2tTdHJpbmcoXCJjYWNoZUdyb3VwXCIpXG5cbiAgY29uc3QgY2Fub25pY2FsID0gcmVjb3JkLmNhbm9uaWNhbFxuICBpZiAodHlwZW9mIGNhbm9uaWNhbCA9PT0gXCJib29sZWFuXCIpIHtcbiAgICBvdXQuY2Fub25pY2FsID0gY2Fub25pY2FsXG4gIH1cblxuICBjb25zdCB0YWdzUmF3ID0gcmVjb3JkLnRhZ3NcbiAgaWYgKHR5cGVvZiB0YWdzUmF3ID09PSBcInN0cmluZ1wiKSB7XG4gICAgY29uc3QgdGFncyA9IHVuaXFTb3J0ZWRTdHJpbmdzKFt0YWdzUmF3XSlcbiAgICBpZiAodGFncy5sZW5ndGggPiAwKSBvdXQudGFncyA9IHRhZ3NcbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHRhZ3NSYXcpKSB7XG4gICAgY29uc3QgdGFncyA9IHVuaXFTb3J0ZWRTdHJpbmdzKHRhZ3NSYXcuZmlsdGVyKCh4KTogeCBpcyBzdHJpbmcgPT4gdHlwZW9mIHggPT09IFwic3RyaW5nXCIpKVxuICAgIGlmICh0YWdzLmxlbmd0aCA+IDApIG91dC50YWdzID0gdGFnc1xuICB9XG5cbiAgcmV0dXJuIE9iamVjdC5rZXlzKG91dCkubGVuZ3RoID4gMCA/IChvdXQgYXMgVHJhaXRNZXRhKSA6IHVuZGVmaW5lZFxufVxuXG5jb25zdCBzdGFibGVTdHJpbmdpZnkgPSAobWV0YTogVHJhaXRNZXRhKTogc3RyaW5nID0+IHtcbiAgY29uc3Qgb3V0OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IHt9XG4gIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhtZXRhKS5zb3J0KClcbiAgZm9yIChjb25zdCBrIG9mIGtleXMpIHtcbiAgICBvdXRba10gPSAobWV0YSBhcyBhbnkpW2tdXG4gIH1cbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG91dClcbn1cblxuZXhwb3J0IGNvbnN0IGVxdWFscyA9IChhOiBUcmFpdE1ldGEgfCB1bmRlZmluZWQsIGI6IFRyYWl0TWV0YSB8IHVuZGVmaW5lZCk6IGJvb2xlYW4gPT4ge1xuICBpZiAoYSA9PT0gYikgcmV0dXJuIHRydWVcbiAgaWYgKCFhIHx8ICFiKSByZXR1cm4gZmFsc2VcbiAgcmV0dXJuIHN0YWJsZVN0cmluZ2lmeShhKSA9PT0gc3RhYmxlU3RyaW5naWZ5KGIpXG59XG5cbmV4cG9ydCB0eXBlIENhbm9uaWNhbE1lcmdlSW5wdXQgPSBSZWFkb25seTx7XG4gIHJlYWRvbmx5IG1ldGE/OiBUcmFpdE1ldGFcbiAgcmVhZG9ubHkgb3JpZ2luPzogc3RyaW5nXG4gIHJlYWRvbmx5IGNvbmZsaWN0cz86IFJlYWRvbmx5QXJyYXk8VHJhaXRNZXRhQ29uZmxpY3Q+XG59PlxuXG5leHBvcnQgdHlwZSBDYW5vbmljYWxNZXJnZVJlc3VsdCA9IFJlYWRvbmx5PHtcbiAgcmVhZG9ubHkgbWV0YT86IFRyYWl0TWV0YVxuICByZWFkb25seSBvcmlnaW4/OiBzdHJpbmdcbiAgcmVhZG9ubHkgY29uZmxpY3RzPzogUmVhZG9ubHlBcnJheTxUcmFpdE1ldGFDb25mbGljdD5cbn0+XG5cbmV4cG9ydCBjb25zdCBtZXJnZUNhbm9uaWNhbCA9IChcbiAgY3VycmVudDogQ2Fub25pY2FsTWVyZ2VJbnB1dCxcbiAgaW5jb21pbmc6IFJlYWRvbmx5PHsgcmVhZG9ubHkgb3JpZ2luOiBzdHJpbmc7IHJlYWRvbmx5IG1ldGE6IFRyYWl0TWV0YSB9Pixcbik6IENhbm9uaWNhbE1lcmdlUmVzdWx0ID0+IHtcbiAgY29uc3QgZXhpc3RpbmcgPSBjdXJyZW50Lm1ldGFcbiAgaWYgKCFleGlzdGluZykge1xuICAgIHJldHVybiB7XG4gICAgICBtZXRhOiBpbmNvbWluZy5tZXRhLFxuICAgICAgb3JpZ2luOiBpbmNvbWluZy5vcmlnaW4sXG4gICAgICBjb25mbGljdHM6IGN1cnJlbnQuY29uZmxpY3RzLFxuICAgIH1cbiAgfVxuXG4gIGlmIChlcXVhbHMoZXhpc3RpbmcsIGluY29taW5nLm1ldGEpKSB7XG4gICAgcmV0dXJuIGN1cnJlbnRcbiAgfVxuXG4gIGNvbnN0IGNvbmZsaWN0czogQXJyYXk8VHJhaXRNZXRhQ29uZmxpY3Q+ID0gW1xuICAgIC4uLigoY3VycmVudC5jb25mbGljdHMgPz8gW10pIGFzIFJlYWRvbmx5QXJyYXk8VHJhaXRNZXRhQ29uZmxpY3Q+KSxcbiAgXVxuXG4gIGNvbnN0IHB1c2ggPSAoY29uZmxpY3Q6IFRyYWl0TWV0YUNvbmZsaWN0KTogdm9pZCA9PiB7XG4gICAgY29uc3QgZXhpc3RzID0gY29uZmxpY3RzLnNvbWUoXG4gICAgICAoYykgPT4gYy5vcmlnaW4gPT09IGNvbmZsaWN0Lm9yaWdpbiAmJiBlcXVhbHMoYy5tZXRhLCBjb25mbGljdC5tZXRhKSxcbiAgICApXG4gICAgaWYgKCFleGlzdHMpIGNvbmZsaWN0cy5wdXNoKGNvbmZsaWN0KVxuICB9XG5cbiAgY29uc3QgZXhpc3RpbmdDYW5vbmljYWwgPSBleGlzdGluZy5jYW5vbmljYWwgPT09IHRydWVcbiAgY29uc3QgaW5jb21pbmdDYW5vbmljYWwgPSBpbmNvbWluZy5tZXRhLmNhbm9uaWNhbCA9PT0gdHJ1ZVxuXG4gIGlmICghZXhpc3RpbmdDYW5vbmljYWwgJiYgaW5jb21pbmdDYW5vbmljYWwpIHtcbiAgICBwdXNoKHtcbiAgICAgIG9yaWdpbjogY3VycmVudC5vcmlnaW4gPz8gXCJ1bmtub3duXCIsXG4gICAgICBtZXRhOiBleGlzdGluZyxcbiAgICB9KVxuICAgIHJldHVybiB7XG4gICAgICBtZXRhOiBpbmNvbWluZy5tZXRhLFxuICAgICAgb3JpZ2luOiBpbmNvbWluZy5vcmlnaW4sXG4gICAgICBjb25mbGljdHMsXG4gICAgfVxuICB9XG5cbiAgcHVzaCh7XG4gICAgb3JpZ2luOiBpbmNvbWluZy5vcmlnaW4sXG4gICAgbWV0YTogaW5jb21pbmcubWV0YSxcbiAgfSlcblxuICByZXR1cm4ge1xuICAgIG1ldGE6IGV4aXN0aW5nLFxuICAgIG9yaWdpbjogY3VycmVudC5vcmlnaW4gPz8gaW5jb21pbmcub3JpZ2luLFxuICAgIGNvbmZsaWN0cyxcbiAgfVxufVxuIiwgImltcG9ydCB0eXBlIHsgU2NoZW1hIH0gZnJvbSBcImVmZmVjdFwiXG5pbXBvcnQgdHlwZSB7IFN0YXRlQXRQYXRoLCBTdGF0ZUZpZWxkUGF0aCB9IGZyb20gXCIuL2ZpZWxkLXBhdGguanNcIlxuaW1wb3J0ICogYXMgTWV0YSBmcm9tIFwiLi9tZXRhLmpzXCJcblxuLy8gU3RhdGVUcmFpdCBjb3JlIG1vZGVsXHUzMDAyXG4vLyBcdTUxNzdcdTRGNTNcdTVCNTdcdTZCQjVcdThCRURcdTRFNDlcdTRFMEUgZGF0YS1tb2RlbC5tZCAvIHJlZmVyZW5jZXMvc3RhdGUtdHJhaXQtY29yZS5tZCBcdTRGRERcdTYzMDFcdTVCRjlcdTlGNTBcdTMwMDJcblxuLyoqXG4gKiBTdGF0ZVRyYWl0U3BlYzxTPlx1RkYxQVxuICogLSBNb2R1bGUgXHU1NkZFXHU3RUI4XHU0RTJEIHRyYWl0cyBcdTY5RkRcdTRGNERcdTc2ODRcdTY4MDdcdTUxQzZcdTVGNjJcdTYwMDFcdUZGMUJcbiAqIC0ga2V5IFx1NTNENyBTdGF0ZUZpZWxkUGF0aDxTPiBcdTdFQTZcdTY3NUZcdUZGMEN2YWx1ZSBcdTRFM0FcdTVCRjlcdTVFOTQgc2NvcGUgXHU3Njg0XHU1OEYwXHU2NjBFXHVGRjA4RW50cnkgLyBOb2RlIC8gTGlzdFx1RkYwOVx1MzAwMlxuICovXG5leHBvcnQgdHlwZSBTdGF0ZVRyYWl0U3BlYzxTPiA9IFMgZXh0ZW5kcyBvYmplY3RcbiAgPyB7XG4gICAgICBbUGF0aCBpbiBTdGF0ZUZpZWxkUGF0aDxTPiB8IFwiJHJvb3RcIl0/OiBTdGF0ZVRyYWl0U3BlY1ZhbHVlPFMsIFBhdGg+XG4gICAgfVxuICA6IG5ldmVyXG5cbmV4cG9ydCB0eXBlIFN0YXRlVHJhaXRLaW5kID0gXCJjb21wdXRlZFwiIHwgXCJzb3VyY2VcIiB8IFwibGlua1wiIHwgXCJjaGVja1wiXG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcHV0ZWRNZXRhPFMsIFA+IHtcbiAgLyoqXG4gICAqIFx1NjYzRVx1NUYwRlx1NEY5RFx1OEQ1Nlx1NUI1N1x1NkJCNVx1OERFRlx1NUY4NFx1OTZDNlx1NTQwOFx1RkYwOFx1NUZDNVx1OTg3Qlx1RkYwOVx1RkYxQVxuICAgKlxuICAgKiAtIFx1NUJGOVx1NEU4RSBSb290IFx1ODlDNFx1NTIxOVx1RkYxQWRlcHMgXHU0RTNBIFN0YXRlRmllbGRQYXRoPFN0YXRlPlx1RkYxQlxuICAgKiAtIFx1NUJGOVx1NEU4RSBsaXN0Lml0ZW0gc2NvcGVcdUZGMUFkZXBzIFx1NEUzQSBTdGF0ZUZpZWxkUGF0aDxJdGVtPlx1RkYwOFx1NzZGOFx1NUJGOVx1OERFRlx1NUY4NFx1RkYwQ2J1aWxkIFx1OTYzNlx1NkJCNVx1NEYxQVx1NTI0RFx1N0YwMFx1NTMxNlx1RkYwOVx1MzAwMlxuICAgKi9cbiAgcmVhZG9ubHkgZGVwczogUmVhZG9ubHlBcnJheTxTdGF0ZUZpZWxkUGF0aDxTPj5cbiAgcmVhZG9ubHkgZGVyaXZlOiAoc3RhdGU6IFJlYWRvbmx5PFM+KSA9PiBTdGF0ZUF0UGF0aDxTLCBQPlxuICAvKipcbiAgICogXHU1M0VGXHU5MDA5XHVGRjFBXHU3QjQ5XHU0RUY3XHU1MjI0XHU1QjlBXHVGRjA4XHU3NTI4XHU0RThFXHU4REYzXHU4RkM3XHU2NUUwXHU1M0Q4XHU1MzE2XHU1MTk5XHU1NkRFXHVGRjA5XHUzMDAyXG4gICAqL1xuICByZWFkb25seSBlcXVhbHM/OiAocHJldjogU3RhdGVBdFBhdGg8UywgUD4sIG5leHQ6IFN0YXRlQXRQYXRoPFMsIFA+KSA9PiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU291cmNlTWV0YTxTLCBQPiB7XG4gIHJlYWRvbmx5IGRlcHM6IFJlYWRvbmx5QXJyYXk8U3RhdGVGaWVsZFBhdGg8Uz4+XG4gIC8qKlxuICAgKiBcdTkwM0JcdThGOTFcdThENDRcdTZFOTBcdTY4MDdcdThCQzZcdUZGMDhcdTU5ODIgXCJ1c2VyL3Byb2ZpbGVcIlx1RkYwOVx1MzAwMlxuICAgKlxuICAgKiAtIFN0YXRlVHJhaXQuc291cmNlIERTTCBcdTRFMkRcdTc2ODQgYHJlc291cmNlYCBcdTVCNTdcdTZCQjVcdTU3MjggYnVpbGQgXHU5NjM2XHU2QkI1XHU0RjFBXHU4NDNEXHU1NzI4XHU2QjY0XHU1OTA0XHVGRjFCXG4gICAqIC0gZGF0YS1tb2RlbC5tZCBcdTRFMkRcdThCQjBcdTRFM0EgcmVzb3VyY2VJZFx1RkYwQ1x1OEZEOVx1OTFDQ1x1NkNCRlx1NzUyOCBEU0wgXHU1NDdEXHU1NDBEXHU5MDdGXHU1MTREXHU2REY3XHU2REM2XHUzMDAyXG4gICAqL1xuICByZWFkb25seSByZXNvdXJjZTogc3RyaW5nXG4gIC8qKlxuICAgKiBcdTRFQ0VcdTVCOENcdTY1NzQgU3RhdGUgXHU4QkExXHU3Qjk3XHU4QkJGXHU5NUVFXHU4QkU1XHU4RDQ0XHU2RTkwXHU2MjQwXHU5NzAwIGtleSBcdTc2ODRcdTg5QzRcdTUyMTlcdTMwMDJcbiAgICpcbiAgICogLSBcdTUxNDFcdThCQjhcdThGRDRcdTU2REUgdW5kZWZpbmVkXHVGRjFBXHU4ODY4XHU3OTNBXHU4QkU1XHU4RDQ0XHU2RTkwXHU1NzI4XHU1RjUzXHU1MjREIHN0YXRlIFx1NEUwQlx1NjcyQVx1NkZDMFx1NkQzQlx1RkYwOFx1NUU5NFx1NTZERVx1NjUzNlx1NEUzQSBpZGxlXHVGRjA5XHUzMDAyXG4gICAqL1xuICByZWFkb25seSBrZXk6IChzdGF0ZTogUmVhZG9ubHk8Uz4pID0+IHVua25vd25cbiAgcmVhZG9ubHkgdHJpZ2dlcnM/OiBSZWFkb25seUFycmF5PFwib25Nb3VudFwiIHwgXCJvblZhbHVlQ2hhbmdlXCIgfCBcIm1hbnVhbFwiPlxuICByZWFkb25seSBkZWJvdW5jZU1zPzogbnVtYmVyXG4gIHJlYWRvbmx5IGNvbmN1cnJlbmN5PzogXCJzd2l0Y2hcIiB8IFwiZXhoYXVzdC10cmFpbGluZ1wiXG4gIC8qKlxuICAgKiBcdTc1MjhcdTRFOEUgRGV2dG9vbHMvXHU2NTg3XHU2ODYzXHU3Njg0XHU1M0VGXHU1RThGXHU1MjE3XHU1MzE2XHU1MTQzXHU0RkUxXHU2MDZGXHVGRjA4XHU3NjdEXHU1NDBEXHU1MzU1XHU1QjU3XHU2QkI1XHVGRjA5XHUzMDAyXG4gICAqL1xuICByZWFkb25seSBtZXRhPzogTWV0YS5UcmFpdE1ldGFcbiAgLyoqXG4gICAqIFx1OTg4NFx1NzU1OVx1RkYxQVx1NTcyOCBidWlsZCBcdTk2MzZcdTZCQjVcdTUzRUZcdTU4NkJcdTUxNDVcdThCRTUgVHJhaXQgXHU2MjQwXHU1NzI4XHU1QjU3XHU2QkI1XHU4REVGXHU1Rjg0XHVGRjBDXHU0RkJGXHU0RThFXHU4QzAzXHU4QkQ1XHUzMDAyXG4gICAqL1xuICByZWFkb25seSBfZmllbGRQYXRoPzogUFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIExpbmtNZXRhPFM+IHtcbiAgLyoqXG4gICAqIFx1NkU5MFx1NUI1N1x1NkJCNVx1OERFRlx1NUY4NFx1RkYwQ1x1NTQwQ1x1NjgzN1x1NTNENyBTdGF0ZUZpZWxkUGF0aDxTPiBcdTdFQTZcdTY3NUZcdTMwMDJcbiAgICovXG4gIHJlYWRvbmx5IGZyb206IFN0YXRlRmllbGRQYXRoPFM+XG59XG5cbmV4cG9ydCB0eXBlIENoZWNrUnVsZTxJbnB1dCA9IHVua25vd24sIEN0eCA9IHVua25vd24+ID1cbiAge1xuICAgIHJlYWRvbmx5IGRlcHM6IFJlYWRvbmx5QXJyYXk8c3RyaW5nPlxuICAgIHJlYWRvbmx5IHZhbGlkYXRlOiAoaW5wdXQ6IElucHV0LCBjdHg6IEN0eCkgPT4gdW5rbm93blxuICAgIHJlYWRvbmx5IG1ldGE/OiBNZXRhLlRyYWl0TWV0YVxuICB9XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2hlY2tNZXRhPElucHV0ID0gdW5rbm93biwgQ3R4ID0gdW5rbm93bj4ge1xuICAvKipcbiAgICogXHU1NDdEXHU1NDBEXHU4OUM0XHU1MjE5XHU5NkM2XHU1NDA4XHVGRjA4XHU4QkIwXHU1RjU1XHU3NTI4XHU0RThFXHU3ODZFXHU1QjlBXHU2MDI3XHU1NDA4XHU1RTc2XHU0RTBFXHU4QkNBXHU2NUFEXHU1QzU1XHU3OTNBXHVGRjA5XHUzMDAyXG4gICAqL1xuICByZWFkb25seSBydWxlczogUmVhZG9ubHk8UmVjb3JkPHN0cmluZywgQ2hlY2tSdWxlPElucHV0LCBDdHg+Pj5cbiAgLyoqXG4gICAqIFx1OTUxOVx1OEJFRlx1NjgxMVx1NTE5OVx1NTZERVx1RkYwOFBoYXNlIDJcdUZGMUFcdTRFQzVcdTU2RkFcdTUzMTZcdTdFRDNcdTY3ODRcdUZGMUJcdTUxNzdcdTRGNTNcdTUxOTlcdTU2REVcdThCRURcdTRFNDlcdTU3MjhcdTU0MEVcdTdFRUQgUGhhc2UgXHU1QjlFXHU3M0IwXHVGRjA5XHUzMDAyXG4gICAqL1xuICByZWFkb25seSB3cml0ZWJhY2s/OiB7XG4gICAgcmVhZG9ubHkga2luZDogXCJlcnJvcnNcIlxuICAgIHJlYWRvbmx5IHBhdGg/OiBzdHJpbmdcbiAgfVxufVxuXG4vKipcbiAqIFN0YXRlVHJhaXRFbnRyeTxTLCBQPlx1RkYxQVxuICogLSBcdTg4NjhcdTc5M0FcdTY3RDBcdTRFMkFcdTVCNTdcdTZCQjVcdThERUZcdTVGODQgUCBcdTRFMEFcdTc2ODRcdTRFMDBcdTk4NzkgVHJhaXQgXHU5MTREXHU3RjZFXHVGRjFCXG4gKiAtIGtpbmQgXHU0RTBFIG1ldGEgXHU2MjEwXHU1QkY5XHU1MUZBXHU3M0IwXHVGRjBDXHU3NTI4XHU0RThFXHU1NzI4IGJ1aWxkL2luc3RhbGwgXHU5NjM2XHU2QkI1XHU1MjA2XHU2RDNFXHU4ODRDXHU0RTNBXHUzMDAyXG4gKi9cbmV4cG9ydCB0eXBlIFN0YXRlVHJhaXRFbnRyeTxcbiAgUyA9IHVua25vd24sXG4gIFAgZXh0ZW5kcyBzdHJpbmcgPSBTdGF0ZUZpZWxkUGF0aDxTPlxuPiA9XG4gIHwge1xuICAgICAgcmVhZG9ubHkgZmllbGRQYXRoOiBQXG4gICAgICByZWFkb25seSBraW5kOiBcImNvbXB1dGVkXCJcbiAgICAgIHJlYWRvbmx5IG1ldGE6IENvbXB1dGVkTWV0YTxTLCBQPlxuICAgIH1cbiAgfCB7XG4gICAgICByZWFkb25seSBmaWVsZFBhdGg6IFBcbiAgICAgIHJlYWRvbmx5IGtpbmQ6IFwic291cmNlXCJcbiAgICAgIHJlYWRvbmx5IG1ldGE6IFNvdXJjZU1ldGE8UywgUD5cbiAgICB9XG4gIHwge1xuICAgICAgcmVhZG9ubHkgZmllbGRQYXRoOiBQXG4gICAgICByZWFkb25seSBraW5kOiBcImxpbmtcIlxuICAgICAgcmVhZG9ubHkgbWV0YTogTGlua01ldGE8Uz5cbiAgICB9XG4gIHwge1xuICAgICAgcmVhZG9ubHkgZmllbGRQYXRoOiBQXG4gICAgICByZWFkb25seSBraW5kOiBcImNoZWNrXCJcbiAgICAgIHJlYWRvbmx5IG1ldGE6IENoZWNrTWV0YTx1bmtub3duLCB1bmtub3duPlxuICAgIH1cblxuZXhwb3J0IGludGVyZmFjZSBTdGF0ZVRyYWl0Tm9kZTxJbnB1dCA9IHVua25vd24sIEN0eCA9IHVua25vd24+IHtcbiAgcmVhZG9ubHkgX3RhZzogXCJTdGF0ZVRyYWl0Tm9kZVwiXG4gIHJlYWRvbmx5IGNvbXB1dGVkPzpcbiAgICB8IFN0YXRlVHJhaXRFbnRyeTxJbnB1dCwgYW55PlxuICAgIHwgUmVhZG9ubHk8UmVjb3JkPHN0cmluZywgU3RhdGVUcmFpdEVudHJ5PElucHV0LCBhbnk+Pj5cbiAgcmVhZG9ubHkgc291cmNlPzpcbiAgICB8IFN0YXRlVHJhaXRFbnRyeTxJbnB1dCwgYW55PlxuICAgIHwgUmVhZG9ubHk8UmVjb3JkPHN0cmluZywgU3RhdGVUcmFpdEVudHJ5PElucHV0LCBhbnk+Pj5cbiAgcmVhZG9ubHkgbGluaz86XG4gICAgfCBTdGF0ZVRyYWl0RW50cnk8SW5wdXQsIGFueT5cbiAgICB8IFJlYWRvbmx5PFJlY29yZDxzdHJpbmcsIFN0YXRlVHJhaXRFbnRyeTxJbnB1dCwgYW55Pj4+XG4gIHJlYWRvbmx5IGNoZWNrPzogUmVhZG9ubHk8UmVjb3JkPHN0cmluZywgQ2hlY2tSdWxlPElucHV0LCBDdHg+Pj5cbiAgcmVhZG9ubHkgbWV0YT86IE1ldGEuVHJhaXRNZXRhXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RhdGVUcmFpdExpc3Q8SXRlbSA9IHVua25vd24+IHtcbiAgcmVhZG9ubHkgX3RhZzogXCJTdGF0ZVRyYWl0TGlzdFwiXG4gIHJlYWRvbmx5IGl0ZW0/OiBTdGF0ZVRyYWl0Tm9kZTxJdGVtLCBhbnk+XG4gIHJlYWRvbmx5IGxpc3Q/OiBTdGF0ZVRyYWl0Tm9kZTxSZWFkb25seUFycmF5PEl0ZW0+LCBhbnk+XG4gIHJlYWRvbmx5IGlkZW50aXR5SGludD86IHtcbiAgICByZWFkb25seSB0cmFja0J5Pzogc3RyaW5nXG4gIH1cbn1cblxuZXhwb3J0IHR5cGUgU3RhdGVUcmFpdFNwZWNWYWx1ZTxTLCBQIGV4dGVuZHMgc3RyaW5nPiA9XG4gIHwgU3RhdGVUcmFpdEVudHJ5PFMsIFA+XG4gIHwgU3RhdGVUcmFpdE5vZGU8YW55LCBhbnk+XG4gIHwgU3RhdGVUcmFpdExpc3Q8YW55PlxuXG4vKipcbiAqIFN0YXRlVHJhaXRGaWVsZFx1RkYxQVxuICogLSBcdTg4NjhcdTc5M0EgU3RhdGUgXHU0RTJEXHU3Njg0XHU0RTAwXHU0RTJBXHU1QjU3XHU2QkI1XHU4MjgyXHU3MEI5XHVGRjA4XHU0RTBEXHU4QkJBXHU2NjJGXHU1NDI2XHU2MzAyIFRyYWl0XHVGRjA5XHVGRjFCXG4gKiAtIFx1NzUzMSBidWlsZCBcdTk2MzZcdTZCQjVcdTRFQ0UgU3RhdGVUcmFpdFNwZWMgXHU1RjUyXHU0RTAwXHU1MzE2XHU4MDBDXHU2NzY1XHUzMDAyXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3RhdGVUcmFpdEZpZWxkIHtcbiAgcmVhZG9ubHkgaWQ6IHN0cmluZ1xuICByZWFkb25seSBwYXRoOiBzdHJpbmdcbiAgcmVhZG9ubHkgZGlzcGxheU5hbWU/OiBzdHJpbmdcbiAgcmVhZG9ubHkgdmFsdWVUeXBlPzogc3RyaW5nXG4gIHJlYWRvbmx5IHRyYWl0czogUmVhZG9ubHlBcnJheTxTdGF0ZVRyYWl0RmllbGRUcmFpdD5cbn1cblxuLyoqXG4gKiBTdGF0ZVRyYWl0RmllbGRUcmFpdFx1RkYxQVxuICogLSBcdTY3RDBcdTRFMkFcdTVCNTdcdTZCQjVcdTRFMEFcdTc2ODRcdTRFMDBcdTk4NzkgVHJhaXRcdUZGMDhjb21wdXRlZCAvIHNvdXJjZSAvIGxpbmtcdUZGMDlcdTc2ODRcdTdFRDNcdTY3ODRcdTUzMTZcdTYzQ0ZcdThGRjBcdUZGMUJcbiAqIC0gbWV0YSBcdTRFMEUgU3RhdGVUcmFpdEVudHJ5Lm1ldGEgXHU1QkY5XHU5RjUwXHVGRjBDZGVwcyBcdTg4NjhcdTc5M0FcdThCRTUgVHJhaXQgXHU2MjQwXHU0RjlEXHU4RDU2XHU3Njg0XHU1QjU3XHU2QkI1XHU4REVGXHU1Rjg0XHU5NkM2XHU1NDA4XHUzMDAyXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3RhdGVUcmFpdEZpZWxkVHJhaXQge1xuICByZWFkb25seSBmaWVsZElkOiBzdHJpbmdcbiAgcmVhZG9ubHkga2luZDogU3RhdGVUcmFpdEtpbmRcbiAgcmVhZG9ubHkgbWV0YTpcbiAgICB8IENvbXB1dGVkTWV0YTx1bmtub3duLCBzdHJpbmc+XG4gICAgfCBTb3VyY2VNZXRhPHVua25vd24sIHN0cmluZz5cbiAgICB8IExpbmtNZXRhPHVua25vd24+XG4gICAgfCBDaGVja01ldGE8dW5rbm93biwgdW5rbm93bj5cbiAgcmVhZG9ubHkgZGVwczogUmVhZG9ubHlBcnJheTxzdHJpbmc+XG59XG5cbi8qKlxuICogU3RhdGVUcmFpdFJlc291cmNlXHVGRjFBXG4gKiAtIFx1NjNDRlx1OEZGMCBzb3VyY2UgXHU1NzhCIFRyYWl0IFx1NjI0MFx1NEY5RFx1OEQ1Nlx1NzY4NFx1OTAzQlx1OEY5MVx1OEQ0NFx1NkU5MFx1NTE0M1x1NEZFMVx1NjA2Rlx1RkYxQlxuICogLSBSZXNvdXJjZVNwZWMgXHU3Njg0XHU1MTc3XHU0RjUzXHU1QjlFXHU3M0IwXHU3NTMxIFJlc291cmNlIFx1NTQ3RFx1NTQwRFx1N0E3QVx1OTVGNFx1OEQxRlx1OEQyM1x1RkYwQ1x1OEZEOVx1OTFDQ1x1NTNFQVx1NEZERFx1NzU1OSBUcmFpdCBcdTg5QzZcdTg5RDJcdTc2ODRcdTRGOURcdThENTZcdTRGRTFcdTYwNkZcdTMwMDJcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTdGF0ZVRyYWl0UmVzb3VyY2Uge1xuICByZWFkb25seSByZXNvdXJjZUlkOiBzdHJpbmdcbiAgcmVhZG9ubHkga2V5U2VsZWN0b3I6IHN0cmluZ1xuICByZWFkb25seSBrZXlFeGFtcGxlPzogdW5rbm93blxuICByZWFkb25seSBvd25lckZpZWxkczogUmVhZG9ubHlBcnJheTxzdHJpbmc+XG4gIHJlYWRvbmx5IG1ldGE/OiBNZXRhLlRyYWl0TWV0YVxuICByZWFkb25seSBtZXRhT3JpZ2luPzogc3RyaW5nXG4gIHJlYWRvbmx5IG1ldGFDb25mbGljdHM/OiBSZWFkb25seUFycmF5PE1ldGEuVHJhaXRNZXRhQ29uZmxpY3Q+XG59XG5cbi8qKlxuICogR3JhcGggTm9kZSAvIEVkZ2VcdUZGMUFcbiAqIC0gXHU4MjgyXHU3MEI5XHU5MDFBXHU1RTM4XHU1QkY5XHU1RTk0XHU0RTAwXHU0RTJBXHU1QjU3XHU2QkI1XHVGRjFCXG4gKiAtIFx1OEZCOVx1ODg2OFx1NzkzQVx1NUI1N1x1NkJCNVx1NEU0Qlx1OTVGNFx1NjIxNlx1NUI1N1x1NkJCNVx1NEUwRVx1OEQ0NFx1NkU5MFx1NEU0Qlx1OTVGNFx1NzY4NFx1NEY5RFx1OEQ1Nlx1NTE3M1x1N0NGQlx1MzAwMlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFN0YXRlVHJhaXRHcmFwaE5vZGUge1xuICByZWFkb25seSBpZDogc3RyaW5nXG4gIHJlYWRvbmx5IGZpZWxkOiBTdGF0ZVRyYWl0RmllbGRcbiAgcmVhZG9ubHkgdHJhaXRzOiBSZWFkb25seUFycmF5PFN0YXRlVHJhaXRGaWVsZFRyYWl0PlxuICByZWFkb25seSBtZXRhPzogTWV0YS5UcmFpdE1ldGFcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdGF0ZVRyYWl0R3JhcGhFZGdlIHtcbiAgcmVhZG9ubHkgaWQ6IHN0cmluZ1xuICByZWFkb25seSBmcm9tOiBzdHJpbmdcbiAgcmVhZG9ubHkgdG86IHN0cmluZ1xuICByZWFkb25seSBraW5kOiBcImNvbXB1dGVkXCIgfCBcImxpbmtcIiB8IFwic291cmNlLWRlcFwiIHwgXCJjaGVjay1kZXBcIlxufVxuXG4vKipcbiAqIFN0YXRlVHJhaXRHcmFwaFx1RkYxQVxuICogLSBTdGF0ZVRyYWl0IFx1NUYxNVx1NjRDRVx1NzY4NFx1N0VEM1x1Njc4NFx1ODlDNlx1NTZGRVx1RkYwQ1x1NEUwMFx1NUYyMFx1NTMwNVx1NTQyQlx1ODI4Mlx1NzBCOVx1NEUwRVx1NEY5RFx1OEQ1Nlx1OEZCOVx1NzY4NFx1NTZGRVx1RkYxQlxuICogLSBcdTRGOUIgRGV2dG9vbHMgLyBTdHVkaW8gXHU0RTBFIFJ1bnRpbWUgXHU1MDVBXHU3RUQzXHU2Nzg0XHU1MjA2XHU2NzkwXHU0RTBFXHU1M0VGXHU4OUM2XHU1MzE2XHU0RjdGXHU3NTI4XHUzMDAyXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3RhdGVUcmFpdEdyYXBoIHtcbiAgcmVhZG9ubHkgX3RhZzogXCJTdGF0ZVRyYWl0R3JhcGhcIlxuICByZWFkb25seSBub2RlczogUmVhZG9ubHlBcnJheTxTdGF0ZVRyYWl0R3JhcGhOb2RlPlxuICByZWFkb25seSBlZGdlczogUmVhZG9ubHlBcnJheTxTdGF0ZVRyYWl0R3JhcGhFZGdlPlxuICByZWFkb25seSByZXNvdXJjZXM6IFJlYWRvbmx5QXJyYXk8U3RhdGVUcmFpdFJlc291cmNlPlxuICByZWFkb25seSBtZXRhPzoge1xuICAgIHJlYWRvbmx5IG1vZHVsZUlkPzogc3RyaW5nXG4gICAgcmVhZG9ubHkgdmVyc2lvbj86IHN0cmluZ1xuICB9XG59XG5cbi8qKlxuICogU3RhdGVUcmFpdFBsYW5TdGVwXHVGRjFBXG4gKiAtIFN0YXRlVHJhaXQuaW5zdGFsbCAvIFJ1bnRpbWUgXHU2MjY3XHU4ODRDXHU2NUY2XHU3Njg0XHU2NzAwXHU1QzBGXHU2MzA3XHU0RUU0XHU1MzU1XHU1MTQzXHVGRjFCXG4gKiAtIFx1NzUzMSBHcmFwaCBcdTYzQThcdTVCRkNcdTgwMENcdTY3NjVcdUZGMENcdTc1MjhcdTRFOEVcdTU3MjhcdThGRDBcdTg4NENcdTY1RjZcdTVCODlcdTg4QzUgd2F0Y2hlciBcdTYyMTZcdTg5RTZcdTUzRDFcdTU5MTZcdTkwRThcdThDMDNcdTc1MjhcdTMwMDJcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTdGF0ZVRyYWl0UGxhblN0ZXAge1xuICByZWFkb25seSBpZDogc3RyaW5nXG4gIHJlYWRvbmx5IGtpbmQ6IFwiY29tcHV0ZWQtdXBkYXRlXCIgfCBcImxpbmstcHJvcGFnYXRlXCIgfCBcInNvdXJjZS1yZWZyZXNoXCIgfCBcImNoZWNrLXZhbGlkYXRlXCJcbiAgcmVhZG9ubHkgdGFyZ2V0RmllbGRQYXRoPzogc3RyaW5nXG4gIHJlYWRvbmx5IHNvdXJjZUZpZWxkUGF0aHM/OiBSZWFkb25seUFycmF5PHN0cmluZz5cbiAgcmVhZG9ubHkgcmVzb3VyY2VJZD86IHN0cmluZ1xuICByZWFkb25seSBrZXlTZWxlY3RvcklkPzogc3RyaW5nXG4gIHJlYWRvbmx5IGRlYnVnSW5mbz86IHtcbiAgICByZWFkb25seSBncmFwaE5vZGVJZD86IHN0cmluZ1xuICAgIHJlYWRvbmx5IGdyYXBoRWRnZUlkPzogc3RyaW5nXG4gIH1cbn1cblxuLyoqXG4gKiBTdGF0ZVRyYWl0UGxhblx1RkYxQVxuICogLSBcdTZDNDdcdTYwM0JcdTY3RDBcdTZBMjFcdTU3NTdcdTYyNDBcdTY3MDkgVHJhaXQgXHU4ODRDXHU0RTNBXHU3Njg0XHU2MjY3XHU4ODRDXHU4QkExXHU1MjEyXHVGRjFCXG4gKiAtIGluc3RhbGwgXHU5NjM2XHU2QkI1XHU2MzA5IFBsYW4gXHU1QzA2XHU4ODRDXHU0RTNBXHU2MzAyXHU4RjdEXHU1MjMwIEJvdW5kIEFQSSAvIEVmZmVjdE9wIFx1N0JBMVx1OTA1M1x1NEUwQVx1MzAwMlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFN0YXRlVHJhaXRQbGFuIHtcbiAgcmVhZG9ubHkgX3RhZzogXCJTdGF0ZVRyYWl0UGxhblwiXG4gIHJlYWRvbmx5IG1vZHVsZUlkPzogc3RyaW5nXG4gIHJlYWRvbmx5IHN0ZXBzOiBSZWFkb25seUFycmF5PFN0YXRlVHJhaXRQbGFuU3RlcD5cbiAgcmVhZG9ubHkgbWV0YT86IFJlY29yZDxzdHJpbmcsIHVua25vd24+XG59XG5cbi8qKlxuICogU3RhdGVUcmFpdFByb2dyYW08Uz5cdUZGMUFcbiAqIC0gU3RhdGVUcmFpdCBcdTVGMTVcdTY0Q0VcdTc2ODQgUHJvZ3JhbSBcdThGOTNcdTUxRkFcdUZGMENcdTY2MkYgUnVudGltZSAvIERldnRvb2xzIFx1NzY4NFx1N0VERlx1NEUwMFx1NTE2NVx1NTNFM1x1RkYxQlxuICogLSBzdGF0ZVNjaGVtYSBcdTRFMEUgc3BlYyBcdTRGRERcdTc1NTlcdTUzOUZcdTU5Q0JcdThGOTNcdTUxNjVcdUZGMENncmFwaC9wbGFuIFx1NEUzQVx1NTE4NVx1OTBFOCBJUlx1MzAwMlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFN0YXRlVHJhaXRQcm9ncmFtPFM+IHtcbiAgcmVhZG9ubHkgc3RhdGVTY2hlbWE6IFNjaGVtYS5TY2hlbWE8UywgYW55PlxuICByZWFkb25seSBzcGVjOiBTdGF0ZVRyYWl0U3BlYzxTPlxuICAvKipcbiAgICogUHJvZ3JhbS5lbnRyaWVzXHVGRjFBXG4gICAqIC0gYnVpbGQgXHU5NjM2XHU2QkI1XHU0RUNFIHNwZWNcdUZGMDhcdTU0MkIgbm9kZS9saXN0LyRyb290XHVGRjA5XHU1RjUyXHU0RTAwXHU1MzE2XHU1Rjk3XHU1MjMwXHU3Njg0XHU2NzAwXHU1QzBGXHU4OUM0XHU1MjE5XHU5NkM2XHU1NDA4XHVGRjFCXG4gICAqIC0gUGhhc2UgMiBcdTUxNDhcdTRGRERcdThCQzFcdTIwMUNcdTUzRUZcdThCRkJcdTUzRUZcdThCQ0FcdTY1QURcdTc2ODRcdTdFRDNcdTY3ODRcdTIwMURcdUZGMENcdTU0MEVcdTdFRUQgUGhhc2UgXHU2MjREXHU2M0E1XHU1MTY1XHU2MjY3XHU4ODRDXHU0RTBFXHU2NTM2XHU2NTVCXHU4QkVEXHU0RTQ5XHUzMDAyXG4gICAqL1xuICByZWFkb25seSBlbnRyaWVzOiBSZWFkb25seUFycmF5PFN0YXRlVHJhaXRFbnRyeTxhbnksIHN0cmluZz4+XG4gIHJlYWRvbmx5IGdyYXBoOiBTdGF0ZVRyYWl0R3JhcGhcbiAgcmVhZG9ubHkgcGxhbjogU3RhdGVUcmFpdFBsYW5cbn1cblxuLyoqXG4gKiBcdTRFQ0UgU3RhdGVUcmFpdFNwZWMgXHU2Nzg0XHU1RUZBXHU1RjUyXHU0RTAwXHU1MzE2XHU3Njg0IGVudHJ5IFx1NTIxN1x1ODg2OFx1MzAwMlxuICpcbiAqIC0gUGhhc2UgMlx1RkYxQVx1NjUyRlx1NjMwMSBub2RlL2xpc3QvJHJvb3QgXHU3Njg0XHU3RUQzXHU2Nzg0XHU1QzU1XHU1RjAwXHVGRjBDXHU1RTc2XHU1NzI4XHU1RkM1XHU4OTgxXHU2NUY2XHU4ODY1XHU1MTY4L1x1NTI0RFx1N0YwMFx1NTMxNiBmaWVsZFBhdGggXHU0RTBFIGRlcHNcdUZGMUJcbiAqIC0gXHU1NDBFXHU3RUVEIFBoYXNlIFx1NTNFRlx1NTcyOFx1NkI2NFx1NTkwNFx1NjI2OVx1NUM1NVx1NjgyMVx1OUE4Q1x1OTAzQlx1OEY5MVx1RkYwOFx1NEY4Qlx1NTk4Mlx1NjhDMFx1NkQ0Qlx1OTFDRFx1NTkwRFx1NUI5QVx1NEU0OVx1MzAwMVx1ODk4Nlx1NzZENlx1NjczQVx1NTIzNlx1N0I0OVx1RkYwOVx1MzAwMlxuICovXG5leHBvcnQgY29uc3Qgbm9ybWFsaXplU3BlYyA9IDxTPihcbiAgc3BlYzogU3RhdGVUcmFpdFNwZWM8Uz4sXG4pOiBSZWFkb25seUFycmF5PFN0YXRlVHJhaXRFbnRyeTxhbnksIHN0cmluZz4+ID0+IHtcbiAgY29uc3QgZW50cmllczogQXJyYXk8U3RhdGVUcmFpdEVudHJ5PGFueSwgc3RyaW5nPj4gPSBbXVxuXG4gIGNvbnN0IGlzTm9kZSA9ICh2YWx1ZTogdW5rbm93bik6IHZhbHVlIGlzIFN0YXRlVHJhaXROb2RlPGFueSwgYW55PiA9PlxuICAgIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiB2YWx1ZSAhPT0gbnVsbCAmJiAodmFsdWUgYXMgYW55KS5fdGFnID09PSBcIlN0YXRlVHJhaXROb2RlXCJcblxuICBjb25zdCBpc0xpc3QgPSAodmFsdWU6IHVua25vd24pOiB2YWx1ZSBpcyBTdGF0ZVRyYWl0TGlzdDxhbnk+ID0+XG4gICAgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHZhbHVlICE9PSBudWxsICYmICh2YWx1ZSBhcyBhbnkpLl90YWcgPT09IFwiU3RhdGVUcmFpdExpc3RcIlxuXG4gIGNvbnN0IGpvaW5QYXRoID0gKHByZWZpeDogc3RyaW5nLCBzdWZmaXg6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gICAgaWYgKCFwcmVmaXgpIHJldHVybiBzdWZmaXhcbiAgICBpZiAoIXN1ZmZpeCkgcmV0dXJuIHByZWZpeFxuICAgIHJldHVybiBgJHtwcmVmaXh9LiR7c3VmZml4fWBcbiAgfVxuXG4gIGNvbnN0IHByZWZpeERlcHMgPSAoXG4gICAgZGVwczogUmVhZG9ubHlBcnJheTxzdHJpbmc+IHwgdW5kZWZpbmVkLFxuICAgIHByZWZpeDogc3RyaW5nLFxuICApOiBSZWFkb25seUFycmF5PHN0cmluZz4gPT4ge1xuICAgIGlmICghZGVwcyB8fCBkZXBzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIFtdXG4gICAgcmV0dXJuIGRlcHMubWFwKChkKSA9PiAocHJlZml4ID8gam9pblBhdGgocHJlZml4LCBkKSA6IGQpKVxuICB9XG5cbiAgY29uc3Qgbm9ybWFsaXplRW50cnkgPSAoXG4gICAgZW50cnk6IFN0YXRlVHJhaXRFbnRyeTxhbnksIHN0cmluZz4sXG4gICAgZmllbGRQYXRoOiBzdHJpbmcsXG4gICAgZGVwUHJlZml4OiBzdHJpbmcsXG4gICk6IFN0YXRlVHJhaXRFbnRyeTxhbnksIHN0cmluZz4gPT4ge1xuICAgIGlmIChlbnRyeS5raW5kID09PSBcImNvbXB1dGVkXCIpIHtcbiAgICAgIGNvbnN0IG1ldGEgPSBlbnRyeS5tZXRhIGFzIGFueVxuICAgICAgY29uc3QgcmF3RGVwcyA9IG1ldGEuZGVwcyBhcyBSZWFkb25seUFycmF5PHN0cmluZz4gfCB1bmRlZmluZWRcbiAgICAgIGNvbnN0IGRlcHMgPVxuICAgICAgICByYXdEZXBzICE9PSB1bmRlZmluZWRcbiAgICAgICAgICA/IHByZWZpeERlcHMocmF3RGVwcywgZGVwUHJlZml4KVxuICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi4oZW50cnkgYXMgYW55KSxcbiAgICAgICAgZmllbGRQYXRoLFxuICAgICAgICBtZXRhOiB7IC4uLm1ldGEsIGRlcHMgfSxcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGVudHJ5LmtpbmQgPT09IFwic291cmNlXCIpIHtcbiAgICAgIGNvbnN0IG1ldGEgPSBlbnRyeS5tZXRhIGFzIGFueVxuICAgICAgY29uc3QgcmF3RGVwcyA9IG1ldGEuZGVwcyBhcyBSZWFkb25seUFycmF5PHN0cmluZz4gfCB1bmRlZmluZWRcbiAgICAgIGNvbnN0IGRlcHMgPVxuICAgICAgICByYXdEZXBzICE9PSB1bmRlZmluZWRcbiAgICAgICAgICA/IHByZWZpeERlcHMocmF3RGVwcywgZGVwUHJlZml4KVxuICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi4oZW50cnkgYXMgYW55KSxcbiAgICAgICAgZmllbGRQYXRoLFxuICAgICAgICBtZXRhOiB7IC4uLm1ldGEsIGRlcHMsIF9maWVsZFBhdGg6IGZpZWxkUGF0aCB9LFxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZW50cnkua2luZCA9PT0gXCJsaW5rXCIpIHtcbiAgICAgIGNvbnN0IG1ldGEgPSBlbnRyeS5tZXRhIGFzIGFueVxuICAgICAgY29uc3QgZnJvbSA9IHByZWZpeERlcHMoW21ldGEuZnJvbSBhcyBzdHJpbmddLCBkZXBQcmVmaXgpWzBdID8/IG1ldGEuZnJvbVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uKGVudHJ5IGFzIGFueSksXG4gICAgICAgIGZpZWxkUGF0aCxcbiAgICAgICAgbWV0YTogeyAuLi5tZXRhLCBmcm9tIH0sXG4gICAgICB9XG4gICAgfVxuICAgIC8vIGNoZWNrXHVGRjFBUGhhc2UgMiBcdTRFQzVcdThDMDNcdTY1NzQgZmllbGRQYXRoXHVGRjBDZGVwcyBcdTRFQ0RcdTc1MzEgbWV0YS5ydWxlcyBcdTU3MjggYnVpbGQgXHU5NjM2XHU2QkI1XHU2QzQ3XHU2MDNCXHUzMDAyXG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLihlbnRyeSBhcyBhbnkpLFxuICAgICAgZmllbGRQYXRoLFxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGV4cGFuZE5vZGUgPSAoXG4gICAgc2NvcGVJZDogc3RyaW5nLFxuICAgIGpvaW5QcmVmaXg6IHN0cmluZyxcbiAgICBub2RlOiBTdGF0ZVRyYWl0Tm9kZTxhbnksIGFueT4sXG4gICk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IGFkZEVudHJ5ID0gKHJlbGF0aXZlVGFyZ2V0OiBzdHJpbmcsIHJhdzogU3RhdGVUcmFpdEVudHJ5PGFueSwgc3RyaW5nPik6IHZvaWQgPT4ge1xuICAgICAgY29uc3QgcmVsID0gKHJhdyBhcyBhbnkpLmZpZWxkUGF0aCA/PyByZWxhdGl2ZVRhcmdldFxuICAgICAgY29uc3QgZmllbGRQYXRoID0gam9pblByZWZpeCA/IGpvaW5QYXRoKGpvaW5QcmVmaXgsIFN0cmluZyhyZWwpKSA6IFN0cmluZyhyZWwpXG4gICAgICBlbnRyaWVzLnB1c2gobm9ybWFsaXplRW50cnkocmF3LCBmaWVsZFBhdGgsIGpvaW5QcmVmaXgpKVxuICAgIH1cblxuICAgIGNvbnN0IGV4cGFuZE1heWJlUmVjb3JkID0gKFxuICAgICAgdmFsdWU6XG4gICAgICAgIHwgU3RhdGVUcmFpdEVudHJ5PGFueSwgYW55PlxuICAgICAgICB8IFJlYWRvbmx5PFJlY29yZDxzdHJpbmcsIFN0YXRlVHJhaXRFbnRyeTxhbnksIGFueT4+PlxuICAgICAgICB8IHVuZGVmaW5lZCxcbiAgICApOiB2b2lkID0+IHtcbiAgICAgIGlmICghdmFsdWUpIHJldHVyblxuICAgICAgaWYgKHR5cGVvZiAodmFsdWUgYXMgYW55KS5raW5kID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGFkZEVudHJ5KFwiXCIsIHZhbHVlIGFzIGFueSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBjb25zdCByZWNvcmQgPSB2YWx1ZSBhcyBSZWFkb25seTxSZWNvcmQ8c3RyaW5nLCBTdGF0ZVRyYWl0RW50cnk8YW55LCBhbnk+Pj5cbiAgICAgIGZvciAoY29uc3Qga2V5IGluIHJlY29yZCkge1xuICAgICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyZWNvcmQsIGtleSkpIGNvbnRpbnVlXG4gICAgICAgIGNvbnN0IGVudHJ5ID0gcmVjb3JkW2tleV1cbiAgICAgICAgaWYgKCFlbnRyeSkgY29udGludWVcbiAgICAgICAgYWRkRW50cnkoa2V5LCBlbnRyeSBhcyBhbnkpXG4gICAgICB9XG4gICAgfVxuXG4gICAgZXhwYW5kTWF5YmVSZWNvcmQobm9kZS5jb21wdXRlZClcbiAgICBleHBhbmRNYXliZVJlY29yZChub2RlLnNvdXJjZSlcbiAgICBleHBhbmRNYXliZVJlY29yZChub2RlLmxpbmspXG5cbiAgICBpZiAobm9kZS5jaGVjaykge1xuICAgICAgY29uc3QgcnVsZXM6IFJlY29yZDxzdHJpbmcsIENoZWNrUnVsZTxhbnksIGFueT4+ID0ge31cbiAgICAgIGZvciAoY29uc3QgbmFtZSBvZiBPYmplY3Qua2V5cyhub2RlLmNoZWNrKSkge1xuICAgICAgICBjb25zdCBydWxlID0gKG5vZGUuY2hlY2sgYXMgYW55KVtuYW1lXSBhcyBDaGVja1J1bGU8YW55LCBhbnk+XG4gICAgICAgIGlmICh0eXBlb2YgcnVsZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgcnVsZXNbbmFtZV0gPSBydWxlXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuICAgICAgICBpZiAocnVsZSAmJiB0eXBlb2YgcnVsZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgIGNvbnN0IG1ldGEgPSBNZXRhLnNhbml0aXplKChydWxlIGFzIGFueSkubWV0YSlcbiAgICAgICAgICBydWxlc1tuYW1lXSA9IHtcbiAgICAgICAgICAgIC4uLnJ1bGUsXG4gICAgICAgICAgICBkZXBzOiBwcmVmaXhEZXBzKHJ1bGUuZGVwcywgam9pblByZWZpeCksXG4gICAgICAgICAgICBtZXRhLFxuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG4gICAgICAgIC8vIFx1OTc1RVx1NkNENVx1OEY5M1x1NTE2NVx1RkYxQVx1NUZGRFx1NzU2NVx1RkYwOFx1NTQwRVx1N0VFRCBQaGFzZSBcdTVDMDZcdTU3MjggYnVpbGQgXHU5NjM2XHU2QkI1XHU2M0QwXHU1MzQ3XHU0RTNBXHU5MTREXHU3RjZFXHU5NTE5XHU4QkVGXHVGRjA5XHUzMDAyXG4gICAgICB9XG5cbiAgICAgIGVudHJpZXMucHVzaCh7XG4gICAgICAgIGZpZWxkUGF0aDogc2NvcGVJZCxcbiAgICAgICAga2luZDogXCJjaGVja1wiLFxuICAgICAgICBtZXRhOiB7XG4gICAgICAgICAgcnVsZXMsXG4gICAgICAgICAgd3JpdGViYWNrOiB7IGtpbmQ6IFwiZXJyb3JzXCIgfSxcbiAgICAgICAgfSxcbiAgICAgIH0gYXMgU3RhdGVUcmFpdEVudHJ5PGFueSwgYW55PilcbiAgICB9XG4gIH1cblxuICBmb3IgKGNvbnN0IGtleSBpbiBzcGVjKSB7XG4gICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc3BlYywga2V5KSkgY29udGludWVcbiAgICBjb25zdCByYXcgPSBzcGVjW2tleSBhcyBrZXlvZiB0eXBlb2Ygc3BlY10gYXMgU3RhdGVUcmFpdFNwZWNWYWx1ZTxTLCBhbnk+IHwgdW5kZWZpbmVkXG4gICAgaWYgKCFyYXcpIGNvbnRpbnVlXG5cbiAgICBpZiAoaXNMaXN0KHJhdykpIHtcbiAgICAgIGNvbnN0IGxpc3RQYXRoID0ga2V5XG4gICAgICBpZiAocmF3Lml0ZW0pIHtcbiAgICAgICAgZXhwYW5kTm9kZShgJHtsaXN0UGF0aH1bXWAsIGAke2xpc3RQYXRofVtdYCwgcmF3Lml0ZW0pXG4gICAgICB9XG4gICAgICBpZiAocmF3Lmxpc3QpIHtcbiAgICAgICAgZXhwYW5kTm9kZShsaXN0UGF0aCwgbGlzdFBhdGgsIHJhdy5saXN0KVxuICAgICAgfVxuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICBpZiAoaXNOb2RlKHJhdykpIHtcbiAgICAgIGlmIChrZXkgPT09IFwiJHJvb3RcIikge1xuICAgICAgICBleHBhbmROb2RlKFwiJHJvb3RcIiwgXCJcIiwgcmF3KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZXhwYW5kTm9kZShrZXksIGtleSwgcmF3KVxuICAgICAgfVxuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICBjb25zdCBlbnRyeSA9IHJhdyBhcyBhbnkgYXMgU3RhdGVUcmFpdEVudHJ5PGFueSwgc3RyaW5nPlxuICAgIGNvbnN0IGZpZWxkUGF0aCA9IChlbnRyeSBhcyBhbnkpLmZpZWxkUGF0aCA/PyBrZXlcbiAgICBlbnRyaWVzLnB1c2gobm9ybWFsaXplRW50cnkoZW50cnksIFN0cmluZyhmaWVsZFBhdGgpLCBcIlwiKSlcbiAgfVxuXG4gIHJldHVybiBlbnRyaWVzXG59XG5cbi8qKlxuICogY29sbGVjdE5vZGVNZXRhXHVGRjFBXG4gKiAtIFx1NEVDRSBTdGF0ZVRyYWl0U3BlYyBcdTRFMkRcdTYzRDBcdTUzRDYgU3RhdGVUcmFpdE5vZGUubWV0YVx1RkYwOFx1NzY3RFx1NTQwRFx1NTM1NVx1NUI1N1x1NkJCNVx1RkYwOVx1RkYwQ1x1NEY5QiBEZXZ0b29scyBcdThGREJcdTg4NENcdTdFRDNcdTY3ODRcdTVDNTVcdTc5M0FcdUZGMUJcbiAqIC0gbWV0YSBcdTRFQzVcdTc1MjhcdTRFOEVcdThCQ0FcdTY1QURcdTRFMEVcdTVDNTVcdTc5M0FcdUZGMENcdTRFMERcdTUzQzJcdTRFMEVcdThGRDBcdTg4NENcdTY1RjZcdThCRURcdTRFNDlcdTMwMDJcbiAqL1xuZXhwb3J0IGNvbnN0IGNvbGxlY3ROb2RlTWV0YSA9IDxTPihcbiAgc3BlYzogU3RhdGVUcmFpdFNwZWM8Uz4sXG4pOiBSZWFkb25seU1hcDxzdHJpbmcsIE1ldGEuVHJhaXRNZXRhPiA9PiB7XG4gIGNvbnN0IG91dCA9IG5ldyBNYXA8c3RyaW5nLCBNZXRhLlRyYWl0TWV0YT4oKVxuXG4gIGNvbnN0IGlzTm9kZSA9ICh2YWx1ZTogdW5rbm93bik6IHZhbHVlIGlzIFN0YXRlVHJhaXROb2RlPGFueSwgYW55PiA9PlxuICAgIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiB2YWx1ZSAhPT0gbnVsbCAmJiAodmFsdWUgYXMgYW55KS5fdGFnID09PSBcIlN0YXRlVHJhaXROb2RlXCJcblxuICBjb25zdCBpc0xpc3QgPSAodmFsdWU6IHVua25vd24pOiB2YWx1ZSBpcyBTdGF0ZVRyYWl0TGlzdDxhbnk+ID0+XG4gICAgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHZhbHVlICE9PSBudWxsICYmICh2YWx1ZSBhcyBhbnkpLl90YWcgPT09IFwiU3RhdGVUcmFpdExpc3RcIlxuXG4gIGNvbnN0IGFkZCA9IChzY29wZUlkOiBzdHJpbmcsIG5vZGU6IFN0YXRlVHJhaXROb2RlPGFueSwgYW55Pik6IHZvaWQgPT4ge1xuICAgIGNvbnN0IG1ldGEgPSBNZXRhLnNhbml0aXplKG5vZGUubWV0YSlcbiAgICBpZiAobWV0YSkgb3V0LnNldChzY29wZUlkLCBtZXRhKVxuICB9XG5cbiAgZm9yIChjb25zdCBrZXkgaW4gc3BlYykge1xuICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNwZWMsIGtleSkpIGNvbnRpbnVlXG4gICAgY29uc3QgcmF3ID0gc3BlY1trZXkgYXMga2V5b2YgdHlwZW9mIHNwZWNdIGFzIFN0YXRlVHJhaXRTcGVjVmFsdWU8UywgYW55PiB8IHVuZGVmaW5lZFxuICAgIGlmICghcmF3KSBjb250aW51ZVxuXG4gICAgaWYgKGlzTGlzdChyYXcpKSB7XG4gICAgICBjb25zdCBsaXN0UGF0aCA9IGtleVxuICAgICAgaWYgKHJhdy5pdGVtKSBhZGQoYCR7bGlzdFBhdGh9W11gLCByYXcuaXRlbSlcbiAgICAgIGlmIChyYXcubGlzdCkgYWRkKGxpc3RQYXRoLCByYXcubGlzdClcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuXG4gICAgaWYgKGlzTm9kZShyYXcpKSB7XG4gICAgICBpZiAoa2V5ID09PSBcIiRyb290XCIpIGFkZChcIiRyb290XCIsIHJhdylcbiAgICAgIGVsc2UgYWRkKGtleSwgcmF3KVxuICAgICAgY29udGludWVcbiAgICB9XG4gIH1cblxuICByZXR1cm4gb3V0XG59XG4iLCAiaW1wb3J0IHR5cGUgeyBTY2hlbWEgfSBmcm9tIFwiZWZmZWN0XCJcbmltcG9ydCB7XG4gIHR5cGUgU3RhdGVUcmFpdFByb2dyYW0sXG4gIHR5cGUgU3RhdGVUcmFpdFNwZWMsXG4gIHR5cGUgU3RhdGVUcmFpdEVudHJ5LFxuICB0eXBlIFN0YXRlVHJhaXRHcmFwaCxcbiAgdHlwZSBTdGF0ZVRyYWl0R3JhcGhFZGdlLFxuICB0eXBlIFN0YXRlVHJhaXRHcmFwaE5vZGUsXG4gIHR5cGUgU3RhdGVUcmFpdEZpZWxkLFxuICB0eXBlIFN0YXRlVHJhaXRGaWVsZFRyYWl0LFxuICB0eXBlIFN0YXRlVHJhaXRQbGFuLFxuICB0eXBlIFN0YXRlVHJhaXRQbGFuU3RlcCxcbiAgdHlwZSBTdGF0ZVRyYWl0UmVzb3VyY2UsXG4gIGNvbGxlY3ROb2RlTWV0YSxcbiAgbm9ybWFsaXplU3BlYyxcbn0gZnJvbSBcIi4vbW9kZWwuanNcIlxuaW1wb3J0ICogYXMgTWV0YSBmcm9tIFwiLi9tZXRhLmpzXCJcblxuLyoqXG4gKiBcdTY4MzlcdTYzNkUgU3RhdGVUcmFpdEVudHJ5IFx1Njc4NFx1OTAyMFx1NjgwN1x1NTFDNlx1NTMxNlx1NzY4NCBGaWVsZFRyYWl0XHUzMDAyXG4gKlxuICogLSBcdTc2RUVcdTUyNERcdTRFQzVcdTVCRjkgbGluay9zb3VyY2UgXHU1ODZCXHU1MTQ1IGRlcHMgXHU0RkUxXHU2MDZGXHVGRjBDY29tcHV0ZWQgXHU3Njg0XHU0RjlEXHU4RDU2XHU2NjgyXHU0RTBEXHU5NzU5XHU2MDAxXHU1MjA2XHU2NzkwXHVGRjFCXG4gKiAtIFx1NTQwRVx1N0VFRFx1ODJFNVx1NUYxNVx1NTE2NVx1NjYzRVx1NUYwRlx1NEY5RFx1OEQ1Nlx1NThGMFx1NjYwRVx1RkYwQ1x1NTNFRlx1NEVFNVx1NTcyOFx1NkI2NFx1NTkwNFx1NjI2OVx1NUM1NVx1MzAwMlxuICovXG5jb25zdCB0b0ZpZWxkVHJhaXQgPSAoXG4gIGVudHJ5OiBTdGF0ZVRyYWl0RW50cnk8YW55LCBzdHJpbmc+LFxuKTogU3RhdGVUcmFpdEZpZWxkVHJhaXQgPT4ge1xuICBjb25zdCBkZXBzOiBBcnJheTxzdHJpbmc+ID0gW11cblxuICBpZiAoZW50cnkua2luZCA9PT0gXCJjb21wdXRlZFwiKSB7XG4gICAgY29uc3QgbWV0YSA9IGVudHJ5Lm1ldGEgYXMgYW55XG4gICAgY29uc3QgbGlzdCA9IG1ldGEuZGVwcyBhcyBSZWFkb25seUFycmF5PHN0cmluZz4gfCB1bmRlZmluZWRcbiAgICBpZiAobGlzdCkgZGVwcy5wdXNoKC4uLmxpc3QpXG4gIH0gZWxzZSBpZiAoZW50cnkua2luZCA9PT0gXCJzb3VyY2VcIikge1xuICAgIGNvbnN0IG1ldGEgPSBlbnRyeS5tZXRhIGFzIGFueVxuICAgIGNvbnN0IGxpc3QgPSBtZXRhLmRlcHMgYXMgUmVhZG9ubHlBcnJheTxzdHJpbmc+IHwgdW5kZWZpbmVkXG4gICAgaWYgKGxpc3QpIGRlcHMucHVzaCguLi5saXN0KVxuICB9IGVsc2UgaWYgKGVudHJ5LmtpbmQgPT09IFwibGlua1wiKSB7XG4gICAgZGVwcy5wdXNoKGVudHJ5Lm1ldGEuZnJvbSBhcyBzdHJpbmcpXG4gIH0gZWxzZSBpZiAoZW50cnkua2luZCA9PT0gXCJjaGVja1wiKSB7XG4gICAgY29uc3QgbWV0YSA9IGVudHJ5Lm1ldGEgYXMgYW55XG4gICAgY29uc3QgcnVsZXMgPSAobWV0YT8ucnVsZXMgPz8ge30pIGFzIFJlY29yZDxzdHJpbmcsIGFueT5cbiAgICBmb3IgKGNvbnN0IG5hbWUgb2YgT2JqZWN0LmtleXMocnVsZXMpKSB7XG4gICAgICBjb25zdCBydWxlID0gcnVsZXNbbmFtZV1cbiAgICAgIGlmIChydWxlICYmIHR5cGVvZiBydWxlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIGNvbnN0IGxpc3QgPSBydWxlLmRlcHMgYXMgUmVhZG9ubHlBcnJheTxzdHJpbmc+IHwgdW5kZWZpbmVkXG4gICAgICAgIGlmIChsaXN0KSBkZXBzLnB1c2goLi4ubGlzdClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGZpZWxkSWQ6IGVudHJ5LmZpZWxkUGF0aCxcbiAgICBraW5kOiBlbnRyeS5raW5kLFxuICAgIC8vIG1ldGEgXHU1NzI4XHU4RkQwXHU4ODRDXHU2NUY2XHU0RkREXHU2MzAxXHU0RTBFIEVudHJ5Lm1ldGEgXHU0RTAwXHU4MUY0XHVGRjBDXHU0RkJGXHU0RThFIGluc3RhbGwgXHU3NkY0XHU2M0E1XHU1OTBEXHU3NTI4XHUzMDAyXG4gICAgbWV0YTogZW50cnkubWV0YSBhcyBhbnksXG4gICAgZGVwcyxcbiAgfVxufVxuXG4vKipcbiAqIFx1NEVDRVx1NUY1Mlx1NEUwMFx1NTMxNlx1NzY4NCBFbnRyeSBcdTUyMTdcdTg4NjhcdTY3ODRcdTVFRkEgRmllbGQgLyBOb2RlIC8gRWRnZSAvIFJlc291cmNlIFx1OTZDNlx1NTQwOFx1MzAwMlxuICovXG5jb25zdCBidWlsZEdyYXBoID0gKFxuICBlbnRyaWVzOiBSZWFkb25seUFycmF5PFN0YXRlVHJhaXRFbnRyeTxhbnksIHN0cmluZz4+LFxuICBub2RlTWV0YUJ5RmllbGRQYXRoOiBSZWFkb25seU1hcDxzdHJpbmcsIE1ldGEuVHJhaXRNZXRhPixcbik6IHtcbiAgcmVhZG9ubHkgZ3JhcGg6IFN0YXRlVHJhaXRHcmFwaFxuICByZWFkb25seSBwbGFuOiBTdGF0ZVRyYWl0UGxhblxufSA9PiB7XG4gIGNvbnN0IGZpZWxkTWFwID0gbmV3IE1hcDxzdHJpbmcsIFN0YXRlVHJhaXRGaWVsZD4oKVxuICBjb25zdCBub2RlczogQXJyYXk8U3RhdGVUcmFpdEdyYXBoTm9kZT4gPSBbXVxuICBjb25zdCBlZGdlczogQXJyYXk8U3RhdGVUcmFpdEdyYXBoRWRnZT4gPSBbXVxuICBjb25zdCByZXNvdXJjZXNCeUlkID0gbmV3IE1hcDxzdHJpbmcsIFN0YXRlVHJhaXRSZXNvdXJjZT4oKVxuICBjb25zdCBwbGFuU3RlcHM6IEFycmF5PFN0YXRlVHJhaXRQbGFuU3RlcD4gPSBbXVxuXG4gIGNvbnN0IGVuc3VyZUZpZWxkID0gKGZpZWxkUGF0aDogc3RyaW5nKTogU3RhdGVUcmFpdEZpZWxkID0+IHtcbiAgICBsZXQgZmllbGQgPSBmaWVsZE1hcC5nZXQoZmllbGRQYXRoKVxuICAgIGlmICghZmllbGQpIHtcbiAgICAgIGZpZWxkID0ge1xuICAgICAgICBpZDogZmllbGRQYXRoLFxuICAgICAgICBwYXRoOiBmaWVsZFBhdGgsXG4gICAgICAgIHRyYWl0czogW10sXG4gICAgICB9XG4gICAgICBmaWVsZE1hcC5zZXQoZmllbGRQYXRoLCBmaWVsZClcbiAgICB9XG4gICAgcmV0dXJuIGZpZWxkXG4gIH1cblxuICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcbiAgICBjb25zdCBmaWVsZFBhdGggPSBlbnRyeS5maWVsZFBhdGhcbiAgICBjb25zdCBmaWVsZCA9IGVuc3VyZUZpZWxkKGZpZWxkUGF0aClcbiAgICBjb25zdCB0cmFpdCA9IHRvRmllbGRUcmFpdChlbnRyeSlcblxuICAgIDsoZmllbGQudHJhaXRzIGFzIEFycmF5PFN0YXRlVHJhaXRGaWVsZFRyYWl0PikucHVzaCh0cmFpdClcblxuICAgIC8vIFx1OTQ4OFx1NUJGOVx1NEUwRFx1NTQwQyBraW5kIFx1Njc4NFx1NUVGQSBHcmFwaCBcdThGQjlcdTRFMEUgUGxhbiBcdTZCNjVcdTlBQTRcdTMwMDJcbiAgICBpZiAoZW50cnkua2luZCA9PT0gXCJjb21wdXRlZFwiKSB7XG4gICAgICBjb25zdCBzdGVwSWQgPSBgY29tcHV0ZWQ6JHtmaWVsZFBhdGh9YFxuICAgICAgcGxhblN0ZXBzLnB1c2goe1xuICAgICAgICBpZDogc3RlcElkLFxuICAgICAgICBraW5kOiBcImNvbXB1dGVkLXVwZGF0ZVwiLFxuICAgICAgICB0YXJnZXRGaWVsZFBhdGg6IGZpZWxkUGF0aCxcbiAgICAgICAgLy8gXHU4QkY0XHU2NjBFXHVGRjFBXHU1RjUzXHU1MjREXHU3MjQ4XHU2NzJDXHU0RTBEXHU5NzU5XHU2MDAxXHU1MjA2XHU2NzkwIGNvbXB1dGVkIFx1NEY5RFx1OEQ1Nlx1NUI1N1x1NkJCNVx1RkYwQ3NvdXJjZUZpZWxkUGF0aHMgXHU3NTU5XHU3QTdBXHUzMDAyXG4gICAgICB9KVxuICAgICAgLy8gXHU4MkU1XHU2NjNFXHU1RjBGXHU1OEYwXHU2NjBFIGRlcHNcdUZGMENcdTUyMTlcdTg4NjVcdTUxNDUgR3JhcGggXHU4RkI5XHVGRjA4XHU3NTI4XHU0RThFXHU4QkNBXHU2NUFEL1x1NTNDRFx1NTQxMVx1OTVFRFx1NTMwNVx1OEJBMVx1N0I5N1x1RkYwOVx1MzAwMlxuICAgICAgY29uc3QgZGVwcyA9IChlbnRyeS5tZXRhIGFzIGFueSkuZGVwcyBhcyBSZWFkb25seUFycmF5PHN0cmluZz4gfCB1bmRlZmluZWRcbiAgICAgIGlmIChkZXBzKSB7XG4gICAgICAgIGZvciAoY29uc3QgZGVwIG9mIGRlcHMpIHtcbiAgICAgICAgICBlbnN1cmVGaWVsZChkZXApXG4gICAgICAgICAgZWRnZXMucHVzaCh7XG4gICAgICAgICAgICBpZDogYGNvbXB1dGVkOiR7ZGVwfS0+JHtmaWVsZFBhdGh9YCxcbiAgICAgICAgICAgIGZyb206IGRlcCxcbiAgICAgICAgICAgIHRvOiBmaWVsZFBhdGgsXG4gICAgICAgICAgICBraW5kOiBcImNvbXB1dGVkXCIsXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZW50cnkua2luZCA9PT0gXCJsaW5rXCIpIHtcbiAgICAgIGNvbnN0IGZyb20gPSBlbnRyeS5tZXRhLmZyb20gYXMgc3RyaW5nXG4gICAgICBlbnN1cmVGaWVsZChmcm9tKVxuXG4gICAgICBjb25zdCBlZGdlSWQgPSBgbGluazoke2Zyb219LT4ke2ZpZWxkUGF0aH1gXG4gICAgICBlZGdlcy5wdXNoKHtcbiAgICAgICAgaWQ6IGVkZ2VJZCxcbiAgICAgICAgZnJvbSxcbiAgICAgICAgdG86IGZpZWxkUGF0aCxcbiAgICAgICAga2luZDogXCJsaW5rXCIsXG4gICAgICB9KVxuXG4gICAgICBwbGFuU3RlcHMucHVzaCh7XG4gICAgICAgIGlkOiBgbGluazoke2ZpZWxkUGF0aH1gLFxuICAgICAgICBraW5kOiBcImxpbmstcHJvcGFnYXRlXCIsXG4gICAgICAgIHRhcmdldEZpZWxkUGF0aDogZmllbGRQYXRoLFxuICAgICAgICBzb3VyY2VGaWVsZFBhdGhzOiBbZnJvbV0sXG4gICAgICAgIGRlYnVnSW5mbzoge1xuICAgICAgICAgIGdyYXBoRWRnZUlkOiBlZGdlSWQsXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgIH0gZWxzZSBpZiAoZW50cnkua2luZCA9PT0gXCJzb3VyY2VcIikge1xuICAgICAgY29uc3QgcmVzb3VyY2VJZCA9IGVudHJ5Lm1ldGEucmVzb3VyY2VcbiAgICAgIGNvbnN0IHJlc291cmNlTWV0YSA9IE1ldGEuc2FuaXRpemUoKGVudHJ5Lm1ldGEgYXMgYW55KS5tZXRhKVxuXG4gICAgICBjb25zdCBleGlzdGluZyA9IHJlc291cmNlc0J5SWQuZ2V0KHJlc291cmNlSWQpXG4gICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgY29uc3Qgb3duZXJGaWVsZHMgPSBbLi4uZXhpc3Rpbmcub3duZXJGaWVsZHMsIGZpZWxkUGF0aF1cbiAgICAgICAgbGV0IG1ldGEgPSBleGlzdGluZy5tZXRhXG4gICAgICAgIGxldCBtZXRhT3JpZ2luID0gZXhpc3RpbmcubWV0YU9yaWdpblxuICAgICAgICBsZXQgbWV0YUNvbmZsaWN0cyA9IGV4aXN0aW5nLm1ldGFDb25mbGljdHNcblxuICAgICAgICBpZiAocmVzb3VyY2VNZXRhKSB7XG4gICAgICAgICAgY29uc3QgbWVyZ2VkID0gTWV0YS5tZXJnZUNhbm9uaWNhbChcbiAgICAgICAgICAgIHsgbWV0YSwgb3JpZ2luOiBtZXRhT3JpZ2luLCBjb25mbGljdHM6IG1ldGFDb25mbGljdHMgfSxcbiAgICAgICAgICAgIHsgb3JpZ2luOiBmaWVsZFBhdGgsIG1ldGE6IHJlc291cmNlTWV0YSB9LFxuICAgICAgICAgIClcbiAgICAgICAgICBtZXRhID0gbWVyZ2VkLm1ldGFcbiAgICAgICAgICBtZXRhT3JpZ2luID0gbWVyZ2VkLm9yaWdpblxuICAgICAgICAgIG1ldGFDb25mbGljdHMgPSBtZXJnZWQuY29uZmxpY3RzXG4gICAgICAgIH1cblxuICAgICAgICByZXNvdXJjZXNCeUlkLnNldChyZXNvdXJjZUlkLCB7XG4gICAgICAgICAgLi4uZXhpc3RpbmcsXG4gICAgICAgICAgb3duZXJGaWVsZHMsXG4gICAgICAgICAgbWV0YSxcbiAgICAgICAgICBtZXRhT3JpZ2luLFxuICAgICAgICAgIG1ldGFDb25mbGljdHMsXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNvdXJjZXNCeUlkLnNldChyZXNvdXJjZUlkLCB7XG4gICAgICAgICAgcmVzb3VyY2VJZCxcbiAgICAgICAgICAvLyBcdTY2ODJcdTY1RjZcdTRGN0ZcdTc1MjhcdTdCODBcdTUzNTVcdTc2ODRcdTY4MDdcdThCQzZcdTVCNTdcdTdCMjZcdTRFMzJcdUZGMENcdTU0MEVcdTdFRURcdTUzRUZcdTY4MzlcdTYzNkUga2V5IFx1ODlDNFx1NTIxOVx1OEZEQlx1NEUwMFx1NkI2NVx1N0VEM1x1Njc4NFx1NTMxNlx1MzAwMlxuICAgICAgICAgIGtleVNlbGVjdG9yOiBgU3RhdGVUcmFpdC5zb3VyY2VAJHtmaWVsZFBhdGh9YCxcbiAgICAgICAgICBvd25lckZpZWxkczogW2ZpZWxkUGF0aF0sXG4gICAgICAgICAgbWV0YTogcmVzb3VyY2VNZXRhLFxuICAgICAgICAgIG1ldGFPcmlnaW46IHJlc291cmNlTWV0YSA/IGZpZWxkUGF0aCA6IHVuZGVmaW5lZCxcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgcGxhblN0ZXBzLnB1c2goe1xuICAgICAgICBpZDogYHNvdXJjZToke2ZpZWxkUGF0aH1gLFxuICAgICAgICBraW5kOiBcInNvdXJjZS1yZWZyZXNoXCIsXG4gICAgICAgIHRhcmdldEZpZWxkUGF0aDogZmllbGRQYXRoLFxuICAgICAgICByZXNvdXJjZUlkLFxuICAgICAgICBrZXlTZWxlY3RvcklkOiBgU3RhdGVUcmFpdC5zb3VyY2VAJHtmaWVsZFBhdGh9YCxcbiAgICAgIH0pXG5cbiAgICAgIGNvbnN0IGRlcHMgPSAoZW50cnkubWV0YSBhcyBhbnkpLmRlcHMgYXMgUmVhZG9ubHlBcnJheTxzdHJpbmc+IHwgdW5kZWZpbmVkXG4gICAgICBpZiAoZGVwcykge1xuICAgICAgICBmb3IgKGNvbnN0IGRlcCBvZiBkZXBzKSB7XG4gICAgICAgICAgZW5zdXJlRmllbGQoZGVwKVxuICAgICAgICAgIGVkZ2VzLnB1c2goe1xuICAgICAgICAgICAgaWQ6IGBzb3VyY2UtZGVwOiR7ZGVwfS0+JHtmaWVsZFBhdGh9YCxcbiAgICAgICAgICAgIGZyb206IGRlcCxcbiAgICAgICAgICAgIHRvOiBmaWVsZFBhdGgsXG4gICAgICAgICAgICBraW5kOiBcInNvdXJjZS1kZXBcIixcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChlbnRyeS5raW5kID09PSBcImNoZWNrXCIpIHtcbiAgICAgIHBsYW5TdGVwcy5wdXNoKHtcbiAgICAgICAgaWQ6IGBjaGVjazoke2ZpZWxkUGF0aH1gLFxuICAgICAgICBraW5kOiBcImNoZWNrLXZhbGlkYXRlXCIsXG4gICAgICAgIHRhcmdldEZpZWxkUGF0aDogZmllbGRQYXRoLFxuICAgICAgfSlcblxuICAgICAgLy8gXHU4MkU1XHU4OUM0XHU1MjE5XHU2NjNFXHU1RjBGXHU1OEYwXHU2NjBFIGRlcHNcdUZGMENcdTUyMTlcdTg4NjVcdTUxNDUgR3JhcGggXHU4RkI5XHVGRjA4XHU3NTI4XHU0RThFIFJldmVyc2VDbG9zdXJlIHNjb3BlZCB2YWxpZGF0ZVx1RkYwOVx1MzAwMlxuICAgICAgaWYgKHRyYWl0LmRlcHMubGVuZ3RoID4gMCkge1xuICAgICAgICBmb3IgKGNvbnN0IGRlcCBvZiB0cmFpdC5kZXBzKSB7XG4gICAgICAgICAgZW5zdXJlRmllbGQoZGVwKVxuICAgICAgICAgIGVkZ2VzLnB1c2goe1xuICAgICAgICAgICAgaWQ6IGBjaGVjay1kZXA6JHtkZXB9LT4ke2ZpZWxkUGF0aH1gLFxuICAgICAgICAgICAgZnJvbTogZGVwLFxuICAgICAgICAgICAgdG86IGZpZWxkUGF0aCxcbiAgICAgICAgICAgIGtpbmQ6IFwiY2hlY2stZGVwXCIsXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZvciAoY29uc3QgZmllbGQgb2YgZmllbGRNYXAudmFsdWVzKCkpIHtcbiAgICBub2Rlcy5wdXNoKHtcbiAgICAgIGlkOiBmaWVsZC5pZCxcbiAgICAgIGZpZWxkLFxuICAgICAgdHJhaXRzOiBmaWVsZC50cmFpdHMsXG4gICAgICBtZXRhOiBub2RlTWV0YUJ5RmllbGRQYXRoLmdldChmaWVsZC5pZCksXG4gICAgfSlcbiAgfVxuXG4gIGNvbnN0IGdyYXBoOiBTdGF0ZVRyYWl0R3JhcGggPSB7XG4gICAgX3RhZzogXCJTdGF0ZVRyYWl0R3JhcGhcIixcbiAgICBub2RlcyxcbiAgICBlZGdlcyxcbiAgICByZXNvdXJjZXM6IEFycmF5LmZyb20ocmVzb3VyY2VzQnlJZC52YWx1ZXMoKSksXG4gIH1cblxuICBjb25zdCBwbGFuOiBTdGF0ZVRyYWl0UGxhbiA9IHtcbiAgICBfdGFnOiBcIlN0YXRlVHJhaXRQbGFuXCIsXG4gICAgc3RlcHM6IHBsYW5TdGVwcyxcbiAgfVxuXG4gIHJldHVybiB7IGdyYXBoLCBwbGFuIH1cbn1cblxuLyoqXG4gKiBcdTk0ODhcdTVCRjkgbGluayBcdThGQjlcdThGREJcdTg4NENcdTdCODBcdTUzNTVcdTc2ODRcdTczQUZcdThERUZcdTY4QzBcdTZENEJcdTMwMDJcbiAqXG4gKiAtIFx1NEVDNVx1ODAwM1x1ODY1MSBraW5kID0gXCJsaW5rXCIgXHU3Njg0XHU4RkI5XHVGRjBDY29tcHV0ZWQvc291cmNlIFx1OTk5Nlx1NzI0OFx1NEUwRFx1NTNDMlx1NEUwRVx1NzNBRlx1NjhDMFx1NkQ0Qlx1RkYxQlxuICogLSBcdTgyRTVcdTUzRDFcdTczQjBcdTczQUZcdThERUZcdUZGMENcdTYyOUJcdTUxRkFcdTVFMjZcdTY3MDlcdThERUZcdTVGODRcdTRGRTFcdTYwNkZcdTc2ODRcdTk1MTlcdThCRUZcdUZGMENcdTkwN0ZcdTUxNERcdTU3MjhcdThGRDBcdTg4NENcdTY1RjZcdThGREJcdTUxNjVcdTY1RTBcdTk2NTBcdTY2RjRcdTY1QjBcdTMwMDJcbiAqL1xuY29uc3QgYXNzZXJ0Tm9MaW5rQ3ljbGVzID0gKGVkZ2VzOiBSZWFkb25seUFycmF5PFN0YXRlVHJhaXRHcmFwaEVkZ2U+KTogdm9pZCA9PiB7XG4gIGNvbnN0IGFkamFjZW5jeSA9IG5ldyBNYXA8c3RyaW5nLCBzdHJpbmdbXT4oKVxuXG4gIGZvciAoY29uc3QgZWRnZSBvZiBlZGdlcykge1xuICAgIGlmIChlZGdlLmtpbmQgIT09IFwibGlua1wiKSBjb250aW51ZVxuICAgIGNvbnN0IGxpc3QgPSBhZGphY2VuY3kuZ2V0KGVkZ2UuZnJvbSkgPz8gW11cbiAgICBsaXN0LnB1c2goZWRnZS50bylcbiAgICBhZGphY2VuY3kuc2V0KGVkZ2UuZnJvbSwgbGlzdClcbiAgfVxuXG4gIGNvbnN0IHZpc2l0ZWQgPSBuZXcgU2V0PHN0cmluZz4oKVxuICBjb25zdCBzdGFjayA9IG5ldyBTZXQ8c3RyaW5nPigpXG5cbiAgY29uc3QgZGZzID0gKG5vZGU6IHN0cmluZyk6IHZvaWQgPT4ge1xuICAgIGlmIChzdGFjay5oYXMobm9kZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYFtTdGF0ZVRyYWl0LmJ1aWxkXSBsaW5rIGN5Y2xlIGRldGVjdGVkIGF0IGZpZWxkIFwiJHtub2RlfVwiLiBgICtcbiAgICAgICAgICBcIlBsZWFzZSBjaGVjayBsaW5rIHRyYWl0cyBmb3IgY2lyY3VsYXIgZGVwZW5kZW5jaWVzLlwiLFxuICAgICAgKVxuICAgIH1cbiAgICBpZiAodmlzaXRlZC5oYXMobm9kZSkpIHJldHVyblxuICAgIHZpc2l0ZWQuYWRkKG5vZGUpXG4gICAgc3RhY2suYWRkKG5vZGUpXG5cbiAgICBjb25zdCBuZXh0cyA9IGFkamFjZW5jeS5nZXQobm9kZSlcbiAgICBpZiAobmV4dHMpIHtcbiAgICAgIGZvciAoY29uc3QgdG8gb2YgbmV4dHMpIHtcbiAgICAgICAgZGZzKHRvKVxuICAgICAgfVxuICAgIH1cblxuICAgIHN0YWNrLmRlbGV0ZShub2RlKVxuICB9XG5cbiAgZm9yIChjb25zdCBub2RlIG9mIGFkamFjZW5jeS5rZXlzKCkpIHtcbiAgICBpZiAoIXZpc2l0ZWQuaGFzKG5vZGUpKSB7XG4gICAgICBkZnMobm9kZSlcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBcdTY4MzlcdTYzNkVcdTdFRDlcdTVCOUFcdTc2ODQgc3RhdGVTY2hlbWEgXHU0RTBFIHRyYWl0cyBzcGVjIFx1Njc4NFx1OTAyMCBTdGF0ZVRyYWl0UHJvZ3JhbVx1MzAwMlxuICpcbiAqIC0gXHU3RUFGXHU1MUZEXHU2NTcwXHVGRjFBXHU0RTBEXHU0RjlEXHU4RDU2XHU1OTE2XHU5MEU4IEVudiAvIFx1NTE2OFx1NUM0MFx1NzJCNlx1NjAwMVx1RkYxQlxuICogLSBcdTVGNTNcdTUyNERcdTVCOUVcdTczQjBcdTgwNUFcdTcxMjZcdTRFOEVcdUZGMUFcbiAqICAgLSBcdTRFQ0UgU3BlYyBcdTVGNTJcdTRFMDBcdTUzMTZcdTUxRkEgRW50cnkgXHU1MjE3XHU4ODY4XHVGRjFCXG4gKiAgIC0gXHU1N0ZBXHU0RThFIEVudHJ5IFx1Njc4NFx1NUVGQVx1OEY3Qlx1OTFDRlx1NzI0OCBHcmFwaCAvIFBsYW5cdUZGMUJcbiAqICAgLSBcdTVCRjkgbGluayBcdThGQjlcdTUwNUFcdTU3RkFcdTY3MkNcdTczQUZcdThERUZcdTY4QzBcdTZENEJcdTMwMDJcbiAqXG4gKiBcdTU0MEVcdTdFRURcdTgyRTVcdTk3MDBcdTg5ODFcdTY2RjRcdTdDQkVcdTdFQzZcdTc2ODRcdTRGOURcdThENTZcdTUyMDZcdTY3OTBcdUZGMDhcdTRGOEJcdTU5ODJcdTVCRjkgY29tcHV0ZWQva2V5IFx1NTA1QVx1OTc1OVx1NjAwMVx1ODlFM1x1Njc5MFx1RkYwOVx1RkYwQ1xuICogXHU1M0VGXHU0RUU1XHU1NzI4XHU2NzJDXHU2QTIxXHU1NzU3XHU1MTg1XHU2RjE0XHU4RkRCXHU1QjlFXHU3M0IwXHVGRjBDXHU4MDBDXHU0RTBEXHU1RjcxXHU1NENEXHU1QkY5XHU1OTE2IEFQSVx1MzAwMlxuICovXG5leHBvcnQgY29uc3QgYnVpbGQgPSA8UyBleHRlbmRzIG9iamVjdD4oXG4gIHN0YXRlU2NoZW1hOiBTY2hlbWEuU2NoZW1hPFMsIGFueT4sXG4gIHNwZWM6IFN0YXRlVHJhaXRTcGVjPFM+LFxuKTogU3RhdGVUcmFpdFByb2dyYW08Uz4gPT4ge1xuICBjb25zdCBlbnRyaWVzID0gbm9ybWFsaXplU3BlYyhzcGVjKSBhcyBSZWFkb25seUFycmF5PFN0YXRlVHJhaXRFbnRyeTxTLCBzdHJpbmc+PlxuICBjb25zdCBub2RlTWV0YUJ5RmllbGRQYXRoID0gY29sbGVjdE5vZGVNZXRhKHNwZWMpXG5cbiAgLy8gUGhhc2UgNFx1RkYwOFVTMlx1RkYwOVx1RkYxQVx1NUYzQVx1NTIzNlx1NjYzRVx1NUYwRiBkZXBzXHVGRjA4R3JhcGgvZGlhZ25vc3RpY3MvcmVwbGF5IFx1NTNFQVx1OEJBNCBkZXBzIFx1NEY1Q1x1NEUzQVx1NEY5RFx1OEQ1Nlx1NEU4Qlx1NUI5RVx1NkU5MFx1RkYwOVx1MzAwMlxuICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcbiAgICBpZiAoZW50cnkua2luZCA9PT0gXCJjb21wdXRlZFwiKSB7XG4gICAgICBjb25zdCBkZXBzID0gKGVudHJ5Lm1ldGEgYXMgYW55KS5kZXBzIGFzIFJlYWRvbmx5QXJyYXk8c3RyaW5nPiB8IHVuZGVmaW5lZFxuICAgICAgaWYgKGRlcHMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYFtTdGF0ZVRyYWl0LmJ1aWxkXSBNaXNzaW5nIGV4cGxpY2l0IGRlcHMgZm9yIGNvbXB1dGVkIFwiJHtlbnRyeS5maWVsZFBhdGh9XCIuIGAgK1xuICAgICAgICAgICAgXCJQbGVhc2UgdXNlIFN0YXRlVHJhaXQuY29tcHV0ZWQoeyBkZXBzOiBbLi4uXSwgZ2V0OiAuLi4gfSkuXCIsXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGVudHJ5LmtpbmQgPT09IFwic291cmNlXCIpIHtcbiAgICAgIGNvbnN0IGRlcHMgPSAoZW50cnkubWV0YSBhcyBhbnkpLmRlcHMgYXMgUmVhZG9ubHlBcnJheTxzdHJpbmc+IHwgdW5kZWZpbmVkXG4gICAgICBpZiAoZGVwcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgW1N0YXRlVHJhaXQuYnVpbGRdIE1pc3NpbmcgZXhwbGljaXQgZGVwcyBmb3Igc291cmNlIFwiJHtlbnRyeS5maWVsZFBhdGh9XCIuIGAgK1xuICAgICAgICAgICAgXCJQbGVhc2UgcHJvdmlkZSBtZXRhLmRlcHMgZm9yIFN0YXRlVHJhaXQuc291cmNlKHsgZGVwczogWy4uLl0sIC4uLiB9KS5cIixcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZW50cnkua2luZCA9PT0gXCJjaGVja1wiKSB7XG4gICAgICBjb25zdCBydWxlcyA9ICgoZW50cnkubWV0YSBhcyBhbnkpPy5ydWxlcyA/PyB7fSkgYXMgUmVjb3JkPHN0cmluZywgYW55PlxuICAgICAgZm9yIChjb25zdCBuYW1lIG9mIE9iamVjdC5rZXlzKHJ1bGVzKSkge1xuICAgICAgICBjb25zdCBydWxlID0gcnVsZXNbbmFtZV1cbiAgICAgICAgaWYgKHR5cGVvZiBydWxlID09PSBcImZ1bmN0aW9uXCIgfHwgIXJ1bGUgfHwgdHlwZW9mIHJ1bGUgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBgW1N0YXRlVHJhaXQuYnVpbGRdIE1pc3NpbmcgZXhwbGljaXQgZGVwcyBmb3IgY2hlY2sgXCIke2VudHJ5LmZpZWxkUGF0aH1cIiBydWxlIFwiJHtuYW1lfVwiLiBgICtcbiAgICAgICAgICAgICAgXCJQbGVhc2UgdXNlIHsgZGVwczogWy4uLl0sIHZhbGlkYXRlOiAuLi4gfSBmb3JtLlwiLFxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgICBpZiAoKHJ1bGUgYXMgYW55KS5kZXBzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBgW1N0YXRlVHJhaXQuYnVpbGRdIE1pc3NpbmcgZXhwbGljaXQgZGVwcyBmb3IgY2hlY2sgXCIke2VudHJ5LmZpZWxkUGF0aH1cIiBydWxlIFwiJHtuYW1lfVwiLiBgICtcbiAgICAgICAgICAgICAgXCJQbGVhc2UgcHJvdmlkZSBkZXBzOiBbLi4uXS5cIixcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjb25zdCB7IGdyYXBoLCBwbGFuIH0gPSBidWlsZEdyYXBoKGVudHJpZXMsIG5vZGVNZXRhQnlGaWVsZFBhdGgpXG5cbiAgLy8gXHU5NDg4XHU1QkY5IGxpbmsgXHU4RkI5XHU4RkRCXHU4ODRDXHU0RTAwXHU2QjIxXHU3M0FGXHU4REVGXHU2OEMwXHU2RDRCXHVGRjBDXHU5MDdGXHU1MTREXHU2NjBFXHU2NjNFXHU3Njg0XHU5MTREXHU3RjZFXHU5NTE5XHU4QkVGXHUzMDAyXG4gIGFzc2VydE5vTGlua0N5Y2xlcyhncmFwaC5lZGdlcylcblxuICByZXR1cm4ge1xuICAgIHN0YXRlU2NoZW1hLFxuICAgIHNwZWMsXG4gICAgZW50cmllczogZW50cmllcyBhcyBSZWFkb25seUFycmF5PFN0YXRlVHJhaXRFbnRyeTxhbnksIHN0cmluZz4+LFxuICAgIGdyYXBoLFxuICAgIHBsYW4sXG4gIH1cbn1cbiIsICJpbXBvcnQgeyBFZmZlY3QgfSBmcm9tIFwiZWZmZWN0XCJcbmltcG9ydCB0eXBlIHsgQm91bmRBcGkgfSBmcm9tIFwiLi4vcnVudGltZS9jb3JlL21vZHVsZS5qc1wiXG5pbXBvcnQgKiBhcyBTb3VyY2VSdW50aW1lIGZyb20gXCIuL3NvdXJjZS5qc1wiXG5pbXBvcnQgdHlwZSB7XG4gIFN0YXRlVHJhaXRQcm9ncmFtLFxuICBTdGF0ZVRyYWl0UGxhblN0ZXAsXG4gIFN0YXRlVHJhaXRFbnRyeSxcbn0gZnJvbSBcIi4vbW9kZWwuanNcIlxuXG5jb25zdCBidWlsZEVudHJ5SW5kZXggPSA8Uz4oXG4gIGVudHJpZXM6IFJlYWRvbmx5QXJyYXk8U3RhdGVUcmFpdEVudHJ5PFMsIHN0cmluZz4+LFxuKTogTWFwPHN0cmluZywgQXJyYXk8U3RhdGVUcmFpdEVudHJ5PFMsIHN0cmluZz4+PiA9PiB7XG4gIGNvbnN0IGluZGV4ID0gbmV3IE1hcDxzdHJpbmcsIEFycmF5PFN0YXRlVHJhaXRFbnRyeTxTLCBzdHJpbmc+Pj4oKVxuICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcbiAgICBjb25zdCBsaXN0ID0gaW5kZXguZ2V0KGVudHJ5LmZpZWxkUGF0aCkgPz8gW11cbiAgICBsaXN0LnB1c2goZW50cnkpXG4gICAgaW5kZXguc2V0KGVudHJ5LmZpZWxkUGF0aCwgbGlzdClcbiAgfVxuICByZXR1cm4gaW5kZXhcbn1cblxuLyoqXG4gKiBcdTU3MjhcdTdFRDlcdTVCOUEgQm91bmQgQVBJIFx1NEUwQVx1NUI4OVx1ODhDNSBTdGF0ZVRyYWl0UHJvZ3JhbSBcdTYzQ0ZcdThGRjBcdTc2ODRcdTg4NENcdTRFM0FcdTMwMDJcbiAqXG4gKiAtIFBoYXNlIDIgXHU2NzAwXHU1QzBGXHU1QjlFXHU3M0IwXHVGRjFBXG4gKiAgIC0gXHU0RTNBIGNvbXB1dGVkIFx1NUI1N1x1NkJCNVx1NkNFOFx1NTE4QyB3YXRjaGVyXHVGRjFBXHU1RjUzIFN0YXRlIFx1NTNEOFx1NTMxNlx1NjVGNlx1OTFDRFx1N0I5N1x1NzZFRVx1NjgwN1x1NUI1N1x1NkJCNVx1RkYxQlxuICogICAtIFx1NEUzQSBsaW5rIFx1NUI1N1x1NkJCNVx1NkNFOFx1NTE4QyB3YXRjaGVyXHVGRjFBXHU1RjUzXHU2RTkwXHU1QjU3XHU2QkI1XHU1M0Q4XHU1MzE2XHU2NUY2XHU1NDBDXHU2QjY1XHU3NkVFXHU2ODA3XHU1QjU3XHU2QkI1XHVGRjFCXG4gKiAgIC0gXHU0RTNBIHNvdXJjZSBcdTVCNTdcdTZCQjVcdTk4ODRcdTc1NTlcdTUyMzdcdTY1QjBcdTUxNjVcdTUzRTNcdUZGMDhcdTY2ODJcdTRFMERcdTg5RTZcdTUzRDFcdTU5MTZcdTkwRThcdThDMDNcdTc1MjhcdUZGMDlcdTMwMDJcbiAqXG4gKiBcdThCRjRcdTY2MEVcdUZGMUFcbiAqIC0gXHU2MjQwXHU2NzA5IHdhdGNoZXIgXHU5MEZEXHU5MDFBXHU4RkM3IEJvdW5kIEFQSSBgJGAgXHU1Qjg5XHU4OEM1XHVGRjBDXHU0RTBEXHU3NkY0XHU2M0E1XHU0RjlEXHU4RDU2IE1vZHVsZVJ1bnRpbWVcdUZGMUJcbiAqIC0gXHU2QkNGXHU0RTJBIFBsYW5TdGVwIFx1NUJGOVx1NUU5NFx1NEUwMFx1NEUyQVx1OTU3Rlx1NzUxRlx1NTQ3RFx1NTQ2OFx1NjcxRiBFZmZlY3RcdUZGMENcdTkwMUFcdThGQzcgZm9ya1Njb3BlZCBcdTYzMDJcdThGN0RcdTUyMzAgUnVudGltZSBTY29wZVx1MzAwMlxuICovXG5leHBvcnQgY29uc3QgaW5zdGFsbCA9IDxTPihcbiAgYm91bmQ6IEJvdW5kQXBpPGFueSwgYW55PixcbiAgcHJvZ3JhbTogU3RhdGVUcmFpdFByb2dyYW08Uz4sXG4pOiBFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBhbnk+ID0+IHtcbiAgLy8gXHU0RjE4XHU1MTQ4XHU1QzA2IFByb2dyYW0gXHU2Q0U4XHU1MThDXHU1MjMwIFJ1bnRpbWVcdUZGMDhcdTY1MzZcdTY1NUJcdTVGMTVcdTY0Q0VcdTU3MjhcdTRFOEJcdTUyQTFcdTYzRDBcdTRFQTRcdTUyNERcdTdFREZcdTRFMDBcdTYyNjdcdTg4NEMgY29tcHV0ZWQvbGluay9jaGVja1x1RkYwOVx1MzAwMlxuICBjb25zdCByZWdpc3RlclByb2dyYW0gPVxuICAgIChib3VuZCBhcyBhbnkpXG4gICAgICAuX19yZWdpc3RlclN0YXRlVHJhaXRQcm9ncmFtIGFzXG4gICAgfCAoKHA6IFN0YXRlVHJhaXRQcm9ncmFtPFM+KSA9PiB2b2lkKVxuICAgIHwgdW5kZWZpbmVkXG5cbiAgaWYgKHJlZ2lzdGVyUHJvZ3JhbSkge1xuICAgIHJlZ2lzdGVyUHJvZ3JhbShwcm9ncmFtKVxuICB9XG5cbiAgY29uc3QgZW50cnlJbmRleCA9IGJ1aWxkRW50cnlJbmRleChwcm9ncmFtLmVudHJpZXMgYXMgYW55KVxuXG4gIGNvbnN0IGluc3RhbGxTdGVwID0gKFxuICAgIHN0ZXA6IFN0YXRlVHJhaXRQbGFuU3RlcCxcbiAgKTogRWZmZWN0LkVmZmVjdDx2b2lkLCBuZXZlciwgYW55PiA9PiB7XG4gICAgaWYgKCFzdGVwLnRhcmdldEZpZWxkUGF0aCkge1xuICAgICAgcmV0dXJuIEVmZmVjdC52b2lkXG4gICAgfVxuXG4gICAgaWYgKHN0ZXAua2luZCAhPT0gXCJzb3VyY2UtcmVmcmVzaFwiKSB7XG4gICAgICAvLyBjb21wdXRlZC9saW5rL2NoZWNrIFx1NURGMlx1NzUzMSBSdW50aW1lIFx1NTE4NVx1NjgzOFx1NTcyOFx1NEU4Qlx1NTJBMVx1N0E5N1x1NTNFM1x1NTE4NVx1NTkwNFx1NzQwNlx1RkYxQmluc3RhbGwgXHU5NjM2XHU2QkI1XHU0RUM1XHU0RkREXHU3NTU5IHNvdXJjZS5yZWZyZXNoIFx1NTE2NVx1NTNFM1x1MzAwMlxuICAgICAgcmV0dXJuIEVmZmVjdC52b2lkXG4gICAgfVxuXG4gICAgY29uc3QgY2FuZGlkYXRlcyA9IGVudHJ5SW5kZXguZ2V0KHN0ZXAudGFyZ2V0RmllbGRQYXRoKVxuICAgIGlmICghY2FuZGlkYXRlcyB8fCBjYW5kaWRhdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLy8gUGxhbiBcdTRFMkRcdTVGMTVcdTc1MjhcdTRFODZcdTRFMERcdTVCNThcdTU3MjhcdTc2ODQgU3BlY1x1RkYxQVx1ODlDNlx1NEUzQVx1Njc4NFx1NUVGQVx1OTYzNlx1NkJCNVx1NzY4NCBidWdcdUZGMENcdThGRDlcdTkxQ0NcdTc2RjRcdTYzQTVcdTVGRkRcdTc1NjVcdThCRTVcdTZCNjVcdTlBQTRcdTMwMDJcbiAgICAgIHJldHVybiBFZmZlY3Qudm9pZFxuICAgIH1cblxuICAgIGNvbnN0IGVudHJ5ID0gY2FuZGlkYXRlcy5maW5kKChlKSA9PiBlLmtpbmQgPT09IFwic291cmNlXCIpXG5cbiAgICBpZiAoIWVudHJ5KSB7XG4gICAgICByZXR1cm4gRWZmZWN0LnZvaWRcbiAgICB9XG5cbiAgICByZXR1cm4gU291cmNlUnVudGltZS5pbnN0YWxsU291cmNlUmVmcmVzaChcbiAgICAgIGJvdW5kLFxuICAgICAgc3RlcCxcbiAgICAgIGVudHJ5IGFzIGFueSxcbiAgICApXG4gIH1cblxuICByZXR1cm4gRWZmZWN0LmZvckVhY2gocHJvZ3JhbS5wbGFuLnN0ZXBzLCAoc3RlcCkgPT4gaW5zdGFsbFN0ZXAoc3RlcCkpLnBpcGUoRWZmZWN0LmFzVm9pZClcbn1cbiIsICJpbXBvcnQgdHlwZSB7IFN0YXRlVHJhaXRQcm9ncmFtIH0gZnJvbSBcIi4uLy4uL3N0YXRlLXRyYWl0LmpzXCJcbmltcG9ydCB7IGlzRGV2RW52IH0gZnJvbSBcIi4uL3J1bnRpbWUvY29yZS9lbnYuanNcIlxuXG4vLyBcdTRFQzVcdTc1MjhcdTRFOEUgRGVidWcvRGV2dG9vbHNcdUZGMUFcdTYzMDkgbW9kdWxlSWQgXHU4QkIwXHU1RjU1IFN0YXRlVHJhaXRQcm9ncmFtXHUzMDAyXG4vLyAtIFx1NEUwRFx1NTNDMlx1NEUwRVx1OEZEMFx1ODg0Q1x1NjVGNlx1ODg0Q1x1NEUzQVx1NTFCM1x1N0I1Nlx1RkYxQlxuLy8gLSBcdTlFRDhcdThCQTRcdTU3MjhcdTc1MUZcdTRFQTdcdTczQUZcdTU4ODNcdTRFMkRcdTRFMERcdTVCNThcdTUwQThcdTRFRkJcdTRGNTUgUHJvZ3JhbVx1RkYwQ1x1OTA3Rlx1NTE0RFx1OTg5RFx1NTkxNlx1NTE4NVx1NUI1OFx1NTM2MFx1NzUyOFx1MzAwMlxuXG5jb25zdCBwcm9ncmFtc0J5SWQgPSBuZXcgTWFwPHN0cmluZywgU3RhdGVUcmFpdFByb2dyYW08YW55Pj4oKVxuXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJNb2R1bGVQcm9ncmFtID0gKFxuICBtb2R1bGVJZDogc3RyaW5nLFxuICBwcm9ncmFtOiBTdGF0ZVRyYWl0UHJvZ3JhbTxhbnk+LFxuKTogdm9pZCA9PiB7XG4gIGlmICghaXNEZXZFbnYoKSkge1xuICAgIC8vIFx1NzUxRlx1NEVBN1x1NzNBRlx1NTg4M1x1OUVEOFx1OEJBNFx1NEUwRFx1NTA1QVx1NkNFOFx1NTE4Q1x1RkYwQ1x1OTA3Rlx1NTE0RFx1OTU3Rlx1NzUxRlx1NTQ3RFx1NTQ2OFx1NjcxRlx1NzY4NCBQcm9ncmFtIFx1N0QyMlx1NUYxNVx1RkYxQlxuICAgIC8vIFx1NTk4Mlx1OTcwMFx1NTcyOFx1NzUxRlx1NEVBN1x1NzNBRlx1NTg4M1x1NTQyRlx1NzUyOCBEZXZ0b29sc1x1RkYwQ1x1NTNFRlx1NTQwRVx1N0VFRFx1OTAxQVx1OEZDN1x1NzNBRlx1NTg4M1x1NTNEOFx1OTFDRlx1NjIxNlx1N0YxNlx1OEJEMVx1OTE0RFx1N0Y2RVx1OEMwM1x1NjU3NFx1N0I1Nlx1NzU2NVx1MzAwMlxuICAgIHJldHVyblxuICB9XG4gIHByb2dyYW1zQnlJZC5zZXQobW9kdWxlSWQsIHByb2dyYW0pXG59XG5cbmV4cG9ydCBjb25zdCBnZXRNb2R1bGVQcm9ncmFtQnlJZCA9IChcbiAgbW9kdWxlSWQ6IHN0cmluZyxcbik6IFN0YXRlVHJhaXRQcm9ncmFtPGFueT4gfCB1bmRlZmluZWQgPT4gcHJvZ3JhbXNCeUlkLmdldChtb2R1bGVJZClcbiIsICJpbXBvcnQgdHlwZSB7IENvbnRleHQsIExheWVyIGFzIEVmZmVjdExheWVyIH0gZnJvbSBcImVmZmVjdFwiXG5cbi8qKlxuICogU3RhdGUgXHU1NDdEXHU1NDBEXHU3QTdBXHU5NUY0XHVGRjA4XHU2QTIxXHU1NzU3XHU3MjQ4XHVGRjA5XHVGRjFBXG4gKiAtIFx1NjNEMFx1NEY5QiBTdGF0ZS5UYWc8Uz5cdUZGMUFcdTc1MjhcdTRFOEVcdTU3MjggRW52IFx1NEUyRFx1NjgwN1x1OEJCMFx1NjdEMFx1N0M3QiBTdGF0ZVx1RkYxQlxuICogLSBcdTYzRDBcdTRGOUIgU3RhdGUuTGF5ZXI8Uz5cdUZGMUFcdTc1MjhcdTRFOEVcdTY3ODRcdTkwMjBcdTUzRUFcdTY0M0FcdTVFMjYgU3RhdGUuVGFnPFM+IFx1NzY4NCBMYXllclx1MzAwMlxuICpcbiAqIFx1NEVDNVx1NTcyOFx1N0M3Qlx1NTc4Qlx1NUM0Mlx1OTc2Mlx1NEY3Rlx1NzUyOFx1RkYwQ1x1NEUwRFx1NUYxNVx1NTE2NVx1OTg5RFx1NTkxNlx1OEZEMFx1ODg0Q1x1NjVGNlx1NEY5RFx1OEQ1Nlx1MzAwMlxuICovXG5leHBvcnQgdHlwZSBUYWc8Uz4gPSBDb250ZXh0LlRhZzxhbnksIFM+XG5leHBvcnQgdHlwZSBMYXllcjxTPiA9IEVmZmVjdExheWVyLkxheWVyPFRhZzxTPiwgbmV2ZXIsIG5ldmVyPlxuIiwgImltcG9ydCB0eXBlIHsgQ29udGV4dCwgTGF5ZXIgYXMgRWZmZWN0TGF5ZXIsIFN0cmVhbSwgRWZmZWN0IH0gZnJvbSBcImVmZmVjdFwiXG5cbi8qKlxuICogQWN0aW9ucyBcdTU0N0RcdTU0MERcdTdBN0FcdTk1RjRcdUZGMDhcdTZBMjFcdTU3NTdcdTcyNDhcdUZGMDlcdUZGMUFcbiAqIC0gXHU2M0QwXHU0RjlCIEFjdGlvbnMuVGFnPEE+XHVGRjFBRW52IFx1NEUyRFx1NzY4NCBBY3Rpb24gXHU5MDFBXHU5MDUzXHVGRjA4ZGlzcGF0Y2ggKyBhY3Rpb25zJFx1RkYwOVx1RkYxQlxuICogLSBcdTYzRDBcdTRGOUIgQWN0aW9ucy5MYXllcjxBPlx1RkYxQVx1NTNFQVx1NjQzQVx1NUUyNlx1OEJFNSBBY3Rpb24gXHU5MDFBXHU5MDUzXHU3Njg0IExheWVyIFx1NUY2Mlx1NzJCNlx1MzAwMlxuICpcbiAqIFx1NEVDNVx1NTcyOFx1N0M3Qlx1NTc4Qlx1NUM0Mlx1OTc2Mlx1NEY3Rlx1NzUyOFx1RkYwQ1x1NEUwRFx1NUYxNVx1NTE2NVx1OTg5RFx1NTkxNlx1OEZEMFx1ODg0Q1x1NjVGNlx1NEY5RFx1OEQ1Nlx1MzAwMlxuICovXG5leHBvcnQgdHlwZSBUYWc8QT4gPSBDb250ZXh0LlRhZzxcbiAgYW55LFxuICB7XG4gICAgZGlzcGF0Y2g6IChhOiBBKSA9PiBFZmZlY3QuRWZmZWN0PHZvaWQ+XG4gICAgYWN0aW9ucyQ6IFN0cmVhbS5TdHJlYW08QT5cbiAgfVxuPlxuXG5leHBvcnQgdHlwZSBMYXllcjxBPiA9IEVmZmVjdExheWVyLkxheWVyPFRhZzxBPiwgbmV2ZXIsIG5ldmVyPlxuIiwgImltcG9ydCB7IENvbnRleHQsIEVmZmVjdCB9IGZyb20gXCJlZmZlY3RcIlxuaW1wb3J0IHR5cGUgKiBhcyBMb2dpeCBmcm9tIFwiLi9pbnRlcm5hbC9tb2R1bGUuanNcIlxuaW1wb3J0ICogYXMgSW50ZXJuYWwgZnJvbSBcIi4vaW50ZXJuYWwvTG9naWNNaWRkbGV3YXJlLmpzXCJcbmltcG9ydCAqIGFzIFBsYXRmb3JtSW50ZXJuYWwgZnJvbSBcIi4vaW50ZXJuYWwvcGxhdGZvcm0vUGxhdGZvcm0uanNcIlxuXG5leHBvcnQgKiBmcm9tIFwiLi9pbnRlcm5hbC9Mb2dpY01pZGRsZXdhcmUuanNcIlxuXG4vLyBMb2dpY1x1RkYxQVx1NTcyOFx1NjdEMFx1NEUwMFx1N0M3QiBNb2R1bGUgXHU0RTBBXHU5NTdGXHU2NzFGXHU4RkQwXHU4ODRDXHU3Njg0XHU0RTAwXHU2QkI1IEVmZmVjdCBcdTdBMEJcdTVFOEZcdTMwMDJcblxuLyoqXG4gKiBMb2dpYyBcdTRGNUNcdTc1MjhcdTU3REZcdTUxODVcdTc1MjhcdTRFOEVcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNEQgTW9kdWxlUnVudGltZSBcdTc2ODRcdTY4MzhcdTVGQzMgVGFnXHUzMDAyXG4gKi9cbmV4cG9ydCBjb25zdCBSdW50aW1lVGFnOiBDb250ZXh0LlRhZzxhbnksIExvZ2l4Lk1vZHVsZVJ1bnRpbWU8YW55LCBhbnk+PiA9XG4gIENvbnRleHQuR2VuZXJpY1RhZzxhbnksIExvZ2l4Lk1vZHVsZVJ1bnRpbWU8YW55LCBhbnk+PihcIkBsb2dpeC9SdW50aW1lXCIpXG5cbi8vIFx1NUJGOVx1NTkxNlx1NjZCNFx1OTczMlx1NzY4NCBQbGF0Zm9ybSBcdTdDN0JcdTU3OEJcdTUyMkJcdTU0MERcdUZGMDhcdTRFMEUgaW50ZXJuYWwvcGxhdGZvcm0vUGxhdGZvcm0uU2VydmljZSBcdTdCNDlcdTRFRjdcdUZGMDlcdTMwMDJcbmV4cG9ydCB0eXBlIFBsYXRmb3JtID0gUGxhdGZvcm1JbnRlcm5hbC5TZXJ2aWNlXG5cbi8vIExvZ2ljIEVudiAvIE9mIFx1N0M3Qlx1NTc4Qlx1NTIyQlx1NTQwRFx1RkYxQVx1N0VERlx1NEUwMFx1NjMwN1x1NTQxMSBpbnRlcm5hbCBcdTcyNDhcdTY3MkNcdUZGMENcdTkwN0ZcdTUxNERcdTU5MUFcdTU5MDRcdTVCOUFcdTRFNDlcdTMwMDJcbmV4cG9ydCB0eXBlIEVudjxTaCBleHRlbmRzIExvZ2l4LkFueU1vZHVsZVNoYXBlLCBSPiA9IEludGVybmFsLkVudjxTaCwgUj5cblxuZXhwb3J0IHR5cGUgT2Y8XG4gIFNoIGV4dGVuZHMgTG9naXguQW55TW9kdWxlU2hhcGUsXG4gIFIgPSBuZXZlcixcbiAgQSA9IHZvaWQsXG4gIEUgPSBuZXZlclxuPiA9IEludGVybmFsLk9mPFNoLCBSLCBBLCBFPlxuXG5leHBvcnQgZnVuY3Rpb24gb2Y8XG4gIFNoIGV4dGVuZHMgTG9naXguQW55TW9kdWxlU2hhcGUsXG4gIFIgPSBuZXZlcixcbiAgQSA9IHZvaWQsXG4gIEUgPSBuZXZlclxuPihlZmY6IEVmZmVjdC5FZmZlY3Q8QSwgRSwgRW52PFNoLCBSPj4pOiBPZjxTaCwgUiwgQSwgRT4ge1xuICByZXR1cm4gZWZmIGFzIE9mPFNoLCBSLCBBLCBFPlxufVxuXG4vLyBEU0wgXHU3QzdCXHU1NzhCXHU1MjJCXHU1NDBEXHVGRjFBXHU3NkY0XHU2M0E1XHU1OTBEXHU3NTI4IGludGVybmFsIFx1NUI5QVx1NEU0OVx1MzAwMlxuZXhwb3J0IHR5cGUgRHJhZnQ8VD4gPSBJbnRlcm5hbC5EcmFmdDxUPlxuZXhwb3J0IHR5cGUgQW5kVGhlblVwZGF0ZUhhbmRsZXI8XG4gIFNoIGV4dGVuZHMgTG9naXguQW55TW9kdWxlU2hhcGUsXG4gIFBheWxvYWQsXG4gIEUgPSBhbnksXG4gIFIyID0gYW55XG4+ID0gSW50ZXJuYWwuQW5kVGhlblVwZGF0ZUhhbmRsZXI8U2gsIFBheWxvYWQsIEUsIFIyPlxuZXhwb3J0IHR5cGUgSW50ZW50QnVpbGRlcjxcbiAgUGF5bG9hZCxcbiAgU2ggZXh0ZW5kcyBMb2dpeC5BbnlNb2R1bGVTaGFwZSxcbiAgUiA9IG5ldmVyXG4+ID0gSW50ZXJuYWwuSW50ZW50QnVpbGRlcjxQYXlsb2FkLCBTaCwgUj5cbmV4cG9ydCB0eXBlIEZsdWVudE1hdGNoPFY+ID0gSW50ZXJuYWwuRmx1ZW50TWF0Y2g8Vj5cbmV4cG9ydCB0eXBlIEZsdWVudE1hdGNoVGFnPFYgZXh0ZW5kcyB7IF90YWc6IHN0cmluZyB9PiA9XG4gIEludGVybmFsLkZsdWVudE1hdGNoVGFnPFY+XG5cbi8vIFx1NTE3Nlx1NEY1OVx1NUI5RVx1NzNCMFx1N0VDNlx1ODI4Mlx1RkYwOEludGVudEJ1aWxkZXIgXHU1REU1XHU1MzgyXHU3QjQ5XHVGRjA5XHU3NTMxIGludGVybmFsL3J1bnRpbWUgXHU3RUM0XHU1NDA4XHU1QjhDXHU2MjEwXHVGRjBDXG4vLyBcdTRFMUFcdTUyQTFcdTRFRTNcdTc4MDFcdTRFMDBcdTgyMkNcdTUzRUFcdTkwMUFcdThGQzcgTW9kdWxlLmxvZ2ljIFx1NEUwRSBCb3VuZCBBUEkgXHU0RjdGXHU3NTI4XHU2NzJDXHU2QTIxXHU1NzU3XHVGRjBDXHU0RTBEXHU3NkY0XHU2M0E1XHU0RjlEXHU4RDU2XHU1MTg1XHU5MEU4XHU2Nzg0XHU5MDIwXHU4RkM3XHU3QTBCXHUzMDAyXG4iLCAiaW1wb3J0IHsgQ29udGV4dCwgRWZmZWN0LCBTY2hlbWEsIFN0cmVhbSwgU3Vic2NyaXB0aW9uUmVmIH0gZnJvbSBcImVmZmVjdFwiXG5pbXBvcnQgdHlwZSAqIGFzIExvZ2l4IGZyb20gXCIuL2ludGVybmFsL21vZHVsZS5qc1wiXG5pbXBvcnQgdHlwZSAqIGFzIEZsb3cgZnJvbSBcIi4vRmxvdy5qc1wiXG5pbXBvcnQgKiBhcyBMb2dpYyBmcm9tIFwiLi9Mb2dpYy5qc1wiXG5pbXBvcnQgKiBhcyBCb3VuZEFwaVJ1bnRpbWUgZnJvbSBcIi4vaW50ZXJuYWwvcnVudGltZS9Cb3VuZEFwaVJ1bnRpbWUuanNcIlxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEJvdW5kQXBpXHVGRjFBXHU0RTNBXHU2N0QwXHU0RTAwXHU3QzdCIFN0b3JlIFNoYXBlICsgRW52IFx1NTIxQlx1NUVGQVx1OTg4NFx1N0VEMVx1NUI5QVx1NzY4NFx1OEJCRlx1OTVFRVx1NTY2OFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8qKlxuICogQWN0aW9uIEFQSVx1RkYxQVx1NTZGQVx1NUI5QVx1NjVCOVx1NkNENSArIFx1NTJBOFx1NjAwMSBBY3Rpb24gRGlzcGF0Y2hlclx1MzAwMlxuICovXG50eXBlIEFjdGlvbkFyZ3M8UD4gPSBbUF0gZXh0ZW5kcyBbdm9pZF0gPyBbXSB8IFtQXSA6IFtQXVxudHlwZSBBY3Rpb25GbjxQLCBPdXQ+ID0gKC4uLmFyZ3M6IEFjdGlvbkFyZ3M8UD4pID0+IE91dFxuXG5leHBvcnQgdHlwZSBBY3Rpb25zQXBpPFNoIGV4dGVuZHMgTG9naXguQW55TW9kdWxlU2hhcGUsIFI+ID0ge1xuICByZWFkb25seSBkaXNwYXRjaDogKFxuICAgIGFjdGlvbjogTG9naXguQWN0aW9uT2Y8U2g+XG4gICkgPT4gTG9naWMuT2Y8U2gsIFIsIHZvaWQsIG5ldmVyPlxuICByZWFkb25seSBhY3Rpb25zJDogU3RyZWFtLlN0cmVhbTxMb2dpeC5BY3Rpb25PZjxTaD4+XG59ICYge1xuICByZWFkb25seSBbSyBpbiBrZXlvZiBTaFtcImFjdGlvbk1hcFwiXV06IEFjdGlvbkZuPFxuICAgIFNjaGVtYS5TY2hlbWEuVHlwZTxTaFtcImFjdGlvbk1hcFwiXVtLXT4sXG4gICAgTG9naWMuT2Y8U2gsIFIsIHZvaWQsIG5ldmVyPlxuICA+XG59XG5cbi8qKlxuICogQm91bmQgQVBJIFx1NURFNVx1NTM4Mlx1RkYxQVx1NEUzQVx1NjdEMFx1NEUwMFx1N0M3QiBTdG9yZSBTaGFwZSArIEVudiBcdTUyMUJcdTVFRkFcdTk4ODRcdTdFRDFcdTVCOUFcdTc2ODRcdThCQkZcdTk1RUVcdTU2NjhcdTMwMDJcbiAqXG4gKiAtIFx1OUVEOFx1OEJBNFx1NTdGQVx1NEU4RSBMb2dpYy5SdW50aW1lVGFnIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RCBMb2dpeC5Nb2R1bGVSdW50aW1lXHVGRjFCXG4gKiAtIFx1NTNFRlx1OTAwOVx1NEYyMFx1NTE2NSBMb2dpeC5Nb2R1bGVUYWc8U2g+IFx1NEVFNVx1NjYzRVx1NUYwRlx1NjMwN1x1NUI5QSBSdW50aW1lIFx1Njc2NVx1NkU5MFx1RkYwOFx1NEY4Qlx1NTk4Mlx1OERFOCBTdG9yZSBcdTUzNEZcdTRGNUNcdTU3M0FcdTY2NkZcdUZGMDlcdTMwMDJcbiAqXG4gKiBcdThCRjRcdTY2MEVcdUZGMUFcdTY3MkNcdTUxRkRcdTY1NzBcdTRFQzVcdTYzRDBcdTRGOUJcdTdDN0JcdTU3OEJcdTdCN0VcdTU0MERcdUZGMENcdTUxNzdcdTRGNTNcdTVCOUVcdTczQjBcdTc1MzFcdThGRDBcdTg4NENcdTY1RjZcdTRFRTNcdTc4MDFcdTZDRThcdTUxNjVcdUZGMENcdTY3MkMgUG9DIFx1NEUyRFx1OEZENFx1NTZERVx1NTAzQ1x1NEUzQVx1NTM2MFx1NEY0RFx1MzAwMlxuICovXG5leHBvcnQgdHlwZSBCb3VuZEFwaTxTaCBleHRlbmRzIExvZ2l4LkFueU1vZHVsZVNoYXBlLCBSID0gbmV2ZXI+ID1cbiAgTG9naXguQm91bmRBcGk8U2gsIFI+XG5cbmV4cG9ydCBpbnRlcmZhY2UgQm91bmRBcGlQdWJsaWM8U2ggZXh0ZW5kcyBMb2dpeC5BbnlNb2R1bGVTaGFwZSwgUiA9IG5ldmVyPiB7XG4gIHJlYWRvbmx5IHN0YXRlOiB7XG4gICAgcmVhZG9ubHkgcmVhZDogTG9naWMuT2Y8U2gsIFIsIExvZ2l4LlN0YXRlT2Y8U2g+LCBuZXZlcj5cbiAgICByZWFkb25seSB1cGRhdGU6IChcbiAgICAgIGY6IChwcmV2OiBMb2dpeC5TdGF0ZU9mPFNoPikgPT4gTG9naXguU3RhdGVPZjxTaD5cbiAgICApID0+IExvZ2ljLk9mPFNoLCBSLCB2b2lkLCBuZXZlcj5cbiAgICByZWFkb25seSBtdXRhdGU6IChcbiAgICAgIGY6IChkcmFmdDogTG9naWMuRHJhZnQ8TG9naXguU3RhdGVPZjxTaD4+KSA9PiB2b2lkXG4gICAgKSA9PiBMb2dpYy5PZjxTaCwgUiwgdm9pZCwgbmV2ZXI+XG4gICAgcmVhZG9ubHkgcmVmOiB7XG4gICAgICA8ViA9IExvZ2l4LlN0YXRlT2Y8U2g+PihcbiAgICAgICAgc2VsZWN0b3I/OiAoczogTG9naXguU3RhdGVPZjxTaD4pID0+IFZcbiAgICAgICk6IFN1YnNjcmlwdGlvblJlZi5TdWJzY3JpcHRpb25SZWY8Vj5cbiAgICB9XG4gIH1cbiAgcmVhZG9ubHkgYWN0aW9uczogQWN0aW9uc0FwaTxTaCwgUj5cbiAgcmVhZG9ubHkgZmxvdzogRmxvdy5BcGk8U2gsIFI+XG4gIHJlYWRvbmx5IG1hdGNoOiA8Vj4odmFsdWU6IFYpID0+IExvZ2ljLkZsdWVudE1hdGNoPFY+XG4gIHJlYWRvbmx5IG1hdGNoVGFnOiA8ViBleHRlbmRzIHsgX3RhZzogc3RyaW5nIH0+KFxuICAgIHZhbHVlOiBWXG4gICkgPT4gTG9naWMuRmx1ZW50TWF0Y2hUYWc8Vj5cbiAgLyoqXG4gICAqIFx1NzUxRlx1NTQ3RFx1NTQ2OFx1NjcxRlx1OTRBOVx1NUI1MFx1RkYxQVx1NjZGRlx1NEVFMyBTdG9yZUNvbmZpZy5saWZlY3ljbGVcdUZGMENcdTU3MjggTG9naWMgXHU0RTJEXHU1QjlBXHU0RTQ5XHU1MjFEXHU1OUNCXHU1MzE2XHU0RTBFXHU5NTAwXHU2QkMxXHU5MDNCXHU4RjkxXHUzMDAyXG4gICAqIFx1N0VBNlx1Njc1Rlx1RkYxQVx1NUZDNVx1OTg3Qlx1NTkwNFx1NzQwNlx1NjI0MFx1NjcwOVx1OTUxOVx1OEJFRiAoRT1uZXZlcilcdTMwMDJcbiAgICovXG4gIHJlYWRvbmx5IGxpZmVjeWNsZToge1xuICAgIHJlYWRvbmx5IG9uSW5pdDogKFxuICAgICAgZWZmOiBMb2dpYy5PZjxTaCwgUiwgdm9pZCwgbmV2ZXI+XG4gICAgKSA9PiBMb2dpYy5PZjxTaCwgUiwgdm9pZCwgbmV2ZXI+XG4gICAgcmVhZG9ubHkgb25EZXN0cm95OiAoXG4gICAgICBlZmY6IExvZ2ljLk9mPFNoLCBSLCB2b2lkLCBuZXZlcj5cbiAgICApID0+IExvZ2ljLk9mPFNoLCBSLCB2b2lkLCBuZXZlcj5cbiAgICAvKipcbiAgICAgKiBcdTk1MTlcdThCRUZcdTRFMEFcdTYyQTVcdTk0QTlcdTVCNTBcdUZGMUFcdTVGNTMgTG9naWMgRmliZXIgXHU1M0QxXHU3NTFGXHU2NzJBXHU2MzU1XHU4M0I3IERlZmVjdCBcdTY1RjZcdTg5RTZcdTUzRDFcdTMwMDJcbiAgICAgKiBcdTRFQzVcdTc1MjhcdTRFOEVcdTRFMEFcdTYyQTVcdUZGMENcdTY1RTBcdTZDRDVcdTk2M0JcdTZCNjIgU2NvcGUgXHU1MTczXHU5NUVEXHUzMDAyXG4gICAgICovXG4gICAgcmVhZG9ubHkgb25FcnJvcjogKFxuICAgICAgaGFuZGxlcjogKFxuICAgICAgICBjYXVzZTogaW1wb3J0KFwiZWZmZWN0XCIpLkNhdXNlLkNhdXNlPHVua25vd24+LFxuICAgICAgICBjb250ZXh0OiBpbXBvcnQoXCIuL2ludGVybmFsL3J1bnRpbWUvTGlmZWN5Y2xlLmpzXCIpLkVycm9yQ29udGV4dFxuICAgICAgKSA9PiBFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBSPlxuICAgICkgPT4gTG9naWMuT2Y8U2gsIFIsIHZvaWQsIG5ldmVyPlxuXG4gICAgLy8gLS0tIFBsYXRmb3JtIEhvb2tzIChQcm94aWVkIHRvIFBsYXRmb3JtIFNlcnZpY2UpIC0tLVxuXG4gICAgLyoqXG4gICAgICogXHU2MzAyXHU4RDc3XHVGRjFBXHU1RjUzIEFwcC9cdTdFQzRcdTRFRjYgXHU4RkRCXHU1MTY1XHU1NDBFXHU1M0YwXHU2MjE2XHU0RTBEXHU1M0VGXHU4OUMxXHU2NUY2XHU4OUU2XHU1M0QxXHUzMDAyXG4gICAgICogKFJlcXVpcmVzIFBsYXRmb3JtIExheWVyKVxuICAgICAqL1xuICAgIHJlYWRvbmx5IG9uU3VzcGVuZDogKFxuICAgICAgZWZmOiBMb2dpYy5PZjxTaCwgUiwgdm9pZCwgbmV2ZXI+XG4gICAgKSA9PiBMb2dpYy5PZjxTaCwgUiwgdm9pZCwgbmV2ZXI+XG5cbiAgICAvKipcbiAgICAgKiBcdTYwNjJcdTU5MERcdUZGMUFcdTVGNTMgQXBwL1x1N0VDNFx1NEVGNiBcdTYwNjJcdTU5MERcdTUyNERcdTUzRjBcdTYyMTZcdTUzRUZcdTg5QzFcdTY1RjZcdTg5RTZcdTUzRDFcdTMwMDJcbiAgICAgKiAoUmVxdWlyZXMgUGxhdGZvcm0gTGF5ZXIpXG4gICAgICovXG4gICAgcmVhZG9ubHkgb25SZXN1bWU6IChcbiAgICAgIGVmZjogTG9naWMuT2Y8U2gsIFIsIHZvaWQsIG5ldmVyPlxuICAgICkgPT4gTG9naWMuT2Y8U2gsIFIsIHZvaWQsIG5ldmVyPlxuXG4gICAgLyoqXG4gICAgICogXHU0RTFBXHU1MkExXHU5MUNEXHU3RjZFXHVGRjFBXHU2ODA3XHU1MUM2XHU1MzE2XHUyMDFDXHU4RjZGXHU5MUNEXHU3RjZFXHUyMDFEXHU0RkUxXHU1M0Y3XHVGRjA4XHU1OTgyIExvZ291dCAvIENsZWFyIEZvcm1cdUZGMDlcdTMwMDJcbiAgICAgKiAoUmVxdWlyZXMgUGxhdGZvcm0gTGF5ZXIgb3IgUnVudGltZSBTdXBwb3J0KVxuICAgICAqL1xuICAgIHJlYWRvbmx5IG9uUmVzZXQ6IChcbiAgICAgIGVmZjogTG9naWMuT2Y8U2gsIFIsIHZvaWQsIG5ldmVyPlxuICAgICkgPT4gTG9naWMuT2Y8U2gsIFIsIHZvaWQsIG5ldmVyPlxuICB9XG4gIC8qKlxuICAgKiBcdTdFREZcdTRFMDBcdTRGOURcdThENTZcdTZDRThcdTUxNjVcdTUxNjVcdTUzRTNcdUZGMUFcbiAgICogLSBcdTRGMjBcdTUxNjUgTW9kdWxlIFx1NUI5QVx1NEU0OVx1RkYxQVx1OEZENFx1NTZERVx1OERFOCBNb2R1bGUgXHU4QkJGXHU5NUVFXHU3NTI4XHU3Njg0IExvZ2l4LlJlYWRvbmx5TW9kdWxlSGFuZGxlXHVGRjFCXG4gICAqIC0gXHU0RjIwXHU1MTY1XHU2NjZFXHU5MDFBIFNlcnZpY2UgVGFnIFx1NjVGNlx1RkYxQVx1OEZENFx1NTZERSBTZXJ2aWNlIFx1NUI5RVx1NEY4Qlx1MzAwMlxuICAgKlxuICAgKiBcdThCRjRcdTY2MEVcdUZGMUFcdTZCNjNcdTVGMEZcdTVCOUVcdTczQjBcdTRFMkRcdTYzQThcdTgzNTBcdTRGMThcdTUxNDhcdTYzQTVcdTY1MzYgTW9kdWxlIFx1NUI5QVx1NEU0OVx1RkYwQ1x1NTE3Nlx1NEY1OSBUYWcgXHU4OUM2XHU0RTNBIFNlcnZpY2VcdTMwMDJcbiAgICogXHU2NzJDIFBvQyBcdTU3MjhcdTdDN0JcdTU3OEJcdTRFMEFcdTRFQ0RcdTRGN0ZcdTc1MjggVGFnL01vZHVsZSBcdTUzNjBcdTRGNERcdUZGMENcdTRGNDZcdThDMDNcdTc1MjhcdTRGQTdcdTYzQThcdTgzNTBcdTRGMjBcdTUxNjUgTW9kdWxlXHUzMDAyXG4gICAqL1xuICByZWFkb25seSB1c2U6IHtcbiAgICA8U2gyIGV4dGVuZHMgTG9naXguQW55TW9kdWxlU2hhcGU+KFxuICAgICAgbW9kdWxlOiBpbXBvcnQoXCIuL2ludGVybmFsL21vZHVsZS5qc1wiKS5Nb2R1bGVJbnN0YW5jZTxzdHJpbmcsIFNoMj5cbiAgICApOiBMb2dpYy5PZjxTaCwgUiwgTG9naXguTW9kdWxlSGFuZGxlPFNoMj4sIG5ldmVyPlxuICAgIDxTdmMsIElkID0gdW5rbm93bj4oXG4gICAgICB0YWc6IENvbnRleHQuVGFnPElkLCBTdmM+XG4gICAgKTogTG9naWMuT2Y8U2gsIFIsIFN2YywgbmV2ZXI+XG4gIH1cblxuICAvKipcbiAgICogQWN0aW9uIFx1NzZEMVx1NTQyQ1x1NTE2NVx1NTNFM1x1RkYxQVx1NjUyRlx1NjMwMVx1OEMxM1x1OEJDRFx1MzAwMV90YWcgLyB0eXBlIFx1NUI1N1x1OTc2Mlx1OTFDRlx1MzAwMVx1NTAzQ1x1NUJGOVx1OEM2MVx1NjIxNiBTY2hlbWEgXHU0RjVDXHU0RTNBXHUzMDBDXHU1MDNDXHU5MDA5XHU2MkU5XHU1NjY4XHUzMDBEXHU4RkRCXHU4ODRDXHU1M0Q4XHU0RjUzXHU3RjI5XHU1QzBGXHUzMDAyXG4gICAqXG4gICAqIFx1NzkzQVx1NEY4Qlx1RkYxQVxuICAgKiAgICQub25BY3Rpb24oJ2luYycpXG4gICAqICAgJC5vbkFjdGlvbihBY3Rpb25zLmluYylcbiAgICogICAkLm9uQWN0aW9uKENvdW50ZXJBY3Rpb24uSW5jU2NoZW1hKVxuICAgKi9cbiAgcmVhZG9ubHkgb25BY3Rpb246IHtcbiAgICAvLyAxLiBcdTUxN0NcdTVCQjlcdTUzOUZcdTY3MDlcdTVGNjJcdTVGMEZcdUZGMUFcdTdDN0JcdTU3OEJcdTVCODhcdTUzNkJcdThDMTNcdThCQ0RcbiAgICA8VCBleHRlbmRzIExvZ2l4LkFjdGlvbk9mPFNoPj4oXG4gICAgICBwcmVkaWNhdGU6IChhOiBMb2dpeC5BY3Rpb25PZjxTaD4pID0+IGEgaXMgVFxuICAgICk6IExvZ2ljLkludGVudEJ1aWxkZXI8VCwgU2gsIFI+XG5cbiAgICAvLyAyLiBcdTkwMUFcdThGQzcgX3RhZyAvIHR5cGUgXHU1QjU3XHU5NzYyXHU5MUNGXHU1MzM5XHU5MTREXHU2N0QwXHU0RTAwXHU1M0Q4XHU0RjUzXG4gICAgPFxuICAgICAgSyBleHRlbmRzIExvZ2l4LkFjdGlvbk9mPFNoPiBleHRlbmRzIHsgX3RhZzogc3RyaW5nIH1cbiAgICAgICAgPyBMb2dpeC5BY3Rpb25PZjxTaD5bXCJfdGFnXCJdXG4gICAgICAgIDogbmV2ZXJcbiAgICA+KFxuICAgICAgdGFnOiBLXG4gICAgKTogTG9naWMuSW50ZW50QnVpbGRlcjxcbiAgICAgIEV4dHJhY3Q8TG9naXguQWN0aW9uT2Y8U2g+LCB7IF90YWc6IEsgfSB8IHsgdHlwZTogSyB9PixcbiAgICAgIFNoLFxuICAgICAgUlxuICAgID5cblxuICAgIC8vIDMuIFx1OTAxQVx1OEZDN1x1NTE3N1x1NEY1MyBBY3Rpb24gXHU1MDNDXHVGRjA4XHU0RjhCXHU1OTgyIEFjdGlvbnMuaW5jXHVGRjA5XHU4RkRCXHU4ODRDXHU3RjI5XHU1QzBGXG4gICAgPEEgZXh0ZW5kcyBMb2dpeC5BY3Rpb25PZjxTaD4gJiAoeyBfdGFnOiBzdHJpbmcgfSB8IHsgdHlwZTogc3RyaW5nIH0pPihcbiAgICAgIHZhbHVlOiBBXG4gICAgKTogTG9naWMuSW50ZW50QnVpbGRlcjxBLCBTaCwgUj5cblxuICAgIC8vIDQuIFx1OTAxQVx1OEZDNyBTY2hlbWFcdUZGMDhcdTUzNTVcdTRFMDBcdTUzRDhcdTRGNTMgU2NoZW1hXHVGRjA5XHU4RkRCXHU4ODRDXHU3RjI5XHU1QzBGXG4gICAgPFNjIGV4dGVuZHMgTG9naXguQW55U2NoZW1hPihcbiAgICAgIHNjaGVtYTogU2NcbiAgICApOiBMb2dpYy5JbnRlbnRCdWlsZGVyPFxuICAgICAgRXh0cmFjdDxMb2dpeC5BY3Rpb25PZjxTaD4sIFNjaGVtYS5TY2hlbWEuVHlwZTxTYz4+LFxuICAgICAgU2gsXG4gICAgICBSXG4gICAgPlxuICB9ICYge1xuICAgIFtLIGluIGtleW9mIFNoW1wiYWN0aW9uTWFwXCJdXTogTG9naWMuSW50ZW50QnVpbGRlcjxcbiAgICAgIEV4dHJhY3Q8TG9naXguQWN0aW9uT2Y8U2g+LCB7IF90YWc6IEsgfSB8IHsgdHlwZTogSyB9PixcbiAgICAgIFNoLFxuICAgICAgUlxuICAgID5cbiAgfVxuXG4gIHJlYWRvbmx5IG9uU3RhdGU6IDxWPihcbiAgICBzZWxlY3RvcjogKHM6IExvZ2l4LlN0YXRlT2Y8U2g+KSA9PiBWXG4gICkgPT4gTG9naWMuSW50ZW50QnVpbGRlcjxWLCBTaCwgUj5cblxuICAvKipcbiAgICogUHJpbWFyeSBSZWR1Y2VyIFx1NkNFOFx1NTE4Q1x1NTE2NVx1NTNFM1x1RkYxQVxuICAgKiAtIFx1OEJFRFx1NEU0OVx1RkYxQVx1NEUzQVx1NjdEMFx1NEUyQSBBY3Rpb24gVGFnIFx1NkNFOFx1NTE4Q1x1NEUwMFx1Njc2MVx1NTQwQ1x1NkI2NVx1MzAwMVx1N0VBRlx1NzJCNlx1NjAwMVx1NTNEOFx1NjM2Mlx1NzY4NFx1NEUzQiByZWR1Y2VyXHVGRjFCXG4gICAqIC0gXHU1QjlFXHU3M0IwXHVGRjFBXHU3NkY0XHU2M0E1XHU4NDNEXHU1MjMwIFJ1bnRpbWUgXHU3Njg0IGBfdGFnIC0+IChzdGF0ZSwgYWN0aW9uKSA9PiBzdGF0ZWAgXHU2NjIwXHU1QzA0XHVGRjBDXHU4MDBDXHU5NzVFIHdhdGNoZXIgLyBGbG93XHUzMDAyXG4gICAqXG4gICAqIFx1N0VBNlx1Njc1Rlx1RkYxQVxuICAgKiAtIFx1NkJDRlx1NEUyQSBBY3Rpb24gVGFnIFx1NjcwMFx1NTkxQVx1NTE0MVx1OEJCOFx1NEUwMFx1NEUyQSBwcmltYXJ5IHJlZHVjZXJcdUZGMUJcdTkxQ0RcdTU5MERcdTZDRThcdTUxOENcdTg5QzZcdTRFM0FcdTk1MTlcdThCRUZcdUZGMUJcbiAgICogLSByZWR1Y2VyIFx1NUZDNVx1OTg3Qlx1NjYyRlx1N0VBRlx1NTFGRFx1NjU3MFx1RkYwQ1x1NEUwRFx1NEY5RFx1OEQ1NiBFbnZcdUZGMENcdTRFMERcdTRFQTdcdTc1MUYgRWZmZWN0XHUzMDAyXG4gICAqL1xuICByZWFkb25seSByZWR1Y2VyOiA8XG4gICAgSyBleHRlbmRzIGtleW9mIFNoW1wiYWN0aW9uTWFwXCJdLFxuICAgIEEgZXh0ZW5kcyBFeHRyYWN0PFxuICAgICAgTG9naXguQWN0aW9uT2Y8U2g+LFxuICAgICAgeyBfdGFnOiBLIH0gfCB7IHR5cGU6IEsgfVxuICAgID5cbiAgPihcbiAgICB0YWc6IEssXG4gICAgcmVkdWNlcjogKFxuICAgICAgc3RhdGU6IExvZ2l4LlN0YXRlT2Y8U2g+LFxuICAgICAgYWN0aW9uOiBBXG4gICAgKSA9PiBMb2dpeC5TdGF0ZU9mPFNoPlxuICApID0+IExvZ2ljLk9mPFNoLCBSLCB2b2lkLCBuZXZlcj5cblxuICByZWFkb25seSBvbjogPFY+KFxuICAgIHNvdXJjZTogU3RyZWFtLlN0cmVhbTxWPlxuICApID0+IExvZ2ljLkludGVudEJ1aWxkZXI8ViwgU2gsIFI+XG4gIC8qKlxuICAgKiB0cmFpdHNcdUZGMUFcdTRFM0EgU3RhdGVUcmFpdCBcdTdCNDlcdTcyNzlcdTYwMjdcdTk4ODRcdTc1NTlcdTc2ODRcdThGRDBcdTg4NENcdTY1RjZcdTUxNjVcdTUzRTNcdTMwMDJcbiAgICpcbiAgICogLSBzb3VyY2UucmVmcmVzaChmaWVsZFBhdGgpXHVGRjFBXHU4OUU2XHU1M0QxXHU2N0QwXHU0RTJBIHNvdXJjZSBcdTVCNTdcdTZCQjVcdTc2ODRcdTRFMDBcdTZCMjFcdTY2M0VcdTVGMEZcdTUyMzdcdTY1QjBcdUZGMUJcbiAgICogLSBcdTUxNzdcdTRGNTNcdTg4NENcdTRFM0FcdTc1MzEgU3RhdGVUcmFpdC5pbnN0YWxsIFx1NTcyOFx1OEZEMFx1ODg0Q1x1NjVGNlx1NjMwMlx1OEY3RFx1NUI5RVx1NzNCMFx1MzAwMlxuICAgKi9cbiAgcmVhZG9ubHkgdHJhaXRzOiB7XG4gICAgcmVhZG9ubHkgc291cmNlOiB7XG4gICAgICByZWFkb25seSByZWZyZXNoOiAoXG4gICAgICAgIGZpZWxkUGF0aDogc3RyaW5nLFxuICAgICAgKSA9PiBMb2dpYy5PZjxTaCwgUiwgdm9pZCwgbmV2ZXI+XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYWtlPFNoIGV4dGVuZHMgTG9naXguQW55TW9kdWxlU2hhcGUsIFIgPSBuZXZlcj4oXG4gIHNoYXBlOiBTaCxcbiAgcnVudGltZTogTG9naXguTW9kdWxlUnVudGltZTxMb2dpeC5TdGF0ZU9mPFNoPiwgTG9naXguQWN0aW9uT2Y8U2g+PlxuKTogQm91bmRBcGlQdWJsaWM8U2gsIFI+IHtcbiAgcmV0dXJuIEJvdW5kQXBpUnVudGltZS5tYWtlKHNoYXBlLCBydW50aW1lKSBhcyBCb3VuZEFwaVB1YmxpYzxTaCwgUj5cbn1cbiIsICJpbXBvcnQgeyBFZmZlY3QgfSBmcm9tIFwiZWZmZWN0XCJcbmltcG9ydCAqIGFzIE1vZHVsZUZhY3RvcnkgZnJvbSBcIi4vaW50ZXJuYWwvcnVudGltZS9Nb2R1bGVGYWN0b3J5LmpzXCJcbmltcG9ydCB0eXBlIHtcbiAgQW55TW9kdWxlU2hhcGUsXG4gIE1vZHVsZUhhbmRsZSxcbiAgTW9kdWxlSW5zdGFuY2UsXG59IGZyb20gXCIuL2ludGVybmFsL21vZHVsZS5qc1wiXG5cbi8qKlxuICogTGluay5tYWtlIFx1OTE0RFx1N0Y2RVx1RkYxQVxuICogLSBtb2R1bGVzXHVGRjFBXHU1M0MyXHU0RTBFXHU1RjUzXHU1MjREIExpbmsgXHU3Njg0IE1vZHVsZSBcdTUyMTdcdTg4NjhcdUZGMUJcbiAqICAgLSBrZXkgXHU1QzA2XHU2NzY1XHU4MUVBIE1vZHVsZSBcdTVCOUFcdTRFNDlcdTY1RjZcdTc2ODQgaWRcdUZGMDhcdTRGOEJcdTU5ODIgTG9naXguTW9kdWxlLm1ha2UoXCJVc2VyXCIsIC4uLikgXHU3Njg0IFwiVXNlclwiXHVGRjA5XHUzMDAyXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTGlua0NvbmZpZzxcbiAgTXMgZXh0ZW5kcyByZWFkb25seSBNb2R1bGVJbnN0YW5jZTxzdHJpbmcsIEFueU1vZHVsZVNoYXBlPltdXG4+IHtcbiAgLyoqXG4gICAqIExpbmsgXHU3Njg0XHU2ODA3XHU4QkM2XHVGRjFBXG4gICAqIC0gXHU1M0VGXHU5MDA5XHVGRjFCXHU5RUQ4XHU4QkE0XHU2ODM5XHU2MzZFXHU1M0MyXHU0RTBFXHU3Njg0IG1vZHVsZXMuaWQgXHU2MkZDXHU2M0E1XHU3NTFGXHU2MjEwXHU0RTAwXHU0RTJBXHU3QTMzXHU1QjlBXHU1QjU3XHU3QjI2XHU0RTMyXHVGRjFCXG4gICAqIC0gXHU2NzJBXHU2NzY1XHU1M0VGXHU3NTI4XHU0RThFIFVuaXZlcnNlIC8gRGV2VG9vbHMgXHU0RTJEXHU1QzU1XHU3OTNBXHU1NDhDXHU1QjlBXHU0RjREIExpbmsgXHU4MjgyXHU3MEI5XHUzMDAyXG4gICAqL1xuICByZWFkb25seSBpZD86IHN0cmluZ1xuICByZWFkb25seSBtb2R1bGVzOiBNc1xufVxuXG4vKipcbiAqIFx1NTdGQVx1NEU4RSBNb2R1bGUgXHU1MjE3XHU4ODY4XHU2M0E4XHU1QkZDIExpbmsgXHU5MDNCXHU4RjkxXHU0RTJEXHU1M0VGXHU3NTI4XHU3Njg0XHU1M0U1XHU2N0M0XHU4OUM2XHU1NkZFXHVGRjFBXG4gKiAtIGtleSBcdTRFM0EgTW9kdWxlIFx1NUI5QVx1NEU0OVx1NjVGNlx1NzY4NCBpZFx1RkYxQlxuICogLSB2YWx1ZSBcdTRFM0FcdThCRTUgTW9kdWxlIFx1NzY4NFx1NTNFQVx1OEJGQlx1NTNFNVx1NjdDNFx1MzAwMlxuICovXG5leHBvcnQgdHlwZSBMaW5rSGFuZGxlczxcbiAgTXMgZXh0ZW5kcyByZWFkb25seSBNb2R1bGVJbnN0YW5jZTxzdHJpbmcsIEFueU1vZHVsZVNoYXBlPltdXG4+ID0ge1xuICBbTSBpbiBNc1tudW1iZXJdIGFzIE1bXCJpZFwiXV06IE1vZHVsZUhhbmRsZTxNW1wic2hhcGVcIl0+XG59XG5cbi8qKlxuICogXHU1MTg1XHU5MEU4XHU4Rjg1XHU1MkE5XHU3QzdCXHU1NzhCXHVGRjFBXHU1QzA2IE1vZHVsZSBcdTUyMTdcdTg4NjhcdThGNkNcdTYzNjJcdTRFM0FcdTRFRTUgaWQgXHU0RTNBIGtleSBcdTc2ODRcdTY2MjBcdTVDMDRcdUZGMENcbiAqIFx1NEZCRlx1NEU4RVx1NTkwRFx1NzUyOFx1NUU5NVx1NUM0MiBNb2R1bGVGYWN0b3J5LkxpbmsgXHU3Njg0XHU1QjlFXHU3M0IwXHUzMDAyXG4gKi9cbnR5cGUgTW9kdWxlc1JlY29yZDxcbiAgTXMgZXh0ZW5kcyByZWFkb25seSBNb2R1bGVJbnN0YW5jZTxzdHJpbmcsIEFueU1vZHVsZVNoYXBlPltdXG4+ID0ge1xuICBbTSBpbiBNc1tudW1iZXJdIGFzIE1bXCJpZFwiXV06IE1cbn1cblxuLyoqXG4gKiBMaW5rLm1ha2VcdUZGMUFcbiAqIC0gXHU1N0ZBXHU0RThFXHU1M0MyXHU0RTBFXHU3Njg0IE1vZHVsZSBcdTUyMTdcdTg4NjhcdTRFMEVcdTkwM0JcdThGOTFcdTdBMEJcdTVFOEZcdUZGMENcdTY3ODRcdTkwMjAgTGlua1x1RkYwOFx1OERFOFx1NkEyMVx1NTc1N1x1ODBGNlx1NkMzNFx1OTAzQlx1OEY5MVx1RkYwOVx1RkYxQlxuICogLSBcdThGRDRcdTU2REVcdTUwM0NcdTY2MkZcdTIwMUNcdTUxQjdcdTIwMURcdTc2ODQgRWZmZWN0XHVGRjBDXHU5MDFBXHU1RTM4XHU2MzAyXHU1MjMwIE1vZHVsZUltcGwuaW1wbGVtZW50KHsgcHJvY2Vzc2VzL2xpbmtzIH0pIFx1NEUyRFx1RkYwQ1xuICogICBcdTc1MzFcdThGRDBcdTg4NENcdTY1RjZcdTVCQjlcdTU2NjhcdTdFREZcdTRFMDAgZm9ya1x1MzAwMlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWFrZTxcbiAgTXMgZXh0ZW5kcyByZWFkb25seSBNb2R1bGVJbnN0YW5jZTxzdHJpbmcsIEFueU1vZHVsZVNoYXBlPltdLFxuICBFID0gbmV2ZXIsXG4gIFIgPSBuZXZlclxuPihcbiAgY29uZmlnOiBMaW5rQ29uZmlnPE1zPixcbiAgbG9naWM6ICgkOiBMaW5rSGFuZGxlczxNcz4pID0+IEVmZmVjdC5FZmZlY3Q8dm9pZCwgRSwgUj5cbik6IEVmZmVjdC5FZmZlY3Q8dm9pZCwgRSwgUj4ge1xuICAvLyBcdTlFRDhcdThCQTQgaWRcdUZGMUFcdTYzMDlcdTcxNjdcdTUzQzJcdTRFMEUgTW9kdWxlIFx1NzY4NCBpZCBcdTYzOTJcdTVFOEZcdTU0MEVcdTYyRkNcdTYzQTVcdUZGMENcdTRGRERcdThCQzFcdTk4N0FcdTVFOEZcdTY1RTBcdTUxNzNcdTc2ODRcdTdBMzNcdTVCOUFcdTYwMjdcbiAgY29uc3QgbGlua0lkID1cbiAgICBjb25maWcuaWQgPz9cbiAgICBbLi4uY29uZmlnLm1vZHVsZXNdXG4gICAgICAubWFwKChtKSA9PiBtLmlkKVxuICAgICAgLnNvcnQoKVxuICAgICAgLmpvaW4oXCJ+XCIpXG5cbiAgLy8gXHU1QzA2IE1vZHVsZSBcdTUyMTdcdTg4NjhcdThGNkNcdTYzNjJcdTRFM0FcdTRFRTUgaWQgXHU0RTNBIGtleSBcdTc2ODRcdTY2MjBcdTVDMDRcbiAgY29uc3QgbW9kdWxlc1JlY29yZCA9IE9iamVjdC5jcmVhdGUobnVsbCkgYXMgTW9kdWxlc1JlY29yZDxNcz5cblxuICBmb3IgKGNvbnN0IG1vZHVsZSBvZiBjb25maWcubW9kdWxlcykge1xuICAgIC8vIFx1OEZEMFx1ODg0Q1x1NjVGNlx1NEY3Rlx1NzUyOCBtb2R1bGUuaWQgXHU0RjVDXHU0RTNBIGtleVx1RkYwQ1x1N0M3Qlx1NTc4Qlx1NEUwQVx1NzUzMSBNb2R1bGVzUmVjb3JkIFx1NEZERFx1OEJDMVx1N0VBNlx1Njc1RlxuICAgIDsobW9kdWxlc1JlY29yZCBhcyBhbnkpW21vZHVsZS5pZF0gPSBtb2R1bGVcbiAgfVxuXG4gIC8vIFx1NTkwRFx1NzUyOFx1NzNCMFx1NjcwOSBNb2R1bGVGYWN0b3J5LkxpbmsgXHU1QjlFXHU3M0IwXHVGRjBDXHU3QzdCXHU1NzhCXHU0RTBBIExpbmtIYW5kbGVzIFx1NEUwRSBGYWN0b3J5IFx1NzY4NFx1NTNFNVx1NjdDNFx1N0VEM1x1Njc4NFx1NEUwMFx1ODFGNFxuICBjb25zdCBlZmZlY3QgPSBNb2R1bGVGYWN0b3J5LkxpbmsoXG4gICAgbW9kdWxlc1JlY29yZCBhcyBhbnksXG4gICAgbG9naWMgYXMgYW55XG4gICkgYXMgRWZmZWN0LkVmZmVjdDx2b2lkLCBFLCBSPlxuXG4gIC8vIFx1NUMwNiBsaW5rSWQgXHU0RjVDXHU0RTNBXHU1MTQzXHU0RkUxXHU2MDZGXHU5NjQ0XHU1MkEwXHU1NzI4IEVmZmVjdCBcdTRFMEFcdUZGMENcdTRGOUJcdTU0MEVcdTdFRUQgUnVudGltZSAvIERldlRvb2xzIFx1NjMwOVx1OTcwMFx1NkQ4OFx1OEQzOVx1MzAwMlxuICA7KGVmZmVjdCBhcyBhbnkpLl9saW5rSWQgPSBsaW5rSWRcblxuICByZXR1cm4gZWZmZWN0XG59XG4iLCAiaW1wb3J0IHR5cGUgeyBBbnlNb2R1bGVTaGFwZSwgTW9kdWxlU2hhcGUgfSBmcm9tIFwiLi9pbnRlcm5hbC9tb2R1bGUuanNcIlxuaW1wb3J0IHR5cGUgKiBhcyBMb2dpYyBmcm9tIFwiLi9Mb2dpYy5qc1wiXG5pbXBvcnQgKiBhcyBGbG93UnVudGltZSBmcm9tIFwiLi9pbnRlcm5hbC9ydW50aW1lL0Zsb3dSdW50aW1lLmpzXCJcblxuLy8gRmxvd1x1RkYxQVx1NUJGOVx1NTkxNlx1NjZCNFx1OTczMlx1NzY4NFx1NEUxQVx1NTJBMVx1NkQ0MVx1N0YxNlx1NjM5Mlx1NjNBNVx1NTNFM1x1RkYwOFx1NUMwMVx1ODhDNSBpbnRlcm5hbC9ydW50aW1lL0Zsb3dSdW50aW1lIFx1NTE4NVx1NjgzOFx1RkYwOVx1MzAwMlxuXG5leHBvcnQgdHlwZSBFbnY8U2ggZXh0ZW5kcyBBbnlNb2R1bGVTaGFwZSwgUiA9IHVua25vd24+ID0gTG9naWMuRW52PFxuICBTaCxcbiAgUlxuPlxuXG5leHBvcnQgdHlwZSBBcGk8U2ggZXh0ZW5kcyBNb2R1bGVTaGFwZTxhbnksIGFueT4sIFIgPSBuZXZlcj4gPVxuICBGbG93UnVudGltZS5BcGk8U2gsIFI+XG5cbmV4cG9ydCBjb25zdCBtYWtlID0gRmxvd1J1bnRpbWUubWFrZVxuIiwgImltcG9ydCB0eXBlIHsgRmx1ZW50TWF0Y2gsIEZsdWVudE1hdGNoVGFnIH0gZnJvbSBcIi4vTG9naWMuanNcIlxuaW1wb3J0ICogYXMgSW50ZXJuYWwgZnJvbSBcIi4vaW50ZXJuYWwvTWF0Y2hCdWlsZGVyLmpzXCJcblxuLy8gTWF0Y2hCdWlsZGVyXHVGRjFBXHU1QkY5XHU1OTE2XHU2NkI0XHU5NzMyIEZsdWVudCBNYXRjaCBEU0xcdUZGMENcdTUxODVcdTkwRThcdTVCOUVcdTczQjBcdTU5MERcdTc1MjggaW50ZXJuYWwvTWF0Y2hCdWlsZGVyXHUzMDAyXG5cbmV4cG9ydCBjb25zdCBtYWtlTWF0Y2g6IDxWPih2YWx1ZTogVikgPT4gRmx1ZW50TWF0Y2g8Vj4gPSBJbnRlcm5hbC5tYWtlTWF0Y2hcblxuZXhwb3J0IGNvbnN0IG1ha2VNYXRjaFRhZzogPFYgZXh0ZW5kcyB7IF90YWc6IHN0cmluZyB9PihcbiAgdmFsdWU6IFZcbikgPT4gRmx1ZW50TWF0Y2hUYWc8Vj4gPSBJbnRlcm5hbC5tYWtlTWF0Y2hUYWdcbiIsICIvLyBUcmFpdExpZmVjeWNsZVx1RkYxQUZvcm0vUXVlcnkgXHU1NDBDXHU2RTkwXHU0RTBCXHU2Qzg5XHU2M0E1XHU1M0UzXHVGRjA4UGhhc2UgMiBcdTUzNjBcdTRGNERcdTcyNDhcdUZGMDlcdTMwMDJcbi8vXG4vLyAtIFx1NjcyQ1x1NkEyMVx1NTc1N1x1NUJGOVx1NTkxNlx1NjZCNFx1OTczMlx1NTNFRlx1NUU4Rlx1NTIxN1x1NTMxNlx1NzY4NCBGaWVsZFJlZiBcdTRFMEVcdTdFREZcdTRFMDBcdThCRjdcdTZDNDJcdTUzNEZcdThCQUVcdUZGMUJcbi8vIC0gXHU1QjlFXHU5NjQ1XHU1QjlFXHU3M0IwXHU4NDNEXHU1NzI4IGludGVybmFsL3RyYWl0LWxpZmVjeWNsZS8qXHVGRjBDXHU2QjY0XHU1OTA0XHU2M0QwXHU0RjlCXHU1MTZDXHU1MTcxIEFQSSBcdTRFMEVcdTdDN0JcdTU3OEJcdTUxRkFcdTUzRTNcdTMwMDJcblxuaW1wb3J0IHR5cGUgeyBCb3VuZEFwaSB9IGZyb20gXCIuL0JvdW5kLmpzXCJcbmltcG9ydCB7IEVmZmVjdCB9IGZyb20gXCJlZmZlY3RcIlxuaW1wb3J0ICogYXMgSW50ZXJuYWwgZnJvbSBcIi4vaW50ZXJuYWwvdHJhaXQtbGlmZWN5Y2xlL2luZGV4LmpzXCJcblxuZXhwb3J0IHR5cGUgRmllbGRSZWYgPSBJbnRlcm5hbC5GaWVsZFJlZlxuZXhwb3J0IHR5cGUgVmFsaWRhdGVNb2RlID0gSW50ZXJuYWwuVmFsaWRhdGVSZXF1ZXN0W1wibW9kZVwiXVxuZXhwb3J0IHR5cGUgVmFsaWRhdGVSZXF1ZXN0ID0gSW50ZXJuYWwuVmFsaWRhdGVSZXF1ZXN0XG5leHBvcnQgdHlwZSBFeGVjdXRlUmVxdWVzdCA9IEludGVybmFsLkV4ZWN1dGVSZXF1ZXN0XG5leHBvcnQgdHlwZSBDbGVhbnVwUmVxdWVzdCA9IEludGVybmFsLkNsZWFudXBSZXF1ZXN0XG5cbmV4cG9ydCBjb25zdCBSZWYgPSBJbnRlcm5hbC5SZWZcblxuZXhwb3J0IGNvbnN0IHNjb3BlZFZhbGlkYXRlID0gKFxuICBib3VuZDogQm91bmRBcGk8YW55LCBhbnk+LFxuICByZXF1ZXN0OiBWYWxpZGF0ZVJlcXVlc3QsXG4pOiBFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBhbnk+ID0+IEludGVybmFsLnNjb3BlZFZhbGlkYXRlKGJvdW5kIGFzIGFueSwgcmVxdWVzdClcblxuZXhwb3J0IGNvbnN0IHNjb3BlZEV4ZWN1dGUgPSAoXG4gIGJvdW5kOiBCb3VuZEFwaTxhbnksIGFueT4sXG4gIHJlcXVlc3Q6IEV4ZWN1dGVSZXF1ZXN0LFxuKTogRWZmZWN0LkVmZmVjdDx2b2lkLCBuZXZlciwgYW55PiA9PiBJbnRlcm5hbC5zY29wZWRFeGVjdXRlKGJvdW5kIGFzIGFueSwgcmVxdWVzdClcblxuZXhwb3J0IGNvbnN0IGNsZWFudXAgPSAoXG4gIGJvdW5kOiBCb3VuZEFwaTxhbnksIGFueT4sXG4gIHJlcXVlc3Q6IENsZWFudXBSZXF1ZXN0LFxuKTogRWZmZWN0LkVmZmVjdDx2b2lkLCBuZXZlciwgYW55PiA9PiBJbnRlcm5hbC5jbGVhbnVwKGJvdW5kIGFzIGFueSwgcmVxdWVzdClcblxuZXhwb3J0IGNvbnN0IGluc3RhbGwgPSAoXG4gIGJvdW5kOiBCb3VuZEFwaTxhbnksIGFueT4sXG4pOiBFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBhbnk+ID0+IEludGVybmFsLmluc3RhbGwoYm91bmQgYXMgYW55KVxuXG4iLCAiaW1wb3J0IHsgRWZmZWN0LCBGaWJlclJlZiwgT3B0aW9uIH0gZnJvbSBcImVmZmVjdFwiXG5pbXBvcnQgdHlwZSB7IEJvdW5kQXBpIH0gZnJvbSBcIi4uL3J1bnRpbWUvY29yZS9tb2R1bGUuanNcIlxuaW1wb3J0ICogYXMgVGFza1J1bm5lciBmcm9tIFwiLi4vcnVudGltZS9jb3JlL1Rhc2tSdW5uZXIuanNcIlxuaW1wb3J0ICogYXMgUmVwbGF5TG9nIGZyb20gXCIuLi9ydW50aW1lL2NvcmUvUmVwbGF5TG9nLmpzXCJcbmltcG9ydCB0eXBlIHtcbiAgQ2xlYW51cFJlcXVlc3QsXG4gIEV4ZWN1dGVSZXF1ZXN0LFxuICBGaWVsZFJlZixcbiAgVmFsaWRhdGVSZXF1ZXN0LFxufSBmcm9tIFwiLi9tb2RlbC5qc1wiXG5pbXBvcnQgdHlwZSAqIGFzIFN0YXRlVHJhaXRWYWxpZGF0ZSBmcm9tIFwiLi4vc3RhdGUtdHJhaXQvdmFsaWRhdGUuanNcIlxuaW1wb3J0ICogYXMgUm93SWQgZnJvbSBcIi4uL3N0YXRlLXRyYWl0L3Jvd2lkLmpzXCJcblxuZXhwb3J0IHR5cGUgeyBDbGVhbnVwUmVxdWVzdCwgRXhlY3V0ZVJlcXVlc3QsIEZpZWxkUmVmLCBWYWxpZGF0ZVJlcXVlc3QgfVxuXG4vKipcbiAqIFJlZlx1RkYxQVx1NzUyOFx1NEU4RVx1Njc4NFx1OTAyMCBGaWVsZFJlZlx1RkYwOFx1NTNFRlx1NUU4Rlx1NTIxN1x1NTMxNlx1MzAwMVx1NTNFRlx1NkJENFx1OEY4M1x1RkYwOVx1MzAwMlxuICpcbiAqIFx1OEJGNFx1NjYwRVx1RkYxQVxuICogLSBQaGFzZSAyIFx1NEVDNVx1NjNEMFx1NEY5Qlx1NjcwMFx1NUMwRlx1Njc4NFx1OTAyMFx1NTY2OFx1RkYxQlxuICogLSBSb3dJRC90cmFja0J5IFx1N0I0OVx1NjU3MFx1N0VDNFx1NEYxOFx1NTMxNlx1NEUwRVx1NjZGNFx1NUYzQVx1NzY4NCByZWYgXHU4OUUzXHU5MUNBXHU4QkVEXHU0RTQ5XHU1NzI4XHU1NDBFXHU3RUVEIFBoYXNlIFx1ODQzRFx1NTczMFx1MzAwMlxuICovXG5leHBvcnQgY29uc3QgUmVmID0ge1xuICBmaWVsZDogKHBhdGg6IHN0cmluZyk6IEZpZWxkUmVmID0+ICh7IGtpbmQ6IFwiZmllbGRcIiwgcGF0aCB9KSxcbiAgbGlzdDogKHBhdGg6IHN0cmluZywgbGlzdEluZGV4UGF0aD86IFJlYWRvbmx5QXJyYXk8bnVtYmVyPik6IEZpZWxkUmVmID0+ICh7XG4gICAga2luZDogXCJsaXN0XCIsXG4gICAgcGF0aCxcbiAgICBsaXN0SW5kZXhQYXRoLFxuICB9KSxcbiAgaXRlbTogKFxuICAgIHBhdGg6IHN0cmluZyxcbiAgICBpbmRleDogbnVtYmVyLFxuICAgIG9wdGlvbnM/OiB7IHJlYWRvbmx5IGxpc3RJbmRleFBhdGg/OiBSZWFkb25seUFycmF5PG51bWJlcj47IHJlYWRvbmx5IGZpZWxkPzogc3RyaW5nIH0sXG4gICk6IEZpZWxkUmVmID0+ICh7XG4gICAga2luZDogXCJpdGVtXCIsXG4gICAgcGF0aCxcbiAgICBpbmRleCxcbiAgICBsaXN0SW5kZXhQYXRoOiBvcHRpb25zPy5saXN0SW5kZXhQYXRoLFxuICAgIGZpZWxkOiBvcHRpb25zPy5maWVsZCxcbiAgfSksXG4gIHJvb3Q6ICgpOiBGaWVsZFJlZiA9PiAoeyBraW5kOiBcInJvb3RcIiB9KSxcbn0gYXMgY29uc3RcblxuLyoqXG4gKiBzY29wZWRWYWxpZGF0ZVx1RkYwOFx1NTM2MFx1NEY0RFx1RkYwOVx1RkYxQVx1NTQwRVx1N0VFRCBQaGFzZSBcdTVDMDZcdTU3RkFcdTRFOEUgUmV2ZXJzZUNsb3N1cmUgXHU4QkExXHU3Qjk3XHU2NzAwXHU1QzBGXHU5NkM2XHU1NDA4XHU1RTc2XHU1MTk5XHU1NkRFXHU5NTE5XHU4QkVGXHU2ODExXHUzMDAyXG4gKi9cbmV4cG9ydCBjb25zdCBzY29wZWRWYWxpZGF0ZSA9IChcbiAgYm91bmQ6IEJvdW5kQXBpPGFueSwgYW55PixcbiAgcmVxdWVzdDogVmFsaWRhdGVSZXF1ZXN0LFxuKTogRWZmZWN0LkVmZmVjdDx2b2lkLCBuZXZlciwgYW55PiA9PlxuICBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG4gICAgY29uc3QgZW5xdWV1ZSA9XG4gICAgICAoYm91bmQgYXMgYW55KVxuICAgICAgICAuX19lbnF1ZXVlU3RhdGVUcmFpdFZhbGlkYXRlUmVxdWVzdCBhc1xuICAgICAgfCAoKHI6IFN0YXRlVHJhaXRWYWxpZGF0ZS5TY29wZWRWYWxpZGF0ZVJlcXVlc3QpID0+IHZvaWQpXG4gICAgICB8IHVuZGVmaW5lZFxuXG4gICAgaWYgKCFlbnF1ZXVlKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCB0b1RhcmdldCA9IChyZWY6IEZpZWxkUmVmKTogU3RhdGVUcmFpdFZhbGlkYXRlLlZhbGlkYXRlVGFyZ2V0ID0+IHtcbiAgICAgIGlmIChyZWYua2luZCA9PT0gXCJyb290XCIpIHJldHVybiB7IGtpbmQ6IFwicm9vdFwiIH1cbiAgICAgIGlmIChyZWYua2luZCA9PT0gXCJmaWVsZFwiKSByZXR1cm4geyBraW5kOiBcImZpZWxkXCIsIHBhdGg6IHJlZi5wYXRoIH1cbiAgICAgIGlmIChyZWYua2luZCA9PT0gXCJsaXN0XCIpIHJldHVybiB7IGtpbmQ6IFwibGlzdFwiLCBwYXRoOiByZWYucGF0aCB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICBraW5kOiBcIml0ZW1cIixcbiAgICAgICAgcGF0aDogcmVmLnBhdGgsXG4gICAgICAgIGluZGV4OiByZWYuaW5kZXgsXG4gICAgICAgIGZpZWxkOiByZWYuZmllbGQsXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgaW50ZXJuYWw6IFN0YXRlVHJhaXRWYWxpZGF0ZS5TY29wZWRWYWxpZGF0ZVJlcXVlc3QgPSB7XG4gICAgICBtb2RlOiByZXF1ZXN0Lm1vZGUgYXMgYW55LFxuICAgICAgdGFyZ2V0OiB0b1RhcmdldChyZXF1ZXN0LnRhcmdldCksXG4gICAgfVxuXG4gICAgY29uc3QgaW5UeG4gPSB5aWVsZCogRmliZXJSZWYuZ2V0KFRhc2tSdW5uZXIuaW5TeW5jVHJhbnNhY3Rpb25GaWJlcilcbiAgICBpZiAoaW5UeG4pIHtcbiAgICAgIGVucXVldWUoaW50ZXJuYWwpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBydW5XaXRoVHhuID1cbiAgICAgIChib3VuZCBhcyBhbnkpXG4gICAgICAgIC5fX3J1bldpdGhTdGF0ZVRyYW5zYWN0aW9uIGFzXG4gICAgICB8ICgoXG4gICAgICAgICAgb3JpZ2luOiB7IHJlYWRvbmx5IGtpbmQ6IHN0cmluZzsgcmVhZG9ubHkgbmFtZT86IHN0cmluZzsgcmVhZG9ubHkgZGV0YWlscz86IHVua25vd24gfSxcbiAgICAgICAgICBib2R5OiAoKSA9PiBFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBhbnk+LFxuICAgICAgICApID0+IEVmZmVjdC5FZmZlY3Q8dm9pZCwgbmV2ZXIsIGFueT4pXG4gICAgICB8IHVuZGVmaW5lZFxuXG4gICAgaWYgKCFydW5XaXRoVHhuKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB5aWVsZCogcnVuV2l0aFR4bihcbiAgICAgIHsga2luZDogXCJ0cmFpdFwiLCBuYW1lOiBcInNjb3BlZFZhbGlkYXRlXCIsIGRldGFpbHM6IHJlcXVlc3QgfSxcbiAgICAgICgpID0+XG4gICAgICAgIEVmZmVjdC5zeW5jKCgpID0+IHtcbiAgICAgICAgICBlbnF1ZXVlKGludGVybmFsKVxuICAgICAgICB9KSxcbiAgICApXG4gIH0pXG5cbi8qKlxuICogc2NvcGVkRXhlY3V0ZVx1RkYwOFx1NTM2MFx1NEY0RFx1RkYwOVx1RkYxQVx1NzUyOFx1NEU4RSBRdWVyeS9cdThENDRcdTZFOTBcdTdDN0JcdTUyQThcdTRGNUNcdTc2ODRcdTdFREZcdTRFMDBcdTYyNjdcdTg4NENcdTUxNjVcdTUzRTNcdUZGMDhyZWZyZXNoL2ludmFsaWRhdGUgXHU3QjQ5XHVGRjA5XHUzMDAyXG4gKi9cbmV4cG9ydCBjb25zdCBzY29wZWRFeGVjdXRlID0gKFxuICBib3VuZDogQm91bmRBcGk8YW55LCBhbnk+LFxuICByZXF1ZXN0OiBFeGVjdXRlUmVxdWVzdCxcbik6IEVmZmVjdC5FZmZlY3Q8dm9pZCwgbmV2ZXIsIGFueT4gPT5cbiAgRWZmZWN0LmdlbihmdW5jdGlvbiogKCkge1xuICAgIGlmIChyZXF1ZXN0LmtpbmQgPT09IFwic291cmNlOnJlZnJlc2hcIikge1xuICAgICAgY29uc3QgdG9GaWVsZFBhdGggPSAocmVmOiBGaWVsZFJlZik6IHN0cmluZyB8IHVuZGVmaW5lZCA9PiB7XG4gICAgICAgIGlmIChyZWYua2luZCA9PT0gXCJyb290XCIpIHJldHVybiB1bmRlZmluZWRcbiAgICAgICAgaWYgKHJlZi5raW5kID09PSBcImZpZWxkXCIgfHwgcmVmLmtpbmQgPT09IFwibGlzdFwiKSByZXR1cm4gcmVmLnBhdGhcbiAgICAgICAgY29uc3QgYmFzZSA9IGAke3JlZi5wYXRofVtdYFxuICAgICAgICByZXR1cm4gcmVmLmZpZWxkID8gYCR7YmFzZX0uJHtyZWYuZmllbGR9YCA6IGJhc2VcbiAgICAgIH1cblxuICAgICAgY29uc3QgZmllbGRQYXRoID0gdG9GaWVsZFBhdGgocmVxdWVzdC50YXJnZXQpXG4gICAgICBpZiAoIWZpZWxkUGF0aCkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgeWllbGQqIChib3VuZC50cmFpdHMuc291cmNlLnJlZnJlc2goZmllbGRQYXRoKSBhcyBFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBhbnk+KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKHJlcXVlc3Qua2luZCAhPT0gXCJxdWVyeTppbnZhbGlkYXRlXCIpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IHJlcGxheUxvZ09wdCA9IHlpZWxkKiBFZmZlY3Quc2VydmljZU9wdGlvbihSZXBsYXlMb2cuUmVwbGF5TG9nKVxuICAgIGlmIChPcHRpb24uaXNOb25lKHJlcGxheUxvZ09wdCkpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IG1vZHVsZUlkID0gKGJvdW5kIGFzIGFueSkuX19tb2R1bGVJZCBhcyBzdHJpbmcgfCB1bmRlZmluZWRcbiAgICBjb25zdCBydW50aW1lSWQgPSAoYm91bmQgYXMgYW55KS5fX3J1bnRpbWVJZCBhcyBzdHJpbmcgfCB1bmRlZmluZWRcblxuICAgIHlpZWxkKiByZXBsYXlMb2dPcHQudmFsdWUucmVjb3JkKHtcbiAgICAgIF90YWc6IFwiSW52YWxpZGF0ZVJlcXVlc3RcIixcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIG1vZHVsZUlkLFxuICAgICAgcnVudGltZUlkLFxuICAgICAga2luZDogXCJxdWVyeVwiLFxuICAgICAgdGFyZ2V0OiBcInF1ZXJ5XCIsXG4gICAgICBtZXRhOiByZXF1ZXN0LnJlcXVlc3QsXG4gICAgfSlcbiAgfSlcblxuLyoqXG4gKiBjbGVhbnVwXHVGRjA4XHU1MzYwXHU0RjREXHVGRjA5XHVGRjFBXHU3RUQzXHU2Nzg0XHU1M0Q4XHU2NkY0XHU0RTBCXHU3Njg0XHU3ODZFXHU1QjlBXHU2MDI3XHU2RTA1XHU3NDA2XHVGRjA4ZXJyb3JzL3VpL3Jlc291cmNlc1x1RkYwOVx1MzAwMlxuICovXG5leHBvcnQgY29uc3QgY2xlYW51cCA9IChcbiAgYm91bmQ6IEJvdW5kQXBpPGFueSwgYW55PixcbiAgcmVxdWVzdDogQ2xlYW51cFJlcXVlc3QsXG4pOiBFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBhbnk+ID0+XG4gIEVmZmVjdC5nZW4oZnVuY3Rpb24qICgpIHtcbiAgICBjb25zdCBhcHBseSA9ICgpID0+XG4gICAgICBib3VuZC5zdGF0ZS5tdXRhdGUoKGRyYWZ0OiBhbnkpID0+IHtcbiAgICAgICAgY29uc3QgY2xlYXJBdCA9IChyb290OiBcImVycm9yc1wiIHwgXCJ1aVwiLCBwYXRoOiBzdHJpbmcpOiB2b2lkID0+IHtcbiAgICAgICAgICBpZiAoIXBhdGgpIHJldHVyblxuICAgICAgICAgIFJvd0lkLnVuc2V0QXRQYXRoTXV0YXRpbmcoZHJhZnQsIGAke3Jvb3R9LiR7cGF0aH1gKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlcXVlc3Qua2luZCA9PT0gXCJmaWVsZDp1bnJlZ2lzdGVyXCIpIHtcbiAgICAgICAgICBjb25zdCB0YXJnZXQgPSByZXF1ZXN0LnRhcmdldFxuICAgICAgICAgIGlmICh0YXJnZXQua2luZCAhPT0gXCJmaWVsZFwiKSByZXR1cm5cbiAgICAgICAgICBjbGVhckF0KFwiZXJyb3JzXCIsIHRhcmdldC5wYXRoKVxuICAgICAgICAgIGNsZWFyQXQoXCJ1aVwiLCB0YXJnZXQucGF0aClcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXF1ZXN0LmtpbmQgPT09IFwibGlzdDppdGVtOnJlbW92ZVwiKSB7XG4gICAgICAgICAgY29uc3QgdGFyZ2V0ID0gcmVxdWVzdC50YXJnZXRcbiAgICAgICAgICBpZiAodGFyZ2V0LmtpbmQgIT09IFwiaXRlbVwiKSByZXR1cm5cbiAgICAgICAgICBjb25zdCBiYXNlID0gYCR7dGFyZ2V0LnBhdGh9LiR7dGFyZ2V0LmluZGV4fWBcbiAgICAgICAgICBjb25zdCBwYXRoID0gdGFyZ2V0LmZpZWxkID8gYCR7YmFzZX0uJHt0YXJnZXQuZmllbGR9YCA6IGJhc2VcbiAgICAgICAgICBjbGVhckF0KFwiZXJyb3JzXCIsIHBhdGgpXG4gICAgICAgICAgY2xlYXJBdChcInVpXCIsIHBhdGgpXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVxdWVzdC5raW5kID09PSBcImxpc3Q6cmVvcmRlclwiKSB7XG4gICAgICAgICAgLy8gcmVvcmRlciBcdTY3MkNcdThFQUJcdTRFMERcdTY1MzlcdTUzRDhcdTVCRjlcdTU5MTYgaW5kZXggXHU4QkVEXHU0RTQ5XHVGRjFCXG4gICAgICAgICAgLy8gZXJyb3JzL3VpIFx1NzY4NFx1NUJGOVx1OUY1MFx1NzUzMVx1OTg4Nlx1NTdERiByZWR1Y2VyIFx1NjIxNlx1NEUwQVx1NUM0Mlx1OTAzQlx1OEY5MVx1OEQxRlx1OEQyM1x1NUI4Q1x1NjIxMFx1RkYwQ1x1OEZEOVx1OTFDQ1x1NEZERFx1NjMwMSBuby1vcFx1MzAwMlxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICB9KSBhcyBFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBhbnk+XG5cbiAgICBjb25zdCBpblR4biA9IHlpZWxkKiBGaWJlclJlZi5nZXQoVGFza1J1bm5lci5pblN5bmNUcmFuc2FjdGlvbkZpYmVyKVxuICAgIGlmIChpblR4bikge1xuICAgICAgcmV0dXJuIHlpZWxkKiBhcHBseSgpXG4gICAgfVxuXG4gICAgY29uc3QgcnVuV2l0aFR4biA9XG4gICAgICAoYm91bmQgYXMgYW55KVxuICAgICAgICAuX19ydW5XaXRoU3RhdGVUcmFuc2FjdGlvbiBhc1xuICAgICAgfCAoKFxuICAgICAgICAgIG9yaWdpbjogeyByZWFkb25seSBraW5kOiBzdHJpbmc7IHJlYWRvbmx5IG5hbWU/OiBzdHJpbmc7IHJlYWRvbmx5IGRldGFpbHM/OiB1bmtub3duIH0sXG4gICAgICAgICAgYm9keTogKCkgPT4gRWZmZWN0LkVmZmVjdDx2b2lkLCBuZXZlciwgYW55PixcbiAgICAgICAgKSA9PiBFZmZlY3QuRWZmZWN0PHZvaWQsIG5ldmVyLCBhbnk+KVxuICAgICAgfCB1bmRlZmluZWRcblxuICAgIGlmICghcnVuV2l0aFR4bikge1xuICAgICAgcmV0dXJuIHlpZWxkKiBhcHBseSgpXG4gICAgfVxuXG4gICAgcmV0dXJuIHlpZWxkKiBydW5XaXRoVHhuKFxuICAgICAgeyBraW5kOiBcInRyYWl0XCIsIG5hbWU6IFwiY2xlYW51cFwiLCBkZXRhaWxzOiByZXF1ZXN0IH0sXG4gICAgICBhcHBseSxcbiAgICApXG4gIH0pXG5cbi8qKlxuICogaW5zdGFsbFx1RkYwOFx1NTM2MFx1NEY0RFx1RkYwOVx1RkYxQVRyYWl0TGlmZWN5Y2xlIFx1NzY4NFx1OUVEOFx1OEJBNFx1NjNBNVx1N0VCRlx1NzBCOVx1MzAwMlxuICpcbiAqIFx1OEJGNFx1NjYwRVx1RkYxQVxuICogLSBQaGFzZSAyIFx1NEVDNVx1NjNEMFx1NEY5Qlx1NTNFRlx1ODhBQlx1OTg4Nlx1NTdERlx1NTMwNVx1NUYxNVx1NzUyOFx1NzY4NFx1NTE2NVx1NTNFM1x1RkYxQlxuICogLSBcdTUxNzdcdTRGNTNcdTIwMUNcdTk4ODZcdTU3REZcdTRFOEJcdTRFRjYgXHUyMTkyIHJlcXVlc3QgXHUyMTkyIFx1NEU4Qlx1NTJBMVx1NTE4NVx1NjI2N1x1ODg0Q1x1MjAxRFx1NzY4NCB3aXJpbmcgXHU1NzI4XHU1NDBFXHU3RUVEIFBoYXNlIFx1NzUzMSBGb3JtL1F1ZXJ5IFx1NzY4NFx1OUVEOFx1OEJBNCBsb2dpY3MgXHU3RUM0XHU1NDA4XHU1QjlFXHU3M0IwXHUzMDAyXG4gKi9cbmV4cG9ydCBjb25zdCBpbnN0YWxsID0gKFxuICBfYm91bmQ6IEJvdW5kQXBpPGFueSwgYW55Pixcbik6IEVmZmVjdC5FZmZlY3Q8dm9pZCwgbmV2ZXIsIGFueT4gPT4gRWZmZWN0LnZvaWRcbiIsICJpbXBvcnQgeyBFZmZlY3QsIExheWVyLCBNYW5hZ2VkUnVudGltZSB9IGZyb20gXCJlZmZlY3RcIlxuaW1wb3J0IHR5cGUgeyBBbnlNb2R1bGVTaGFwZSwgTW9kdWxlSW1wbCB9IGZyb20gXCIuL2ludGVybmFsL21vZHVsZS5qc1wiXG5pbXBvcnQgKiBhcyBBcHBSdW50aW1lSW1wbCBmcm9tIFwiLi9pbnRlcm5hbC9ydW50aW1lL0FwcFJ1bnRpbWUuanNcIlxuaW1wb3J0ICogYXMgTW9kdWxlUnVudGltZSBmcm9tIFwiLi9pbnRlcm5hbC9ydW50aW1lL01vZHVsZVJ1bnRpbWUuanNcIlxuaW1wb3J0ICogYXMgRGVidWcgZnJvbSBcIi4vRGVidWcuanNcIlxuaW1wb3J0IHR5cGUgKiBhcyBFZmZlY3RPcCBmcm9tIFwiLi9lZmZlY3RvcC5qc1wiXG5pbXBvcnQgKiBhcyBFZmZlY3RPcENvcmUgZnJvbSBcIi4vaW50ZXJuYWwvcnVudGltZS9FZmZlY3RPcENvcmUuanNcIlxuaW1wb3J0IHR5cGUgeyBTdGF0ZVRyYW5zYWN0aW9uSW5zdHJ1bWVudGF0aW9uIH0gZnJvbSBcIi4vaW50ZXJuYWwvcnVudGltZS9jb3JlL2Vudi5qc1wiXG5pbXBvcnQgKiBhcyBNaWRkbGV3YXJlIGZyb20gXCIuL21pZGRsZXdhcmUvaW5kZXguanNcIlxuXG4vKipcbiAqIFJ1bnRpbWUgXHU5MTREXHU3RjZFXHVGRjFBXG4gKiAtIGxheWVyXHVGRjFBXHU5ODlEXHU1OTE2XHU3Njg0XHU5ODc2XHU1QzQyIEVudlx1RkYwOFx1NTk4MiBDb25maWcgLyBcdTVFNzNcdTUzRjBcdTY3MERcdTUyQTFcdUZGMDlcdUZGMENcdTRGMUFcdTRFMEUgUm9vdCBNb2R1bGVJbXBsLmxheWVyIFx1NTQwOFx1NUU3Nlx1RkYxQlxuICogLSBvbkVycm9yXHVGRjFBQXBwIFx1N0VBN1x1OTUxOVx1OEJFRlx1NTkwNFx1NzQwNlx1NTE2NVx1NTNFM1x1RkYwQ1x1NzUyOFx1NEU4RVx1NTcyOCBSdW50aW1lIFx1N0VBN1x1N0VERlx1NEUwMFx1NEUwQVx1NjJBNVx1NjcyQVx1NjM1NVx1ODNCN1x1OTUxOVx1OEJFRlx1MzAwMlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFJ1bnRpbWVTdGF0ZVRyYW5zYWN0aW9uT3B0aW9ucyB7XG4gIHJlYWRvbmx5IGluc3RydW1lbnRhdGlvbj86IFN0YXRlVHJhbnNhY3Rpb25JbnN0cnVtZW50YXRpb25cbiAgcmVhZG9ubHkgdHJhaXRDb252ZXJnZUJ1ZGdldE1zPzogbnVtYmVyXG4gIHJlYWRvbmx5IHRyYWl0Q29udmVyZ2VNb2RlPzogXCJmdWxsXCIgfCBcImRpcnR5XCJcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSdW50aW1lT3B0aW9ucyB7XG4gIHJlYWRvbmx5IGxheWVyPzogTGF5ZXIuTGF5ZXI8YW55LCBuZXZlciwgbmV2ZXI+XG4gIHJlYWRvbmx5IG9uRXJyb3I/OiAoY2F1c2U6IGltcG9ydCgnZWZmZWN0JykuQ2F1c2UuQ2F1c2U8dW5rbm93bj4pID0+IEVmZmVjdC5FZmZlY3Q8dm9pZD5cbiAgLyoqXG4gICAqIFx1NTNFRlx1OTAwOVx1RkYxQVx1NEUzQVx1NUY1M1x1NTI0RCBNYW5hZ2VkUnVudGltZSBcdTYzMDdcdTVCOUFcdTRFMDBcdTRFMkFcdTkwM0JcdThGOTFcdTY4MDdcdThCQzZcdUZGMDhcdTRGOEJcdTU5ODIgXCJBcHBEZW1vUnVudGltZVwiXHVGRjA5XHVGRjBDXG4gICAqIFx1NzUyOFx1NEU4RSBEZWJ1ZyAvIERldlRvb2xzIFx1NTIwNlx1N0VDNFx1NUM1NVx1NzkzQVx1MzAwMlxuICAgKi9cbiAgcmVhZG9ubHkgbGFiZWw/OiBzdHJpbmdcbiAgcmVhZG9ubHkgbWlkZGxld2FyZT86IEVmZmVjdE9wLk1pZGRsZXdhcmVTdGFja1xuICAvKipcbiAgICogXHU0RTAwXHU5NTJFXHU1NDJGXHU3NTI4IERldnRvb2xzXHVGRjA4XHU2NjNFXHU1RjBGIG92ZXJyaWRlXHVGRjA5XHVGRjFBXG4gICAqIC0gdHJ1ZVx1RkYxQVx1NEY3Rlx1NzUyOFx1OUVEOFx1OEJBNCBEZXZ0b29sc1J1bnRpbWVPcHRpb25zXHVGRjFCXG4gICAqIC0gRGV2dG9vbHNSdW50aW1lT3B0aW9uc1x1RkYxQVx1NTNFRlx1NUI5QVx1NTIzNiBIdWIgYnVmZmVyU2l6ZSAvIERlYnVnT2JzZXJ2ZXIgZmlsdGVyIFx1N0I0OVx1MzAwMlxuICAgKi9cbiAgcmVhZG9ubHkgZGV2dG9vbHM/OiB0cnVlIHwgRGV2dG9vbHNSdW50aW1lT3B0aW9uc1xuICAvKipcbiAgICogUnVudGltZSBcdTdFQTcgU3RhdGVUcmFuc2FjdGlvbiBcdTlFRDhcdThCQTRcdTkxNERcdTdGNkVcdUZGMUFcbiAgICogLSBpbnN0cnVtZW50YXRpb24gXHU2NzJBXHU2M0QwXHU0RjlCXHU2NUY2XHVGRjBDXHU1NDA0IE1vZHVsZVJ1bnRpbWUgXHU5MDAwXHU1NkRFXHU1MjMwXHU1N0ZBXHU0RThFIE5PREVfRU5WIFx1NzY4NFx1OUVEOFx1OEJBNFx1NTAzQ1x1RkYxQlxuICAgKiAtIGluc3RydW1lbnRhdGlvbiBcdTYzRDBcdTRGOUJcdTY1RjZcdUZGMENcdTRGNUNcdTRFM0FcdTY1NzRcdTk4OTcgUnVudGltZSBcdTRFMEJcdTZBMjFcdTU3NTdcdTc2ODRcdTlFRDhcdThCQTRcdTg5QzJcdTZENEJcdTdFQTdcdTUyMkJcdUZGMENcbiAgICogICBcdTUxNzdcdTRGNTNcdTZBMjFcdTU3NTdcdTRFQ0RcdTUzRUZcdTkwMUFcdThGQzcgTW9kdWxlLmltcGxlbWVudChzdGF0ZVRyYW5zYWN0aW9uKSBcdTg5ODZcdTUxOTlcdTMwMDJcbiAgICovXG4gIHJlYWRvbmx5IHN0YXRlVHJhbnNhY3Rpb24/OiBSdW50aW1lU3RhdGVUcmFuc2FjdGlvbk9wdGlvbnNcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEZXZ0b29sc1J1bnRpbWVPcHRpb25zIHtcbiAgLyoqIEh1YiByaW5nIGJ1ZmZlciBcdTVCQjlcdTkxQ0ZcdUZGMDhcdTY3NjFcdTY1NzBcdUZGMDlcdUZGMENcdTlFRDhcdThCQTQgNTAwXHUzMDAyICovXG4gIHJlYWRvbmx5IGJ1ZmZlclNpemU/OiBudW1iZXJcbiAgLyoqIERlYnVnT2JzZXJ2ZXIgXHU5MTREXHU3RjZFXHVGRjA4XHU3NTI4XHU0RThFIHRyYWNlOmVmZmVjdG9wXHVGRjA5XHVGRjFCdW5kZWZpbmVkIFx1ODg2OFx1NzkzQVx1OUVEOFx1OEJBNFx1NTE2OFx1OTFDRlx1ODlDMlx1NkQ0Qlx1MzAwMiAqL1xuICByZWFkb25seSBvYnNlcnZlcj86IE1pZGRsZXdhcmUuRGVidWdPYnNlcnZlckNvbmZpZyB8IGZhbHNlXG4gIC8qKiBcdTk4ODRcdTc1NTlcdUZGMUFSZWFjdCBcdTZFMzJcdTY3RDNcdTkxQzdcdTY4MzcvXHU5NjUwXHU5ODkxXHU5MTREXHU3RjZFXHVGRjBDXHU1NDBFXHU3RUVEXHU3NTMxIEBsb2dpeC9yZWFjdCBcdThCRkJcdTUzRDZcdTMwMDIgKi9cbiAgcmVhZG9ubHkgc2FtcGxpbmc/OiB7XG4gICAgcmVhZG9ubHkgcmVhY3RSZW5kZXJTYW1wbGVSYXRlPzogbnVtYmVyXG4gIH1cbn1cblxuLyoqXG4gKiBSdW50aW1lLm1ha2VcbiAqXG4gKiBcdTU3MjhcdTdFRDlcdTVCOUEgUm9vdCBNb2R1bGVJbXBsIFx1NzY4NFx1NTI0RFx1NjNEMFx1NEUwQlx1RkYwQ1x1Njc4NFx1OTAyMFx1NEUwMFx1OTg5N1x1NUU5NFx1NzUyOFx1N0VBNyBSdW50aW1lXHVGRjFBXG4gKlxuICogLSBcdTRGN0ZcdTc1MjggUm9vdEltcGwubW9kdWxlICsgUm9vdEltcGwubGF5ZXIgXHU0RjVDXHU0RTNBXHU1NTJGXHU0RTAwXHU3Njg0XHU1MTY4XHU1QzQwXHU2QTIxXHU1NzU3XHVGRjFCXG4gKiAtIFx1NUMwNiBSb290SW1wbC5wcm9jZXNzZXMgXHU0RjVDXHU0RTNBXHU5NTdGXHU2NzFGXHU4RkRCXHU3QTBCXHU1NzI4IFJ1bnRpbWUgU2NvcGUgXHU1MTg1XHU3RURGXHU0RTAwIGZvcmtcdUZGMUJcbiAqIC0gXHU1OTBEXHU3NTI4XHU3M0IwXHU2NzA5IEFwcFJ1bnRpbWUgXHU1QjlFXHU3M0IwXHU0RjVDXHU0RTNBXHU1RTk1XHU1QzQyXHU1QkI5XHU1NjY4XHVGRjBDXHU1QkY5XHU1OTE2XHU0RUM1XHU2NkI0XHU5NzMyIE1hbmFnZWRSdW50aW1lXHUzMDAyXG4gKlxuICogXHU4QkY0XHU2NjBFXHVGRjFBXG4gKiAtIFx1N0M3Qlx1NTc4Qlx1NUM0Mlx1OTc2Mlx1NEY3Rlx1NzUyOFx1NUJCRFx1NkNEQlx1NzY4NCBhbnkvbmV2ZXJcdUZGMENcdTRFRTVcdTkwN0ZcdTUxNERcdTU3MjhcdTZCNjRcdTU5MDRcdTVGMTVcdTUxNjVcdTU5MERcdTY3NDJcdTc2ODQgRW52IFx1NjNBOFx1NUJGQ1x1RkYxQlxuICogLSBcdTRFMUFcdTUyQTFcdTRFRTNcdTc4MDFcdTUzRUFcdTk3MDBcdTg5ODFcdTRGRERcdThCQzEgUm9vdEltcGwubGF5ZXIgXHU0RTBFIG9wdGlvbnMubGF5ZXIgXHU0RTAwXHU4RDc3XHU4MEZEXHU2Nzg0XHU5MDIwXHU1QjhDXHU2NTc0IEVudlx1MzAwMlxuICovXG5leHBvcnQgY29uc3QgbWFrZSA9IChcbiAgcm9vdEltcGw6IE1vZHVsZUltcGw8YW55LCBBbnlNb2R1bGVTaGFwZSwgYW55PixcbiAgb3B0aW9ucz86IFJ1bnRpbWVPcHRpb25zLFxuKTogTWFuYWdlZFJ1bnRpbWUuTWFuYWdlZFJ1bnRpbWU8YW55LCBuZXZlcj4gPT4ge1xuICAvLyBcdTU3RkFcdTc4NDAgRW52XHVGRjFBXHU1QjhDXHU1MTY4XHU3NTMxXHU4QzAzXHU3NTI4XHU2NUI5XHU2M0QwXHU0RjlCXHU3Njg0IExheWVyIFx1NTFCM1x1NUI5QVx1RkYwOFx1NTk4MiBDb25maWcgLyBcdTVFNzNcdTUzRjBcdTY3MERcdTUyQTEgLyBEZWJ1Z0xheWVyIFx1N0I0OVx1RkYwOVx1RkYwQ1xuICAvLyBcdTgyRTVcdTk3MDBcdTg5ODFcdTU0MkZcdTc1MjhcdTlFRDhcdThCQTQgRGVidWcgXHU4MEZEXHU1MjlCXHVGRjBDXHU2M0E4XHU4MzUwXHU2NjNFXHU1RjBGXHU0RjdGXHU3NTI4IExvZ2l4LkRlYnVnLndpdGhEZWZhdWx0TGF5ZXIoLi4uKSBcdThGREJcdTg4NENcdTdFQzRcdTU0MDhcdTMwMDJcbiAgY29uc3QgdXNlckxheWVyID0gKG9wdGlvbnM/LmxheWVyID8/IExheWVyLmVtcHR5KSBhcyBMYXllci5MYXllcjxcbiAgICBhbnksXG4gICAgbmV2ZXIsXG4gICAgbmV2ZXJcbiAgPlxuXG4gIGxldCBtaWRkbGV3YXJlU3RhY2s6IEVmZmVjdE9wLk1pZGRsZXdhcmVTdGFjayA9IG9wdGlvbnM/Lm1pZGRsZXdhcmUgPz8gW11cblxuICAvLyBcdTgyRTVcdTY2M0VcdTVGMEZcdTU0MkZcdTc1MjggZGV2dG9vbHNcdUZGMENcdTUyMTlcdTgxRUFcdTUyQThcdUZGMUFcbiAgLy8gMSkgXHU4RkZEXHU1MkEwIERlYnVnT2JzZXJ2ZXJcdUZGMDh0cmFjZTplZmZlY3RvcFx1RkYwOVx1RkYxQlxuICAvLyAyKSBcdTU3MjggYXBwTGF5ZXIgXHU0RTJEXHU2MzAyXHU1MTY1IERldnRvb2xzSHViIFNpbmtcdUZGMDhcdThGREJcdTdBMEJcdTdFQTdcdTRFOEJcdTRFRjZcdTgwNUFcdTU0MDhcdUZGMDlcdTMwMDJcbiAgY29uc3QgZGV2dG9vbHNPcHRpb25zOiBEZXZ0b29sc1J1bnRpbWVPcHRpb25zIHwgdW5kZWZpbmVkID1cbiAgICBvcHRpb25zPy5kZXZ0b29scyA9PT0gdHJ1ZVxuICAgICAgPyB7fVxuICAgICAgOiBvcHRpb25zPy5kZXZ0b29sc1xuXG4gIGlmIChvcHRpb25zPy5kZXZ0b29scykge1xuICAgIGNvbnN0IG9ic2VydmVyQ29uZmlnID1cbiAgICAgIGRldnRvb2xzT3B0aW9ucz8ub2JzZXJ2ZXIgPT09IGZhbHNlID8gZmFsc2UgOiBkZXZ0b29sc09wdGlvbnM/Lm9ic2VydmVyXG4gICAgbWlkZGxld2FyZVN0YWNrID0gTWlkZGxld2FyZS53aXRoRGVidWcobWlkZGxld2FyZVN0YWNrLCB7XG4gICAgICBsb2dnZXI6IGZhbHNlLFxuICAgICAgb2JzZXJ2ZXI6IG9ic2VydmVyQ29uZmlnLFxuICAgIH0pXG4gIH1cblxuICAvLyBcdTUzRUZcdTkwMDlcdUZGMUFcdTRFM0FcdTVGNTNcdTUyNEQgUnVudGltZSBcdTZDRThcdTUxNjUgRWZmZWN0T3AgTWlkZGxld2FyZVN0YWNrIFNlcnZpY2VcdUZGMENcbiAgLy8gXHU0RjlCIFN0YXRlVHJhaXQuaW5zdGFsbCBcdTdCNDlcdThGRDBcdTg4NENcdTY1RjZcdTRFRTNcdTc4MDFcdTRFQ0UgRW52IFx1NEUyRFx1ODlFM1x1Njc5MFx1N0VERlx1NEUwMFx1NzY4NCBFZmZlY3RPcCBcdTYwM0JcdTdFQkZcdTkxNERcdTdGNkVcdTMwMDJcbiAgY29uc3QgZWZmZWN0T3BMYXllcjogTGF5ZXIuTGF5ZXI8YW55LCBuZXZlciwgbmV2ZXI+ID1cbiAgICBtaWRkbGV3YXJlU3RhY2subGVuZ3RoID4gMFxuICAgICAgPyAoTGF5ZXIuc3VjY2VlZChFZmZlY3RPcENvcmUuRWZmZWN0T3BNaWRkbGV3YXJlVGFnLCB7XG4gICAgICAgICAgc3RhY2s6IG1pZGRsZXdhcmVTdGFjayxcbiAgICAgICAgfSkgYXMgTGF5ZXIuTGF5ZXI8YW55LCBuZXZlciwgbmV2ZXI+KVxuICAgICAgOiAoTGF5ZXIuZW1wdHkgYXMgTGF5ZXIuTGF5ZXI8YW55LCBuZXZlciwgbmV2ZXI+KVxuXG4gIGNvbnN0IGJhc2VMYXllciA9XG4gICAgb3B0aW9ucz8ubGFiZWwgIT0gbnVsbFxuICAgICAgPyAoTGF5ZXIubWVyZ2VBbGwoXG4gICAgICAgICAgRGVidWcucnVudGltZUxhYmVsKG9wdGlvbnMubGFiZWwpLFxuICAgICAgICAgIHVzZXJMYXllcixcbiAgICAgICAgKSBhcyBMYXllci5MYXllcjxhbnksIG5ldmVyLCBuZXZlcj4pXG4gICAgICA6IHVzZXJMYXllclxuXG4gIGNvbnN0IGJhc2VXaXRoRGV2dG9vbHMgPVxuICAgIG9wdGlvbnM/LmRldnRvb2xzXG4gICAgICA/IChEZWJ1Zy5kZXZ0b29sc0h1YkxheWVyKGJhc2VMYXllciwge1xuICAgICAgICAgIGJ1ZmZlclNpemU6IGRldnRvb2xzT3B0aW9ucz8uYnVmZmVyU2l6ZSxcbiAgICAgICAgfSkgYXMgTGF5ZXIuTGF5ZXI8YW55LCBuZXZlciwgbmV2ZXI+KVxuICAgICAgOiBiYXNlTGF5ZXJcblxuICBjb25zdCBhcHBMYXllciA9IExheWVyLm1lcmdlQWxsKFxuICAgIGJhc2VXaXRoRGV2dG9vbHMsXG4gICAgZWZmZWN0T3BMYXllcixcbiAgKSBhcyBMYXllci5MYXllcjxhbnksIG5ldmVyLCBuZXZlcj5cblxuICBjb25zdCBhcHBDb25maWc6IEFwcFJ1bnRpbWVJbXBsLkxvZ2l4QXBwQ29uZmlnPGFueT4gPSB7XG4gICAgbGF5ZXI6IGFwcExheWVyLFxuICAgIG1vZHVsZXM6IFtBcHBSdW50aW1lSW1wbC5wcm92aWRlKHJvb3RJbXBsLm1vZHVsZSwgcm9vdEltcGwubGF5ZXIgYXMgTGF5ZXIuTGF5ZXI8YW55LCBhbnksIGFueT4pXSxcbiAgICBwcm9jZXNzZXM6IHJvb3RJbXBsLnByb2Nlc3NlcyA/PyBbXSxcbiAgICBvbkVycm9yOiBvcHRpb25zPy5vbkVycm9yLFxuICAgIHN0YXRlVHJhbnNhY3Rpb246IG9wdGlvbnM/LnN0YXRlVHJhbnNhY3Rpb24sXG4gIH1cblxuICBjb25zdCBhcHAgPSBBcHBSdW50aW1lSW1wbC5tYWtlQXBwKGFwcENvbmZpZylcbiAgcmV0dXJuIGFwcC5tYWtlUnVudGltZSgpIGFzIE1hbmFnZWRSdW50aW1lLk1hbmFnZWRSdW50aW1lPGFueSwgbmV2ZXI+XG59XG5cbi8qKlxuICogYXBwbHlUcmFuc2FjdGlvblNuYXBzaG90XHVGRjFBXG4gKiAtIERldnRvb2xzIFx1MjE5NCBSdW50aW1lIFx1NTk1MVx1N0VBNlx1NzY4NFx1NEUwMFx1OTBFOFx1NTIwNlx1RkYwQ1x1NzUyOFx1NEU4RVx1NTcyOCBkZXYvdGVzdCBcdTczQUZcdTU4ODNcdTRFMEJcdTYzMDlcdTRFOEJcdTUyQTFcdTU2REVcdTY1M0VcdTY3RDBcdTRFMkFcdTZBMjFcdTU3NTdcdTVCOUVcdTRGOEJcdTc2ODRcdTcyQjZcdTYwMDFcdUZGMUJcbiAqIC0gbW9kdWxlSWQgLyBpbnN0YW5jZUlkIFx1NUJGOVx1NUU5NCBEZWJ1ZyBcdTRFOEJcdTRFRjZcdTRFMkRcdTc2ODQgbW9kdWxlSWQgLyBydW50aW1lSWRcdUZGMUJcbiAqIC0gbW9kZSA9IFwiYmVmb3JlXCIgXHU1NkRFXHU2NTNFXHU1MjMwXHU0RThCXHU1MkExXHU1RjAwXHU1OUNCXHU1MjREXHU3Njg0XHU3MkI2XHU2MDAxXHVGRjBDXCJhZnRlclwiIFx1NTZERVx1NjUzRVx1NTIzMFx1NEU4Qlx1NTJBMVx1NjNEMFx1NEVBNFx1NTQwRVx1NzY4NFx1NzJCNlx1NjAwMVx1MzAwMlxuICpcbiAqIFx1OEJGNFx1NjYwRVx1RkYxQVxuICogLSBcdTVCOUVcdTk2NDVcdTU2REVcdTY1M0VcdTkwM0JcdThGOTFcdTc1MzEgTW9kdWxlUnVudGltZSBcdTUxODVcdTkwRThcdTc2ODQgZGV2LW9ubHkgQVBJIFx1NjI3Rlx1NjJDNVx1RkYxQlxuICogLSBcdTgyRTVcdTYyN0VcdTRFMERcdTUyMzBcdTVCRjlcdTVFOTQgUnVudGltZSBcdTYyMTZcdTVGNTNcdTUyNERcdTVCOUVcdTRGOEJcdTY3MkFcdTU0MkZcdTc1MjhcdTY1RjZcdTk1RjRcdTY1QzVcdTg4NENcdTgwRkRcdTUyOUJcdUZGMENcdTUyMTlcdTRFM0Egbm8tb3BcdTMwMDJcbiAqL1xuZXhwb3J0IGNvbnN0IGFwcGx5VHJhbnNhY3Rpb25TbmFwc2hvdCA9IChcbiAgbW9kdWxlSWQ6IHN0cmluZyxcbiAgaW5zdGFuY2VJZDogc3RyaW5nLFxuICB0eG5JZDogc3RyaW5nLFxuICBtb2RlOiBcImJlZm9yZVwiIHwgXCJhZnRlclwiLFxuKTogRWZmZWN0LkVmZmVjdDx2b2lkLCBuZXZlciwgYW55PiA9PlxuICBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG4gICAgY29uc3QgcnVudGltZSA9XG4gICAgICBNb2R1bGVSdW50aW1lLmdldFJ1bnRpbWVCeU1vZHVsZUFuZEluc3RhbmNlPGFueSwgYW55PihcbiAgICAgICAgbW9kdWxlSWQsXG4gICAgICAgIGluc3RhbmNlSWQsXG4gICAgICApXG5cbiAgICBpZiAoIXJ1bnRpbWUpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IGFwcGx5U25hcHNob3QgPVxuICAgICAgKHJ1bnRpbWUgYXMgYW55KS5fX2FwcGx5VHJhbnNhY3Rpb25TbmFwc2hvdCBhc1xuICAgICAgICB8ICgoXG4gICAgICAgICAgaWQ6IHN0cmluZyxcbiAgICAgICAgICBtb2RlOiBcImJlZm9yZVwiIHwgXCJhZnRlclwiLFxuICAgICAgICApID0+IEVmZmVjdC5FZmZlY3Q8dm9pZCwgbmV2ZXIsIGFueT4pXG4gICAgICAgIHwgdW5kZWZpbmVkXG5cbiAgICBpZiAoIWFwcGx5U25hcHNob3QpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHlpZWxkKiBhcHBseVNuYXBzaG90KHR4bklkLCBtb2RlKVxuICB9KVxuIiwgImltcG9ydCB7IENvbnRleHQsIEVmZmVjdCwgTGF5ZXIsIE1hbmFnZWRSdW50aW1lIH0gZnJvbSAnZWZmZWN0J1xuaW1wb3J0IHsgU3RhdGVUcmFuc2FjdGlvbkNvbmZpZ1RhZywgdHlwZSBTdGF0ZVRyYW5zYWN0aW9uUnVudGltZUNvbmZpZyB9IGZyb20gJy4vY29yZS9lbnYuanMnXG5pbXBvcnQgeyBSb290Q29udGV4dFRhZyB9IGZyb20gXCIuL2NvcmUvUm9vdENvbnRleHQuanNcIlxuaW1wb3J0IHR5cGUgeyBBbnlNb2R1bGVTaGFwZSwgTW9kdWxlSW5zdGFuY2UsIE1vZHVsZVJ1bnRpbWUsIFN0YXRlT2YsIEFjdGlvbk9mIH0gZnJvbSAnLi9jb3JlL21vZHVsZS5qcydcblxuLyoqXG4gKiBBcHBNb2R1bGVFbnRyeVx1RkYxQVx1NzUzMSBMb2dpeC5wcm92aWRlIFx1NzUxRlx1NjIxMFx1NzY4NFx1NkEyMVx1NTc1N1x1Njc2MVx1NzZFRVx1MzAwMlxuICpcbiAqIC0gbW9kdWxlXHVGRjFBTW9kdWxlIFx1NUI5QVx1NEU0OVx1NUJGOVx1OEM2MVx1RkYwOFx1NjVFMlx1NjYyRiBUYWdcdUZGMENcdTUzQzhcdTY0M0FcdTVFMjYgU2hhcGUgXHU0RkUxXHU2MDZGXHU0RTBFXHU1REU1XHU1MzgyXHU4MEZEXHU1MjlCXHVGRjA5XHVGRjFCXG4gKiAtIGxheWVyXHVGRjFBXHU4QkU1IE1vZHVsZSBcdTVCRjlcdTVFOTRcdTc2ODQgUnVudGltZSBMYXllclx1MzAwMlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEFwcE1vZHVsZUVudHJ5IHtcbiAgcmVhZG9ubHkgbW9kdWxlOiBNb2R1bGVJbnN0YW5jZTxhbnksIEFueU1vZHVsZVNoYXBlPlxuICByZWFkb25seSBsYXllcjogTGF5ZXIuTGF5ZXI8YW55LCBhbnksIGFueT5cbiAgLyoqXG4gICAqIFx1NTNFRlx1OTAwOVx1RkYxQVx1NzUzMVx1OEJFNVx1NkEyMVx1NTc1N1x1NUJGOVx1NUU5NCBMYXllciBcdTYzRDBcdTRGOUJcdTc2ODQgU2VydmljZSBUYWcgXHU1MjE3XHU4ODY4XHUzMDAyXG4gICAqXG4gICAqIC0gXHU0RUM1XHU3NTI4XHU0RThFIEFwcCBcdTY3ODRcdTVFRkFcdTk2MzZcdTZCQjVcdTc2ODQgVGFnIFx1NTFCMlx1N0E4MVx1NjhDMFx1NkQ0Qlx1NEUwRSBFbnYgXHU2MkQzXHU2MjUxXHU1MjA2XHU2NzkwXHVGRjFCXG4gICAqIC0gXHU1MTg1XHU5MEU4XHU1NzI4XHU0RjdGXHU3NTI4IEFwcFJ1bnRpbWUgXHU3RUM0XHU4OEM1XHU1RTk0XHU3NTI4XHU4NEREXHU1NkZFXHU2NUY2XHVGRjBDXHU1M0VGXHU5MDFBXHU4RkM3IHByb3ZpZGVXaXRoVGFncyBcdTY2M0VcdTVGMEZcdTU4RjBcdTY2MEVcdUZGMUJcbiAgICogLSBcdTRFMERcdTVGNzFcdTU0Q0RcdThGRDBcdTg4NENcdTY1RjZcdTg4NENcdTRFM0FcdUZGMENcdTRFMERcdTU4RjBcdTY2MEVcdTUyMTlcdTg5QzZcdTRFM0FcdTIwMUNcdThCRTUgTW9kdWxlIExheWVyIFx1NjcyQVx1NjYzRVx1NUYwRlx1NjNEMFx1NEY5QiBTZXJ2aWNlIFRhZ1x1MjAxRFx1MzAwMlxuICAgKi9cbiAgcmVhZG9ubHkgc2VydmljZVRhZ3M/OiBSZWFkb25seUFycmF5PENvbnRleHQuVGFnPGFueSwgYW55Pj5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBMb2dpeEFwcENvbmZpZzxSPiB7XG4gIHJlYWRvbmx5IGxheWVyOiBMYXllci5MYXllcjxSLCBuZXZlciwgbmV2ZXI+XG4gIHJlYWRvbmx5IG1vZHVsZXM6IFJlYWRvbmx5QXJyYXk8QXBwTW9kdWxlRW50cnk+XG4gIHJlYWRvbmx5IHByb2Nlc3NlczogUmVhZG9ubHlBcnJheTxFZmZlY3QuRWZmZWN0PHZvaWQsIGFueSwgYW55Pj5cbiAgcmVhZG9ubHkgb25FcnJvcj86IChjYXVzZTogaW1wb3J0KCdlZmZlY3QnKS5DYXVzZS5DYXVzZTx1bmtub3duPikgPT4gRWZmZWN0LkVmZmVjdDx2b2lkPlxuICAvKipcbiAgICogUnVudGltZSBcdTdFQTcgU3RhdGVUcmFuc2FjdGlvbiBcdTlFRDhcdThCQTRcdTkxNERcdTdGNkVcdUZGMUFcbiAgICogLSBcdTgyRTVcdTY3MkFcdTYzRDBcdTRGOUJcdUZGMENcdTUyMTlcdTU0MDQgTW9kdWxlUnVudGltZSBcdTkwMDBcdTU2REVcdTUyMzBcdTU3RkFcdTRFOEUgTk9ERV9FTlYgXHU3Njg0XHU5RUQ4XHU4QkE0XHU4OUMyXHU2RDRCXHU3QjU2XHU3NTY1XHVGRjFCXG4gICAqIC0gXHU4MkU1XHU2M0QwXHU0RjlCIGluc3RydW1lbnRhdGlvblx1RkYwQ1x1NTIxOVx1NEY1Q1x1NEUzQSBSdW50aW1lIFx1NEUwQlx1NjI0MFx1NjcwOVx1NkEyMVx1NTc1N1x1NzY4NFx1OUVEOFx1OEJBNFx1ODlDMlx1NkQ0Qlx1N0VBN1x1NTIyQlx1RkYwQ1xuICAgKiAgIFx1NTE3N1x1NEY1M1x1NkEyMVx1NTc1N1x1NEVDRFx1NTNFRlx1OTAxQVx1OEZDNyBNb2R1bGVJbXBsLnN0YXRlVHJhbnNhY3Rpb24gXHU4OTg2XHU1MTk5XHUzMDAyXG4gICAqL1xuICByZWFkb25seSBzdGF0ZVRyYW5zYWN0aW9uPzogU3RhdGVUcmFuc2FjdGlvblJ1bnRpbWVDb25maWdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBcHBEZWZpbml0aW9uPFI+IHtcbiAgcmVhZG9ubHkgZGVmaW5pdGlvbjogTG9naXhBcHBDb25maWc8Uj5cbiAgcmVhZG9ubHkgbGF5ZXI6IExheWVyLkxheWVyPFIsIG5ldmVyLCBuZXZlcj5cbiAgcmVhZG9ubHkgbWFrZVJ1bnRpbWU6ICgpID0+IE1hbmFnZWRSdW50aW1lLk1hbmFnZWRSdW50aW1lPFIsIG5ldmVyPlxufVxuXG5pbnRlcmZhY2UgVGFnSW5mbyB7XG4gIHJlYWRvbmx5IGtleTogc3RyaW5nXG4gIHJlYWRvbmx5IHRhZzogQ29udGV4dC5UYWc8YW55LCBhbnk+XG4gIHJlYWRvbmx5IG93bmVyTW9kdWxlSWQ6IHN0cmluZ1xuICByZWFkb25seSBzb3VyY2U6ICdtb2R1bGUnIHwgJ3NlcnZpY2UnXG59XG5cbmludGVyZmFjZSBUYWdDb2xsaXNpb24ge1xuICByZWFkb25seSBrZXk6IHN0cmluZ1xuICByZWFkb25seSBjb25mbGljdHM6IFJlYWRvbmx5QXJyYXk8VGFnSW5mbz5cbn1cblxuaW50ZXJmYWNlIFRhZ0NvbGxpc2lvbkVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICByZWFkb25seSBfdGFnOiAnVGFnQ29sbGlzaW9uRXJyb3InXG4gIHJlYWRvbmx5IGNvbGxpc2lvbnM6IFJlYWRvbmx5QXJyYXk8VGFnQ29sbGlzaW9uPlxufVxuXG5jb25zdCBnZXRUYWdLZXkgPSAodGFnOiBDb250ZXh0LlRhZzxhbnksIGFueT4pOiBzdHJpbmcgPT4ge1xuICBjb25zdCBhbnlUYWcgPSB0YWcgYXMgYW55XG4gIGlmICh0eXBlb2YgYW55VGFnLmtleSA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gYW55VGFnLmtleVxuICB9XG4gIGlmICh0eXBlb2YgYW55VGFnLl9pZCA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gYW55VGFnLl9pZFxuICB9XG4gIGlmICh0eXBlb2YgYW55VGFnLnRvU3RyaW5nID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGFueVRhZy50b1N0cmluZygpXG4gIH1cbiAgcmV0dXJuICdbdW5rbm93bi10YWddJ1xufVxuXG5jb25zdCBidWlsZFRhZ0luZGV4ID0gKGVudHJpZXM6IFJlYWRvbmx5QXJyYXk8QXBwTW9kdWxlRW50cnk+KTogTWFwPHN0cmluZywgVGFnSW5mb1tdPiA9PiB7XG4gIGNvbnN0IGluZGV4ID0gbmV3IE1hcDxzdHJpbmcsIFRhZ0luZm9bXT4oKVxuXG4gIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgIGNvbnN0IG93bmVySWQgPSBTdHJpbmcoZW50cnkubW9kdWxlLmlkKVxuXG4gICAgLy8gXHU4QkIwXHU1RjU1IE1vZHVsZSBcdTgxRUFcdThFQUIgVGFnXG4gICAgY29uc3QgbW9kdWxlVGFnID0gZW50cnkubW9kdWxlIGFzIHVua25vd24gYXMgQ29udGV4dC5UYWc8YW55LCBhbnk+XG4gICAgY29uc3QgbW9kdWxlS2V5ID0gZ2V0VGFnS2V5KG1vZHVsZVRhZylcbiAgICBjb25zdCBtb2R1bGVJbmZvOiBUYWdJbmZvID0ge1xuICAgICAga2V5OiBtb2R1bGVLZXksXG4gICAgICB0YWc6IG1vZHVsZVRhZyxcbiAgICAgIG93bmVyTW9kdWxlSWQ6IG93bmVySWQsXG4gICAgICBzb3VyY2U6ICdtb2R1bGUnLFxuICAgIH1cbiAgICBjb25zdCBleGlzdGluZ01vZHVsZUluZm9zID0gaW5kZXguZ2V0KG1vZHVsZUtleSlcbiAgICBpZiAoZXhpc3RpbmdNb2R1bGVJbmZvcykge1xuICAgICAgZXhpc3RpbmdNb2R1bGVJbmZvcy5wdXNoKG1vZHVsZUluZm8pXG4gICAgfSBlbHNlIHtcbiAgICAgIGluZGV4LnNldChtb2R1bGVLZXksIFttb2R1bGVJbmZvXSlcbiAgICB9XG5cbiAgICAvLyBcdThCQjBcdTVGNTVcdTY2M0VcdTVGMEZcdTU4RjBcdTY2MEVcdTc2ODQgU2VydmljZSBUYWdcdUZGMDhcdTU5ODJcdTY3MDlcdUZGMDlcbiAgICBpZiAoZW50cnkuc2VydmljZVRhZ3MgJiYgZW50cnkuc2VydmljZVRhZ3MubGVuZ3RoID4gMCkge1xuICAgICAgZm9yIChjb25zdCB0YWcgb2YgZW50cnkuc2VydmljZVRhZ3MpIHtcbiAgICAgICAgY29uc3Qga2V5ID0gZ2V0VGFnS2V5KHRhZylcbiAgICAgICAgY29uc3QgaW5mbzogVGFnSW5mbyA9IHtcbiAgICAgICAgICBrZXksXG4gICAgICAgICAgdGFnLFxuICAgICAgICAgIG93bmVyTW9kdWxlSWQ6IG93bmVySWQsXG4gICAgICAgICAgc291cmNlOiAnc2VydmljZScsXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXhpc3RpbmdJbmZvcyA9IGluZGV4LmdldChrZXkpXG4gICAgICAgIGlmIChleGlzdGluZ0luZm9zKSB7XG4gICAgICAgICAgZXhpc3RpbmdJbmZvcy5wdXNoKGluZm8pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaW5kZXguc2V0KGtleSwgW2luZm9dKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGluZGV4XG59XG5cbmNvbnN0IHZhbGlkYXRlVGFncyA9IChlbnRyaWVzOiBSZWFkb25seUFycmF5PEFwcE1vZHVsZUVudHJ5Pik6IHZvaWQgPT4ge1xuICBjb25zdCBpbmRleCA9IGJ1aWxkVGFnSW5kZXgoZW50cmllcylcbiAgY29uc3QgY29sbGlzaW9uczogVGFnQ29sbGlzaW9uW10gPSBbXVxuXG4gIGZvciAoY29uc3QgW2tleSwgaW5mb3NdIG9mIGluZGV4KSB7XG4gICAgaWYgKGluZm9zLmxlbmd0aCA8PSAxKSB7XG4gICAgICBjb250aW51ZVxuICAgIH1cbiAgICBjb25zdCBvd25lcnMgPSBuZXcgU2V0PHN0cmluZz4oKVxuICAgIGZvciAoY29uc3QgaW5mbyBvZiBpbmZvcykge1xuICAgICAgb3duZXJzLmFkZChpbmZvLm93bmVyTW9kdWxlSWQpXG4gICAgfVxuICAgIC8vIFx1NEVDNVx1NUY1M1x1NTQwQ1x1NEUwMCBrZXkgXHU1MUZBXHU3M0IwXHU1NzI4XHU1OTFBXHU0RTJBXHU0RTBEXHU1NDBDXHU2QTIxXHU1NzU3XHU0RTBCXHU2NUY2XHU4OUM2XHU0RTNBXHU1MUIyXHU3QTgxXHVGRjFCXG4gICAgLy8gXHU1MzU1XHU2QTIxXHU1NzU3XHU1MTg1XHU5MUNEXHU1OTBEXHU3NjdCXHU4QkIwXHU1NDBDXHU0RTAwIFRhZyBcdTRFMERcdTRGNUNcdTRFM0FcdTk1MTlcdThCRUZcdTU5MDRcdTc0MDZcdUZGMDhcdTUzRUZcdTgwRkRcdTY3NjVcdTgxRUFcdTU5MUFcdTVDNDJcdTdFQzRcdTU0MDhcdUZGMDlcdTMwMDJcbiAgICBpZiAob3duZXJzLnNpemUgPiAxKSB7XG4gICAgICBjb2xsaXNpb25zLnB1c2goeyBrZXksIGNvbmZsaWN0czogaW5mb3MgfSlcbiAgICB9XG4gIH1cblxuICBpZiAoY29sbGlzaW9ucy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIGNvbnN0IG1lc3NhZ2UgPVxuICAgICdbTG9naXhdIFRhZyBjb2xsaXNpb24gZGV0ZWN0ZWQ6XFxuJyArXG4gICAgY29sbGlzaW9uc1xuICAgICAgLm1hcCgoYykgPT4ge1xuICAgICAgICBjb25zdCBoZWFkZXIgPSBgLSBrZXk6ICR7Yy5rZXl9YFxuICAgICAgICBjb25zdCBsaW5lcyA9IGMuY29uZmxpY3RzLm1hcCgoaSkgPT4gYCAgLSBvd25lcjogJHtpLm93bmVyTW9kdWxlSWR9LCBzb3VyY2U6ICR7aS5zb3VyY2V9YClcbiAgICAgICAgcmV0dXJuIFtoZWFkZXIsIC4uLmxpbmVzXS5qb2luKCdcXG4nKVxuICAgICAgfSlcbiAgICAgIC5qb2luKCdcXG4nKVxuXG4gIGNvbnN0IGVycm9yOiBUYWdDb2xsaXNpb25FcnJvciA9IE9iamVjdC5hc3NpZ24obmV3IEVycm9yKG1lc3NhZ2UpLCB7XG4gICAgX3RhZzogJ1RhZ0NvbGxpc2lvbkVycm9yJyBhcyBjb25zdCxcbiAgICBjb2xsaXNpb25zLFxuICB9KVxuXG4gIHRocm93IGVycm9yXG59XG5cbmV4cG9ydCBjb25zdCBtYWtlQXBwID0gPFI+KGNvbmZpZzogTG9naXhBcHBDb25maWc8Uj4pOiBBcHBEZWZpbml0aW9uPFI+ID0+IHtcbiAgY29uc3Qgc2VlbklkcyA9IG5ldyBTZXQ8c3RyaW5nPigpXG4gIGZvciAoY29uc3QgZW50cnkgb2YgY29uZmlnLm1vZHVsZXMpIHtcbiAgICBjb25zdCBpZCA9IFN0cmluZyhlbnRyeS5tb2R1bGUuaWQpXG5cbiAgICBpZiAoc2Vlbklkcy5oYXMoaWQpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBbTG9naXhdIER1cGxpY2F0ZSBNb2R1bGUgSUQvVGFnIGRldGVjdGVkOiBcIiR7aWR9XCIuIFxcbkVuc3VyZSBhbGwgbW9kdWxlcyBpbiB0aGUgYXBwbGljYXRpb24gUnVudGltZSBoYXZlIHVuaXF1ZSBJRHMuYCxcbiAgICAgIClcbiAgICB9XG4gICAgc2Vlbklkcy5hZGQoaWQpXG4gIH1cblxuICAvLyBcdTU3MjhcdTU0MDhcdTVFNzYgTGF5ZXIgXHU0RTRCXHU1MjREXHVGRjBDXHU1QkY5IE1vZHVsZSBUYWcgXHU0RTBFXHU2NjNFXHU1RjBGXHU2M0QwXHU0RjlCXHU3Njg0IFNlcnZpY2UgVGFnIFx1NTA1QVx1NEUwMFx1NkIyMVx1NTFCMlx1N0E4MVx1NjgyMVx1OUE4Q1x1MzAwMlxuICAvLyBcdThGRDlcdTUzRUZcdTRFRTVcdTYzRDBcdTUyNERcdTY2QjRcdTk3MzJcdTIwMUNcdTU0MENcdTRFMDAgU2VydmljZVRhZyBcdTc1MzFcdTU5MUFcdTRFMkFcdTZBMjFcdTU3NTdcdTVCOUVcdTczQjBcdTIwMURcdTc2ODRcdTk1RUVcdTk4OThcdUZGMENcdTkwN0ZcdTUxNEQgRW52IFx1ODhBQlx1OTc1OVx1OUVEOFx1ODk4Nlx1NzZENlx1MzAwMlxuICB2YWxpZGF0ZVRhZ3MoY29uZmlnLm1vZHVsZXMpXG5cbiAgLy8gXHU4MkU1IFJ1bnRpbWUgXHU1QzQyXHU2M0QwXHU0RjlCXHU0RTg2XHU3RURGXHU0RTAwXHU3Njg0IFN0YXRlVHJhbnNhY3Rpb24gXHU5MTREXHU3RjZFXHVGRjBDXHU1MjE5XHU1NzI4IEFwcCBcdTdFQTcgRW52IFx1NEUwQVx1OEZGRFx1NTJBMFx1NUJGOVx1NUU5NCBTZXJ2aWNlXHUzMDAyXG4gIGNvbnN0IHN0YXRlVHhuTGF5ZXI6IExheWVyLkxheWVyPFIsIG5ldmVyLCBuZXZlcj4gPVxuICAgIGNvbmZpZy5zdGF0ZVRyYW5zYWN0aW9uXG4gICAgICA/IChMYXllci5zdWNjZWVkKFN0YXRlVHJhbnNhY3Rpb25Db25maWdUYWcsIGNvbmZpZy5zdGF0ZVRyYW5zYWN0aW9uKSBhcyBMYXllci5MYXllcjxSLCBuZXZlciwgbmV2ZXI+KVxuICAgICAgOiAoTGF5ZXIuZW1wdHkgYXMgTGF5ZXIuTGF5ZXI8UiwgbmV2ZXIsIG5ldmVyPilcblxuICBjb25zdCBiYXNlTGF5ZXIgPSBMYXllci5tZXJnZUFsbChjb25maWcubGF5ZXIsIHN0YXRlVHhuTGF5ZXIpIGFzIExheWVyLkxheWVyPFIsIG5ldmVyLCBuZXZlcj5cblxuICBjb25zdCBtb2R1bGVMYXllcnMgPSBjb25maWcubW9kdWxlcy5tYXAoKGVudHJ5KSA9PlxuICAgIC8vIFx1Nzg2RVx1NEZERFx1NkJDRlx1NEUyQVx1NkEyMVx1NTc1N1x1NUM0Mlx1OTBGRFx1ODBGRFx1NzcwQlx1NTIzMCBBcHAgXHU3RUE3IEVudlx1RkYwOGJhc2VMYXllclx1RkYwOVx1RkYwQ1x1OTA3Rlx1NTE0RFx1NTcyOFx1NTIxRFx1NTlDQlx1NTMxNlx1OTYzNlx1NkJCNVx1NjI3RVx1NEUwRFx1NTIzMCBSb290IEVudlx1MzAwMlxuICAgIExheWVyLnByb3ZpZGUoZW50cnkubGF5ZXIsIGJhc2VMYXllciksXG4gIClcbiAgY29uc3QgZW52TGF5ZXIgPSBtb2R1bGVMYXllcnMubGVuZ3RoID4gMCA/IExheWVyLm1lcmdlQWxsKGJhc2VMYXllciwgLi4ubW9kdWxlTGF5ZXJzKSA6IGJhc2VMYXllclxuXG4gIGNvbnN0IGZpbmFsTGF5ZXIgPSBMYXllci51bndyYXBTY29wZWQoXG4gICAgRWZmZWN0LmdlbihmdW5jdGlvbiogKCkge1xuICAgICAgY29uc3Qgc2NvcGUgPSB5aWVsZCogRWZmZWN0LnNjb3BlXG5cbiAgICAgIC8vIGJ1aWxkV2l0aFNjb3BlIFx1NEYxQVx1NTcyOFx1NUY1M1x1NTI0RCBzY29wZSBcdTUxODVcdTY3ODRcdTVFRkEgZW52TGF5ZXJcdUZGMENcdTVFNzZcdTU3MjggRmliZXJSZWZzIFx1NEUwQVx1NjI1M1x1ODg2NVx1NEUwMVx1RkYwOFx1NEY4Qlx1NTk4MiBEZWJ1ZyBzaW5rc1x1RkYwOVx1MzAwMlxuICAgICAgLy8gXHU4RkQ5XHU5MUNDXHU3NTI4IGRpZmZGaWJlclJlZnMgXHU1MzA1XHU4OEY5IGJ1aWxkV2l0aFNjb3BlXHVGRjBDXHU2MzU1XHU4M0I3IEZpYmVyUmVmcyBcdTc2ODRcdTUzRDhcdTY2RjQgcGF0Y2hcdUZGMENcbiAgICAgIC8vIFx1NTE4RFx1NjI4QSBwYXRjaCBcdTRGNUNcdTRFM0FcdTRFMDBcdTVDNDIgTGF5ZXIgXHU1NkRFXHU3MDRDXHU1MjMwXHU2NzAwXHU3RUM4IFJ1bnRpbWVcdUZGMENcdTkwN0ZcdTUxNEQgRmliZXJSZWYgXHU0RkVFXHU2NTM5XHU1NzI4XHU3RUM0XHU4OEM1XHU5NjM2XHU2QkI1XHU4OEFCXHUyMDFDXHU2RDE3XHU2Mzg5XHUyMDFEXHUzMDAyXG4gICAgICBjb25zdCBbcGF0Y2gsIGVudl0gPSB5aWVsZCogRWZmZWN0LmRpZmZGaWJlclJlZnMoTGF5ZXIuYnVpbGRXaXRoU2NvcGUoZW52TGF5ZXIsIHNjb3BlKSlcblxuICAgICAgLy8gXHU1NzI4IEVudiBcdTVCOENcdTUxNjhcdTVDMzFcdTdFRUFcdTU0MEVcdUZGMENcdTUxOEQgZm9yayBBcHAgXHU3RUE3XHU5NTdGXHU2NzFGXHU4RkRCXHU3QTBCXHVGRjA4TGluayAvIHdhdGNoZXIgLyBob3N0IGJyaWRnZSBcdTdCNDlcdUZGMDlcdTMwMDJcbiAgICAgIHlpZWxkKiBFZmZlY3QuZm9yRWFjaChcbiAgICAgICAgY29uZmlnLnByb2Nlc3NlcyxcbiAgICAgICAgKHByb2Nlc3MpID0+XG4gICAgICAgICAgRWZmZWN0LmZvcmtTY29wZWQoXG4gICAgICAgICAgICBFZmZlY3QucHJvdmlkZShcbiAgICAgICAgICAgICAgY29uZmlnLm9uRXJyb3IgPyBFZmZlY3QuY2F0Y2hBbGxDYXVzZShwcm9jZXNzLCBjb25maWcub25FcnJvcikgOiBwcm9jZXNzLFxuICAgICAgICAgICAgICBlbnYsXG4gICAgICAgICAgICApLFxuICAgICAgICAgICksXG4gICAgICAgIHsgZGlzY2FyZDogdHJ1ZSB9LFxuICAgICAgKVxuXG4gICAgICBjb25zdCBmaWJlclJlZnNMYXllciA9IExheWVyLnNjb3BlZERpc2NhcmQoRWZmZWN0LnBhdGNoRmliZXJSZWZzKHBhdGNoKSlcblxuICAgICAgcmV0dXJuIExheWVyLm1lcmdlQWxsKFxuICAgICAgICBMYXllci5zdWNjZWVkQ29udGV4dChlbnYpLFxuICAgICAgICBmaWJlclJlZnNMYXllcixcbiAgICAgICAgTGF5ZXIuc3VjY2VlZChSb290Q29udGV4dFRhZywgeyBjb250ZXh0OiBlbnYgfSksXG4gICAgICApXG4gICAgfSksXG4gICkgYXMgTGF5ZXIuTGF5ZXI8UiwgbmV2ZXIsIG5ldmVyPlxuXG4gIHJldHVybiB7XG4gICAgZGVmaW5pdGlvbjogY29uZmlnLFxuICAgIGxheWVyOiBmaW5hbExheWVyLFxuICAgIG1ha2VSdW50aW1lOiAoKSA9PiBNYW5hZ2VkUnVudGltZS5tYWtlKGZpbmFsTGF5ZXIpLFxuICB9XG59XG5cbi8qKlxuICogXHU4QkVEXHU2Q0Q1XHU3Q0Q2XHVGRjFBXHU1QzA2IE1vZHVsZSBcdTRFMEUgUnVudGltZSBcdTVCOUVcdTRGOEJcdTYyMTYgTGF5ZXIgXHU5MTREXHU1QkY5XHVGRjBDXHU3NTI4XHU0RThFIEFwcFJ1bnRpbWUgXHU3Njg0IG1vZHVsZXMgXHU5MTREXHU3RjZFXHUzMDAyXG4gKi9cbmV4cG9ydCBjb25zdCBwcm92aWRlID0gPFNoIGV4dGVuZHMgQW55TW9kdWxlU2hhcGUsIFIsIEU+KFxuICBtb2R1bGU6IE1vZHVsZUluc3RhbmNlPGFueSwgU2g+LFxuICByZXNvdXJjZTogTGF5ZXIuTGF5ZXI8TW9kdWxlUnVudGltZTxTdGF0ZU9mPFNoPiwgQWN0aW9uT2Y8U2g+PiwgRSwgUj4gfCBNb2R1bGVSdW50aW1lPFN0YXRlT2Y8U2g+LCBBY3Rpb25PZjxTaD4+LFxuKTogQXBwTW9kdWxlRW50cnkgPT4ge1xuICBjb25zdCBsYXllciA9IGlzTGF5ZXIocmVzb3VyY2UpXG4gICAgPyByZXNvdXJjZVxuICAgIDogTGF5ZXIuc3VjY2VlZChtb2R1bGUsIHJlc291cmNlIGFzIE1vZHVsZVJ1bnRpbWU8U3RhdGVPZjxTaD4sIEFjdGlvbk9mPFNoPj4pXG5cbiAgcmV0dXJuIHsgbW9kdWxlLCBsYXllciB9XG59XG5cbi8qKlxuICogXHU4QkVEXHU2Q0Q1XHU3Q0Q2XHVGRjFBXHU1NzI4IEFwcCBcdTZBMjFcdTU3NTdcdTY3NjFcdTc2RUVcdTRFMEFcdTk2NDRcdTUyQTBcdTY2M0VcdTVGMEYgU2VydmljZSBUYWcgXHU1MTQzXHU0RkUxXHU2MDZGXHVGRjBDXHU3NTI4XHU0RThFIFRhZyBcdTUxQjJcdTdBODFcdTY4QzBcdTZENEJcdTMwMDJcbiAqXG4gKiAtIHNlcnZpY2VUYWdzIFx1NUU5NFx1NEVDNVx1NTMwNVx1NTQyQlx1MjAxQ1x1NzUzMVx1OEJFNVx1NkEyMVx1NTc1N1x1NUJGOVx1NUU5NCBMYXllciBcdTYzRDBcdTRGOUJcdTVCOUVcdTczQjBcdTIwMURcdTc2ODQgU2VydmljZVx1RkYxQlxuICogLSBcdTkwMUFcdThGQzcgTG9naXgucHJvdmlkZVdpdGhUYWdzIFx1NjZCNFx1OTczMlx1N0VEOVx1NEUxQVx1NTJBMVx1NEVFM1x1NzgwMVx1RkYwQ1x1NTcyOCBBcHAgXHU2Nzg0XHU1RUZBXHU5NjM2XHU2QkI1XHU2M0QwXHU1MjREXHU1M0QxXHU3M0IwIFRhZyBLZXkgXHU1MUIyXHU3QTgxXHUzMDAyXG4gKi9cbmV4cG9ydCBjb25zdCBwcm92aWRlV2l0aFRhZ3MgPSA8U2ggZXh0ZW5kcyBBbnlNb2R1bGVTaGFwZSwgUiwgRT4oXG4gIG1vZHVsZTogTW9kdWxlSW5zdGFuY2U8YW55LCBTaD4sXG4gIHJlc291cmNlOiBMYXllci5MYXllcjxNb2R1bGVSdW50aW1lPFN0YXRlT2Y8U2g+LCBBY3Rpb25PZjxTaD4+LCBFLCBSPiB8IE1vZHVsZVJ1bnRpbWU8U3RhdGVPZjxTaD4sIEFjdGlvbk9mPFNoPj4sXG4gIHNlcnZpY2VUYWdzOiBSZWFkb25seUFycmF5PENvbnRleHQuVGFnPGFueSwgYW55Pj4sXG4pOiBBcHBNb2R1bGVFbnRyeSA9PiB7XG4gIGNvbnN0IGJhc2UgPSBwcm92aWRlKG1vZHVsZSwgcmVzb3VyY2UpXG4gIHJldHVybiB7XG4gICAgLi4uYmFzZSxcbiAgICBzZXJ2aWNlVGFncyxcbiAgfVxufVxuXG5jb25zdCBpc0xheWVyID0gKHZhbHVlOiB1bmtub3duKTogdmFsdWUgaXMgTGF5ZXIuTGF5ZXI8YW55LCBhbnksIGFueT4gPT5cbiAgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAhPT0gbnVsbCAmJiBMYXllci5MYXllclR5cGVJZCBpbiB2YWx1ZVxuIiwgImltcG9ydCB7IENvbnRleHQgfSBmcm9tIFwiZWZmZWN0XCJcblxuZXhwb3J0IGludGVyZmFjZSBSb290Q29udGV4dCB7XG4gIHJlYWRvbmx5IGNvbnRleHQ6IENvbnRleHQuQ29udGV4dDxhbnk+XG59XG5cbmNsYXNzIFJvb3RDb250ZXh0VGFnSW1wbCBleHRlbmRzIENvbnRleHQuVGFnKFxuICBcIkBsb2dpeC9jb3JlL1Jvb3RDb250ZXh0XCIsXG4pPFJvb3RDb250ZXh0VGFnSW1wbCwgUm9vdENvbnRleHQ+KCkge31cblxuZXhwb3J0IGNvbnN0IFJvb3RDb250ZXh0VGFnID0gUm9vdENvbnRleHRUYWdJbXBsXG4iLCAiaW1wb3J0IHsgRWZmZWN0LCBMYXllciwgTG9nZ2VyIH0gZnJvbSBcImVmZmVjdFwiXG5pbXBvcnQgdHlwZSB7IEFueU1vZHVsZVNoYXBlLCBNb2R1bGVJbnN0YW5jZSB9IGZyb20gXCIuL2ludGVybmFsL21vZHVsZS5qc1wiXG5pbXBvcnQgdHlwZSB7XG4gIFN0YXRlVHJhaXRQcm9ncmFtLFxuICBTdGF0ZVRyYWl0R3JhcGgsXG4gIFN0YXRlVHJhaXRQbGFuLFxufSBmcm9tIFwiLi9zdGF0ZS10cmFpdC5qc1wiXG5pbXBvcnQgKiBhcyBJbnRlcm5hbCBmcm9tIFwiLi9pbnRlcm5hbC9ydW50aW1lL2NvcmUvRGVidWdTaW5rLmpzXCJcbmltcG9ydCAqIGFzIERldnRvb2xzSHViIGZyb20gXCIuL2ludGVybmFsL3J1bnRpbWUvY29yZS9EZXZ0b29sc0h1Yi5qc1wiXG5pbXBvcnQgKiBhcyBNb2R1bGVUcmFpdHNSZWdpc3RyeSBmcm9tIFwiLi9pbnRlcm5hbC9kZWJ1Zy9Nb2R1bGVUcmFpdHNSZWdpc3RyeS5qc1wiXG5pbXBvcnQgeyBnZXROb2RlRW52IH0gZnJvbSBcIi4vaW50ZXJuYWwvcnVudGltZS9jb3JlL2Vudi5qc1wiXG5cbi8vIFB1YmxpYyBEZWJ1ZyBBUElcdUZGMUFcdTRFRTVcdTU0N0RcdTU0MERcdTdBN0FcdTk1RjRcdTVGNjJcdTVGMEZcdTY1MzZcdTUzRTMgRGVidWcgXHU4MEZEXHU1MjlCXHVGRjBDXHU0RjlCXHU0RTFBXHU1MkExXHU0RTBFXHU1RTczXHU1M0YwXHU3RURGXHU0RTAwXHU0RjdGXHU3NTI4XHUzMDAyXG4vLyBcdTVCOUVcdTk2NDVcdTRFOEJcdTRFRjZcdTZBMjFcdTU3OEJcdTRFMEUgTGF5ZXIgXHU1QjlBXHU0RTQ5XHU5NkM2XHU0RTJEXHU1NzI4IGludGVybmFsL3J1bnRpbWUvY29yZS9EZWJ1Z1NpbmsudHMgXHU0RTJEXHVGRjBDXG4vLyBcdThGRDlcdTkxQ0NcdTU3MjhcdTUxNzZcdTU3RkFcdTc4NDBcdTRFMEFcdTYzRDBcdTRGOUJcdTY2RjRcdTY2MTNcdTc1MjhcdTc2ODRcdTdFQzRcdTU0MDhcdTUxNjVcdTUzRTNcdTMwMDJcblxuZXhwb3J0IHR5cGUgRXZlbnQgPSBJbnRlcm5hbC5FdmVudFxuZXhwb3J0IGludGVyZmFjZSBTaW5rIGV4dGVuZHMgSW50ZXJuYWwuU2luayB7fVxuZXhwb3J0IGludGVyZmFjZSBSdW50aW1lRGVidWdFdmVudFJlZiBleHRlbmRzIEludGVybmFsLlJ1bnRpbWVEZWJ1Z0V2ZW50UmVmIHt9XG5cbmV4cG9ydCBjb25zdCBpbnRlcm5hbCA9IHtcbiAgY3VycmVudERlYnVnU2lua3M6IEludGVybmFsLmN1cnJlbnREZWJ1Z1NpbmtzLFxuICBjdXJyZW50UnVudGltZUxhYmVsOiBJbnRlcm5hbC5jdXJyZW50UnVudGltZUxhYmVsLFxuICB0b1J1bnRpbWVEZWJ1Z0V2ZW50UmVmOiBJbnRlcm5hbC50b1J1bnRpbWVEZWJ1Z0V2ZW50UmVmLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIERldnRvb2xzU25hcHNob3QgZXh0ZW5kcyBEZXZ0b29sc0h1Yi5EZXZ0b29sc1NuYXBzaG90IHt9XG5leHBvcnQgaW50ZXJmYWNlIERldnRvb2xzSHViT3B0aW9ucyBleHRlbmRzIERldnRvb2xzSHViLkRldnRvb2xzSHViT3B0aW9ucyB7fVxuXG5leHBvcnQgY29uc3QgZ2V0RGV2dG9vbHNTbmFwc2hvdCA9IERldnRvb2xzSHViLmdldERldnRvb2xzU25hcHNob3RcbmV4cG9ydCBjb25zdCBzdWJzY3JpYmVEZXZ0b29sc1NuYXBzaG90ID0gRGV2dG9vbHNIdWIuc3Vic2NyaWJlRGV2dG9vbHNTbmFwc2hvdFxuZXhwb3J0IGNvbnN0IGNsZWFyRGV2dG9vbHNFdmVudHMgPSBEZXZ0b29sc0h1Yi5jbGVhckRldnRvb2xzRXZlbnRzXG5leHBvcnQgY29uc3Qgc2V0SW5zdGFuY2VMYWJlbCA9IERldnRvb2xzSHViLnNldEluc3RhbmNlTGFiZWxcbmV4cG9ydCBjb25zdCBnZXRJbnN0YW5jZUxhYmVsID0gRGV2dG9vbHNIdWIuZ2V0SW5zdGFuY2VMYWJlbFxuXG4vKipcbiAqIGlzRGV2dG9vbHNFbmFibGVkXHVGRjFBXG4gKiAtIFx1NzUyOFx1NEU4RSBSZWFjdC9EZXZ0b29scyBVSSBcdTU3MjhcdTk3NUUgZGV2IFx1NzNBRlx1NTg4M1x1NEUwQlx1NTIyNFx1NjVBRFx1NjYyRlx1NTQyNlx1NUU5NFx1NTQyRlx1NzUyOFx1OTg5RFx1NTkxNlx1ODlDMlx1NkQ0Qlx1RkYwOFx1NTk4MiByZWFjdC1yZW5kZXIgXHU0RThCXHU0RUY2XHVGRjA5XHUzMDAyXG4gKiAtIFx1OEJFNVx1NjgwN1x1OEJCMFx1NzUzMSBkZXZ0b29sc0h1YkxheWVyIFx1NjI1M1x1NUYwMFx1RkYwOFx1NjYzRVx1NUYwRiBvdmVycmlkZVx1RkYwOVx1MzAwMlxuICovXG5leHBvcnQgY29uc3QgaXNEZXZ0b29sc0VuYWJsZWQgPSBEZXZ0b29sc0h1Yi5pc0RldnRvb2xzRW5hYmxlZFxuXG4vKipcbiAqIE1vZHVsZUluc3RhbmNlQ291bnRlclx1RkYxQVxuICogLSBcdTRFQzVcdTRGOURcdThENTYgbW9kdWxlOmluaXQgLyBtb2R1bGU6ZGVzdHJveSBcdTRFOEJcdTRFRjZcdUZGMENcdTYzMDkgbW9kdWxlSWQgXHU3RUY0XHU1RUE2XHU3RURGXHU4QkExXHU1RjUzXHU1MjREXHU2RDNCXHU4REMzXHU1QjlFXHU0RjhCXHU2NTcwXHU5MUNGXHVGRjFCXG4gKiAtIFx1OTAwMlx1NTQwOFx1NEY1Q1x1NEUzQSBEZXZUb29scyAvIFBsYXlncm91bmQgXHU3Njg0XHU1N0ZBXHU3ODQwXHU2NTcwXHU2MzZFXHU2RTkwXHVGRjBDXHU0RTBEXHU1MTczXHU1RkMzXHU1MTc3XHU0RjUzIHJ1bnRpbWVJZCBcdTYyMTYgUmVhY3Qga2V5XHUzMDAyXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTW9kdWxlSW5zdGFuY2VDb3VudGVyIHtcbiAgcmVhZG9ubHkgc2luazogU2lua1xuICByZWFkb25seSBnZXRTbmFwc2hvdDogKCkgPT4gUmVhZG9ubHlNYXA8c3RyaW5nLCBudW1iZXI+XG59XG5cbi8qKlxuICogUmluZ0J1ZmZlclNpbmtcdUZGMUFcbiAqIC0gXHU5MDFBXHU3NTI4IERldlRvb2xzIFx1OEY4NVx1NTJBOVx1NURFNVx1NTE3N1x1RkYwQ1x1NzUyOFx1NEU4RVx1NTcyOFx1NTE4NVx1NUI1OFx1NEUyRFx1NEZERFx1NzU1OVx1NjcwMFx1OEZEMVx1NEUwMFx1NkJCNSBEZWJ1ZyBcdTRFOEJcdTRFRjZcdTdBOTdcdTUzRTNcdUZGMDhcdTczQUZcdTVGNjJcdTdGMTNcdTUxQjJcdTUzM0FcdUZGMDlcdUZGMUJcbiAqIC0gXHU0RTBEXHU1MDVBXHU0RUZCXHU0RjU1XHU3QjVCXHU5MDA5L1x1NTIwNlx1N0VDNFx1RkYwQ1x1OEMwM1x1NzUyOFx1NjVCOVx1NTNFRlx1NEVFNVx1NTdGQVx1NEU4RSBzbmFwc2hvdCBcdTUxOERcdTYzMDkgbW9kdWxlSWQgLyB0eXBlIFx1N0I0OVx1N0VGNFx1NUVBNlx1NTJBMFx1NURFNVx1MzAwMlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFJpbmdCdWZmZXJTaW5rIHtcbiAgcmVhZG9ubHkgc2luazogU2lua1xuICByZWFkb25seSBnZXRTbmFwc2hvdDogKCkgPT4gUmVhZG9ubHlBcnJheTxFdmVudD5cbiAgcmVhZG9ubHkgY2xlYXI6ICgpID0+IHZvaWRcbn1cblxuLyoqXG4gKiBtYWtlTW9kdWxlSW5zdGFuY2VDb3VudGVyU2lua1x1RkYxQVxuICogLSBcdTY3ODRcdTkwMjBcdTRFMDBcdTRFMkEgRGVidWdTaW5rXHVGRjBDXHU3NTI4XHU0RThFXHU1NzI4XHU1MTg1XHU1QjU4XHU0RTJEXHU3RDJGXHU3OUVGXHUzMDBDXHU2QkNGXHU0RTJBIG1vZHVsZUlkIFx1NUY1M1x1NTI0RFx1NjcwOVx1NTkxQVx1NUMxMVx1NkQzQlx1OERDM1x1NUI5RVx1NEY4Qlx1MzAwRFx1RkYxQlxuICogLSBTbmFwc2hvdCBcdTkwMUFcdThGQzcgZ2V0U25hcHNob3QoKSBcdTY2QjRcdTk3MzJcdTdFRDkgRGV2VG9vbHNcdUZGMENcdThDMDNcdTc1MjhcdTY1QjlcdTUzRUZcdTgxRUFcdTg4NENcdTUxQjNcdTVCOUFcdTU5ODJcdTRGNTVcdTVCRjlcdTU5MTZcdTY4NjVcdTYzQTVcdUZGMDh3aW5kb3cvcG9zdE1lc3NhZ2UgXHU3QjQ5XHVGRjA5XHUzMDAyXG4gKi9cbmV4cG9ydCBjb25zdCBtYWtlTW9kdWxlSW5zdGFuY2VDb3VudGVyU2luayA9ICgpOiBNb2R1bGVJbnN0YW5jZUNvdW50ZXIgPT4ge1xuICBjb25zdCBjb3VudHMgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpXG5cbiAgY29uc3Qgc2luazogU2luayA9IHtcbiAgICByZWNvcmQ6IChldmVudDogRXZlbnQpID0+XG4gICAgICBFZmZlY3Quc3luYygoKSA9PiB7XG4gICAgICAgIGlmIChldmVudC50eXBlID09PSBcIm1vZHVsZTppbml0XCIpIHtcbiAgICAgICAgICBjb25zdCBtb2R1bGVJZCA9IGV2ZW50Lm1vZHVsZUlkID8/IFwidW5rbm93blwiXG4gICAgICAgICAgY29uc3QgcnVudGltZUxhYmVsID1cbiAgICAgICAgICAgIFwicnVudGltZUxhYmVsXCIgaW4gZXZlbnQgJiYgZXZlbnQucnVudGltZUxhYmVsXG4gICAgICAgICAgICAgID8gZXZlbnQucnVudGltZUxhYmVsXG4gICAgICAgICAgICAgIDogXCJ1bmtub3duXCJcbiAgICAgICAgICBjb25zdCBrZXkgPSBgJHtydW50aW1lTGFiZWx9Ojoke21vZHVsZUlkfWBcbiAgICAgICAgICBjb25zdCBwcmV2ID0gY291bnRzLmdldChrZXkpID8/IDBcbiAgICAgICAgICBjb3VudHMuc2V0KGtleSwgcHJldiArIDEpXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09IFwibW9kdWxlOmRlc3Ryb3lcIikge1xuICAgICAgICAgIGNvbnN0IG1vZHVsZUlkID0gZXZlbnQubW9kdWxlSWQgPz8gXCJ1bmtub3duXCJcbiAgICAgICAgICBjb25zdCBydW50aW1lTGFiZWwgPVxuICAgICAgICAgICAgXCJydW50aW1lTGFiZWxcIiBpbiBldmVudCAmJiBldmVudC5ydW50aW1lTGFiZWxcbiAgICAgICAgICAgICAgPyBldmVudC5ydW50aW1lTGFiZWxcbiAgICAgICAgICAgICAgOiBcInVua25vd25cIlxuICAgICAgICAgIGNvbnN0IGtleSA9IGAke3J1bnRpbWVMYWJlbH06OiR7bW9kdWxlSWR9YFxuICAgICAgICAgIGNvbnN0IHByZXYgPSBjb3VudHMuZ2V0KGtleSkgPz8gMFxuICAgICAgICAgIGNvbnN0IG5leHQgPSBwcmV2IC0gMVxuICAgICAgICAgIGlmIChuZXh0IDw9IDApIHtcbiAgICAgICAgICAgIGNvdW50cy5kZWxldGUoa2V5KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb3VudHMuc2V0KGtleSwgbmV4dClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLFxuICB9XG5cbiAgY29uc3QgZ2V0U25hcHNob3QgPSAoKTogUmVhZG9ubHlNYXA8c3RyaW5nLCBudW1iZXI+ID0+XG4gICAgbmV3IE1hcChjb3VudHMpXG5cbiAgcmV0dXJuIHsgc2luaywgZ2V0U25hcHNob3QgfVxufVxuXG4vKipcbiAqIG1ha2VSaW5nQnVmZmVyU2lua1x1RkYxQVxuICogLSBcdTUyMUJcdTVFRkFcdTRFMDBcdTRFMkFcdTdCODBcdTUzNTVcdTc2ODRcdTczQUZcdTVGNjJcdTdGMTNcdTUxQjJcdTUzM0EgRGVidWdTaW5rXHVGRjBDXHU2MzA5XHU2NUY2XHU5NUY0XHU5ODdBXHU1RThGXHU4QkIwXHU1RjU1XHU2NzAwXHU4RkQxIGNhcGFjaXR5IFx1Njc2MVx1NEU4Qlx1NEVGNlx1RkYxQlxuICogLSBcdTkwMDJcdTU0MDhcdTRGNUNcdTRFM0EgRGV2VG9vbHMgLyBQbGF5Z3JvdW5kIFx1NzY4NFx1MjAxQ1x1NEU4Qlx1NEVGNlx1NjVGNlx1OTVGNFx1N0VCRlx1MjAxRFx1NTdGQVx1Nzg0MFx1NUI5RVx1NzNCMFx1MzAwMlxuICovXG5leHBvcnQgY29uc3QgbWFrZVJpbmdCdWZmZXJTaW5rID0gKGNhcGFjaXR5ID0gMTAwMCk6IFJpbmdCdWZmZXJTaW5rID0+IHtcbiAgY29uc3QgYnVmZmVyOiBFdmVudFtdID0gW11cblxuICBjb25zdCBzaW5rOiBTaW5rID0ge1xuICAgIHJlY29yZDogKGV2ZW50OiBFdmVudCkgPT5cbiAgICAgIEVmZmVjdC5zeW5jKCgpID0+IHtcbiAgICAgICAgaWYgKGNhcGFjaXR5IDw9IDApIHtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBpZiAoYnVmZmVyLmxlbmd0aCA+PSBjYXBhY2l0eSkge1xuICAgICAgICAgIGJ1ZmZlci5zaGlmdCgpXG4gICAgICAgIH1cbiAgICAgICAgYnVmZmVyLnB1c2goZXZlbnQpXG4gICAgICB9KSxcbiAgfVxuXG4gIGNvbnN0IGdldFNuYXBzaG90ID0gKCk6IFJlYWRvbmx5QXJyYXk8RXZlbnQ+ID0+IGJ1ZmZlci5zbGljZSgpXG4gIGNvbnN0IGNsZWFyID0gKCk6IHZvaWQgPT4ge1xuICAgIGJ1ZmZlci5sZW5ndGggPSAwXG4gIH1cblxuICByZXR1cm4geyBzaW5rLCBnZXRTbmFwc2hvdCwgY2xlYXIgfVxufVxuXG4vKipcbiAqIERlYnVnLnJlY29yZFx1RkYxQVxuICogLSBcdTU0MTFcdTVGNTNcdTUyNEQgRmliZXIgXHU0RTBBXHU2MzAyXHU4RjdEXHU3Njg0IERlYnVnIHNpbmtzIFx1NTNEMVx1NTFGQVx1NEUwMFx1Njc2MVx1NEU4Qlx1NEVGNlx1RkYxQlxuICogLSBcdTgyRTVcdTVGNTNcdTUyNEQgRmliZXIgXHU0RTBBXHU2NzJBXHU2M0QwXHU0RjlCXHU0RUZCXHU0RjU1IHNpbmtcdUZGMENcdTUyMTlcdTY4MzlcdTYzNkVcdThGRDBcdTg4NENcdTczQUZcdTU4ODNcdTkwMDlcdTYyRTlcdTUxNUNcdTVFOTVcdTg4NENcdTRFM0FcbiAqICAgXHVGRjA4XHU2RDRGXHU4OUM4XHU1NjY4XHU4RDcwXHU1RjY5XHU4MjcyIGNvbnNvbGUgXHU1MjA2XHU3RUM0XHVGRjBDTm9kZSBcdTUzRUFcdTRGRERcdThCQzFcdTk1MTlcdThCRUZcdTdDN0JcdTRFOEJcdTRFRjZcdTRFMERcdTRGMUFcdTVCOENcdTUxNjhcdTRFMjJcdTU5MzFcdUZGMDlcdTMwMDJcbiAqL1xuZXhwb3J0IGNvbnN0IHJlY29yZCA9IEludGVybmFsLnJlY29yZFxuXG4vKipcbiAqIG5vb3BMYXllclx1RkYxQVxuICogLSBcdTYzRDBcdTRGOUJcdTRFMDBcdTRFMkFcdTIwMUNcdTdBN0EgRGVidWdTaW5rIFx1OTZDNlx1NTQwOFx1MjAxRFx1RkYwOFx1NTE4NVx1OTBFOFx1NjVFMFx1NEVGQlx1NEY1NSBTaW5rXHVGRjA5XHVGRjBDXHU3NkY0XHU2M0E1XHU0RTIyXHU1RjAzXHU2MjQwXHU2NzA5IERlYnVnIFx1NEU4Qlx1NEVGNlx1RkYxQlxuICogLSBcdTRFM0JcdTg5ODFcdTc1MjhcdTRFOEVcdTZENEJcdThCRDVcdTU3M0FcdTY2NkZcdTYyMTZcdTY2M0VcdTVGMEZcdTUxNzNcdTk1RUQgRGVidWcgXHU4MEZEXHU1MjlCXHUzMDAyXG4gKi9cbmV4cG9ydCBjb25zdCBub29wTGF5ZXIgPSBJbnRlcm5hbC5ub29wTGF5ZXIgYXMgdW5rbm93biBhcyBMYXllci5MYXllcjxhbnksIG5ldmVyLCBuZXZlcj5cblxuLyoqXG4gKiBEZWJ1Z01vZGVcdUZGMUFcbiAqIC0gXCJhdXRvXCJcdUZGMUFcdTY4MzlcdTYzNkUgTk9ERV9FTlYgXHU4MUVBXHU1MkE4XHU5MDA5XHU2MkU5IGRldiAvIHByb2RcdUZGMUJcbiAqIC0gXCJkZXZcIlx1RkYxQVx1NUYwMFx1NTNEMVx1NkEyMVx1NUYwRlx1RkYwQ1x1OEY5M1x1NTFGQVx1NUMzRFx1OTFDRlx1NEUzMFx1NUJDQ1x1NzY4NFx1OEJDQVx1NjVBRFx1NEZFMVx1NjA2Rlx1RkYxQlxuICogLSBcInByb2RcIlx1RkYxQVx1NzUxRlx1NEVBN1x1NkEyMVx1NUYwRlx1RkYwQ1x1NTNFQVx1NEZERFx1NzU1OVx1NTE3M1x1OTUyRVx1OTUxOVx1OEJFRlx1NEUwRVx1OEJDQVx1NjVBRFx1RkYxQlxuICogLSBcIm9mZlwiXHVGRjFBXHU1QjhDXHU1MTY4XHU1MTczXHU5NUVEIERlYnVnU2lua1x1RkYwOFx1OTAxQVx1NUUzOFx1NzUyOFx1NEU4RVx1NTdGQVx1NTFDNi9cdTcyNzlcdTZCOEFcdTZENEJcdThCRDVcdTU3M0FcdTY2NkZcdUZGMDlcdTMwMDJcbiAqL1xuZXhwb3J0IHR5cGUgRGVidWdNb2RlID0gXCJhdXRvXCIgfCBcImRldlwiIHwgXCJwcm9kXCIgfCBcIm9mZlwiXG5cbmV4cG9ydCBpbnRlcmZhY2UgRGVidWdMYXllck9wdGlvbnMge1xuICByZWFkb25seSBtb2RlPzogRGVidWdNb2RlXG4gIC8qKlxuICAgKiBcdTRFM0FcdTY3MkFcdTY3NjVcdTYyNjlcdTVDNTVcdTk4ODRcdTc1NTlcdUZGMUFcdTU3MjggZGV2IFx1NkEyMVx1NUYwRlx1NEUwQlx1NjYyRlx1NTQyNlx1NjI1M1x1NUYwMFx1OUFEOFx1NTY2QVx1OTdGM1x1NzY4NCBhY3Rpb24vc3RhdGUgXHU3RUE3XHU1MjJCXHU2NUU1XHU1RkQ3XHUzMDAyXG4gICAqIFx1NUY1M1x1NTI0RFx1NUI5RVx1NzNCMFx1NEUyRFx1NUMxQVx1NjcyQVx1NEY3Rlx1NzUyOFx1MzAwMlxuICAgKi9cbiAgcmVhZG9ubHkgdmVyYm9zZUFjdGlvbnM/OiBib29sZWFuXG4gIC8qKlxuICAgKiBcdTRFM0FcdTY3MkFcdTY3NjVcdTYyNjlcdTVDNTVcdTk4ODRcdTc1NTlcdUZGMUFcdTU3MjggcHJvZCBcdTZBMjFcdTVGMEZcdTRFMEJcdTY2MkZcdTU0MjZcdTVDMDZcdTUxNzNcdTk1MkVcdTRFOEJcdTRFRjZcdTYyNTNcdTUxNjUgbWV0cmljc1x1MzAwMlxuICAgKiBcdTVGNTNcdTUyNERcdTVCOUVcdTczQjBcdTRFMkRcdTVDMUFcdTY3MkFcdTRGN0ZcdTc1MjhcdTMwMDJcbiAgICovXG4gIHJlYWRvbmx5IGVuYWJsZU1ldHJpY3M/OiBib29sZWFuXG59XG5cbmNvbnN0IHJlc29sdmVNb2RlID0gKG1vZGU6IERlYnVnTW9kZSB8IHVuZGVmaW5lZCk6IERlYnVnTW9kZSA9PiB7XG4gIGlmIChtb2RlICYmIG1vZGUgIT09IFwiYXV0b1wiKSB7XG4gICAgcmV0dXJuIG1vZGVcbiAgfVxuXG4gIGNvbnN0IGVudiA9IGdldE5vZGVFbnYoKVxuICByZXR1cm4gZW52ID09PSBcInByb2R1Y3Rpb25cIiA/IFwicHJvZFwiIDogXCJkZXZcIlxufVxuXG4vKipcbiAqIERlYnVnLmxheWVyXHVGRjFBXG4gKiAtIFx1NUJGOVx1NTkxNlx1N0VERlx1NEUwMFx1NTE2NVx1NTNFM1x1RkYwQ1x1NjgzOVx1NjM2RVx1NUY1M1x1NTI0RFx1NzNBRlx1NTg4M1x1NjIxNlx1NjYzRVx1NUYwRlx1NEYyMFx1NTE2NVx1NzY4NCBtb2RlIFx1N0VDNFx1NTQwOFx1NEUwMFx1NTk1NyBEZWJ1ZyBcdTgwRkRcdTUyOUJcdUZGMUJcbiAqIC0gXHU5RUQ4XHU4QkE0IGBtb2RlOiBcImF1dG9cImBcdUZGMUFcdTk3NUUgcHJvZHVjdGlvbiBcdTg5QzZcdTRFM0EgZGV2XHVGRjBDcHJvZHVjdGlvbiBcdTg5QzZcdTRFM0EgcHJvZFx1MzAwMlxuICpcbiAqIFx1NTE3OFx1NTc4Qlx1NzUyOFx1NkNENVx1RkYxQVxuICpcbiAqICAgY29uc3QgcnVudGltZSA9IFJ1bnRpbWUubWFrZShBcHBJbXBsLCB7XG4gKiAgICAgbGF5ZXI6IExheWVyLm1lcmdlQWxsKFxuICogICAgICAgRGVidWcubGF5ZXIoKSxcbiAqICAgICAgIGJ1c2luZXNzTGF5ZXIsXG4gKiAgICAgKSxcbiAqICAgfSlcbiAqL1xuZXhwb3J0IGNvbnN0IGxheWVyID0gKG9wdGlvbnM/OiBEZWJ1Z0xheWVyT3B0aW9ucyk6IExheWVyLkxheWVyPGFueSwgbmV2ZXIsIG5ldmVyPiA9PiB7XG4gIGNvbnN0IG1vZGUgPSByZXNvbHZlTW9kZShvcHRpb25zPy5tb2RlKVxuXG4gIHN3aXRjaCAobW9kZSkge1xuICAgIGNhc2UgXCJvZmZcIjpcbiAgICAgIHJldHVybiBJbnRlcm5hbC5ub29wTGF5ZXIgYXMgdW5rbm93biBhcyBMYXllci5MYXllcjxhbnksIG5ldmVyLCBuZXZlcj5cbiAgICBjYXNlIFwicHJvZFwiOlxuICAgICAgLy8gXHU3NTFGXHU0RUE3XHU3M0FGXHU1ODgzXHVGRjFBXHU0RUM1XHU0RkREXHU3NTU5XHU1MTczXHU5NTJFXHU5NTE5XHU4QkVGXHU0RTBFXHU5QUQ4XHU0RUY3XHU1MDNDXHU4QkNBXHU2NUFEXHVGRjBDXHU5MDdGXHU1MTREXHU5QUQ4XHU1NjZBXHU5N0YzXHU2NUU1XHU1RkQ3XHUzMDAyXG4gICAgICByZXR1cm4gSW50ZXJuYWwuZXJyb3JPbmx5TGF5ZXIgYXMgdW5rbm93biBhcyBMYXllci5MYXllcjxhbnksIG5ldmVyLCBuZXZlcj5cbiAgICBjYXNlIFwiZGV2XCI6XG4gICAgY2FzZSBcImF1dG9cIjoge1xuICAgICAgLy8gXHU1RjAwXHU1M0QxXHU3M0FGXHU1ODgzXHVGRjFBXHU5RUQ4XHU4QkE0XHU0RUM1XHU1NDJGXHU3NTI4IERlYnVnIFNpbmsgXHU3Njg0XHU2RDRGXHU4OUM4XHU1NjY4XHU1M0NCXHU1OTdEXHU4RjkzXHU1MUZBXHVGRjBDXG4gICAgICAvLyBMb2dnZXIucHJldHR5IFx1NzUzMVx1OEMwM1x1NzUyOFx1NjVCOVx1ODFFQVx1ODg0Q1x1OTAwOVx1NjJFOVx1NjYyRlx1NTQyNlx1NTNFMFx1NTJBMFx1RkYwQ1x1OTA3Rlx1NTE0RFx1OTY5MFx1NUYwRlx1NjUzOVx1NTE5OSBsb2dnZXJcdTMwMDJcbiAgICAgIHJldHVybiBJbnRlcm5hbC5icm93c2VyQ29uc29sZUxheWVyIGFzIHVua25vd24gYXMgTGF5ZXIuTGF5ZXI8YW55LCBuZXZlciwgbmV2ZXI+XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogUHJldHR5TG9nZ2VyT3B0aW9uc1x1RkYxQVx1NzZGNFx1NjNBNVx1NTkwRFx1NzUyOCBFZmZlY3QuTG9nZ2VyLnByZXR0eUxvZ2dlciBcdTc2ODRcdTUzQzJcdTY1NzBcdTVGNjJcdTcyQjZcdTMwMDJcbiAqL1xuZXhwb3J0IHR5cGUgUHJldHR5TG9nZ2VyT3B0aW9ucyA9IFBhcmFtZXRlcnM8dHlwZW9mIExvZ2dlci5wcmV0dHlMb2dnZXI+WzBdXG5cbi8qKlxuICogd2l0aFByZXR0eUxvZ2dlclx1RkYxQVxuICogLSBcdTU3MjhcdTdFRDlcdTVCOUEgTGF5ZXIgXHU1N0ZBXHU3ODQwXHU0RTBBXHVGRjBDXHU2NkZGXHU2MzYyIEVmZmVjdCBcdTlFRDhcdThCQTQgbG9nZ2VyIFx1NEUzQSBwcmV0dHkgbG9nZ2VyXHVGRjFCXG4gKiAtIFx1N0I0OVx1NEVGN1x1NEU4RSBMb2dnZXIucmVwbGFjZShMb2dnZXIuZGVmYXVsdExvZ2dlciwgTG9nZ2VyLnByZXR0eUxvZ2dlcihvcHRpb25zKSlcdUZGMENcbiAqICAgXHU0RUU1IExheWVyIFx1NUY2Mlx1NUYwRlx1NjZCNFx1OTczMlx1RkYwQ1x1NEZCRlx1NEU4RVx1NEUwRSBEZWJ1Zy5sYXllciAvIFx1NEUxQVx1NTJBMSBMYXllciBcdTdFQzRcdTU0MDhcdTMwMDJcbiAqL1xuZXhwb3J0IGNvbnN0IHdpdGhQcmV0dHlMb2dnZXIgPSAoXG4gIGJhc2U6IExheWVyLkxheWVyPGFueSwgYW55LCBhbnk+LFxuICBvcHRpb25zPzogUHJldHR5TG9nZ2VyT3B0aW9uc1xuKTogTGF5ZXIuTGF5ZXI8YW55LCBhbnksIGFueT4gPT5cbiAgTGF5ZXIubWVyZ2UoXG4gICAgYmFzZSxcbiAgICBMb2dnZXIucmVwbGFjZShcbiAgICAgIExvZ2dlci5kZWZhdWx0TG9nZ2VyLFxuICAgICAgTG9nZ2VyLnByZXR0eUxvZ2dlcihvcHRpb25zKVxuICAgICkgYXMgdW5rbm93biBhcyBMYXllci5MYXllcjxhbnksIGFueSwgYW55PlxuICApXG5cbi8qKlxuICogcmVwbGFjZVx1RkYxQVxuICogLSBcdTlBRDhcdTdFQTdcdTc1MjhcdTZDRDVcdUZGMUFcdTVCOENcdTUxNjhcdTRGN0ZcdTc1MjhcdThDMDNcdTc1MjhcdTY1QjlcdTYzRDBcdTRGOUJcdTc2ODQgU2luayBMYXllciBcdTYzQTVcdTdCQTEgRGVidWcgXHU4MEZEXHU1MjlCXHVGRjFCXG4gKiAtIFx1OTAxQVx1NUUzOFx1OTE0RFx1NTQwOCBEZWJ1Zy5tYWtlU2luayAvIFx1ODFFQVx1NUI5QVx1NEU0OSBTaW5rIFx1NEY3Rlx1NzUyOFx1RkYxQlxuICogLSBcdTRFMEUgRGVidWcubGF5ZXIgXHU0RTkyXHU2NUE1XHVGRjFBXHU1NDBDXHU0RTAwXHU0RjVDXHU3NTI4XHU1N0RGXHU1MTg1XHU1RUZBXHU4QkFFXHU0RThDXHU5MDA5XHU0RTAwXHUzMDAyXG4gKi9cbmV4cG9ydCBjb25zdCByZXBsYWNlID0gKHNpbmtzOiBSZWFkb25seUFycmF5PFNpbms+KTogTGF5ZXIuTGF5ZXI8YW55LCBuZXZlciwgbmV2ZXI+ID0+XG4gIExheWVyLmxvY2FsbHlTY29wZWQoXG4gICAgaW50ZXJuYWwuY3VycmVudERlYnVnU2lua3MsXG4gICAgc2lua3MgYXMgUmVhZG9ubHlBcnJheTxJbnRlcm5hbC5TaW5rPixcbiAgKSBhcyBMYXllci5MYXllcjxhbnksIG5ldmVyLCBuZXZlcj5cblxuLyoqXG4gKiBhcHBlbmRTaW5rc1x1RkYxQVxuICogLSBcdTU3MjhcdTVGNTNcdTUyNEQgRmliZXIgXHU3Njg0IERlYnVnIHNpbmtzIFx1OTZDNlx1NTQwOFx1NTdGQVx1Nzg0MFx1NEUwQVx1MjAxQ1x1OEZGRFx1NTJBMFx1MjAxRCBzaW5rc1x1RkYwOFx1NEUwRFx1ODk4Nlx1NzZENlx1OEMwM1x1NzUyOFx1NjVCOVx1NURGMlx1NjcwOSBzaW5rc1x1RkYwOVx1RkYxQlxuICogLSBcdTUxNzhcdTU3OEJcdTc1MjhcdTRFOEUgZGV2dG9vbHNIdWJMYXllciAvIHRyYWNlTGF5ZXIgXHU3QjQ5XHU4OEM1XHU5OTcwXHU1NjY4XHU1NzNBXHU2NjZGXHUzMDAyXG4gKi9cbmV4cG9ydCBjb25zdCBhcHBlbmRTaW5rcyA9IChzaW5rczogUmVhZG9ubHlBcnJheTxTaW5rPik6IExheWVyLkxheWVyPGFueSwgbmV2ZXIsIG5ldmVyPiA9PlxuICBMYXllci5maWJlclJlZkxvY2FsbHlTY29wZWRXaXRoKFxuICAgIEludGVybmFsLmN1cnJlbnREZWJ1Z1NpbmtzLFxuICAgIChjdXJyZW50KSA9PiBbLi4uY3VycmVudCwgLi4uKHNpbmtzIGFzIFJlYWRvbmx5QXJyYXk8SW50ZXJuYWwuU2luaz4pXSxcbiAgKSBhcyBMYXllci5MYXllcjxhbnksIG5ldmVyLCBuZXZlcj5cblxuLyoqXG4gKiBkZXZ0b29sc0h1YkxheWVyXHVGRjFBXG4gKiAtIFx1OEZGRFx1NTJBMCBEZXZ0b29sc0h1YiBTaW5rXHVGRjBDXHU3NTI4XHU0RThFXHU1NzI4XHU4RkRCXHU3QTBCL1x1OTg3NVx1OTc2Mlx1NTE4NVx1ODA1QVx1NTQwOCBEZWJ1ZyBcdTRFOEJcdTRFRjZcdTVGRUJcdTcxNjdcdUZGMDhEZXZ0b29sc1NuYXBzaG90XHVGRjA5XHVGRjFCXG4gKiAtIFx1NEVFNVx1MjAxQ1x1OEZGRFx1NTJBMCBzaW5rc1x1MjAxRFx1NzY4NFx1NjVCOVx1NUYwRlx1NURFNVx1NEY1Q1x1RkYwQ1x1NEUwRFx1NEYxQVx1ODk4Nlx1NzZENiBEZWJ1Zy5sYXllciAvIERlYnVnLnJlcGxhY2UgLyBcdTgxRUFcdTVCOUFcdTRFNDkgc2lua3NcdTMwMDJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRldnRvb2xzSHViTGF5ZXIob3B0aW9ucz86IERldnRvb2xzSHViT3B0aW9ucyk6IExheWVyLkxheWVyPGFueSwgbmV2ZXIsIG5ldmVyPlxuZXhwb3J0IGZ1bmN0aW9uIGRldnRvb2xzSHViTGF5ZXIoXG4gIGJhc2U6IExheWVyLkxheWVyPGFueSwgYW55LCBhbnk+LFxuICBvcHRpb25zPzogRGV2dG9vbHNIdWJPcHRpb25zLFxuKTogTGF5ZXIuTGF5ZXI8YW55LCBuZXZlciwgYW55PlxuZXhwb3J0IGZ1bmN0aW9uIGRldnRvb2xzSHViTGF5ZXIoXG4gIGJhc2VPck9wdGlvbnM/OiBMYXllci5MYXllcjxhbnksIGFueSwgYW55PiB8IERldnRvb2xzSHViT3B0aW9ucyxcbiAgbWF5YmVPcHRpb25zPzogRGV2dG9vbHNIdWJPcHRpb25zLFxuKTogTGF5ZXIuTGF5ZXI8YW55LCBuZXZlciwgYW55PiB7XG4gIC8vIExheWVyIFx1NTcyOCBlZmZlY3QgdjMgXHU4RkQwXHU4ODRDXHU2NUY2XHU2NjJGXHU0RTAwXHU0RTJBXHU1RTI2IGBfb3BfbGF5ZXJgIFx1NjgwN1x1OEJCMFx1NzY4NFx1NUJGOVx1OEM2MVx1MzAwMlxuICBjb25zdCBpc0xheWVyVmFsdWUgPSAodmFsdWU6IHVua25vd24pOiB2YWx1ZSBpcyBMYXllci5MYXllcjxhbnksIGFueSwgYW55PiA9PlxuICAgIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiB2YWx1ZSAhPT0gbnVsbCAmJiBcIl9vcF9sYXllclwiIGluICh2YWx1ZSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPilcblxuICBjb25zdCBoYXNCYXNlID0gaXNMYXllclZhbHVlKGJhc2VPck9wdGlvbnMpXG4gIGNvbnN0IGJhc2UgPSBoYXNCYXNlXG4gICAgPyAoYmFzZU9yT3B0aW9ucyBhcyBMYXllci5MYXllcjxhbnksIGFueSwgYW55PilcbiAgICA6IChMYXllci5lbXB0eSBhcyB1bmtub3duIGFzIExheWVyLkxheWVyPGFueSwgYW55LCBhbnk+KVxuICBjb25zdCBvcHRpb25zID0gaGFzQmFzZVxuICAgID8gbWF5YmVPcHRpb25zXG4gICAgOiAoYmFzZU9yT3B0aW9ucyBhcyBEZXZ0b29sc0h1Yk9wdGlvbnMgfCB1bmRlZmluZWQpXG5cbiAgRGV2dG9vbHNIdWIuY29uZmlndXJlRGV2dG9vbHNIdWIob3B0aW9ucylcbiAgY29uc3QgYXBwZW5kID0gYXBwZW5kU2lua3MoW0RldnRvb2xzSHViLmRldnRvb2xzSHViU2lua10pXG5cbiAgLy8gRmliZXJSZWYgXHU1QzQyXHU5NzAwXHU4OTgxXHU0RkREXHU4QkMxIGJhc2UgXHU1MTQ4XHU1RUZBXHU3QUNCIHNpbmtzXHVGRjBDXHU1MThEXHU3NTMxIGFwcGVuZCBcdThGRkRcdTUyQTBcdUZGMUJwcm92aWRlTWVyZ2UoYXBwZW5kLCBiYXNlKVxuICAvLyBcdTRGMUFcdTUxNDhcdTY3ODRcdTVFRkEgYmFzZVx1RkYwQ1x1NTE4RFx1NUU5NFx1NzUyOCBhcHBlbmQgXHU3Njg0IEZpYmVyUmVmcyBwYXRjaFx1RkYwQ1x1OTA3Rlx1NTE0RFx1ODhBQlx1ODk4Nlx1NzZENlx1MzAwMlxuICByZXR1cm4gTGF5ZXIucHJvdmlkZU1lcmdlKGFwcGVuZCwgYmFzZSkgYXMgTGF5ZXIuTGF5ZXI8YW55LCBuZXZlciwgYW55PlxufVxuXG4vKipcbiAqIHJ1bnRpbWVMYWJlbFx1RkYxQVxuICogLSBcdTU3MjhcdTVGNTNcdTUyNEQgRmliZXIgXHU0RjVDXHU3NTI4XHU1N0RGXHU1MTg1XHU0RTNBIERlYnVnIFx1NEU4Qlx1NEVGNlx1OTY0NFx1NTJBMFx1NEUwMFx1NEUyQVx1OTAzQlx1OEY5MSBSdW50aW1lIFx1NjgwN1x1OEJDNlx1RkYwOFx1NTk4MiBBcHAgXHU1NDBEXHU3OUYwIC8gXHU1NzNBXHU2NjZGXHU2ODA3XHU3QjdFXHVGRjA5XHVGRjFCXG4gKiAtIERldlRvb2xzIFx1NTNFRlx1NEVFNVx1NjM2RVx1NkI2NFx1NUMwNiBEZWJ1ZyBcdTRFOEJcdTRFRjZcdTYzMDkgUnVudGltZSBcdTUyMDZcdTdFQzRcdTVDNTVcdTc5M0FcdTMwMDJcbiAqL1xuZXhwb3J0IGNvbnN0IHJ1bnRpbWVMYWJlbCA9IChsYWJlbDogc3RyaW5nKTogTGF5ZXIuTGF5ZXI8YW55LCBuZXZlciwgbmV2ZXI+ID0+XG4gIExheWVyLmZpYmVyUmVmTG9jYWxseVNjb3BlZFdpdGgoXG4gICAgaW50ZXJuYWwuY3VycmVudFJ1bnRpbWVMYWJlbCBhcyBhbnksXG4gICAgKCkgPT4gbGFiZWwsXG4gICkgYXMgTGF5ZXIuTGF5ZXI8YW55LCBuZXZlciwgbmV2ZXI+XG5cbi8qKlxuICogTW9kdWxlVHJhaXRzRGVidWdcdUZGMUFcbiAqIC0gRGV2dG9vbHMgLyBcdTgxMUFcdTY3MkNcdTRGN0ZcdTc1MjhcdTc2ODQgU3RhdGVUcmFpdCBcdThDMDNcdThCRDVcdTg5QzZcdTU2RkVcdUZGMUJcbiAqIC0gcHJvZ3JhbSBcdTY2MkZcdTVCOENcdTY1NzQgUHJvZ3JhbVx1RkYwQ2dyYXBoIC8gcGxhbiBcdTRFM0FcdTUxNzZcdTRFMkRcdTc2ODRcdTdFRDNcdTY3ODRcdTUzMTZcdTVCNTBcdTk2QzZcdTMwMDJcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBNb2R1bGVUcmFpdHNEZWJ1ZyB7XG4gIHJlYWRvbmx5IHByb2dyYW0/OiBTdGF0ZVRyYWl0UHJvZ3JhbTxhbnk+XG4gIHJlYWRvbmx5IGdyYXBoPzogU3RhdGVUcmFpdEdyYXBoXG4gIHJlYWRvbmx5IHBsYW4/OiBTdGF0ZVRyYWl0UGxhblxufVxuXG4vKipcbiAqIGdldE1vZHVsZVRyYWl0c1x1RkYxQVxuICogLSBcdTRFQ0UgTW9kdWxlIFx1NUI5QVx1NEU0OVx1NUJGOVx1OEM2MVx1NEUyRFx1OEJGQlx1NTNENiBTdGF0ZVRyYWl0UHJvZ3JhbVx1RkYwOFx1ODJFNVx1NUI1OFx1NTcyOFx1RkYwOVx1RkYwQ1x1NUU3Nlx1OEZENFx1NTZERVx1OEMwM1x1OEJENVx1ODlDNlx1NTZGRVx1RkYxQlxuICogLSBcdTRFQzVcdTRGOURcdThENTYgTW9kdWxlLm1ha2UgXHU1NzI4XHU1QjlFXHU3M0IwXHU5NjM2XHU2QkI1XHU2MzAyXHU4RjdEXHU3Njg0XHU1MTg1XHU5MEU4XHU1QjU3XHU2QkI1IGBfX3N0YXRlVHJhaXRQcm9ncmFtYFx1RkYwQ1xuICogICBcdTgyRTVcdTZBMjFcdTU3NTdcdTY3MkFcdTRGN0ZcdTc1MjggdHJhaXRzIFx1NjlGRFx1NEY0RFx1RkYwQ1x1NTIxOVx1OEZENFx1NTZERVx1N0E3QVx1NUJGOVx1OEM2MVx1MzAwMlxuICovXG5leHBvcnQgY29uc3QgZ2V0TW9kdWxlVHJhaXRzID0gKFxuICBtb2R1bGU6IE1vZHVsZUluc3RhbmNlPHN0cmluZywgQW55TW9kdWxlU2hhcGU+LFxuKTogTW9kdWxlVHJhaXRzRGVidWcgPT4ge1xuICBjb25zdCBhbnlNb2R1bGUgPSBtb2R1bGUgYXMgYW55XG4gIGNvbnN0IHByb2dyYW0gPSBhbnlNb2R1bGUuX19zdGF0ZVRyYWl0UHJvZ3JhbSBhc1xuICAgIHwgU3RhdGVUcmFpdFByb2dyYW08YW55PlxuICAgIHwgdW5kZWZpbmVkXG5cbiAgaWYgKCFwcm9ncmFtKSB7XG4gICAgcmV0dXJuIHt9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHByb2dyYW0sXG4gICAgZ3JhcGg6IHByb2dyYW0uZ3JhcGgsXG4gICAgcGxhbjogcHJvZ3JhbS5wbGFuLFxuICB9XG59XG5cbi8qKlxuICogZ2V0TW9kdWxlVHJhaXRzQnlJZFx1RkYxQVxuICogLSBcdTYzMDkgbW9kdWxlSWQgXHU2N0U1XHU4QkUyIFN0YXRlVHJhaXRQcm9ncmFtXHVGRjA4XHU4MkU1XHU1REYyXHU1NzI4IE1vZHVsZS5tYWtlIFx1OTYzNlx1NkJCNVx1NkNFOFx1NTE4Q1x1RkYwOVx1RkYwQ1x1NUU3Nlx1OEZENFx1NTZERVx1OEMwM1x1OEJENVx1ODlDNlx1NTZGRVx1RkYxQlxuICogLSBcdTc1MjhcdTRFOEUgRGV2dG9vbHMgXHU3QjQ5XHU1N0ZBXHU0RThFIERlYnVnIFx1NEU4Qlx1NEVGNlx1RkYwOFx1NTNFQVx1NjcwOSBtb2R1bGVJZCBcdTVCNTdcdTdCMjZcdTRFMzJcdUZGMDlcdTc2ODRcdTU3M0FcdTY2NkZcdTMwMDJcbiAqL1xuZXhwb3J0IGNvbnN0IGdldE1vZHVsZVRyYWl0c0J5SWQgPSAoXG4gIG1vZHVsZUlkOiBzdHJpbmcsXG4pOiBNb2R1bGVUcmFpdHNEZWJ1ZyB8IHVuZGVmaW5lZCA9PiB7XG4gIGNvbnN0IHByb2dyYW0gPSBNb2R1bGVUcmFpdHNSZWdpc3RyeS5nZXRNb2R1bGVQcm9ncmFtQnlJZChtb2R1bGVJZClcbiAgaWYgKCFwcm9ncmFtKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG4gIHJldHVybiB7XG4gICAgcHJvZ3JhbSxcbiAgICBncmFwaDogcHJvZ3JhbS5ncmFwaCxcbiAgICBwbGFuOiBwcm9ncmFtLnBsYW4sXG4gIH1cbn1cblxuLyoqXG4gKiB0cmFjZUxheWVyXHVGRjFBXG4gKiAtIFx1NEY1Q1x1NEUzQVx1ODhDNVx1OTk3MFx1NTY2OFx1NTcyOFx1NUY1M1x1NTI0RCBGaWJlciBcdTc2ODQgRGVidWcgc2lua3MgXHU5NkM2XHU1NDA4XHU1N0ZBXHU3ODQwXHU0RTBBXHU4RkZEXHU1MkEwXHU0RTAwXHU0RTJBXHU0RUM1XHU1OTA0XHU3NDA2IGB0cmFjZToqYCBcdTc2ODQgU2lua1x1RkYxQlxuICogLSBcdTlFRDhcdThCQTRcdTg4NENcdTRFM0FcdTY2MkZcdTVDMDYgdHJhY2UgXHU0RThCXHU0RUY2XHU0RUU1IERlYnVnIFx1NjVFNVx1NUZEN1x1OEY5M1x1NTFGQVx1RkYwOGxvZ0RlYnVnXHVGRjA5XHVGRjBDXG4gKiAgIFx1OEMwM1x1NzUyOFx1NjVCOVx1NTNFRlx1NEVFNVx1OTAxQVx1OEZDN1x1NEYyMFx1NTE2NVx1ODFFQVx1NUI5QVx1NEU0OSBoYW5kbGVyIFx1NUMwNiB0cmFjZSBcdTRFOEJcdTRFRjZcdTUxOTlcdTUxNjUgcmluZyBidWZmZXIgLyBEZXZUb29sc0JyaWRnZSBcdTdCNDlcdUZGMUJcbiAqIC0gXHU2QjYzXHU3ODZFXHU3NTI4XHU2Q0Q1XHU3OTNBXHU0RjhCXHVGRjFBXG4gKlxuICogICBjb25zdCBsYXllciA9IERlYnVnLnRyYWNlTGF5ZXIoXG4gKiAgICAgRGVidWcubGF5ZXIoeyBtb2RlOiBcImRldlwiIH0pLFxuICogICAgIChldmVudCkgPT4gRWZmZWN0LmxvZ0luZm8oeyB0cmFjZUV2ZW50OiBldmVudCB9KSxcbiAqICAgKVxuICovXG5jb25zdCBpc0xheWVyID0gKHZhbHVlOiB1bmtub3duKTogdmFsdWUgaXMgTGF5ZXIuTGF5ZXI8YW55LCBhbnksIGFueT4gPT5cbiAgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHZhbHVlICE9PSBudWxsICYmIFwiX29wX2xheWVyXCIgaW4gKHZhbHVlIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KVxuXG5leHBvcnQgZnVuY3Rpb24gdHJhY2VMYXllcihcbiAgb25UcmFjZT86IChldmVudDogRXZlbnQpID0+IEVmZmVjdC5FZmZlY3Q8dm9pZD4sXG4pOiBMYXllci5MYXllcjxhbnksIG5ldmVyLCBuZXZlcj5cbmV4cG9ydCBmdW5jdGlvbiB0cmFjZUxheWVyKFxuICBiYXNlOiBMYXllci5MYXllcjxhbnksIGFueSwgYW55PixcbiAgb25UcmFjZT86IChldmVudDogRXZlbnQpID0+IEVmZmVjdC5FZmZlY3Q8dm9pZD4sXG4pOiBMYXllci5MYXllcjxhbnksIG5ldmVyLCBhbnk+XG5leHBvcnQgZnVuY3Rpb24gdHJhY2VMYXllcihcbiAgYmFzZU9ySGFuZGxlcj86IExheWVyLkxheWVyPGFueSwgYW55LCBhbnk+IHwgKChldmVudDogRXZlbnQpID0+IEVmZmVjdC5FZmZlY3Q8dm9pZD4pLFxuICBtYXliZU9uVHJhY2U/OiAoZXZlbnQ6IEV2ZW50KSA9PiBFZmZlY3QuRWZmZWN0PHZvaWQ+LFxuKTogTGF5ZXIuTGF5ZXI8YW55LCBuZXZlciwgYW55PiB7XG4gIGNvbnN0IGhhc0Jhc2UgPSBpc0xheWVyKGJhc2VPckhhbmRsZXIpXG4gIGNvbnN0IGJhc2UgPSBoYXNCYXNlXG4gICAgPyAoYmFzZU9ySGFuZGxlciBhcyBMYXllci5MYXllcjxhbnksIGFueSwgYW55PilcbiAgICA6IChMYXllci5lbXB0eSBhcyB1bmtub3duIGFzIExheWVyLkxheWVyPGFueSwgYW55LCBhbnk+KVxuICBjb25zdCBvblRyYWNlID0gaGFzQmFzZSA/IG1heWJlT25UcmFjZSA6IChiYXNlT3JIYW5kbGVyIGFzICgoZXZlbnQ6IEV2ZW50KSA9PiBFZmZlY3QuRWZmZWN0PHZvaWQ+KSB8IHVuZGVmaW5lZClcblxuICBjb25zdCB0cmFjZVNpbms6IFNpbmsgPSB7XG4gICAgcmVjb3JkOiAoZXZlbnQ6IEV2ZW50KSA9PlxuICAgICAgdHlwZW9mIGV2ZW50LnR5cGUgPT09IFwic3RyaW5nXCIgJiYgZXZlbnQudHlwZS5zdGFydHNXaXRoKFwidHJhY2U6XCIpXG4gICAgICAgID8gKG9uVHJhY2UgPyBvblRyYWNlKGV2ZW50KSA6IEVmZmVjdC5sb2dEZWJ1Zyh7IHRyYWNlRXZlbnQ6IGV2ZW50IH0pKVxuICAgICAgICA6IEVmZmVjdC52b2lkLFxuICB9XG5cbiAgLy8gXHU5MDFBXHU4RkM3IEZpYmVyUmVmIFx1OEZGRFx1NTJBMCB0cmFjZSBzaW5rXHVGRjFBXHU1NzI4XHU1RjUzXHU1MjREIEZpYmVyIFx1NzY4NCBzaW5rcyBcdTk2QzZcdTU0MDhcdTU3RkFcdTc4NDBcdTRFMEFcdThGRkRcdTUyQTBcdUZGMENcbiAgLy8gXHU0RTBEXHU1MThEXHU0RjlEXHU4RDU2XHU0RUZCXHU0RjU1IERlYnVnSHViIC8gVGFnXHVGRjBDXHU1M0VBXHU0RjdGXHU3NTI4IEZpYmVyUmVmLmN1cnJlbnREZWJ1Z1NpbmtzIFx1NEY1Q1x1NEUzQVx1NTM1NVx1NEUwMFx1NzcxRlx1NzZGOFx1MzAwMlxuICBjb25zdCBhcHBlbmRUcmFjZSA9IExheWVyLmZpYmVyUmVmTG9jYWxseVNjb3BlZFdpdGgoXG4gICAgSW50ZXJuYWwuY3VycmVudERlYnVnU2lua3MsXG4gICAgKHNpbmtzKSA9PiBbLi4uc2lua3MsIHRyYWNlU2lua10sXG4gIClcblxuICAvLyBcdTU0MEMgZGV2dG9vbHNIdWJMYXllclx1RkYxQVx1NTE0OFx1Njc4NFx1NUVGQSBiYXNlXHVGRjBDXHU1MThEXHU3NTMxIGFwcGVuZFRyYWNlIFx1OEZGRFx1NTJBMCBGaWJlclJlZiBzaW5rc1x1MzAwMlxuICByZXR1cm4gTGF5ZXIucHJvdmlkZU1lcmdlKGFwcGVuZFRyYWNlLCBiYXNlIGFzIExheWVyLkxheWVyPGFueSwgYW55LCBhbnk+KSBhcyBMYXllci5MYXllcjxhbnksIG5ldmVyLCBhbnk+XG59XG4iLCAiaW1wb3J0IHsgRWZmZWN0IH0gZnJvbSBcImVmZmVjdFwiXG5pbXBvcnQgdHlwZSB7IEV2ZW50LCBTaW5rIH0gZnJvbSBcIi4vRGVidWdTaW5rLmpzXCJcblxuLyoqXG4gKiBEZXZ0b29sc0h1Ylx1RkYxQVxuICogLSBcdThGREJcdTdBMEIvXHU5ODc1XHU5NzYyXHU3RUE3XHU3Njg0IERlYnVnIFx1NEU4Qlx1NEVGNlx1ODA1QVx1NTQwOFx1NTY2OFx1RkYwOFx1NTE2OFx1NUM0MFx1NTM1NVx1NEY4Qlx1RkYwOVx1MzAwMlxuICpcbiAqIFx1NkNFOFx1NjEwRlx1RkYxQVx1OEJFNSBIdWIgXHU0RUM1XHU1NzI4XHU2NjNFXHU1RjBGXHU1NDJGXHU3NTI4IGRldnRvb2xzSHViTGF5ZXIgXHU2NUY2XHU2MjREXHU0RjFBXHU4OEFCXHU2MzAyXHU1MTY1IERlYnVnIHNpbmtzXHVGRjBDXG4gKiBcdTRGNDYgU25hcHNob3QgQVBJIFx1NjcyQ1x1OEVBQlx1NTlDQlx1N0VDOFx1NTNFRlx1NzUyOFx1RkYwOFx1NjcyQVx1NTQyRlx1NzUyOFx1NjVGNlx1OEZENFx1NTZERVx1N0E3QVx1NUZFQlx1NzE2N1x1RkYwOVx1MzAwMlxuICpcbiAqIFx1NjAyN1x1ODBGRFx1OEJGNFx1NjYwRVx1RkYxQVxuICogLSBEZXZ0b29scyBcdTc2ODQgRGVidWcgXHU0RThCXHU0RUY2XHU1NzI4XHU5QUQ4XHU5ODkxXHU1NzNBXHU2NjZGXHU0RjFBXHU5NzVFXHU1RTM4XHU1QkM2XHU5NkM2XHVGRjA4RWZmZWN0T3AgLyBUcmFpdCAvIFN0YXRlVHhuIFx1N0I0OVx1RkYwOVx1RkYxQlxuICogLSBcdTY1RTdcdTVCOUVcdTczQjBcdTRGMUFcdTU3MjhcdTZCQ0ZcdTY3NjFcdTRFOEJcdTRFRjZcdTUyMzBcdTY3NjVcdTY1RjZcdTU5MERcdTUyMzYgcmluZ0J1ZmZlciBcdTRFMEUgTWFwIFx1Njc2NVx1Njc4NFx1OTAyMFx1MjAxQ1x1NEUwRFx1NTNFRlx1NTNEOFx1NUZFQlx1NzE2N1x1MjAxRFx1RkYwQ1x1NjIxMFx1NjcyQ1x1NEUzQSBPKGJ1ZmZlclNpemUpXHVGRjFCXG4gKiAtIFx1NUY1M1x1NTI0RFx1NUI5RVx1NzNCMFx1NjUzOVx1NEUzQVx1RkYxQVNuYXBzaG90IFx1NzZGNFx1NjNBNVx1NUYxNVx1NzUyOFx1NTE4NVx1OTBFOFx1NzY4NCBNYXAvQXJyYXlcdUZGMDhcdTUzRUFcdThCRkJcdTdFQTZcdTVCOUFcdUZGMDlcdUZGMENcdTVFNzZcdTU3MjhcdTVGQUVcdTRFRkJcdTUyQTFcdTRFMkRcdTYyNzlcdTkxQ0ZcdTkwMUFcdTc3RTVcdThCQTJcdTk2MDVcdTgwMDVcdUZGMUJcbiAqICAgXHU4RkQ5XHU2ODM3XHU5MDdGXHU1MTREIHBlci1ldmVudCBcdTYyRjdcdThEMURcdUZGMENcdTY2M0VcdTg0NTdcdTk2NERcdTRGNEVcdTVCRjlcdTRFMUFcdTUyQTFcdTZFMzJcdTY3RDMvXHU4RjkzXHU1MTY1XHU3Njg0XHU0RTNCXHU3RUJGXHU3QTBCXHU1RTcyXHU2MjcwXHUzMDAyXG4gKi9cblxuZXhwb3J0IGludGVyZmFjZSBEZXZ0b29sc1NuYXBzaG90IHtcbiAgcmVhZG9ubHkgaW5zdGFuY2VzOiBSZWFkb25seU1hcDxzdHJpbmcsIG51bWJlcj5cbiAgcmVhZG9ubHkgZXZlbnRzOiBSZWFkb25seUFycmF5PEV2ZW50PlxuICByZWFkb25seSBsYXRlc3RTdGF0ZXM6IFJlYWRvbmx5TWFwPHN0cmluZywgdW5rbm93bj5cbiAgcmVhZG9ubHkgbGF0ZXN0VHJhaXRTdW1tYXJpZXM6IFJlYWRvbmx5TWFwPHN0cmluZywgdW5rbm93bj5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBEZXZ0b29sc0h1Yk9wdGlvbnMge1xuICByZWFkb25seSBidWZmZXJTaXplPzogbnVtYmVyXG59XG5cbi8vIC0tLS0gR2xvYmFsIG11dGFibGUgc3RhdGUgKHNpbmdsZXRvbikgLS0tLVxuXG5jb25zdCBpbnN0YW5jZXMgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpXG5jb25zdCBsYXRlc3RTdGF0ZXMgPSBuZXcgTWFwPHN0cmluZywgdW5rbm93bj4oKVxuY29uc3QgbGF0ZXN0VHJhaXRTdW1tYXJpZXMgPSBuZXcgTWFwPHN0cmluZywgdW5rbm93bj4oKVxuY29uc3QgaW5zdGFuY2VMYWJlbHMgPSBuZXcgTWFwPHN0cmluZywgc3RyaW5nPigpXG5cbmxldCBidWZmZXJTaXplID0gNTAwXG5jb25zdCByaW5nQnVmZmVyOiBFdmVudFtdID0gW11cblxuLy8gU25hcHNob3QgXHU3NkY0XHU2M0E1XHU1RjE1XHU3NTI4XHU1MTg1XHU5MEU4XHU3RUQzXHU2Nzg0XHVGRjA4XHU1M0VBXHU4QkZCXHU3RUE2XHU1QjlBXHVGRjA5XHVGRjBDXHU5MDdGXHU1MTREXHU5QUQ4XHU5ODkxXHU1NzNBXHU2NjZGXHU0RTBCXHU3Njg0XHU2MkY3XHU4RDFEXHU2MjEwXHU2NzJDXHUzMDAyXG5jb25zdCBjdXJyZW50U25hcHNob3Q6IERldnRvb2xzU25hcHNob3QgPSB7XG4gIGluc3RhbmNlcyxcbiAgZXZlbnRzOiByaW5nQnVmZmVyLFxuICBsYXRlc3RTdGF0ZXMsXG4gIGxhdGVzdFRyYWl0U3VtbWFyaWVzLFxufVxuXG5jb25zdCBsaXN0ZW5lcnMgPSBuZXcgU2V0PCgpID0+IHZvaWQ+KClcblxubGV0IG5vdGlmeVNjaGVkdWxlZCA9IGZhbHNlXG5jb25zdCBzY2hlZHVsZU5vdGlmeSA9ICgpID0+IHtcbiAgaWYgKG5vdGlmeVNjaGVkdWxlZCkgcmV0dXJuXG4gIG5vdGlmeVNjaGVkdWxlZCA9IHRydWVcbiAgcXVldWVNaWNyb3Rhc2soKCkgPT4ge1xuICAgIG5vdGlmeVNjaGVkdWxlZCA9IGZhbHNlXG4gICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiBsaXN0ZW5lcnMpIHtcbiAgICAgIGxpc3RlbmVyKClcbiAgICB9XG4gIH0pXG59XG5cbmxldCBkZXZ0b29sc0VuYWJsZWQgPSBmYWxzZVxuXG5leHBvcnQgY29uc3QgY29uZmlndXJlRGV2dG9vbHNIdWIgPSAob3B0aW9ucz86IERldnRvb2xzSHViT3B0aW9ucykgPT4ge1xuICBkZXZ0b29sc0VuYWJsZWQgPSB0cnVlXG4gIGlmICh0eXBlb2Ygb3B0aW9ucz8uYnVmZmVyU2l6ZSA9PT0gXCJudW1iZXJcIiAmJiBOdW1iZXIuaXNGaW5pdGUob3B0aW9ucy5idWZmZXJTaXplKSkge1xuICAgIGNvbnN0IG5leHQgPSBNYXRoLmZsb29yKG9wdGlvbnMuYnVmZmVyU2l6ZSlcbiAgICBidWZmZXJTaXplID0gbmV4dCA+IDAgPyBuZXh0IDogYnVmZmVyU2l6ZVxuICAgIC8vIFx1ODJFNVx1N0YyOVx1NUMwRiBidWZmZXJTaXplXHVGRjBDXHU4OEMxXHU1MjZBXHU2NUU3XHU0RThCXHU0RUY2XHU3QTk3XHU1M0UzXHUzMDAyXG4gICAgaWYgKHJpbmdCdWZmZXIubGVuZ3RoID4gYnVmZmVyU2l6ZSkge1xuICAgICAgcmluZ0J1ZmZlci5zcGxpY2UoMCwgcmluZ0J1ZmZlci5sZW5ndGggLSBidWZmZXJTaXplKVxuICAgIH1cbiAgICBzY2hlZHVsZU5vdGlmeSgpXG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGlzRGV2dG9vbHNFbmFibGVkID0gKCk6IGJvb2xlYW4gPT4gZGV2dG9vbHNFbmFibGVkXG5cbi8vIC0tLS0gU25hcHNob3QgcHVibGljIGhlbHBlcnMgLS0tLVxuXG5leHBvcnQgY29uc3QgZ2V0RGV2dG9vbHNTbmFwc2hvdCA9ICgpOiBEZXZ0b29sc1NuYXBzaG90ID0+IGN1cnJlbnRTbmFwc2hvdFxuXG5leHBvcnQgY29uc3Qgc3Vic2NyaWJlRGV2dG9vbHNTbmFwc2hvdCA9IChsaXN0ZW5lcjogKCkgPT4gdm9pZCk6ICgoKSA9PiB2b2lkKSA9PiB7XG4gIGxpc3RlbmVycy5hZGQobGlzdGVuZXIpXG4gIHJldHVybiAoKSA9PiB7XG4gICAgbGlzdGVuZXJzLmRlbGV0ZShsaXN0ZW5lcilcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgY2xlYXJEZXZ0b29sc0V2ZW50cyA9ICgpOiB2b2lkID0+IHtcbiAgcmluZ0J1ZmZlci5sZW5ndGggPSAwXG4gIHNjaGVkdWxlTm90aWZ5KClcbn1cblxuZXhwb3J0IGNvbnN0IHNldEluc3RhbmNlTGFiZWwgPSAocnVudGltZUlkOiBzdHJpbmcsIGxhYmVsOiBzdHJpbmcpOiB2b2lkID0+IHtcbiAgaW5zdGFuY2VMYWJlbHMuc2V0KHJ1bnRpbWVJZCwgbGFiZWwpXG4gIHNjaGVkdWxlTm90aWZ5KClcbn1cblxuZXhwb3J0IGNvbnN0IGdldEluc3RhbmNlTGFiZWwgPSAocnVudGltZUlkOiBzdHJpbmcpOiBzdHJpbmcgfCB1bmRlZmluZWQgPT5cbiAgaW5zdGFuY2VMYWJlbHMuZ2V0KHJ1bnRpbWVJZClcblxuLy8gLS0tLSBIdWIgU2luayAtLS0tXG5cbmV4cG9ydCBjb25zdCBkZXZ0b29sc0h1YlNpbms6IFNpbmsgPSB7XG4gIHJlY29yZDogKGV2ZW50OiBFdmVudCkgPT5cbiAgICBFZmZlY3Quc3luYygoKSA9PiB7XG4gICAgICAvLyB0cmFjZTppbnN0YW5jZUxhYmVsXHVGRjFBXHU0RTNBIHJ1bnRpbWUgXHU1QjlFXHU0RjhCXHU4QkJFXHU3RjZFXHU2NjEzXHU4QkZCXHU1NDBEXHU3OUYwXHUzMDAyXG4gICAgICBpZiAoZXZlbnQudHlwZSA9PT0gXCJ0cmFjZTppbnN0YW5jZUxhYmVsXCIpIHtcbiAgICAgICAgY29uc3QgcnVudGltZUlkID0gKGV2ZW50IGFzIGFueSkucnVudGltZUlkIGFzIHN0cmluZyB8IHVuZGVmaW5lZFxuICAgICAgICBjb25zdCBkYXRhID0gKGV2ZW50IGFzIGFueSkuZGF0YVxuICAgICAgICBjb25zdCBsYWJlbCA9XG4gICAgICAgICAgZGF0YSAmJiB0eXBlb2YgZGF0YSA9PT0gXCJvYmplY3RcIiAmJiBcImxhYmVsXCIgaW4gZGF0YVxuICAgICAgICAgICAgPyBTdHJpbmcoKGRhdGEgYXMgYW55KS5sYWJlbClcbiAgICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgICAgIGlmIChydW50aW1lSWQgJiYgbGFiZWwpIHtcbiAgICAgICAgICBpbnN0YW5jZUxhYmVscy5zZXQocnVudGltZUlkLCBsYWJlbClcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBcdTVCOUVcdTRGOEJcdThCQTFcdTY1NzBcdUZGMUFcdTYzMDkgcnVudGltZUxhYmVsOjptb2R1bGVJZCBcdTdFRjRcdTVFQTZcdTdFRjRcdTYyQTRcdTZEM0JcdThEQzNcdTVCOUVcdTRGOEJcdTY1NzBcdTkxQ0ZcdTMwMDJcbiAgICAgIGlmIChldmVudC50eXBlID09PSBcIm1vZHVsZTppbml0XCIgfHwgZXZlbnQudHlwZSA9PT0gXCJtb2R1bGU6ZGVzdHJveVwiKSB7XG4gICAgICAgIGNvbnN0IG1vZHVsZUlkID0gKGV2ZW50IGFzIGFueSkubW9kdWxlSWQgPz8gXCJ1bmtub3duXCJcbiAgICAgICAgY29uc3QgcnVudGltZUxhYmVsID0gKGV2ZW50IGFzIGFueSkucnVudGltZUxhYmVsID8/IFwidW5rbm93blwiXG4gICAgICAgIGNvbnN0IGtleSA9IGAke3J1bnRpbWVMYWJlbH06OiR7bW9kdWxlSWR9YFxuICAgICAgICBjb25zdCBwcmV2ID0gaW5zdGFuY2VzLmdldChrZXkpID8/IDBcbiAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09IFwibW9kdWxlOmluaXRcIikge1xuICAgICAgICAgIGluc3RhbmNlcy5zZXQoa2V5LCBwcmV2ICsgMSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBuZXh0ID0gcHJldiAtIDFcbiAgICAgICAgICBpZiAobmV4dCA8PSAwKSB7XG4gICAgICAgICAgICBpbnN0YW5jZXMuZGVsZXRlKGtleSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW5zdGFuY2VzLnNldChrZXksIG5leHQpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIGxhdGVzdFN0YXRlc1x1RkYxQVx1NjMwOSBydW50aW1lTGFiZWw6Om1vZHVsZUlkOjpydW50aW1lSWQgXHU4QkIwXHU1RjU1XHU2NzAwXHU2NUIwIHN0YXRlOnVwZGF0ZSBcdTVGRUJcdTcxNjdcdTMwMDJcbiAgICAgIGlmIChldmVudC50eXBlID09PSBcInN0YXRlOnVwZGF0ZVwiKSB7XG4gICAgICAgIGNvbnN0IG1vZHVsZUlkID0gKGV2ZW50IGFzIGFueSkubW9kdWxlSWQgPz8gXCJ1bmtub3duXCJcbiAgICAgICAgY29uc3QgcnVudGltZUxhYmVsID0gKGV2ZW50IGFzIGFueSkucnVudGltZUxhYmVsID8/IFwidW5rbm93blwiXG4gICAgICAgIGNvbnN0IHJ1bnRpbWVJZCA9IChldmVudCBhcyBhbnkpLnJ1bnRpbWVJZCA/PyBcInVua25vd25cIlxuICAgICAgICBjb25zdCBrZXkgPSBgJHtydW50aW1lTGFiZWx9Ojoke21vZHVsZUlkfTo6JHtydW50aW1lSWR9YFxuICAgICAgICBsYXRlc3RTdGF0ZXMuc2V0KGtleSwgKGV2ZW50IGFzIGFueSkuc3RhdGUpXG5cbiAgICAgICAgY29uc3QgdHJhaXRTdW1tYXJ5ID0gKGV2ZW50IGFzIGFueSkudHJhaXRTdW1tYXJ5XG4gICAgICAgIGlmICh0cmFpdFN1bW1hcnkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGxhdGVzdFRyYWl0U3VtbWFyaWVzLnNldChrZXksIHRyYWl0U3VtbWFyeSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBtb2R1bGU6ZGVzdHJveSBcdTY1RjZcdTZFMDVcdTc0MDZcdTVCOUVcdTRGOEJcdTY4MDdcdTdCN0VcdTMwMDJcbiAgICAgIGlmIChldmVudC50eXBlID09PSBcIm1vZHVsZTpkZXN0cm95XCIpIHtcbiAgICAgICAgY29uc3QgcnVudGltZUlkID0gKGV2ZW50IGFzIGFueSkucnVudGltZUlkIGFzIHN0cmluZyB8IHVuZGVmaW5lZFxuICAgICAgICBpZiAocnVudGltZUlkKSB7XG4gICAgICAgICAgaW5zdGFuY2VMYWJlbHMuZGVsZXRlKHJ1bnRpbWVJZClcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyByaW5nIGJ1ZmZlclx1RkYxQVx1NEZERFx1NzU1OVx1NjcwMFx1OEZEMSBidWZmZXJTaXplIFx1Njc2MSBEZWJ1Zy5FdmVudFx1MzAwMlxuICAgICAgaWYgKGJ1ZmZlclNpemUgPiAwKSB7XG4gICAgICAgIGlmIChyaW5nQnVmZmVyLmxlbmd0aCA+PSBidWZmZXJTaXplKSB7XG4gICAgICAgICAgcmluZ0J1ZmZlci5zaGlmdCgpXG4gICAgICAgIH1cbiAgICAgICAgcmluZ0J1ZmZlci5wdXNoKGV2ZW50KVxuICAgICAgfVxuXG4gICAgICBzY2hlZHVsZU5vdGlmeSgpXG4gICAgfSksXG59XG4iLCAiLy8gTWlkZGxld2FyZSBcdTU0N0RcdTU0MERcdTdBN0FcdTk1RjRcdTUxNjVcdTUzRTNcdTMwMDJcbi8vIC0gXHU2M0QwXHU0RjlCXHU1N0ZBXHU0RThFIEVmZmVjdE9wIFx1NzY4NFx1OEMwM1x1OEJENS9cdTg5QzJcdTZENEJcdTRFMkRcdTk1RjRcdTRFRjZcdTdCNDlcdThGODVcdTUyQTlcdTVERTVcdTUxNzdcdUZGMUJcbi8vIC0gUXVlcnkgLyBEZWJ1Z09ic2VydmVyIFx1N0I0OVx1ODBGRFx1NTI5Qlx1NTcyOFx1NjcyQ1x1NTQ3RFx1NTQwRFx1N0E3QVx1OTVGNFx1NEUwQlx1NjI2OVx1NUM1NVx1MzAwMlxuXG5pbXBvcnQgeyBFZmZlY3QgfSBmcm9tIFwiZWZmZWN0XCJcbmltcG9ydCAqIGFzIEVmZmVjdE9wIGZyb20gXCIuLi9lZmZlY3RvcC5qc1wiXG5pbXBvcnQgKiBhcyBEZWJ1ZyBmcm9tIFwiLi4vRGVidWcuanNcIlxuXG5leHBvcnQgdHlwZSBNaWRkbGV3YXJlID0gRWZmZWN0T3AuTWlkZGxld2FyZVxuZXhwb3J0IHR5cGUgTWlkZGxld2FyZVN0YWNrID0gRWZmZWN0T3AuTWlkZGxld2FyZVN0YWNrXG5cbmV4cG9ydCBpbnRlcmZhY2UgRGVidWdMb2dnZXJDb25maWcge1xuICAvKipcbiAgICogXHU1M0VGXHU5MDA5XHVGRjFBXHU4MUVBXHU1QjlBXHU0RTQ5XHU2NUU1XHU1RkQ3XHU1MUZEXHU2NTcwXHVGRjBDXHU2NUI5XHU0RkJGXHU1NzI4XHU2RDRCXHU4QkQ1XHU0RTJEXHU2MzU1XHU4M0I3XHU4QzAzXHU3NTI4XHUzMDAyXG4gICAqIC0gXHU4MkU1XHU2NzJBXHU2M0QwXHU0RjlCXHVGRjBDXHU1MjE5XHU5RUQ4XHU4QkE0XHU0RjdGXHU3NTI4IEVmZmVjdC5sb2dEZWJ1ZyBcdThGOTNcdTUxRkFcdTMwMDJcbiAgICovXG4gIHJlYWRvbmx5IGxvZ2dlcj86IChvcDogRWZmZWN0T3AuRWZmZWN0T3A8YW55LCBhbnksIGFueT4pID0+IHZvaWRcbn1cblxuLyoqXG4gKiBcdTUyMUJcdTVFRkFcdTRFMDBcdTRFMkFcdTdCODBcdTUzNTVcdTc2ODQgRGVidWcgXHU2NUU1XHU1RkQ3XHU0RTJEXHU5NUY0XHU0RUY2XHVGRjFBXG4gKiAtIFx1NTcyOFx1NjI2N1x1ODg0QyBFZmZlY3QgXHU0RTRCXHU1MjREXHU4QkIwXHU1RjU1XHU0RTAwXHU2NzYxXHU2NUU1XHU1RkQ3XHVGRjFCXG4gKiAtIFx1NEUwRFx1NjUzOVx1NTNEOFx1N0VEM1x1Njc5Q1x1NEUwRVx1OTUxOVx1OEJFRlx1OEJFRFx1NEU0OVx1MzAwMlxuICovXG5leHBvcnQgY29uc3QgbWFrZURlYnVnTG9nZ2VyID0gKFxuICBjb25maWc/OiBEZWJ1Z0xvZ2dlckNvbmZpZyxcbik6IE1pZGRsZXdhcmUgPT5cbiAgPEEsIEUsIFI+KG9wOiBFZmZlY3RPcC5FZmZlY3RPcDxBLCBFLCBSPik6IEVmZmVjdC5FZmZlY3Q8QSwgRSwgUj4gPT5cbiAgICBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG4gICAgICAvLyBcdTdFQUZcdTg5QzJcdTZENEJcdTdDN0JcdTgwRkRcdTUyOUJcdUZGMUFcdTUxNDFcdThCQjhcdTg4QUJcdTVDNDBcdTkwRThcdTdCNTZcdTc1NjVcdTUxNzNcdTk1RURcdTMwMDJcbiAgICAgIGlmIChvcC5tZXRhPy5wb2xpY3k/LmRpc2FibGVPYnNlcnZlcnMpIHtcbiAgICAgICAgcmV0dXJuIHlpZWxkKiBvcC5lZmZlY3RcbiAgICAgIH1cbiAgICAgIGlmIChjb25maWc/LmxvZ2dlcikge1xuICAgICAgICBjb25maWcubG9nZ2VyKG9wKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcbiAgICAgICAgICBgW0VmZmVjdE9wXSBraW5kPSR7b3Aua2luZH0gbmFtZT0ke29wLm5hbWV9YCxcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgcmV0dXJuIHlpZWxkKiBvcC5lZmZlY3RcbiAgICB9KVxuXG4vKipcbiAqIGFwcGx5RGVidWdcdUZGMUFcbiAqIC0gXHU1NzI4XHU3M0IwXHU2NzA5IE1pZGRsZXdhcmVTdGFjayBcdTY3MkJcdTVDM0VcdThGRkRcdTUyQTBcdTRFMDBcdTRFMkEgRGVidWdMb2dnZXIgXHU0RTJEXHU5NUY0XHU0RUY2XHVGRjFCXG4gKiAtIFx1OEZENFx1NTZERVx1NjVCMFx1NzY4NCBzdGFja1x1RkYwQ1x1NEUwRFx1NEZFRVx1NjUzOVx1NTM5Rlx1NjU3MFx1N0VDNFx1MzAwMlxuICovXG5leHBvcnQgY29uc3QgYXBwbHlEZWJ1ZyA9IChcbiAgc3RhY2s6IE1pZGRsZXdhcmVTdGFjayxcbiAgY29uZmlnPzogRGVidWdMb2dnZXJDb25maWcsXG4pOiBNaWRkbGV3YXJlU3RhY2sgPT4gWy4uLnN0YWNrLCBtYWtlRGVidWdMb2dnZXIoY29uZmlnKV1cblxuLyoqXG4gKiBEZWJ1Z09ic2VydmVyQ29uZmlnXHVGRjFBXG4gKiAtIFx1OTg4NFx1NzU1OVx1OEZDN1x1NkVFNFx1NTE2NVx1NTNFM1x1RkYxQVx1NTNFRlx1NjMwOVx1NkEyMVx1NTc1NyAvIGtpbmQgLyBuYW1lIFx1N0I0OVx1N0VGNFx1NUVBNlx1N0I1Qlx1OTAwOVx1OTcwMFx1ODk4MVx1ODlDMlx1NkQ0Qlx1NzY4NCBFZmZlY3RPcFx1MzAwMlxuICovXG5leHBvcnQgaW50ZXJmYWNlIERlYnVnT2JzZXJ2ZXJDb25maWcge1xuICByZWFkb25seSBmaWx0ZXI/OiAoXG4gICAgb3A6IEVmZmVjdE9wLkVmZmVjdE9wPGFueSwgYW55LCBhbnk+LFxuICApID0+IGJvb2xlYW5cbn1cblxuLyoqXG4gKiBtYWtlRGVidWdPYnNlcnZlclx1RkYxQVxuICogLSBcdTVDMDYgRWZmZWN0T3AgXHU2RDQxXHU3RURGXHU0RTAwXHU2NTM2XHU1M0UzXHU1MjMwIERlYnVnU2lua1x1RkYwOEVmZmVjdE9wIFx1MjE5MiBEZWJ1Zy5FdmVudFx1RkYwOVx1RkYxQlxuICogLSBcdTVGNTNcdTUyNERcdTkwMUFcdThGQzcgdHJhY2U6KiBcdTRFOEJcdTRFRjZcdTVDMDYgRWZmZWN0T3AgXHU1MzlGXHU2ODM3XHU5MDBGXHU0RjIwXHU1MjMwIERlYnVnIFx1NkQ0MVx1RkYxQVxuICogICAtIHR5cGU6IFwidHJhY2U6ZWZmZWN0b3BcIlxuICogICAtIG1vZHVsZUlkOiBcdTY3NjVcdTgxRUEgb3AubWV0YT8ubW9kdWxlSWRcdUZGMDhcdTgyRTVcdTVCNThcdTU3MjhcdUZGMDlcbiAqICAgLSBkYXRhOiBcdTY1NzRcdTRFMkEgRWZmZWN0T3AgXHU1QkY5XHU4QzYxXG4gKlxuICogXHU4QkY0XHU2NjBFXHVGRjFBXG4gKiAtIFx1NEUwRFx1NjUzOVx1NTNEOFx1NTM5Rlx1NjcwOSBFZmZlY3QgXHU4ODRDXHU0RTNBXHVGRjBDXHU0RUM1XHU4RkZEXHU1MkEwIERlYnVnIFx1NEZBN1x1ODlDMlx1NkQ0Qlx1RkYxQlxuICogLSBcdTUxNzdcdTRGNTNcdTc2ODQgRGV2dG9vbHMgLyBUaW1lbGluZSBcdTg5QzZcdTU2RkVcdTUzRUZcdTRFRTVcdTU3RkFcdTRFOEUgdHJhY2U6ZWZmZWN0b3AgXHU0RThCXHU0RUY2XHU5MUNEXHU1RUZBIEVmZmVjdE9wIFx1NjVGNlx1OTVGNFx1N0VCRlx1MzAwMlxuICovXG5leHBvcnQgY29uc3QgbWFrZURlYnVnT2JzZXJ2ZXIgPSAoXG4gIGNvbmZpZz86IERlYnVnT2JzZXJ2ZXJDb25maWcsXG4pOiBNaWRkbGV3YXJlID0+XG4gIDxBLCBFLCBSPihvcDogRWZmZWN0T3AuRWZmZWN0T3A8QSwgRSwgUj4pOiBFZmZlY3QuRWZmZWN0PEEsIEUsIFI+ID0+XG4gICAgRWZmZWN0LmdlbihmdW5jdGlvbiogKCkge1xuICAgICAgLy8gXHU3RUFGXHU4OUMyXHU2RDRCXHU3QzdCXHU4MEZEXHU1MjlCXHVGRjFBXHU1MTQxXHU4QkI4XHU4OEFCXHU1QzQwXHU5MEU4XHU3QjU2XHU3NTY1XHU1MTczXHU5NUVEXHUzMDAyXG4gICAgICBpZiAob3AubWV0YT8ucG9saWN5Py5kaXNhYmxlT2JzZXJ2ZXJzKSB7XG4gICAgICAgIHJldHVybiB5aWVsZCogb3AuZWZmZWN0XG4gICAgICB9XG4gICAgICBpZiAoIWNvbmZpZz8uZmlsdGVyIHx8IGNvbmZpZy5maWx0ZXIob3ApKSB7XG4gICAgICAgIHlpZWxkKiBEZWJ1Zy5yZWNvcmQoe1xuICAgICAgICAgIHR5cGU6IFwidHJhY2U6ZWZmZWN0b3BcIixcbiAgICAgICAgICBtb2R1bGVJZDogKG9wLm1ldGE/Lm1vZHVsZUlkIGFzIHN0cmluZyB8IHVuZGVmaW5lZCkgPz8gdW5kZWZpbmVkLFxuICAgICAgICAgIGRhdGE6IG9wLFxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgcmV0dXJuIHlpZWxkKiBvcC5lZmZlY3RcbiAgICB9KVxuXG4vKipcbiAqIGFwcGx5RGVidWdPYnNlcnZlclx1RkYxQVxuICogLSBcdTU3MjhcdTczQjBcdTY3MDkgTWlkZGxld2FyZVN0YWNrIFx1NjcyQlx1NUMzRVx1OEZGRFx1NTJBMCBEZWJ1Z09ic2VydmVyIFx1NEUyRFx1OTVGNFx1NEVGNlx1RkYxQlxuICogLSBcdThGRDRcdTU2REVcdTY1QjBcdTc2ODQgc3RhY2tcdUZGMENcdTRFMERcdTRGRUVcdTY1MzlcdTUzOUZcdTY1NzBcdTdFQzRcdTMwMDJcbiAqL1xuZXhwb3J0IGNvbnN0IGFwcGx5RGVidWdPYnNlcnZlciA9IChcbiAgc3RhY2s6IE1pZGRsZXdhcmVTdGFjayxcbiAgY29uZmlnPzogRGVidWdPYnNlcnZlckNvbmZpZyxcbik6IE1pZGRsZXdhcmVTdGFjayA9PiBbLi4uc3RhY2ssIG1ha2VEZWJ1Z09ic2VydmVyKGNvbmZpZyldXG5cbi8qKlxuICogV2l0aERlYnVnT3B0aW9uc1x1RkYxQVxuICogLSBcdTlBRDhcdTVDNDJcdTdFQzRcdTU0MDhcdTUxNjVcdTUzRTNcdTc2ODRcdTkxNERcdTdGNkVcdTk4NzlcdUZGMENcdTc1MjhcdTRFOEVcdTU3MjhcdTczQjBcdTY3MDkgTWlkZGxld2FyZVN0YWNrIFx1NEUwQVx1OEZGRFx1NTJBMCBEZWJ1ZyBcdTgwRkRcdTUyOUJcdTMwMDJcbiAqXG4gKiBcdTdFQTZcdTVCOUFcdUZGMUFcbiAqIC0gbG9nZ2VyOlxuICogICAtIFx1NjcyQVx1OEJCRVx1N0Y2RVx1RkYwOHVuZGVmaW5lZFx1RkYwOVx1RkYxQVx1NTQyRlx1NzUyOFx1OUVEOFx1OEJBNCBEZWJ1Z0xvZ2dlclx1RkYwOEVmZmVjdC5sb2dEZWJ1Z1x1RkYwOVx1RkYxQlxuICogICAtIFx1NjNEMFx1NEY5Qlx1NTFGRFx1NjU3MFx1RkYxQVx1NEY3Rlx1NzUyOFx1ODFFQVx1NUI5QVx1NEU0OSBsb2dnZXIob3ApIFx1NjZGRlx1NEVFM1x1OUVEOFx1OEJBNFx1ODg0Q1x1NEUzQVx1RkYxQlxuICogICAtIFx1NjYzRVx1NUYwRiBmYWxzZVx1RkYxQVx1NEUwRFx1OEZGRFx1NTJBMCBEZWJ1Z0xvZ2dlciBcdTRFMkRcdTk1RjRcdTRFRjZcdTMwMDJcbiAqIC0gb2JzZXJ2ZXI6XG4gKiAgIC0gXHU2NzJBXHU4QkJFXHU3RjZFXHVGRjA4dW5kZWZpbmVkXHVGRjA5XHVGRjFBXHU1NDJGXHU3NTI4IERlYnVnT2JzZXJ2ZXJcdUZGMENcdTRGN0ZcdTc1MjhcdTlFRDhcdThCQTRcdTkxNERcdTdGNkVcdUZGMUJcbiAqICAgLSBcdTYzRDBcdTRGOUIgRGVidWdPYnNlcnZlckNvbmZpZ1x1RkYxQVx1NjMwOVx1OTE0RFx1N0Y2RVx1NTQyRlx1NzUyOCBEZWJ1Z09ic2VydmVyXHVGRjFCXG4gKiAgIC0gXHU2NjNFXHU1RjBGIGZhbHNlXHVGRjFBXHU0RTBEXHU4RkZEXHU1MkEwIERlYnVnT2JzZXJ2ZXIgXHU0RTJEXHU5NUY0XHU0RUY2XHUzMDAyXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgV2l0aERlYnVnT3B0aW9ucyB7XG4gIHJlYWRvbmx5IGxvZ2dlcj86IERlYnVnTG9nZ2VyQ29uZmlnW1wibG9nZ2VyXCJdIHwgZmFsc2VcbiAgcmVhZG9ubHkgb2JzZXJ2ZXI/OiBEZWJ1Z09ic2VydmVyQ29uZmlnIHwgZmFsc2Vcbn1cblxuLyoqXG4gKiB3aXRoRGVidWdcdUZGMUFcbiAqIC0gXHU1NzI4XHU3M0IwXHU2NzA5IE1pZGRsZXdhcmVTdGFjayBcdTRFMEFcdThGRkRcdTUyQTAgRGVidWdMb2dnZXIgKyBEZWJ1Z09ic2VydmVyIFx1OTg4NFx1OEJCRVx1RkYxQlxuICogLSBcdTY1MkZcdTYzMDFcdTkwMUFcdThGQzcgb3B0aW9ucyBcdTYzQTdcdTUyMzYgbG9nZ2VyIC8gb2JzZXJ2ZXIgXHU2NjJGXHU1NDI2XHU1NDJGXHU3NTI4XHU1M0NBXHU1MTc2XHU5MTREXHU3RjZFXHVGRjFCXG4gKiAtIFx1OEZENFx1NTZERVx1NjVCMFx1NzY4NCBzdGFja1x1RkYwQ1x1NEUwRFx1NEZFRVx1NjUzOVx1NTM5Rlx1NjU3MFx1N0VDNFx1MzAwMlxuICpcbiAqIFx1NTE3OFx1NTc4Qlx1NzUyOFx1NkNENVx1RkYxQVxuICpcbiAqICAgbGV0IHN0YWNrOiBNaWRkbGV3YXJlU3RhY2sgPSBbbWV0cmljcywgdGltaW5nXVxuICogICBzdGFjayA9IE1pZGRsZXdhcmUud2l0aERlYnVnKHN0YWNrLCB7XG4gKiAgICAgbG9nZ2VyOiAob3ApID0+IGNvbnNvbGUubG9nKG9wLmtpbmQsIG9wLm5hbWUpLFxuICogICAgIG9ic2VydmVyOiB7IGZpbHRlcjogKG9wKSA9PiBvcC5raW5kICE9PSBcInNlcnZpY2VcIiB9LFxuICogICB9KVxuICovXG5leHBvcnQgY29uc3Qgd2l0aERlYnVnID0gKFxuICBzdGFjazogTWlkZGxld2FyZVN0YWNrLFxuICBvcHRpb25zPzogV2l0aERlYnVnT3B0aW9ucyxcbik6IE1pZGRsZXdhcmVTdGFjayA9PiB7XG4gIGxldCBuZXh0ID0gc3RhY2tcblxuICAvLyBEZWJ1Z0xvZ2dlclx1RkYxQVx1OUVEOFx1OEJBNFx1NUYwMFx1NTQyRlx1RkYwQ1x1OTY2NFx1OTc1RVx1NjYzRVx1NUYwRiBsb2dnZXIgPT09IGZhbHNlXHUzMDAyXG4gIGlmIChvcHRpb25zPy5sb2dnZXIgIT09IGZhbHNlKSB7XG4gICAgY29uc3QgbG9nZ2VyQ29uZmlnOiBEZWJ1Z0xvZ2dlckNvbmZpZyB8IHVuZGVmaW5lZCA9XG4gICAgICB0eXBlb2Ygb3B0aW9ucz8ubG9nZ2VyID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgPyB7IGxvZ2dlcjogb3B0aW9ucy5sb2dnZXIgfVxuICAgICAgICA6IHVuZGVmaW5lZFxuICAgIG5leHQgPSBhcHBseURlYnVnKG5leHQsIGxvZ2dlckNvbmZpZylcbiAgfVxuXG4gIC8vIERlYnVnT2JzZXJ2ZXJcdUZGMUFcdTlFRDhcdThCQTRcdTVGMDBcdTU0MkZcdUZGMENcdTk2NjRcdTk3NUVcdTY2M0VcdTVGMEYgb2JzZXJ2ZXIgPT09IGZhbHNlXHUzMDAyXG4gIGlmIChvcHRpb25zPy5vYnNlcnZlciAhPT0gZmFsc2UpIHtcbiAgICAvLyBcdThGRDlcdTkxQ0NcdTVERjJcdTdFQ0ZcdTkwMUFcdThGQzdcdTY3NjFcdTRFRjZcdTYzOTJcdTk2NjRcdTRFODYgb2JzZXJ2ZXIgPT09IGZhbHNlXHVGRjBDXHU1M0VBXHU5NzAwXHU4OTgxXHU1NzI4XHU2NzA5XHU5MTREXHU3RjZFXHU1QkY5XHU4QzYxXHU2NUY2XHU5MDBGXHU0RjIwXHVGRjFCXG4gICAgLy8gdW5kZWZpbmVkIFx1ODg2OFx1NzkzQVx1NEY3Rlx1NzUyOCBEZWJ1Z09ic2VydmVyIFx1OUVEOFx1OEJBNFx1ODg0Q1x1NEUzQVx1MzAwMlxuICAgIGNvbnN0IG9ic2VydmVyT3B0aW9uID0gb3B0aW9ucz8ub2JzZXJ2ZXJcbiAgICBjb25zdCBvYnNlcnZlckNvbmZpZzogRGVidWdPYnNlcnZlckNvbmZpZyB8IHVuZGVmaW5lZCA9XG4gICAgICBvYnNlcnZlck9wdGlvbiA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogb2JzZXJ2ZXJPcHRpb25cbiAgICBuZXh0ID0gYXBwbHlEZWJ1Z09ic2VydmVyKG5leHQsIG9ic2VydmVyQ29uZmlnKVxuICB9XG5cbiAgcmV0dXJuIG5leHRcbn1cbiIsICJpbXBvcnQgeyBDb250ZXh0LCBFZmZlY3QgfSBmcm9tIFwiZWZmZWN0XCJcbmltcG9ydCB7IGlzRGV2RW52IH0gZnJvbSBcIi4vaW50ZXJuYWwvcnVudGltZS9jb3JlL2Vudi5qc1wiXG5pbXBvcnQgeyBSb290Q29udGV4dFRhZyB9IGZyb20gXCIuL2ludGVybmFsL3J1bnRpbWUvY29yZS9Sb290Q29udGV4dC5qc1wiXG5cbmNvbnN0IHRhZ0lkT2YgPSAodGFnOiBDb250ZXh0LlRhZzxhbnksIGFueT4pOiBzdHJpbmcgPT5cbiAgdHlwZW9mICh0YWcgYXMgYW55KT8uaWQgPT09IFwic3RyaW5nXCJcbiAgICA/IFN0cmluZygodGFnIGFzIGFueSkuaWQpXG4gICAgOiB0eXBlb2YgKHRhZyBhcyBhbnkpPy5rZXkgPT09IFwic3RyaW5nXCJcbiAgICAgID8gU3RyaW5nKCh0YWcgYXMgYW55KS5rZXkpXG4gICAgICA6IFwiPHVua25vd24gdGFnPlwiXG5cbi8qKlxuICogUm9vdC5yZXNvbHZlXG4gKlxuICogXHU2NjNFXHU1RjBGXHU0RUNFXHUyMDFDXHU1RjUzXHU1MjREIFJ1bnRpbWUgVHJlZSBcdTc2ODRcdTY4MzlcdUZGMDhyb290IHByb3ZpZGVyXHVGRjA5XHUyMDFEXHU4OUUzXHU2NzkwXHU2N0QwXHU0RTJBIFRhZ1x1RkYwOFNlcnZpY2VUYWcgLyBNb2R1bGVUYWdcdUZGMDlcdTMwMDJcbiAqXG4gKiBcdThCRURcdTRFNDlcdUZGMUFcbiAqIC0gXHU1NkZBXHU1QjlBXHU4QkZCXHU1M0Q2IHJvb3RDb250ZXh0XHVGRjBDXHU0RTBEXHU1M0Q3XHU2NkY0XHU4RkQxIHNjb3BlIFx1NzY4NCBMYXllci9Db250ZXh0IFx1ODk4Nlx1NzZENlx1NUY3MVx1NTRDRFx1RkYxQlxuICogLSBcdTVCRjkgTW9kdWxlVGFnXHVGRjFBXHU1M0VBXHU4ODY4XHU4RkJFIHJvb3QgXHU1MzU1XHU0RjhCXHU4QkVEXHU0RTQ5XHVGRjA4XHU0RTBEXHU3NTI4XHU0RThFXHU1OTFBXHU1QjlFXHU0RjhCXHU5MDA5XHU2MkU5XHVGRjA5XHUzMDAyXG4gKi9cbmV4cG9ydCBjb25zdCByZXNvbHZlID0gPElkLCBTdmM+KFxuICB0YWc6IENvbnRleHQuVGFnPElkLCBTdmM+LFxuKTogRWZmZWN0LkVmZmVjdDxTdmMsIG5ldmVyLCBhbnk+ID0+XG4gIEVmZmVjdC5nZW4oZnVuY3Rpb24qICgpIHtcbiAgICBjb25zdCByb290ID0geWllbGQqIFJvb3RDb250ZXh0VGFnXG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBDb250ZXh0LmdldChyb290LmNvbnRleHQsIHRhZyBhcyBDb250ZXh0LlRhZzxhbnksIGFueT4pIGFzIFN2Y1xuICAgIH0gY2F0Y2gge1xuICAgICAgY29uc3QgcmVxdWVzdGVkID0gdGFnSWRPZih0YWcgYXMgQ29udGV4dC5UYWc8YW55LCBhbnk+KVxuICAgICAgY29uc3QgbXNnID0gaXNEZXZFbnYoKVxuICAgICAgICA/IGBbUm9vdC5yZXNvbHZlXSBUYWcgbm90IGZvdW5kIGluIHJvb3QgcHJvdmlkZXI6ICR7cmVxdWVzdGVkfVxcbmAgK1xuICAgICAgICAgIFwiRml4OlxcblwiICtcbiAgICAgICAgICBcIi0gUHJvdmlkZSBpdCB3aGVuIGNyZWF0aW5nIHRoZSBydW50aW1lIHRyZWUgKExvZ2l4LlJ1bnRpbWUubWFrZSguLi4seyBsYXllciB9KSAvIE1hbmFnZWRSdW50aW1lLm1ha2UoTGF5ZXIubWVyZ2VBbGwoLi4uKSkpLlxcblwiICtcbiAgICAgICAgICBcIi0gRG8gbm90IHJlbHkgb24gbmVzdGVkIFJ1bnRpbWVQcm92aWRlci5sYXllciB0byBtb2NrIFJvb3QucmVzb2x2ZS5cIlxuICAgICAgICA6IFwiW1Jvb3QucmVzb2x2ZV0gdGFnIG5vdCBmb3VuZFwiXG5cbiAgICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcihtc2cpXG4gICAgICBlcnIubmFtZSA9IFwiTWlzc2luZ1Jvb3RQcm92aWRlckVycm9yXCJcbiAgICAgIHJldHVybiB5aWVsZCogRWZmZWN0LmRpZShlcnIpXG4gICAgfVxuICB9KVxuIiwgIi8vIFx1NTE2Q1x1NTE3MVx1NzNBRlx1NTg4M1x1NjhDMFx1NkQ0Qlx1NURFNVx1NTE3N1x1RkYxQVxuLy8gLSBnZXROb2RlRW52XHVGRjFBXHU5MDFBXHU4RkM3IGdsb2JhbFRoaXMucHJvY2Vzcy5lbnYuTk9ERV9FTlYgXHU4QkZCXHU1M0Q2XHU4QzAzXHU3NTI4XHU2NUI5XHU4RkQwXHU4ODRDXHU3M0FGXHU1ODgzXHVGRjFCXG4vLyAtIGlzRGV2RW52XHVGRjFBXHU3RUE2XHU1QjlBXHU0RTNBIE5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiBcdTUzNzNcdTg5QzZcdTRFM0FcdTVGMDBcdTUzRDFcdTczQUZcdTU4ODNcdTMwMDJcbi8vIFx1NUI5RVx1OTY0NVx1NUI5RVx1NzNCMFx1NEUwQlx1NkM4OVx1NTIzMCBpbnRlcm5hbC9ydW50aW1lL2NvcmUvZW52LnRzXHVGRjBDXHU5MDdGXHU1MTREXHU1NzI4XHU1OTFBXHU0RTJBXHU1MzA1XHU0RTJEXHU5MUNEXHU1OTBEXHU1QjlFXHU3M0IwXHUzMDAyXG5cbmltcG9ydCAqIGFzIEludGVybmFsIGZyb20gXCIuL2ludGVybmFsL3J1bnRpbWUvY29yZS9lbnYuanNcIlxuXG5leHBvcnQgY29uc3QgZ2V0Tm9kZUVudiA9ICgpOiBzdHJpbmcgfCB1bmRlZmluZWQgPT4gSW50ZXJuYWwuZ2V0Tm9kZUVudigpXG5cbmV4cG9ydCBjb25zdCBpc0RldkVudiA9ICgpOiBib29sZWFuID0+IEludGVybmFsLmlzRGV2RW52KClcbiIsICJpbXBvcnQgeyBFZmZlY3QsIExheWVyIH0gZnJvbSBcImVmZmVjdFwiXG5pbXBvcnQgKiBhcyBJbnRlcm5hbCBmcm9tIFwiLi9pbnRlcm5hbC9wbGF0Zm9ybS9QbGF0Zm9ybS5qc1wiXG5cbi8qKlxuICogUGxhdGZvcm0uU2VydmljZVx1RkYxQVx1NUU3M1x1NTNGMFx1NjcwRFx1NTJBMVx1NjNBNVx1NTNFM1x1MzAwMlxuICovXG5leHBvcnQgdHlwZSBTZXJ2aWNlID0gSW50ZXJuYWwuU2VydmljZVxuXG4vKipcbiAqIFBsYXRmb3JtLnRhZ1x1RkYxQVx1NUU3M1x1NTNGMFx1NjcwRFx1NTJBMSBUYWdcdTMwMDJcbiAqL1xuZXhwb3J0IGNvbnN0IHRhZyA9IEludGVybmFsLlRhZ1xuXG4vKipcbiAqIE5vb3BQbGF0Zm9ybVx1RkYxQVxuICogLSBcdTY4MzhcdTVGQzNcdTVGMTVcdTY0Q0VcdTlFRDhcdThCQTRcdTUzRUFcdTUxODVcdTdGNkVcdTRFMDBcdTRFMkFcdTMwMENcdTRFQzBcdTRFNDhcdTkwRkRcdTRFMERcdTUwNUFcdTMwMERcdTc2ODRcdTVFNzNcdTUzRjBcdTVCOUVcdTczQjBcdUZGMUJcbiAqIC0gUmVhY3QgLyBOYXRpdmUgXHU3QjQ5XHU1MTc3XHU0RjUzXHU1RTczXHU1M0YwXHU1NzI4XHU1NDA0XHU4MUVBXHU5MDAyXHU5MTREXHU1QzQyXHU0RTJEXHU2M0QwXHU0RjlCXHU3NzFGXHU2QjYzXHU3Njg0XHU1QjlFXHU3M0IwXHUzMDAyXG4gKi9cbmV4cG9ydCBjbGFzcyBOb29wUGxhdGZvcm0gaW1wbGVtZW50cyBTZXJ2aWNlIHtcbiAgcmVhZG9ubHkgbGlmZWN5Y2xlID0ge1xuICAgIG9uU3VzcGVuZDogKF9lZmY6IEVmZmVjdC5FZmZlY3Q8dm9pZCwgbmV2ZXIsIGFueT4pID0+IEVmZmVjdC52b2lkLFxuICAgIG9uUmVzdW1lOiAoX2VmZjogRWZmZWN0LkVmZmVjdDx2b2lkLCBuZXZlciwgYW55PikgPT4gRWZmZWN0LnZvaWQsXG4gICAgb25SZXNldDogKF9lZmY6IEVmZmVjdC5FZmZlY3Q8dm9pZCwgbmV2ZXIsIGFueT4pID0+IEVmZmVjdC52b2lkLFxuICB9XG59XG5cbi8qKlxuICogTm9vcFBsYXRmb3JtTGF5ZXJcdUZGMUFcbiAqIC0gXHU1QzA2IE5vb3BQbGF0Zm9ybSBcdTVCOUVcdTczQjBcdTYzMDJcdThGN0RcdTUyMzAgUGxhdGZvcm0udGFnIFx1NEUwQVx1RkYxQlxuICogLSBcdTRGNUNcdTRFM0EgQGxvZ2l4L2NvcmUgXHU1MUZBXHU1MzgyXHU5RUQ4XHU4QkE0IExheWVyXHVGRjBDXHU1QjlFXHU5NjQ1XHU1RTk0XHU3NTI4XHU5MDFBXHU1RTM4XHU0RjFBXHU1NzI4XHU2NkY0XHU1OTE2XHU1QzQyXHU3NTI4XHU3NzFGXHU1QjlFXHU1RTczXHU1M0YwXHU1QjlFXHU3M0IwXHU4OTg2XHU3NkQ2XHU1QjgzXHUzMDAyXG4gKi9cbmV4cG9ydCBjb25zdCBOb29wUGxhdGZvcm1MYXllciA9IExheWVyLnN1Y2NlZWQoXG4gIHRhZyxcbiAgbmV3IE5vb3BQbGF0Zm9ybSgpXG4pXG5cbi8qKlxuICogZGVmYXVsdExheWVyXHVGRjFBXG4gKiAtIFx1NzZFRVx1NTI0RFx1N0I0OVx1NEVGN1x1NEU4RSBOb29wUGxhdGZvcm1MYXllclx1RkYxQlxuICogLSBcdTk4ODRcdTc1NTlcdTY3MkFcdTY3NjVcdTU5ODJcdTk3MDBcdTY2RjRcdTRFMzBcdTVCQ0NcdTlFRDhcdThCQTRcdTg4NENcdTRFM0FcdTY1RjZcdTc2ODRcdTUzNDdcdTdFQTdcdTdBN0FcdTk1RjRcdUZGMDhcdThDMDNcdTc1MjhcdTY1QjlcdTdFREZcdTRFMDBcdTRGN0ZcdTc1MjggZGVmYXVsdExheWVyIFx1NTM3M1x1NTNFRlx1RkYwOVx1MzAwMlxuICovXG5leHBvcnQgY29uc3QgZGVmYXVsdExheWVyID0gTm9vcFBsYXRmb3JtTGF5ZXJcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQSxjQUFBQTtBQUFBO0FBQUEsU0FBUyxVQUFBQyxnQkFBNkI7OztBQ1MvQixJQUFNLFlBQVk7RUFDdkIsUUFBUTtFQUNSLFNBQVM7RUFDVCxLQUFLOztBQ1hBLElBQU0sY0FBYyx1QkFBTyxJQUFJLDBCQUEwQjtBQUN6RCxJQUFNLG9CQUFvQix1QkFBTyxnQ0FBZ0M7QUFFakUsSUFBTSxpQkFBeUMsT0FBTztBQUV0RCxJQUFNLFlBQVk7RUFDdkIsU0FBUztFQUNULFdBQVc7O0FDTk4sSUFBTSxXQUFXLENBQUE7QUNGbEIsU0FBVSxJQUFJLFFBQWdCLEtBQWdCO0FBQ2xELFNBQU8sa0JBQWtCLE1BQ3JCLE9BQU8sSUFBSSxHQUFHLElBQ2QsT0FBTyxVQUFVLGVBQWUsS0FBSyxRQUFRLEdBQUc7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VztBQUVqRSxJQUFNQyxZQUFXLE1BQXdCLFNBQVM7OztBQ1R6RCxJQUFBQyxvQkFBQTtBQUFBLFNBQUFBLG1CQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFNBQVMsVUFBQUMsVUFBUSxTQUFBQyxlQUFhO0FBV3ZCLElBQU0sTUFBZTtBQU9yQixJQUFNLGVBQU4sTUFBc0M7QUFBQSxFQUF0QztBQUNMLFNBQVMsWUFBWTtBQUFBLE1BQ25CLFdBQVcsQ0FBQyxTQUEwQ0MsU0FBTztBQUFBLE1BQzdELFVBQVUsQ0FBQyxTQUEwQ0EsU0FBTztBQUFBLE1BQzVELFNBQVMsQ0FBQyxTQUEwQ0EsU0FBTztBQUFBLElBQzdEO0FBQUE7QUFDRjtBQU9PLElBQU0sb0JBQW9CQyxRQUFNO0FBQUEsRUFDckM7QUFBQSxFQUNBLElBQUksYUFBYTtBQUNuQjtBQU9PLElBQU0sZUFBZTsiLAogICJuYW1lcyI6IFsibWFrZSIsICJFZmZlY3QiLCAic291cmNlIiwgImluZGV4IiwgInNldCIsICJnZW5lcmF0ZVBhdGNoZXMiLCAiY3VycmVudCIsICJzb3VyY2UiLCAidmFsdWUiLCAicHJveHlEcmFmdCIsICJlbnN1cmVTaGFsbG93Q29weSIsICJjcmVhdGUiLCAiYmFzZSIsICJkcmFmdCIsICJtYXJrIiwgInJlc3VsdCIsICJDb250ZXh0IiwgIkVmZmVjdCIsICJMYXllciIsICJTY2hlbWEiLCAiRWZmZWN0IiwgIlN0cmVhbSIsICJTdWJzY3JpcHRpb25SZWYiLCAiRmliZXIiLCAiRmliZXJSZWYiLCAiQ2F1c2UiLCAiT3B0aW9uIiwgImxpc3QiLCAiQ2F1c2UiLCAiRWZmZWN0IiwgIkVmZmVjdCIsICJydW50aW1lTGFiZWwiLCAidGFnIiwgImtleUhhc2giLCAiRWZmZWN0IiwgIkNhdXNlIiwgIkVmZmVjdCIsICJGaWJlclJlZiIsICJSZWYiLCAiQ29udGV4dCIsICJMYXllciIsICJGaWJlclJlZiIsICJFZmZlY3QiLCAiQ2F1c2UiLCAiUmVmIiwgImN1cnJlbnQiLCAiQ2F1c2UiLCAiRWZmZWN0IiwgInRhZyIsICJFZmZlY3QiLCAiQ2F1c2UiLCAiRWZmZWN0IiwgIkVmZmVjdCIsICJoYXMiLCAiQ2F1c2UiLCAiQ29udGV4dCIsICJFZmZlY3QiLCAiRWZmZWN0IiwgIkNhdXNlIiwgIkNvbnRleHQiLCAiQ29udGV4dCIsICJFZmZlY3QiLCAiRmliZXJSZWYiLCAiT3B0aW9uIiwgIlN0cmVhbSIsICJFZmZlY3QiLCAiU3RyZWFtIiwgIlJlZiIsICJDb250ZXh0IiwgIkVmZmVjdCIsICJGaWJlclJlZiIsICJDb250ZXh0IiwgIkVmZmVjdCIsICJGaWJlclJlZiIsICJFZmZlY3QiLCAibWFrZSIsICJTdHJlYW0iLCAiUmVmIiwgIkVmZmVjdCIsICJDb250ZXh0IiwgIm1ha2UiLCAiU3RyZWFtIiwgIkVmZmVjdCIsICJhcGkiLCAiT3B0aW9uIiwgInRhZyIsICJGaWJlclJlZiIsICJhbnlSdW50aW1lIiwgInN0YXRlIiwgIkNvbnRleHQiLCAicnVudGltZSIsICJfdGFyZ2V0IiwgInJlY29yZCIsICJFZmZlY3QiLCAiT3B0aW9uIiwgInZhbHVlIiwgInJlY29yZCIsICJjdXJyZW50IiwgImdldE1pZGRsZXdhcmVTdGFjayIsICJFZmZlY3QiLCAiT3B0aW9uIiwgIm5vZGUiLCAiZnJvbSIsICJlcXVhbHMiLCAidG90YWxEdXJhdGlvbk1zIiwgInRvcDMiLCAiRWZmZWN0IiwgImxpc3QiLCAiY3VycmVudCIsICJnZXRBdFBhdGgiLCAiY3VycmVudCIsICJzZXRBdFBhdGhNdXRhdGluZyIsICJzZXQiLCAiRWZmZWN0IiwgIm5vZGUiLCAiaW5wdXQiLCAibmV4dEVycm9yIiwgImVycm9yUGF0aCIsICJwcmV2IiwgIkVmZmVjdCIsICJGaWJlciIsICJPcHRpb24iLCAiaW50ZXJuYWwiLCAibWFrZSIsICJDb250ZXh0IiwgIkxheWVyIiwgInJlY29yZCIsICJDb250ZXh0IiwgImludGVybmFsIiwgIm1ha2UiLCAiTGF5ZXIiLCAiQ29udGV4dCIsICJFZmZlY3QiLCAiTGF5ZXIiLCAiRWZmZWN0IiwgInBhcnNlU2VnbWVudHMiLCAiZ2V0QXRQYXRoIiwgImN1cnJlbnQiLCAic2V0QXRQYXRoTXV0YXRpbmciLCAidW5zZXRBdFBhdGhNdXRhdGluZyIsICJjdXJyZW50IiwgImxpc3QiLCAic2V0IiwgImxpc3RlbmVycyIsICJnZXRBdFBhdGgiLCAidGFnIiwgIm1ha2VQYXRjaCIsICJmcm9tIiwgImRlcHNUcmFjZVNldHRsZWQiLCAiZGVwc01pc21hdGNoRW1pdHRlZCIsICJmb3JtYXRMaXN0IiwgImVtaXREZXBzTWlzbWF0Y2giLCAiRWZmZWN0IiwgImdldE1pZGRsZXdhcmVTdGFjayIsICJPcHRpb24iLCAicmVjb3JkIiwgImdldEF0UGF0aCIsICJzZXRBdFBhdGhNdXRhdGluZyIsICJrZXlIYXNoIiwgImN1cnJlbnQiLCAia2V5IiwgInByZXYiLCAicHJldlN0YXR1cyIsICJjb25jdXJyZW5jeSIsICJtb2RlIiwgImluRmxpZ2h0IiwgInRyYWlsaW5nIiwgImdlbiIsICJzdGFydEZldGNoIiwgImludGVybmFsIiwgIkZpYmVyIiwgInRhZyIsICJnZXRNaWRkbGV3YXJlU3RhY2siLCAiRWZmZWN0IiwgIk9wdGlvbiIsICJtYWtlIiwgIlN1YnNjcmlwdGlvblJlZiIsICJleGl0IiwgImN1cnJlbnRUeG5JZCIsICJGaWJlclJlZiIsICJydW50aW1lTGFiZWwiLCAicHJvZ3JhbSIsICJjdXJyZW50IiwgIkNhdXNlIiwgInRhZyIsICJTdHJlYW0iLCAibGlzdCIsICJydW5QaGFzZSIsICJGaWJlciIsICJFZmZlY3QiLCAiU2NoZW1hIiwgInRhZyIsICJDb250ZXh0IiwgImJ1aWxkIiwgIm1ha2UiLCAiTGF5ZXIiLCAibGF5ZXIiLCAiYnVpbGQiLCAiaW5zdGFsbCIsICJzZXQiLCAicmVjb3JkIiwgInN0YWJsZVN0cmluZ2lmeSIsICJjdXJyZW50IiwgImZyb20iLCAibm9kZSIsICJyZWNvcmQiLCAibGlzdCIsICJmcm9tIiwgIm5vZGUiLCAiRWZmZWN0IiwgImxpc3QiLCAiRWZmZWN0IiwgImJ1aWxkIiwgImluc3RhbGwiLCAibWFrZSIsICJidWlsZCIsICJpbnN0YWxsIiwgIkVmZmVjdCIsICJDb250ZXh0IiwgIkNvbnRleHQiLCAibWFrZSIsICJtYWtlIiwgIm1ha2UiLCAibWFrZSIsICJtYWtlIiwgIm1ha2UiLCAiTWF0Y2hCdWlsZGVyX2V4cG9ydHMiLCAibWFrZU1hdGNoIiwgIm1ha2VNYXRjaFRhZyIsICJtYWtlTWF0Y2giLCAibWFrZU1hdGNoVGFnIiwgIlJlZiIsICJjbGVhbnVwIiwgImluc3RhbGwiLCAic2NvcGVkRXhlY3V0ZSIsICJzY29wZWRWYWxpZGF0ZSIsICJFZmZlY3QiLCAiRmliZXJSZWYiLCAiT3B0aW9uIiwgIlJlZiIsICJFZmZlY3QiLCAiaW50ZXJuYWwiLCAiRmliZXJSZWYiLCAiT3B0aW9uIiwgInVuc2V0QXRQYXRoTXV0YXRpbmciLCAiaW5zdGFsbCIsICJSZWYiLCAic2NvcGVkVmFsaWRhdGUiLCAic2NvcGVkRXhlY3V0ZSIsICJjbGVhbnVwIiwgImluc3RhbGwiLCAibWFrZSIsICJFZmZlY3QiLCAiTGF5ZXIiLCAiRWZmZWN0IiwgIkxheWVyIiwgIkNvbnRleHQiLCAidGFnIiwgIkxheWVyIiwgIkVmZmVjdCIsICJsYXllciIsICJMYXllciIsICJjbGVhckRldnRvb2xzRXZlbnRzIiwgImdldERldnRvb2xzU25hcHNob3QiLCAiZ2V0SW5zdGFuY2VMYWJlbCIsICJpbnRlcm5hbCIsICJpc0RldnRvb2xzRW5hYmxlZCIsICJsYXllciIsICJub29wTGF5ZXIiLCAicmVjb3JkIiwgInNldEluc3RhbmNlTGFiZWwiLCAic3Vic2NyaWJlRGV2dG9vbHNTbmFwc2hvdCIsICJFZmZlY3QiLCAiTGF5ZXIiLCAiTG9nZ2VyIiwgIkVmZmVjdCIsICJydW50aW1lTGFiZWwiLCAiaW50ZXJuYWwiLCAiZ2V0RGV2dG9vbHNTbmFwc2hvdCIsICJzdWJzY3JpYmVEZXZ0b29sc1NuYXBzaG90IiwgImNsZWFyRGV2dG9vbHNFdmVudHMiLCAic2V0SW5zdGFuY2VMYWJlbCIsICJnZXRJbnN0YW5jZUxhYmVsIiwgImlzRGV2dG9vbHNFbmFibGVkIiwgIkVmZmVjdCIsICJydW50aW1lTGFiZWwiLCAicmVjb3JkIiwgIm5vb3BMYXllciIsICJyZXNvbHZlTW9kZSIsICJsYXllciIsICJMYXllciIsICJMb2dnZXIiLCAiY3VycmVudCIsICJpc0xheWVyIiwgIkVmZmVjdCIsICJFZmZlY3QiLCAicmVjb3JkIiwgIm1ha2UiLCAiTGF5ZXIiLCAiRWZmZWN0IiwgInJlc29sdmUiLCAiQ29udGV4dCIsICJFZmZlY3QiLCAidGFnIiwgInJlc29sdmUiLCAiRWZmZWN0IiwgIkNvbnRleHQiLCAiZ2V0Tm9kZUVudiIsICJpc0RldkVudiIsICJnZXROb2RlRW52IiwgImlzRGV2RW52IiwgIlBsYXRmb3JtX2V4cG9ydHMiLCAiRWZmZWN0IiwgIkxheWVyIiwgIkVmZmVjdCIsICJMYXllciJdCn0K
