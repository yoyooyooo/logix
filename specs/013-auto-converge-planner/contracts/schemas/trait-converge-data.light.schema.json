{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://intent-flow.local/specs/013-auto-converge-planner/schemas/trait-converge-data.light.schema.json",
  "title": "ConvergeDecisionSummary (light)",
  "allOf": [
    { "$ref": "./trait-converge-data.schema.json" },
    {
      "type": "object",
      "required": ["cache", "generation", "staticIr"],
      "properties": {
        "dirty": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "dirtyAll": { "type": "boolean" },
            "reason": {
              "type": "string",
              "enum": ["unknownWrite", "customMutation", "nonTrackablePatch", "fallbackPolicy"],
              "description": "When dirtyAll=true, indicates why the dirty-set was downgraded (aligned with StateTransaction.dirtySet.reason)."
            }
          }
        },
        "diagnosticsSampling": false,
        "top3": false
      }
    }
  ],
  "description": "Light diagnostics payload: `dirty` may only contain `dirtyAll` (+ optional `reason`) and must not include roots/rootIds/rootCount. Heavy fields like top hotspots are disallowed."
}
